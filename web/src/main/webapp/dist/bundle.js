!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=20)}([function(t,e,n){var i,o,r;
/*!
 * jQuery JavaScript Library v1.11.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:19Z
 */
/*!
 * jQuery JavaScript Library v1.11.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:19Z
 */
o="undefined"!=typeof window?window:this,r=function(n,o){var r=[],a=r.slice,s=r.concat,l=r.push,u=r.indexOf,c={},d=c.toString,h=c.hasOwnProperty,f={},p=function(t,e){return new p.fn.init(t,e)},g=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/^-ms-/,v=/-([\da-z])/gi,_=function(t,e){return e.toUpperCase()};function y(t){var e="length"in t&&t.length,n=p.type(t);return"function"!==n&&!p.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t))}p.fn=p.prototype={jquery:"1.11.3",constructor:p,selector:"",length:0,toArray:function(){return a.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:a.call(this)},pushStack:function(t){var e=p.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return p.each(this,t,e)},map:function(t){return this.pushStack(p.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:l,sort:r.sort,splice:r.splice},p.extend=p.fn.extend=function(){var t,e,n,i,o,r,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||p.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(o=arguments[s]))for(i in o)t=a[i],a!==(n=o[i])&&(u&&n&&(p.isPlainObject(n)||(e=p.isArray(n)))?(e?(e=!1,r=t&&p.isArray(t)?t:[]):r=t&&p.isPlainObject(t)?t:{},a[i]=p.extend(u,r,n)):void 0!==n&&(a[i]=n));return a},p.extend({expando:"jQuery"+("1.11.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===p.type(t)},isArray:Array.isArray||function(t){return"array"===p.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!p.isArray(t)&&t-parseFloat(t)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==p.type(t)||t.nodeType||p.isWindow(t))return!1;try{if(t.constructor&&!h.call(t,"constructor")&&!h.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(f.ownLast)for(e in t)return h.call(t,e);for(e in t);return void 0===e||h.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[d.call(t)]||"object":typeof t},globalEval:function(t){t&&p.trim(t)&&(n.execScript||function(t){n.eval.call(n,t)})(t)},camelCase:function(t){return t.replace(m,"ms-").replace(v,_)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var i=0,o=t.length,r=y(t);if(n){if(r)for(;i<o&&!1!==e.apply(t[i],n);i++);else for(i in t)if(!1===e.apply(t[i],n))break}else if(r)for(;i<o&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(g,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(y(Object(t))?p.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){var i;if(e){if(u)return u.call(e,t,n);for(i=e.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;)t[o++]=e[i++];if(n!=n)for(;void 0!==e[i];)t[o++]=e[i++];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,r=t.length,a=!n;o<r;o++)!e(t[o],o)!==a&&i.push(t[o]);return i},map:function(t,e,n){var i,o=0,r=t.length,a=[];if(y(t))for(;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return s.apply([],a)},guid:1,proxy:function(t,e){var n,i,o;if("string"==typeof e&&(o=t[e],e=t,t=o),p.isFunction(t))return n=a.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(a.call(arguments)))}).guid=t.guid=t.guid||p.guid++,i},now:function(){return+new Date},support:f}),p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){c["[object "+e+"]"]=e.toLowerCase()});var b=
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
function(t){var e,n,i,o,r,a,s,l,u,c,d,h,f,p,g,m,v,_,y,b="sizzle"+1*new Date,x=t.document,w=0,S=0,T=at(),C=at(),L=at(),A=function(t,e){return t===e&&(d=!0),0},D=1<<31,k={}.hasOwnProperty,P=[],E=P.pop,M=P.push,I=P.push,O=P.slice,R=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",$="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=$.replace("w","w#"),B="\\["+F+"*("+$+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+F+"*\\]",U=":("+$+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",z=new RegExp(F+"+","g"),G=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),H=new RegExp("^"+F+"*,"+F+"*"),V=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),q=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),W=new RegExp(U),X=new RegExp("^"+j+"$"),Z={ID:new RegExp("^#("+$+")"),CLASS:new RegExp("^\\.("+$+")"),TAG:new RegExp("^("+$.replace("w","w*")+")"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),it=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ot=function(){h()};try{I.apply(P=O.call(x.childNodes),x.childNodes),P[x.childNodes.length].nodeType}catch(t){I={apply:P.length?function(t,e){M.apply(t,O.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function rt(t,e,i,o){var r,s,u,c,d,p,v,_,w,S;if((e?e.ownerDocument||e:x)!==f&&h(e),e=e||f,i=i||[],c=e.nodeType,"string"!=typeof t||!t||1!==c&&9!==c&&11!==c)return i;if(!o&&g){if(11!==c&&(r=Q.exec(t)))if(u=r[1]){if(9===c){if(!(s=e.getElementById(u))||!s.parentNode)return i;if(s.id===u)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(u))&&y(e,s)&&s.id===u)return i.push(s),i}else{if(r[2])return I.apply(i,e.getElementsByTagName(t)),i;if((u=r[3])&&n.getElementsByClassName)return I.apply(i,e.getElementsByClassName(u)),i}if(n.qsa&&(!m||!m.test(t))){if(_=v=b,w=e,S=1!==c&&t,1===c&&"object"!==e.nodeName.toLowerCase()){for(p=a(t),(v=e.getAttribute("id"))?_=v.replace(et,"\\$&"):e.setAttribute("id",_),_="[id='"+_+"'] ",d=p.length;d--;)p[d]=_+mt(p[d]);w=tt.test(t)&&pt(e.parentNode)||e,S=p.join(",")}if(S)try{return I.apply(i,w.querySelectorAll(S)),i}catch(t){}finally{v||e.removeAttribute("id")}}}return l(t.replace(G,"$1"),e,i,o)}function at(){var t=[];return function e(n,o){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=o}}function st(t){return t[b]=!0,t}function lt(t){var e=f.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var n=t.split("|"),o=t.length;o--;)i.attrHandle[n[o]]=e}function ct(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||D)-(~t.sourceIndex||D);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function dt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ht(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ft(t){return st(function(e){return e=+e,st(function(n,i){for(var o,r=t([],n.length,e),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function pt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=rt.support={},r=rt.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},h=rt.setDocument=function(t){var e,o,a=t?t.ownerDocument||t:x;return a!==f&&9===a.nodeType&&a.documentElement?(f=a,p=a.documentElement,(o=a.defaultView)&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",ot,!1):o.attachEvent&&o.attachEvent("onunload",ot)),g=!r(a),n.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=lt(function(t){return t.appendChild(a.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(a.getElementsByClassName),n.getById=lt(function(t){return p.appendChild(t).id=b,!a.getElementsByName||!a.getElementsByName(b).length}),n.getById?(i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(t){var e=t.replace(nt,it);return function(t){return t.getAttribute("id")===e}}):(delete i.find.ID,i.filter.ID=function(t){var e=t.replace(nt,it);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=J.test(a.querySelectorAll))&&(lt(function(t){p.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+N+")"),t.querySelectorAll("[id~="+b+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]")}),lt(function(t){var e=a.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=J.test(_=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&lt(function(t){n.disconnectedMatch=_.call(t,"div"),_.call(t,"[s!='']:x"),v.push("!=",U)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=J.test(p.compareDocumentPosition),y=e||J.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return d=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t===a||t.ownerDocument===x&&y(x,t)?-1:e===a||e.ownerDocument===x&&y(x,e)?1:c?R(c,t)-R(c,e):0:4&i?-1:1)}:function(t,e){if(t===e)return d=!0,0;var n,i=0,o=t.parentNode,r=e.parentNode,s=[t],l=[e];if(!o||!r)return t===a?-1:e===a?1:o?-1:r?1:c?R(c,t)-R(c,e):0;if(o===r)return ct(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?ct(s[i],l[i]):s[i]===x?-1:l[i]===x?1:0},a):f},rt.matches=function(t,e){return rt(t,null,null,e)},rt.matchesSelector=function(t,e){if((t.ownerDocument||t)!==f&&h(t),e=e.replace(q,"='$1']"),n.matchesSelector&&g&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var i=_.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return rt(e,f,null,[t]).length>0},rt.contains=function(t,e){return(t.ownerDocument||t)!==f&&h(t),y(t,e)},rt.attr=function(t,e){(t.ownerDocument||t)!==f&&h(t);var o=i.attrHandle[e.toLowerCase()],r=o&&k.call(i.attrHandle,e.toLowerCase())?o(t,e,!g):void 0;return void 0!==r?r:n.attributes||!g?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},rt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},rt.uniqueSort=function(t){var e,i=[],o=0,r=0;if(d=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(A),d){for(;e=t[r++];)e===t[r]&&(o=i.push(r));for(;o--;)t.splice(i[o],1)}return c=null,t},o=rt.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=o(e);return n},(i=rt.selectors={cacheLength:50,createPseudo:st,match:Z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(nt,it),t[3]=(t[3]||t[4]||t[5]||"").replace(nt,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||rt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&rt.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Z.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&W.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(nt,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=T[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&T(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var o=rt.attr(i,t);return null==o?"!="===e:!e||(o+="","="===e?o===n:"!="===e?o!==n:"^="===e?n&&0===o.indexOf(n):"*="===e?n&&o.indexOf(n)>-1:"$="===e?n&&o.slice(-n.length)===n:"~="===e?(" "+o.replace(z," ")+" ").indexOf(n)>-1:"|="===e&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var u,c,d,h,f,p,g=r!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),_=!l&&!s;if(m){if(r){for(;g;){for(d=e;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&_){for(f=(u=(c=m[b]||(m[b]={}))[t]||[])[0]===w&&u[1],h=u[0]===w&&u[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(h=f=0)||p.pop();)if(1===d.nodeType&&++h&&d===e){c[t]=[w,f,h];break}}else if(_&&(u=(e[b]||(e[b]={}))[t])&&u[0]===w)h=u[1];else for(;(d=++f&&d&&d[g]||(h=f=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(_&&((d[b]||(d[b]={}))[t]=[w,h]),d!==e)););return(h-=o)===i||h%i==0&&h/i>=0}}},PSEUDO:function(t,e){var n,o=i.pseudos[t]||i.setFilters[t.toLowerCase()]||rt.error("unsupported pseudo: "+t);return o[b]?o(e):o.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,n){for(var i,r=o(t,e),a=r.length;a--;)t[i=R(t,r[a])]=!(n[i]=r[a])}):function(t){return o(t,0,n)}):o}},pseudos:{not:st(function(t){var e=[],n=[],i=s(t.replace(G,"$1"));return i[b]?st(function(t,e,n,o){for(var r,a=i(t,null,o,[]),s=t.length;s--;)(r=a[s])&&(t[s]=!(e[s]=r))}):function(t,o,r){return e[0]=t,i(e,null,r,n),e[0]=null,!n.pop()}}),has:st(function(t){return function(e){return rt(t,e).length>0}}),contains:st(function(t){return t=t.replace(nt,it),function(e){return(e.textContent||e.innerText||o(e)).indexOf(t)>-1}}),lang:st(function(t){return X.test(t||"")||rt.error("unsupported lang: "+t),t=t.replace(nt,it).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return Y.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ft(function(){return[0]}),last:ft(function(t,e){return[e-1]}),eq:ft(function(t,e,n){return[n<0?n+e:n]}),even:ft(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:ft(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:ft(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:ft(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=dt(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=ht(e);function gt(){}function mt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function vt(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=S++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,a){var s,l,u=[w,r];if(a){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if((s=(l=e[b]||(e[b]={}))[i])&&s[0]===w&&s[1]===r)return u[2]=s[2];if(l[i]=u,u[2]=t(e,n,a))return!0}}}function _t(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function yt(t,e,n,i,o){for(var r,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(r=t[s])&&(n&&!n(r,i,o)||(a.push(r),u&&e.push(s)));return a}function bt(t,e,n,i,o,r){return i&&!i[b]&&(i=bt(i)),o&&!o[b]&&(o=bt(o,r)),st(function(r,a,s,l){var u,c,d,h=[],f=[],p=a.length,g=r||function(t,e,n){for(var i=0,o=e.length;i<o;i++)rt(t,e[i],n);return n}(e||"*",s.nodeType?[s]:s,[]),m=!t||!r&&e?g:yt(g,h,t,s,l),v=n?o||(r?t:p||i)?[]:a:m;if(n&&n(m,v,s,l),i)for(u=yt(v,f),i(u,[],s,l),c=u.length;c--;)(d=u[c])&&(v[f[c]]=!(m[f[c]]=d));if(r){if(o||t){if(o){for(u=[],c=v.length;c--;)(d=v[c])&&u.push(m[c]=d);o(null,v=[],u,l)}for(c=v.length;c--;)(d=v[c])&&(u=o?R(r,d):h[c])>-1&&(r[u]=!(a[u]=d))}}else v=yt(v===a?v.splice(p,v.length):v),o?o(null,a,v,l):I.apply(a,v)})}function xt(t){for(var e,n,o,r=t.length,a=i.relative[t[0].type],s=a||i.relative[" "],l=a?1:0,c=vt(function(t){return t===e},s,!0),d=vt(function(t){return R(e,t)>-1},s,!0),h=[function(t,n,i){var o=!a&&(i||n!==u)||((e=n).nodeType?c(t,n,i):d(t,n,i));return e=null,o}];l<r;l++)if(n=i.relative[t[l].type])h=[vt(_t(h),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[b]){for(o=++l;o<r&&!i.relative[t[o].type];o++);return bt(l>1&&_t(h),l>1&&mt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(G,"$1"),n,l<o&&xt(t.slice(l,o)),o<r&&xt(t=t.slice(o)),o<r&&mt(t))}h.push(n)}return _t(h)}return gt.prototype=i.filters=i.pseudos,i.setFilters=new gt,a=rt.tokenize=function(t,e){var n,o,r,a,s,l,u,c=C[t+" "];if(c)return e?0:c.slice(0);for(s=t,l=[],u=i.preFilter;s;){for(a in n&&!(o=H.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),n=!1,(o=V.exec(s))&&(n=o.shift(),r.push({value:n,type:o[0].replace(G," ")}),s=s.slice(n.length)),i.filter)!(o=Z[a].exec(s))||u[a]&&!(o=u[a](o))||(n=o.shift(),r.push({value:n,type:a,matches:o}),s=s.slice(n.length));if(!n)break}return e?s.length:s?rt.error(t):C(t,l).slice(0)},s=rt.compile=function(t,e){var n,o=[],r=[],s=L[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=xt(e[n]))[b]?o.push(s):r.push(s);(s=L(t,function(t,e){var n=e.length>0,o=t.length>0,r=function(r,a,s,l,c){var d,h,p,g=0,m="0",v=r&&[],_=[],y=u,b=r||o&&i.find.TAG("*",c),x=w+=null==y?1:Math.random()||.1,S=b.length;for(c&&(u=a!==f&&a);m!==S&&null!=(d=b[m]);m++){if(o&&d){for(h=0;p=t[h++];)if(p(d,a,s)){l.push(d);break}c&&(w=x)}n&&((d=!p&&d)&&g--,r&&v.push(d))}if(g+=m,n&&m!==g){for(h=0;p=e[h++];)p(v,_,a,s);if(r){if(g>0)for(;m--;)v[m]||_[m]||(_[m]=E.call(l));_=yt(_)}I.apply(l,_),c&&!r&&_.length>0&&g+e.length>1&&rt.uniqueSort(l)}return c&&(w=x,u=y),v};return n?st(r):r}(r,o))).selector=t}return s},l=rt.select=function(t,e,o,r){var l,u,c,d,h,f="function"==typeof t&&t,p=!r&&a(t=f.selector||t);if(o=o||[],1===p.length){if((u=p[0]=p[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&n.getById&&9===e.nodeType&&g&&i.relative[u[1].type]){if(!(e=(i.find.ID(c.matches[0].replace(nt,it),e)||[])[0]))return o;f&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(l=Z.needsContext.test(t)?0:u.length;l--&&(c=u[l],!i.relative[d=c.type]);)if((h=i.find[d])&&(r=h(c.matches[0].replace(nt,it),tt.test(u[0].type)&&pt(e.parentNode)||e))){if(u.splice(l,1),!(t=r.length&&mt(u)))return I.apply(o,r),o;break}}return(f||s(t,p))(r,e,!g,o,tt.test(t)&&pt(e.parentNode)||e),o},n.sortStable=b.split("").sort(A).join("")===b,n.detectDuplicates=!!d,h(),n.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(f.createElement("div"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ut("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ut("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ut(N,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),rt}(n);p.find=b,p.expr=b.selectors,p.expr[":"]=p.expr.pseudos,p.unique=b.uniqueSort,p.text=b.getText,p.isXMLDoc=b.isXML,p.contains=b.contains;var x=p.expr.match.needsContext,w=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^.[^:#\[\.,]*$/;function T(t,e,n){if(p.isFunction(e))return p.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return p.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(S.test(e))return p.filter(e,t,n);e=p.filter(e,t)}return p.grep(t,function(t){return p.inArray(t,e)>=0!==n})}p.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?p.find.matchesSelector(i,t)?[i]:[]:p.find.matches(t,p.grep(e,function(t){return 1===t.nodeType}))},p.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(p(t).filter(function(){for(e=0;e<o;e++)if(p.contains(i[e],this))return!0}));for(e=0;e<o;e++)p.find(t,i[e],n);return(n=this.pushStack(o>1?p.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(T(this,t||[],!1))},not:function(t){return this.pushStack(T(this,t||[],!0))},is:function(t){return!!T(this,"string"==typeof t&&x.test(t)?p(t):t||[],!1).length}});var C,L=n.document,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(p.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(!(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:A.exec(t))||!n[1]&&e)return!e||e.jquery?(e||C).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof p?e[0]:e,p.merge(this,p.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:L,!0)),w.test(n[1])&&p.isPlainObject(e))for(n in e)p.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if((i=L.getElementById(n[2]))&&i.parentNode){if(i.id!==n[2])return C.find(t);this.length=1,this[0]=i}return this.context=L,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):p.isFunction(t)?void 0!==C.ready?C.ready(t):t(p):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),p.makeArray(t,this))}).prototype=p.fn,C=p(L);var D=/^(?:parents|prev(?:Until|All))/,k={children:!0,contents:!0,next:!0,prev:!0};function P(t,e){do{t=t[e]}while(t&&1!==t.nodeType);return t}p.extend({dir:function(t,e,n){for(var i=[],o=t[e];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!p(o).is(n));)1===o.nodeType&&i.push(o),o=o[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),p.fn.extend({has:function(t){var e,n=p(t,this),i=n.length;return this.filter(function(){for(e=0;e<i;e++)if(p.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,r=[],a=x.test(t)||"string"!=typeof t?p(t,e||this.context):0;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&p.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?p.unique(r):r)},index:function(t){return t?"string"==typeof t?p.inArray(this[0],p(t)):p.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(p.unique(p.merge(this.get(),p(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),p.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return p.dir(t,"parentNode")},parentsUntil:function(t,e,n){return p.dir(t,"parentNode",n)},next:function(t){return P(t,"nextSibling")},prev:function(t){return P(t,"previousSibling")},nextAll:function(t){return p.dir(t,"nextSibling")},prevAll:function(t){return p.dir(t,"previousSibling")},nextUntil:function(t,e,n){return p.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return p.dir(t,"previousSibling",n)},siblings:function(t){return p.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return p.sibling(t.firstChild)},contents:function(t){return p.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:p.merge([],t.childNodes)}},function(t,e){p.fn[t]=function(n,i){var o=p.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=p.filter(i,o)),this.length>1&&(k[t]||(o=p.unique(o)),D.test(t)&&(o=o.reverse())),this.pushStack(o)}});var E,M=/\S+/g,I={};function O(){L.addEventListener?(L.removeEventListener("DOMContentLoaded",R,!1),n.removeEventListener("load",R,!1)):(L.detachEvent("onreadystatechange",R),n.detachEvent("onload",R))}function R(){(L.addEventListener||"load"===event.type||"complete"===L.readyState)&&(O(),p.ready())}p.Callbacks=function(t){var e,n,i,o,r,a,s=[],l=!(t="string"==typeof t?I[t]||function(t){var e=I[t]={};return p.each(t.match(M)||[],function(t,n){e[n]=!0}),e}(t):p.extend({},t)).once&&[],u=function(d){for(n=t.memory&&d,i=!0,r=a||0,a=0,o=s.length,e=!0;s&&r<o;r++)if(!1===s[r].apply(d[0],d[1])&&t.stopOnFalse){n=!1;break}e=!1,s&&(l?l.length&&u(l.shift()):n?s=[]:c.disable())},c={add:function(){if(s){var i=s.length;!function e(n){p.each(n,function(n,i){var o=p.type(i);"function"===o?t.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==o&&e(i)})}(arguments),e?o=s.length:n&&(a=i,u(n))}return this},remove:function(){return s&&p.each(arguments,function(t,n){for(var i;(i=p.inArray(n,s,i))>-1;)s.splice(i,1),e&&(i<=o&&o--,i<=r&&r--)}),this},has:function(t){return t?p.inArray(t,s)>-1:!(!s||!s.length)},empty:function(){return s=[],o=0,this},disable:function(){return s=l=n=void 0,this},disabled:function(){return!s},lock:function(){return l=void 0,n||c.disable(),this},locked:function(){return!l},fireWith:function(t,n){return!s||i&&!l||(n=[t,(n=n||[]).slice?n.slice():n],e?l.push(n):u(n)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},p.extend({Deferred:function(t){var e=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return p.Deferred(function(n){p.each(e,function(e,r){var a=p.isFunction(t[e])&&t[e];o[r[1]](function(){var t=a&&a.apply(this,arguments);t&&p.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?p.extend(t,i):i}},o={};return i.pipe=i.then,p.each(e,function(t,r){var a=r[2],s=r[3];i[r[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,r=a.call(arguments),s=r.length,l=1!==s||t&&p.isFunction(t.promise)?s:0,u=1===l?t:p.Deferred(),c=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?a.call(arguments):o,i===e?u.notifyWith(n,i):--l||u.resolveWith(n,i)}};if(s>1)for(e=new Array(s),n=new Array(s),i=new Array(s);o<s;o++)r[o]&&p.isFunction(r[o].promise)?r[o].promise().done(c(o,i,r)).fail(u.reject).progress(c(o,n,e)):--l;return l||u.resolveWith(i,r),u.promise()}}),p.fn.ready=function(t){return p.ready.promise().done(t),this},p.extend({isReady:!1,readyWait:1,holdReady:function(t){t?p.readyWait++:p.ready(!0)},ready:function(t){if(!0===t?!--p.readyWait:!p.isReady){if(!L.body)return setTimeout(p.ready);p.isReady=!0,!0!==t&&--p.readyWait>0||(E.resolveWith(L,[p]),p.fn.triggerHandler&&(p(L).triggerHandler("ready"),p(L).off("ready")))}}}),p.ready.promise=function(t){if(!E)if(E=p.Deferred(),"complete"===L.readyState)setTimeout(p.ready);else if(L.addEventListener)L.addEventListener("DOMContentLoaded",R,!1),n.addEventListener("load",R,!1);else{L.attachEvent("onreadystatechange",R),n.attachEvent("onload",R);var e=!1;try{e=null==n.frameElement&&L.documentElement}catch(t){}e&&e.doScroll&&function t(){if(!p.isReady){try{e.doScroll("left")}catch(e){return setTimeout(t,50)}O(),p.ready()}}()}return E.promise(t)};var N,F="undefined";for(N in p(f))break;f.ownLast="0"!==N,f.inlineBlockNeedsLayout=!1,p(function(){var t,e,n,i;(n=L.getElementsByTagName("body")[0])&&n.style&&(e=L.createElement("div"),(i=L.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==F&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",f.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=L.createElement("div");if(null==f.deleteExpando){f.deleteExpando=!0;try{delete t.test}catch(t){f.deleteExpando=!1}}t=null}(),p.acceptData=function(t){var e=p.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return(1===n||9===n)&&(!e||!0!==e&&t.getAttribute("classid")===e)};var $=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,j=/([A-Z])/g;function B(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(j,"-$1").toLowerCase();if("string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:$.test(n)?p.parseJSON(n):n)}catch(t){}p.data(t,e,n)}else n=void 0}return n}function U(t){var e;for(e in t)if(("data"!==e||!p.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function z(t,e,n,i){if(p.acceptData(t)){var o,a,s=p.expando,l=t.nodeType,u=l?p.cache:t,c=l?t[s]:t[s]&&s;if(c&&u[c]&&(i||u[c].data)||void 0!==n||"string"!=typeof e)return c||(c=l?t[s]=r.pop()||p.guid++:s),u[c]||(u[c]=l?{}:{toJSON:p.noop}),"object"!=typeof e&&"function"!=typeof e||(i?u[c]=p.extend(u[c],e):u[c].data=p.extend(u[c].data,e)),a=u[c],i||(a.data||(a.data={}),a=a.data),void 0!==n&&(a[p.camelCase(e)]=n),"string"==typeof e?null==(o=a[e])&&(o=a[p.camelCase(e)]):o=a,o}}function G(t,e,n){if(p.acceptData(t)){var i,o,r=t.nodeType,a=r?p.cache:t,s=r?t[p.expando]:p.expando;if(a[s]){if(e&&(i=n?a[s]:a[s].data)){o=(e=p.isArray(e)?e.concat(p.map(e,p.camelCase)):e in i?[e]:(e=p.camelCase(e))in i?[e]:e.split(" ")).length;for(;o--;)delete i[e[o]];if(n?!U(i):!p.isEmptyObject(i))return}(n||(delete a[s].data,U(a[s])))&&(r?p.cleanData([t],!0):f.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}p.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?p.cache[t[p.expando]]:t[p.expando])&&!U(t)},data:function(t,e,n){return z(t,e,n)},removeData:function(t,e){return G(t,e)},_data:function(t,e,n){return z(t,e,n,!0)},_removeData:function(t,e){return G(t,e,!0)}}),p.fn.extend({data:function(t,e){var n,i,o,r=this[0],a=r&&r.attributes;if(void 0===t){if(this.length&&(o=p.data(r),1===r.nodeType&&!p._data(r,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&B(r,i=p.camelCase(i.slice(5)),o[i]);p._data(r,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){p.data(this,t)}):arguments.length>1?this.each(function(){p.data(this,t,e)}):r?B(r,t,p.data(r,t)):void 0},removeData:function(t){return this.each(function(){p.removeData(this,t)})}}),p.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=p._data(t,e),n&&(!i||p.isArray(n)?i=p._data(t,e,p.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=p.queue(t,e),i=n.length,o=n.shift(),r=p._queueHooks(t,e);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,function(){p.dequeue(t,e)},r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return p._data(t,n)||p._data(t,n,{empty:p.Callbacks("once memory").add(function(){p._removeData(t,e+"queue"),p._removeData(t,n)})})}}),p.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?p.queue(this[0],t):void 0===e?this:this.each(function(){var n=p.queue(this,t,e);p._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&p.dequeue(this,t)})},dequeue:function(t){return this.each(function(){p.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=p.Deferred(),r=this,a=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=p._data(r[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(e)}});var H=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=["Top","Right","Bottom","Left"],q=function(t,e){return t=e||t,"none"===p.css(t,"display")||!p.contains(t.ownerDocument,t)},W=p.access=function(t,e,n,i,o,r,a){var s=0,l=t.length,u=null==n;if("object"===p.type(n))for(s in o=!0,n)p.access(t,e,s,n[s],!0,r,a);else if(void 0!==i&&(o=!0,p.isFunction(i)||(a=!0),u&&(a?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(p(t),n)})),e))for(;s<l;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return o?t:u?e.call(t):l?e(t[0],n):r},X=/^(?:checkbox|radio)$/i;!function(){var t=L.createElement("input"),e=L.createElement("div"),n=L.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",f.leadingWhitespace=3===e.firstChild.nodeType,f.tbody=!e.getElementsByTagName("tbody").length,f.htmlSerialize=!!e.getElementsByTagName("link").length,f.html5Clone="<:nav></:nav>"!==L.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),f.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",f.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,f.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){f.noCloneEvent=!1}),e.cloneNode(!0).click()),null==f.deleteExpando){f.deleteExpando=!0;try{delete e.test}catch(t){f.deleteExpando=!1}}}(),function(){var t,e,i=L.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})e="on"+t,(f[t+"Bubbles"]=e in n)||(i.setAttribute(e,"t"),f[t+"Bubbles"]=!1===i.attributes[e].expando);i=null}();var Z=/^(?:input|select|textarea)$/i,Y=/^key/,K=/^(?:mouse|pointer|contextmenu)|click/,J=/^(?:focusinfocus|focusoutblur)$/,Q=/^([^.]*)(?:\.(.+)|)$/;function tt(){return!0}function et(){return!1}function nt(){try{return L.activeElement}catch(t){}}function it(t){var e=ot.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}p.event={global:{},add:function(t,e,n,i,o){var r,a,s,l,u,c,d,h,f,g,m,v=p._data(t);if(v){for(n.handler&&(n=(l=n).handler,o=l.selector),n.guid||(n.guid=p.guid++),(a=v.events)||(a=v.events={}),(c=v.handle)||((c=v.handle=function(t){return typeof p===F||t&&p.event.triggered===t.type?void 0:p.event.dispatch.apply(c.elem,arguments)}).elem=t),s=(e=(e||"").match(M)||[""]).length;s--;)f=m=(r=Q.exec(e[s])||[])[1],g=(r[2]||"").split(".").sort(),f&&(u=p.event.special[f]||{},f=(o?u.delegateType:u.bindType)||f,u=p.event.special[f]||{},d=p.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&p.expr.match.needsContext.test(o),namespace:g.join(".")},l),(h=a[f])||((h=a[f]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,i,g,c)||(t.addEventListener?t.addEventListener(f,c,!1):t.attachEvent&&t.attachEvent("on"+f,c))),u.add&&(u.add.call(t,d),d.handler.guid||(d.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,d):h.push(d),p.event.global[f]=!0);t=null}},remove:function(t,e,n,i,o){var r,a,s,l,u,c,d,h,f,g,m,v=p.hasData(t)&&p._data(t);if(v&&(c=v.events)){for(u=(e=(e||"").match(M)||[""]).length;u--;)if(f=m=(s=Q.exec(e[u])||[])[1],g=(s[2]||"").split(".").sort(),f){for(d=p.event.special[f]||{},h=c[f=(i?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=h.length;r--;)a=h[r],!o&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(h.splice(r,1),a.selector&&h.delegateCount--,d.remove&&d.remove.call(t,a));l&&!h.length&&(d.teardown&&!1!==d.teardown.call(t,g,v.handle)||p.removeEvent(t,f,v.handle),delete c[f])}else for(f in c)p.event.remove(t,f+e[u],n,i,!0);p.isEmptyObject(c)&&(delete v.handle,p._removeData(t,"events"))}},trigger:function(t,e,i,o){var r,a,s,l,u,c,d,f=[i||L],g=h.call(t,"type")?t.type:t,m=h.call(t,"namespace")?t.namespace.split("."):[];if(s=c=i=i||L,3!==i.nodeType&&8!==i.nodeType&&!J.test(g+p.event.triggered)&&(g.indexOf(".")>=0&&(g=(m=g.split(".")).shift(),m.sort()),a=g.indexOf(":")<0&&"on"+g,(t=t[p.expando]?t:new p.Event(g,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:p.makeArray(e,[t]),u=p.event.special[g]||{},o||!u.trigger||!1!==u.trigger.apply(i,e))){if(!o&&!u.noBubble&&!p.isWindow(i)){for(l=u.delegateType||g,J.test(l+g)||(s=s.parentNode);s;s=s.parentNode)f.push(s),c=s;c===(i.ownerDocument||L)&&f.push(c.defaultView||c.parentWindow||n)}for(d=0;(s=f[d++])&&!t.isPropagationStopped();)t.type=d>1?l:u.bindType||g,(r=(p._data(s,"events")||{})[t.type]&&p._data(s,"handle"))&&r.apply(s,e),(r=a&&s[a])&&r.apply&&p.acceptData(s)&&(t.result=r.apply(s,e),!1===t.result&&t.preventDefault());if(t.type=g,!o&&!t.isDefaultPrevented()&&(!u._default||!1===u._default.apply(f.pop(),e))&&p.acceptData(i)&&a&&i[g]&&!p.isWindow(i)){(c=i[a])&&(i[a]=null),p.event.triggered=g;try{i[g]()}catch(t){}p.event.triggered=void 0,c&&(i[a]=c)}return t.result}},dispatch:function(t){t=p.event.fix(t);var e,n,i,o,r,s,l=a.call(arguments),u=(p._data(this,"events")||{})[t.type]||[],c=p.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(s=p.event.handlers.call(this,t,u),e=0;(o=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(i.namespace)||(t.handleObj=i,t.data=i.data,void 0!==(n=((p.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,l))&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,r,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(o=[],r=0;r<s;r++)void 0===o[n=(i=e[r]).selector+" "]&&(o[n]=i.needsContext?p(n,this).index(l)>=0:p.find(n,this,null,[l]).length),o[n]&&o.push(i);o.length&&a.push({elem:l,handlers:o})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},fix:function(t){if(t[p.expando])return t;var e,n,i,o=t.type,r=t,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=K.test(o)?this.mouseHooks:Y.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new p.Event(r),e=i.length;e--;)t[n=i[e]]=r[n];return t.target||(t.target=r.srcElement||L),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,r):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,r=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(o=(i=t.target.ownerDocument||L).documentElement,n=i.body,t.pageX=e.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==nt()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===nt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(p.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return p.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=p.extend(new p.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?p.event.trigger(o,null,e):p.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},p.removeEvent=L.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===F&&(t[i]=null),t.detachEvent(i,n))},p.Event=function(t,e){if(!(this instanceof p.Event))return new p.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?tt:et):this.type=t,e&&p.extend(this,e),this.timeStamp=t&&t.timeStamp||p.now(),this[p.expando]=!0},p.Event.prototype={isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=tt,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=tt,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=tt,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){p.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,o=t.handleObj;return i&&(i===this||p.contains(this,i))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),f.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=p.nodeName(e,"input")||p.nodeName(e,"button")?e.form:void 0;n&&!p._data(n,"submitBubbles")&&(p.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),p._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&p.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}}),f.changeBubbles||(p.event.special.change={setup:function(){if(Z.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(p.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,t,!0)})),!1;p.event.add(this,"beforeactivate._change",function(t){var e=t.target;Z.test(e.nodeName)&&!p._data(e,"changeBubbles")&&(p.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||p.event.simulate("change",this.parentNode,t,!0)}),p._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,"._change"),!Z.test(this.nodeName)}}),f.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){p.event.simulate(e,t.target,p.event.fix(t),!0)};p.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=p._data(i,e);o||i.addEventListener(t,n,!0),p._data(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=p._data(i,e)-1;o?p._data(i,e,o):(i.removeEventListener(t,n,!0),p._removeData(i,e))}}}),p.fn.extend({on:function(t,e,n,i,o){var r,a;if("object"==typeof t){for(r in"string"!=typeof e&&(n=n||e,e=void 0),t)this.on(r,e,n,t[r],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),!1===i)i=et;else if(!i)return this;return 1===o&&(a=i,(i=function(t){return p().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=p.guid++)),this.each(function(){p.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,p(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=et),this.each(function(){p.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){p.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return p.event.trigger(t,e,n,!0)}});var ot="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rt=/ jQuery\d+="(?:null|\d+)"/g,at=new RegExp("<(?:"+ot+")[\\s/>]","i"),st=/^\s+/,lt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ut=/<([\w:]+)/,ct=/<tbody/i,dt=/<|&#?\w+;/,ht=/<(?:script|style|link)/i,ft=/checked\s*(?:[^=]|=\s*.checked.)/i,pt=/^$|\/(?:java|ecma)script/i,gt=/^true\/(.*)/,mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,vt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:f.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},_t=it(L).appendChild(L.createElement("div"));function yt(t,e){var n,i,o=0,r=typeof t.getElementsByTagName!==F?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==F?t.querySelectorAll(e||"*"):void 0;if(!r)for(r=[],n=t.childNodes||t;null!=(i=n[o]);o++)!e||p.nodeName(i,e)?r.push(i):p.merge(r,yt(i,e));return void 0===e||e&&p.nodeName(t,e)?p.merge([t],r):r}function bt(t){X.test(t.type)&&(t.defaultChecked=t.checked)}function xt(t,e){return p.nodeName(t,"table")&&p.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function wt(t){return t.type=(null!==p.find.attr(t,"type"))+"/"+t.type,t}function St(t){var e=gt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function Tt(t,e){for(var n,i=0;null!=(n=t[i]);i++)p._data(n,"globalEval",!e||p._data(e[i],"globalEval"))}function Ct(t,e){if(1===e.nodeType&&p.hasData(t)){var n,i,o,r=p._data(t),a=p._data(e,r),s=r.events;if(s)for(n in delete a.handle,a.events={},s)for(i=0,o=s[n].length;i<o;i++)p.event.add(e,n,s[n][i]);a.data&&(a.data=p.extend({},a.data))}}function Lt(t,e){var n,i,o;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!f.noCloneEvent&&e[p.expando]){for(i in(o=p._data(e)).events)p.removeEvent(e,i,o.handle);e.removeAttribute(p.expando)}"script"===n&&e.text!==t.text?(wt(e).text=t.text,St(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),f.html5Clone&&t.innerHTML&&!p.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&X.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}vt.optgroup=vt.option,vt.tbody=vt.tfoot=vt.colgroup=vt.caption=vt.thead,vt.th=vt.td,p.extend({clone:function(t,e,n){var i,o,r,a,s,l=p.contains(t.ownerDocument,t);if(f.html5Clone||p.isXMLDoc(t)||!at.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(_t.innerHTML=t.outerHTML,_t.removeChild(r=_t.firstChild)),!(f.noCloneEvent&&f.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||p.isXMLDoc(t)))for(i=yt(r),s=yt(t),a=0;null!=(o=s[a]);++a)i[a]&&Lt(o,i[a]);if(e)if(n)for(s=s||yt(t),i=i||yt(r),a=0;null!=(o=s[a]);a++)Ct(o,i[a]);else Ct(t,r);return(i=yt(r,"script")).length>0&&Tt(i,!l&&yt(t,"script")),i=s=o=null,r},buildFragment:function(t,e,n,i){for(var o,r,a,s,l,u,c,d=t.length,h=it(e),g=[],m=0;m<d;m++)if((r=t[m])||0===r)if("object"===p.type(r))p.merge(g,r.nodeType?[r]:r);else if(dt.test(r)){for(s=s||h.appendChild(e.createElement("div")),l=(ut.exec(r)||["",""])[1].toLowerCase(),c=vt[l]||vt._default,s.innerHTML=c[1]+r.replace(lt,"<$1></$2>")+c[2],o=c[0];o--;)s=s.lastChild;if(!f.leadingWhitespace&&st.test(r)&&g.push(e.createTextNode(st.exec(r)[0])),!f.tbody)for(o=(r="table"!==l||ct.test(r)?"<table>"!==c[1]||ct.test(r)?0:s:s.firstChild)&&r.childNodes.length;o--;)p.nodeName(u=r.childNodes[o],"tbody")&&!u.childNodes.length&&r.removeChild(u);for(p.merge(g,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=h.lastChild}else g.push(e.createTextNode(r));for(s&&h.removeChild(s),f.appendChecked||p.grep(yt(g,"input"),bt),m=0;r=g[m++];)if((!i||-1===p.inArray(r,i))&&(a=p.contains(r.ownerDocument,r),s=yt(h.appendChild(r),"script"),a&&Tt(s),n))for(o=0;r=s[o++];)pt.test(r.type||"")&&n.push(r);return s=null,h},cleanData:function(t,e){for(var n,i,o,a,s=0,l=p.expando,u=p.cache,c=f.deleteExpando,d=p.event.special;null!=(n=t[s]);s++)if((e||p.acceptData(n))&&(a=(o=n[l])&&u[o])){if(a.events)for(i in a.events)d[i]?p.event.remove(n,i):p.removeEvent(n,i,a.handle);u[o]&&(delete u[o],c?delete n[l]:typeof n.removeAttribute!==F?n.removeAttribute(l):n[l]=null,r.push(o))}}}),p.fn.extend({text:function(t){return W(this,function(t){return void 0===t?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||L).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||xt(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=xt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?p.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||p.cleanData(yt(n)),n.parentNode&&(e&&p.contains(n.ownerDocument,n)&&Tt(yt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&p.cleanData(yt(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&p.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return p.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(rt,""):void 0;if("string"==typeof t&&!ht.test(t)&&(f.htmlSerialize||!at.test(t))&&(f.leadingWhitespace||!st.test(t))&&!vt[(ut.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(lt,"<$1></$2>");try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(p.cleanData(yt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,p.cleanData(yt(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=s.apply([],t);var n,i,o,r,a,l,u=0,c=this.length,d=this,h=c-1,g=t[0],m=p.isFunction(g);if(m||c>1&&"string"==typeof g&&!f.checkClone&&ft.test(g))return this.each(function(n){var i=d.eq(n);m&&(t[0]=g.call(this,n,i.html())),i.domManip(t,e)});if(c&&(n=(l=p.buildFragment(t,this[0].ownerDocument,!1,this)).firstChild,1===l.childNodes.length&&(l=n),n)){for(o=(r=p.map(yt(l,"script"),wt)).length;u<c;u++)i=l,u!==h&&(i=p.clone(i,!0,!0),o&&p.merge(r,yt(i,"script"))),e.call(this[u],i,u);if(o)for(a=r[r.length-1].ownerDocument,p.map(r,St),u=0;u<o;u++)i=r[u],pt.test(i.type||"")&&!p._data(i,"globalEval")&&p.contains(a,i)&&(i.src?p._evalUrl&&p._evalUrl(i.src):p.globalEval((i.text||i.textContent||i.innerHTML||"").replace(mt,"")));l=n=null}return this}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){p.fn[t]=function(t){for(var n,i=0,o=[],r=p(t),a=r.length-1;i<=a;i++)n=i===a?this:this.clone(!0),p(r[i])[e](n),l.apply(o,n.get());return this.pushStack(o)}});var At,Dt,kt={};function Pt(t,e){var i,o=p(e.createElement(t)).appendTo(e.body),r=n.getDefaultComputedStyle&&(i=n.getDefaultComputedStyle(o[0]))?i.display:p.css(o[0],"display");return o.detach(),r}function Et(t){var e=L,n=kt[t];return n||("none"!==(n=Pt(t,e))&&n||((e=((At=(At||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||At[0].contentDocument).document).write(),e.close(),n=Pt(t,e),At.detach()),kt[t]=n),n}f.shrinkWrapBlocks=function(){return null!=Dt?Dt:(Dt=!1,(e=L.getElementsByTagName("body")[0])&&e.style?(t=L.createElement("div"),(n=L.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(n).appendChild(t),typeof t.style.zoom!==F&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(L.createElement("div")).style.width="5px",Dt=3!==t.offsetWidth),e.removeChild(n),Dt):void 0);var t,e,n};var Mt,It,Ot=/^margin/,Rt=new RegExp("^("+H+")(?!px)[a-z%]+$","i"),Nt=/^(top|right|bottom|left)$/;function Ft(t,e){return{get:function(){var n=t();if(null!=n){if(!n)return(this.get=e).apply(this,arguments);delete this.get}}}}n.getComputedStyle?(Mt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):n.getComputedStyle(t,null)},It=function(t,e,n){var i,o,r,a,s=t.style;return a=(n=n||Mt(t))?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==a||p.contains(t.ownerDocument,t)||(a=p.style(t,e)),Rt.test(a)&&Ot.test(e)&&(i=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=o,s.maxWidth=r)),void 0===a?a:a+""}):L.documentElement.currentStyle&&(Mt=function(t){return t.currentStyle},It=function(t,e,n){var i,o,r,a,s=t.style;return null==(a=(n=n||Mt(t))?n[e]:void 0)&&s&&s[e]&&(a=s[e]),Rt.test(a)&&!Nt.test(e)&&(i=s.left,(r=(o=t.runtimeStyle)&&o.left)&&(o.left=t.currentStyle.left),s.left="fontSize"===e?"1em":a,a=s.pixelLeft+"px",s.left=i,r&&(o.left=r)),void 0===a?a:a+""||"auto"}),function(){var t,e,i,o,r,a,s;function l(){var t,e,i,l;(e=L.getElementsByTagName("body")[0])&&e.style&&(t=L.createElement("div"),(i=L.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=r=!1,s=!0,n.getComputedStyle&&(o="1%"!==(n.getComputedStyle(t,null)||{}).top,r="4px"===(n.getComputedStyle(t,null)||{width:"4px"}).width,(l=t.appendChild(L.createElement("div"))).style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",l.style.marginRight=l.style.width="0",t.style.width="1px",s=!parseFloat((n.getComputedStyle(l,null)||{}).marginRight),t.removeChild(l)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(l=t.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(a=0===l[0].offsetHeight)&&(l[0].style.display="",l[1].style.display="none",a=0===l[0].offsetHeight),e.removeChild(i))}(t=L.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(e=(i=t.getElementsByTagName("a")[0])&&i.style)&&(e.cssText="float:left;opacity:.5",f.opacity="0.5"===e.opacity,f.cssFloat=!!e.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===t.style.backgroundClip,f.boxSizing=""===e.boxSizing||""===e.MozBoxSizing||""===e.WebkitBoxSizing,p.extend(f,{reliableHiddenOffsets:function(){return null==a&&l(),a},boxSizingReliable:function(){return null==r&&l(),r},pixelPosition:function(){return null==o&&l(),o},reliableMarginRight:function(){return null==s&&l(),s}}))}(),p.swap=function(t,e,n,i){var o,r,a={};for(r in e)a[r]=t.style[r],t.style[r]=e[r];for(r in o=n.apply(t,i||[]),e)t.style[r]=a[r];return o};var $t=/alpha\([^)]*\)/i,jt=/opacity\s*=\s*([^)]*)/,Bt=/^(none|table(?!-c[ea]).+)/,Ut=new RegExp("^("+H+")(.*)$","i"),zt=new RegExp("^([+-])=("+H+")","i"),Gt={position:"absolute",visibility:"hidden",display:"block"},Ht={letterSpacing:"0",fontWeight:"400"},Vt=["Webkit","O","Moz","ms"];function qt(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=Vt.length;o--;)if((e=Vt[o]+n)in t)return e;return i}function Wt(t,e){for(var n,i,o,r=[],a=0,s=t.length;a<s;a++)(i=t[a]).style&&(r[a]=p._data(i,"olddisplay"),n=i.style.display,e?(r[a]||"none"!==n||(i.style.display=""),""===i.style.display&&q(i)&&(r[a]=p._data(i,"olddisplay",Et(i.nodeName)))):(o=q(i),(n&&"none"!==n||!o)&&p._data(i,"olddisplay",o?n:p.css(i,"display"))));for(a=0;a<s;a++)(i=t[a]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[a]||"":"none"));return t}function Xt(t,e,n){var i=Ut.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function Zt(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,a=0;r<4;r+=2)"margin"===n&&(a+=p.css(t,n+V[r],!0,o)),i?("content"===n&&(a-=p.css(t,"padding"+V[r],!0,o)),"margin"!==n&&(a-=p.css(t,"border"+V[r]+"Width",!0,o))):(a+=p.css(t,"padding"+V[r],!0,o),"padding"!==n&&(a+=p.css(t,"border"+V[r]+"Width",!0,o)));return a}function Yt(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=Mt(t),a=f.boxSizing&&"border-box"===p.css(t,"boxSizing",!1,r);if(o<=0||null==o){if(((o=It(t,e,r))<0||null==o)&&(o=t.style[e]),Rt.test(o))return o;i=a&&(f.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+Zt(t,e,n||(a?"border":"content"),i,r)+"px"}function Kt(t,e,n,i,o){return new Kt.prototype.init(t,e,n,i,o)}p.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=It(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:f.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,a,s=p.camelCase(e),l=t.style;if(e=p.cssProps[s]||(p.cssProps[s]=qt(l,s)),a=p.cssHooks[e]||p.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(t,!1,i))?o:l[e];if("string"===(r=typeof n)&&(o=zt.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(p.css(t,e)),r="number"),null!=n&&n==n&&("number"!==r||p.cssNumber[s]||(n+="px"),f.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(t,n,i)))))try{l[e]=n}catch(t){}}},css:function(t,e,n,i){var o,r,a,s=p.camelCase(e);return e=p.cssProps[s]||(p.cssProps[s]=qt(t.style,s)),(a=p.cssHooks[e]||p.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=It(t,e,i)),"normal"===r&&e in Ht&&(r=Ht[e]),""===n||n?(o=parseFloat(r),!0===n||p.isNumeric(o)?o||0:r):r}}),p.each(["height","width"],function(t,e){p.cssHooks[e]={get:function(t,n,i){if(n)return Bt.test(p.css(t,"display"))&&0===t.offsetWidth?p.swap(t,Gt,function(){return Yt(t,e,i)}):Yt(t,e,i)},set:function(t,n,i){var o=i&&Mt(t);return Xt(0,n,i?Zt(t,e,i,f.boxSizing&&"border-box"===p.css(t,"boxSizing",!1,o),o):0)}}}),f.opacity||(p.cssHooks.opacity={get:function(t,e){return jt.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,o=p.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===p.trim(r.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=$t.test(r)?r.replace($t,o):r+" "+o)}}),p.cssHooks.marginRight=Ft(f.reliableMarginRight,function(t,e){if(e)return p.swap(t,{display:"inline-block"},It,[t,"marginRight"])}),p.each({margin:"",padding:"",border:"Width"},function(t,e){p.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[t+V[i]+e]=r[i]||r[i-2]||r[0];return o}},Ot.test(t)||(p.cssHooks[t+e].set=Xt)}),p.fn.extend({css:function(t,e){return W(this,function(t,e,n){var i,o,r={},a=0;if(p.isArray(e)){for(i=Mt(t),o=e.length;a<o;a++)r[e[a]]=p.css(t,e[a],!1,i);return r}return void 0!==n?p.style(t,e,n):p.css(t,e)},t,e,arguments.length>1)},show:function(){return Wt(this,!0)},hide:function(){return Wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){q(this)?p(this).show():p(this).hide()})}}),p.Tween=Kt,Kt.prototype={constructor:Kt,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(p.cssNumber[n]?"":"px")},cur:function(){var t=Kt.propHooks[this.prop];return t&&t.get?t.get(this):Kt.propHooks._default.get(this)},run:function(t){var e,n=Kt.propHooks[this.prop];return this.options.duration?this.pos=e=p.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Kt.propHooks._default.set(this),this}},Kt.prototype.init.prototype=Kt.prototype,Kt.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=p.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){p.fx.step[t.prop]?p.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[p.cssProps[t.prop]]||p.cssHooks[t.prop])?p.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},Kt.propHooks.scrollTop=Kt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},p.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},p.fx=Kt.prototype.init,p.fx.step={};var Jt,Qt,te,ee,ne,ie,oe,re=/^(?:toggle|show|hide)$/,ae=new RegExp("^(?:([+-])=|)("+H+")([a-z%]*)$","i"),se=/queueHooks$/,le=[function(t,e,n){var i,o,r,a,s,l,u,c=this,d={},h=t.style,g=t.nodeType&&q(t),m=p._data(t,"fxshow");n.queue||(null==(s=p._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,p.queue(t,"fx").length||s.empty.fire()})}));1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],u=p.css(t,"display"),"inline"===("none"===u?p._data(t,"olddisplay")||Et(t.nodeName):u)&&"none"===p.css(t,"float")&&(f.inlineBlockNeedsLayout&&"inline"!==Et(t.nodeName)?h.zoom=1:h.display="inline-block"));n.overflow&&(h.overflow="hidden",f.shrinkWrapBlocks()||c.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],re.exec(o)){if(delete e[i],r=r||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!m||void 0===m[i])continue;g=!0}d[i]=m&&m[i]||p.style(t,i)}else u=void 0;if(p.isEmptyObject(d))"inline"===("none"===u?Et(t.nodeName):u)&&(h.display=u);else for(i in m?"hidden"in m&&(g=m.hidden):m=p._data(t,"fxshow",{}),r&&(m.hidden=!g),g?p(t).show():c.done(function(){p(t).hide()}),c.done(function(){var e;for(e in p._removeData(t,"fxshow"),d)p.style(t,e,d[e])}),d)a=he(g?m[i]:0,i,c),i in m||(m[i]=a.start,g&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}],ue={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=ae.exec(e),r=o&&o[3]||(p.cssNumber[t]?"":"px"),a=(p.cssNumber[t]||"px"!==r&&+i)&&ae.exec(p.css(n.elem,t)),s=1,l=20;if(a&&a[3]!==r){r=r||a[3],o=o||[],a=+i||1;do{a/=s=s||".5",p.style(n.elem,t,a+r)}while(s!==(s=n.cur()/i)&&1!==s&&--l)}return o&&(a=n.start=+a||+i||0,n.unit=r,n.end=o[1]?a+(o[1]+1)*o[2]:+o[2]),n}]};function ce(){return setTimeout(function(){Jt=void 0}),Jt=p.now()}function de(t,e){var n,i={height:t},o=0;for(e=e?1:0;o<4;o+=2-e)i["margin"+(n=V[o])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function he(t,e,n){for(var i,o=(ue[e]||[]).concat(ue["*"]),r=0,a=o.length;r<a;r++)if(i=o[r].call(n,e,t))return i}function fe(t,e,n){var i,o,r=0,a=le.length,s=p.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Jt||ce(),n=Math.max(0,u.startTime+u.duration-e),i=1-(n/u.duration||0),r=0,a=u.tweens.length;r<a;r++)u.tweens[r].run(i);return s.notifyWith(t,[u,i,n]),i<1&&a?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:p.extend({},e),opts:p.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Jt||ce(),duration:n.duration,tweens:[],createTween:function(e,n){var i=p.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)u.tweens[n].run(1);return e?s.resolveWith(t,[u,e]):s.rejectWith(t,[u,e]),this}}),c=u.props;for(!function(t,e){var n,i,o,r,a;for(n in t)if(o=e[i=p.camelCase(n)],r=t[n],p.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(a=p.cssHooks[i])&&"expand"in a)for(n in r=a.expand(r),delete t[i],r)n in t||(t[n]=r[n],e[n]=o);else e[i]=o}(c,u.opts.specialEasing);r<a;r++)if(i=le[r].call(u,t,c,u.opts))return i;return p.map(c,he,u),p.isFunction(u.opts.start)&&u.opts.start.call(t,u),p.fx.timer(p.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}p.Animation=p.extend(fe,{tweener:function(t,e){p.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;i<o;i++)n=t[i],ue[n]=ue[n]||[],ue[n].unshift(e)},prefilter:function(t,e){e?le.unshift(t):le.push(t)}}),p.speed=function(t,e,n){var i=t&&"object"==typeof t?p.extend({},t):{complete:n||!n&&e||p.isFunction(t)&&t,duration:t,easing:n&&e||e&&!p.isFunction(e)&&e};return i.duration=p.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in p.fx.speeds?p.fx.speeds[i.duration]:p.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){p.isFunction(i.old)&&i.old.call(this),i.queue&&p.dequeue(this,i.queue)},i},p.fn.extend({fadeTo:function(t,e,n,i){return this.filter(q).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=p.isEmptyObject(t),r=p.speed(e,n,i),a=function(){var e=fe(this,p.extend({},t),r);(o||p._data(this,"finish"))&&e.stop(!0)};return a.finish=a,o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=p.timers,a=p._data(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&se.test(o)&&i(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));!e&&n||p.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=p._data(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=p.timers,a=i?i.length:0;for(n.finish=!0,p.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),p.each(["toggle","show","hide"],function(t,e){var n=p.fn[e];p.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(de(e,!0),t,i,o)}}),p.each({slideDown:de("show"),slideUp:de("hide"),slideToggle:de("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){p.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),p.timers=[],p.fx.tick=function(){var t,e=p.timers,n=0;for(Jt=p.now();n<e.length;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||p.fx.stop(),Jt=void 0},p.fx.timer=function(t){p.timers.push(t),t()?p.fx.start():p.timers.pop()},p.fx.interval=13,p.fx.start=function(){Qt||(Qt=setInterval(p.fx.tick,p.fx.interval))},p.fx.stop=function(){clearInterval(Qt),Qt=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(t,e){return t=p.fx&&p.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},(ee=L.createElement("div")).setAttribute("className","t"),ee.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ie=ee.getElementsByTagName("a")[0],oe=(ne=L.createElement("select")).appendChild(L.createElement("option")),te=ee.getElementsByTagName("input")[0],ie.style.cssText="top:1px",f.getSetAttribute="t"!==ee.className,f.style=/top/.test(ie.getAttribute("style")),f.hrefNormalized="/a"===ie.getAttribute("href"),f.checkOn=!!te.value,f.optSelected=oe.selected,f.enctype=!!L.createElement("form").enctype,ne.disabled=!0,f.optDisabled=!oe.disabled,(te=L.createElement("input")).setAttribute("value",""),f.input=""===te.getAttribute("value"),te.value="t",te.setAttribute("type","radio"),f.radioValue="t"===te.value;var pe=/\r/g;p.fn.extend({val:function(t){var e,n,i,o=this[0];return arguments.length?(i=p.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(null==(o=i?t.call(this,n,p(this).val()):t)?o="":"number"==typeof o?o+="":p.isArray(o)&&(o=p.map(o,function(t){return null==t?"":t+""})),(e=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))})):o?(e=p.valHooks[o.type]||p.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(pe,""):null==n?"":n:void 0}}),p.extend({valHooks:{option:{get:function(t){var e=p.find.attr(t,"value");return null!=e?e:p.trim(p.text(t))}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||o<0,a=r?null:[],s=r?o+1:i.length,l=o<0?s:r?o:0;l<s;l++)if(((n=i[l]).selected||l===o)&&(f.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!p.nodeName(n.parentNode,"optgroup"))){if(e=p(n).val(),r)return e;a.push(e)}return a},set:function(t,e){for(var n,i,o=t.options,r=p.makeArray(e),a=o.length;a--;)if(i=o[a],p.inArray(p.valHooks.option.get(i),r)>=0)try{i.selected=n=!0}catch(t){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),o}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(t,e){if(p.isArray(e))return t.checked=p.inArray(p(t).val(),e)>=0}},f.checkOn||(p.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ge,me,ve=p.expr.attrHandle,_e=/^(?:checked|selected)$/i,ye=f.getSetAttribute,be=f.input;p.fn.extend({attr:function(t,e){return W(this,p.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){p.removeAttr(this,t)})}}),p.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===F?p.prop(t,e,n):(1===r&&p.isXMLDoc(t)||(e=e.toLowerCase(),i=p.attrHooks[e]||(p.expr.match.bool.test(e)?me:ge)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:null==(o=p.find.attr(t,e))?void 0:o:null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void p.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(M);if(r&&1===t.nodeType)for(;n=r[o++];)i=p.propFix[n]||n,p.expr.match.bool.test(n)?be&&ye||!_e.test(n)?t[i]=!1:t[p.camelCase("default-"+n)]=t[i]=!1:p.attr(t,n,""),t.removeAttribute(ye?n:i)},attrHooks:{type:{set:function(t,e){if(!f.radioValue&&"radio"===e&&p.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),me={set:function(t,e,n){return!1===e?p.removeAttr(t,n):be&&ye||!_e.test(n)?t.setAttribute(!ye&&p.propFix[n]||n,n):t[p.camelCase("default-"+n)]=t[n]=!0,n}},p.each(p.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ve[e]||p.find.attr;ve[e]=be&&ye||!_e.test(e)?function(t,e,i){var o,r;return i||(r=ve[e],ve[e]=o,o=null!=n(t,e,i)?e.toLowerCase():null,ve[e]=r),o}:function(t,e,n){if(!n)return t[p.camelCase("default-"+e)]?e.toLowerCase():null}}),be&&ye||(p.attrHooks.value={set:function(t,e,n){if(!p.nodeName(t,"input"))return ge&&ge.set(t,e,n);t.defaultValue=e}}),ye||(ge={set:function(t,e,n){var i=t.getAttributeNode(n);if(i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n))return e}},ve.id=ve.name=ve.coords=function(t,e,n){var i;if(!n)return(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},p.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);if(n&&n.specified)return n.value},set:ge.set},p.attrHooks.contenteditable={set:function(t,e,n){ge.set(t,""!==e&&e,n)}},p.each(["width","height"],function(t,e){p.attrHooks[e]={set:function(t,n){if(""===n)return t.setAttribute(e,"auto"),n}}})),f.style||(p.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var xe=/^(?:input|select|textarea|button|object)$/i,we=/^(?:a|area)$/i;p.fn.extend({prop:function(t,e){return W(this,p.prop,t,e,arguments.length>1)},removeProp:function(t){return t=p.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(t){}})}}),p.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return(1!==r||!p.isXMLDoc(t))&&(e=p.propFix[e]||e,o=p.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=p.find.attr(t,"tabindex");return e?parseInt(e,10):xe.test(t.nodeName)||we.test(t.nodeName)&&t.href?0:-1}}}}),f.hrefNormalized||p.each(["href","src"],function(t,e){p.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),f.optSelected||(p.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this}),f.enctype||(p.propFix.enctype="encoding");var Se=/[\t\r\n\f]/g;p.fn.extend({addClass:function(t){var e,n,i,o,r,a,s=0,l=this.length,u="string"==typeof t&&t;if(p.isFunction(t))return this.each(function(e){p(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(M)||[];s<l;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(Se," "):" ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");a=p.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,i,o,r,a,s=0,l=this.length,u=0===arguments.length||"string"==typeof t&&t;if(p.isFunction(t))return this.each(function(e){p(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(M)||[];s<l;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(Se," "):"")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");a=t?p.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):p.isFunction(t)?this.each(function(n){p(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,o=p(this),r=t.match(M)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else n!==F&&"boolean"!==n||(this.className&&p._data(this,"__className__",this.className),this.className=this.className||!1===t?"":p._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;n<i;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Se," ").indexOf(e)>=0)return!0;return!1}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){p.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),p.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var Te=p.now(),Ce=/\?/,Le=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;p.parseJSON=function(t){if(n.JSON&&n.JSON.parse)return n.JSON.parse(t+"");var e,i=null,o=p.trim(t+"");return o&&!p.trim(o.replace(Le,function(t,n,o,r){return e&&n&&(i=0),0===i?t:(e=o||n,i+=!r-!o,"")}))?Function("return "+o)():p.error("Invalid JSON: "+t)},p.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{n.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t))}catch(t){e=void 0}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+t),e};var Ae,De,ke=/#.*$/,Pe=/([?&])_=[^&]*/,Ee=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Me=/^(?:GET|HEAD)$/,Ie=/^\/\//,Oe=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Re={},Ne={},Fe="*/".concat("*");try{De=location.href}catch(t){(De=L.createElement("a")).href="",De=De.href}function $e(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(M)||[];if(p.isFunction(n))for(;i=r[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function je(t,e,n,i){var o={},r=t===Ne;function a(s){var l;return o[s]=!0,p.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||r||o[u]?r?!(l=u):void 0:(e.dataTypes.unshift(u),a(u),!1)}),l}return a(e.dataTypes[0])||!o["*"]&&a("*")}function Be(t,e){var n,i,o=p.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&p.extend(!0,t,n),t}Ae=Oe.exec(De.toLowerCase())||[],p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:De,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ae[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Be(Be(t,p.ajaxSettings),e):Be(p.ajaxSettings,t)},ajaxPrefilter:$e(Re),ajaxTransport:$e(Ne),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,o,r,a,s,l,u,c=p.ajaxSetup({},e),d=c.context||c,h=c.context&&(d.nodeType||d.jquery)?p(d):p.event,f=p.Deferred(),g=p.Callbacks("once memory"),m=c.statusCode||{},v={},_={},y=0,b="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!u)for(u={};e=Ee.exec(r);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?r:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return y||(t=_[n]=_[n]||t,v[t]=e),this},overrideMimeType:function(t){return y||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(y<2)for(e in t)m[e]=[m[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||b;return l&&l.abort(e),w(0,e),this}};if(f.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,c.url=((t||c.url||De)+"").replace(ke,"").replace(Ie,Ae[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=p.trim(c.dataType||"*").toLowerCase().match(M)||[""],null==c.crossDomain&&(n=Oe.exec(c.url.toLowerCase()),c.crossDomain=!(!n||n[1]===Ae[1]&&n[2]===Ae[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Ae[3]||("http:"===Ae[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=p.param(c.data,c.traditional)),je(Re,c,e,x),2===y)return x;for(i in(s=p.event&&c.global)&&0==p.active++&&p.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Me.test(c.type),o=c.url,c.hasContent||(c.data&&(o=c.url+=(Ce.test(o)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=Pe.test(o)?o.replace(Pe,"$1_="+Te++):o+(Ce.test(o)?"&":"?")+"_="+Te++)),c.ifModified&&(p.lastModified[o]&&x.setRequestHeader("If-Modified-Since",p.lastModified[o]),p.etag[o]&&x.setRequestHeader("If-None-Match",p.etag[o])),(c.data&&c.hasContent&&!1!==c.contentType||e.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Fe+"; q=0.01":""):c.accepts["*"]),c.headers)x.setRequestHeader(i,c.headers[i]);if(c.beforeSend&&(!1===c.beforeSend.call(d,x,c)||2===y))return x.abort();for(i in b="abort",{success:1,error:1,complete:1})x[i](c[i]);if(l=je(Ne,c,e,x)){x.readyState=1,s&&h.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},c.timeout));try{y=1,l.send(v,w)}catch(t){if(!(y<2))throw t;w(-1,t)}}else w(-1,"No Transport");function w(t,e,n,i){var u,v,_,b,w,S=e;2!==y&&(y=2,a&&clearTimeout(a),l=void 0,r=i||"",x.readyState=t>0?4:0,u=t>=200&&t<300||304===t,n&&(b=function(t,e,n){for(var i,o,r,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(a in s)if(s[a]&&s[a].test(o)){l.unshift(a);break}if(l[0]in n)r=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){r=a;break}i||(i=a)}r=r||i}if(r)return r!==l[0]&&l.unshift(r),n[r]}(c,x,n)),b=function(t,e,n,i){var o,r,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(r=c.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=c.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=u[l+" "+r]||u["* "+r]))for(o in u)if((s=o.split(" "))[1]===r&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[o]:!0!==u[o]&&(r=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(c,b,x,u),u?(c.ifModified&&((w=x.getResponseHeader("Last-Modified"))&&(p.lastModified[o]=w),(w=x.getResponseHeader("etag"))&&(p.etag[o]=w)),204===t||"HEAD"===c.type?S="nocontent":304===t?S="notmodified":(S=b.state,v=b.data,u=!(_=b.error))):(_=S,!t&&S||(S="error",t<0&&(t=0))),x.status=t,x.statusText=(e||S)+"",u?f.resolveWith(d,[v,S,x]):f.rejectWith(d,[x,S,_]),x.statusCode(m),m=void 0,s&&h.trigger(u?"ajaxSuccess":"ajaxError",[x,c,u?v:_]),g.fireWith(d,[x,S]),s&&(h.trigger("ajaxComplete",[x,c]),--p.active||p.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,n){return p.get(t,e,n,"json")},getScript:function(t,e){return p.get(t,void 0,e,"script")}}),p.each(["get","post"],function(t,e){p[e]=function(t,n,i,o){return p.isFunction(n)&&(o=o||i,i=n,n=void 0),p.ajax({url:t,type:e,dataType:o,data:n,success:i})}}),p._evalUrl=function(t){return p.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},p.fn.extend({wrapAll:function(t){if(p.isFunction(t))return this.each(function(e){p(this).wrapAll(t.call(this,e))});if(this[0]){var e=p(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return p.isFunction(t)?this.each(function(e){p(this).wrapInner(t.call(this,e))}):this.each(function(){var e=p(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=p.isFunction(t);return this.each(function(n){p(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}}),p.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!f.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||p.css(t,"display"))},p.expr.filters.visible=function(t){return!p.expr.filters.hidden(t)};var Ue=/%20/g,ze=/\[\]$/,Ge=/\r?\n/g,He=/^(?:submit|button|image|reset|file)$/i,Ve=/^(?:input|select|textarea|keygen)/i;function qe(t,e,n,i){var o;if(p.isArray(e))p.each(e,function(e,o){n||ze.test(t)?i(t,o):qe(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==p.type(e))i(t,e);else for(o in e)qe(t+"["+o+"]",e[o],n,i)}p.param=function(t,e){var n,i=[],o=function(t,e){e=p.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=p.ajaxSettings&&p.ajaxSettings.traditional),p.isArray(t)||t.jquery&&!p.isPlainObject(t))p.each(t,function(){o(this.name,this.value)});else for(n in t)qe(n,t[n],e,o);return i.join("&").replace(Ue,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=p.prop(this,"elements");return t?p.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!p(this).is(":disabled")&&Ve.test(this.nodeName)&&!He.test(t)&&(this.checked||!X.test(t))}).map(function(t,e){var n=p(this).val();return null==n?null:p.isArray(n)?p.map(n,function(t){return{name:e.name,value:t.replace(Ge,"\r\n")}}):{name:e.name,value:n.replace(Ge,"\r\n")}}).get()}}),p.ajaxSettings.xhr=void 0!==n.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Ye()||function(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}()}:Ye;var We=0,Xe={},Ze=p.ajaxSettings.xhr();function Ye(){try{return new n.XMLHttpRequest}catch(t){}}n.attachEvent&&n.attachEvent("onunload",function(){for(var t in Xe)Xe[t](void 0,!0)}),f.cors=!!Ze&&"withCredentials"in Ze,(Ze=f.ajax=!!Ze)&&p.ajaxTransport(function(t){var e;if(!t.crossDomain||f.cors)return{send:function(n,i){var o,r=t.xhr(),a=++We;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];for(o in t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)void 0!==n[o]&&r.setRequestHeader(o,n[o]+"");r.send(t.hasContent&&t.data||null),e=function(n,o){var s,l,u;if(e&&(o||4===r.readyState))if(delete Xe[a],e=void 0,r.onreadystatechange=p.noop,o)4!==r.readyState&&r.abort();else{u={},s=r.status,"string"==typeof r.responseText&&(u.text=r.responseText);try{l=r.statusText}catch(t){l=""}s||!t.isLocal||t.crossDomain?1223===s&&(s=204):s=u.text?200:404}u&&i(s,l,u,r.getAllResponseHeaders())},t.async?4===r.readyState?setTimeout(e):r.onreadystatechange=Xe[a]=e:e()},abort:function(){e&&e(void 0,!0)}}}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return p.globalEval(t),t}}}),p.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),p.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=L.head||p("head")[0]||L.documentElement;return{send:function(i,o){(e=L.createElement("script")).async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||o(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var Ke=[],Je=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ke.pop()||p.expando+"_"+Te++;return this[t]=!0,t}}),p.ajaxPrefilter("json jsonp",function(t,e,i){var o,r,a,s=!1!==t.jsonp&&(Je.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Je.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=p.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Je,"$1"+o):!1!==t.jsonp&&(t.url+=(Ce.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||p.error(o+" was not called"),a[0]},t.dataTypes[0]="json",r=n[o],n[o]=function(){a=arguments},i.always(function(){n[o]=r,t[o]&&(t.jsonpCallback=e.jsonpCallback,Ke.push(o)),a&&p.isFunction(r)&&r(a[0]),a=r=void 0}),"script"}),p.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||L;var i=w.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=p.buildFragment([t],e,o),o&&o.length&&p(o).remove(),p.merge([],i.childNodes))};var Qe=p.fn.load;p.fn.load=function(t,e,n){if("string"!=typeof t&&Qe)return Qe.apply(this,arguments);var i,o,r,a=this,s=t.indexOf(" ");return s>=0&&(i=p.trim(t.slice(s,t.length)),t=t.slice(0,s)),p.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&p.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?p("<div>").append(p.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){a.each(n,o||[t.responseText,e,t])}),this},p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){p.fn[e]=function(t){return this.on(e,t)}}),p.expr.filters.animated=function(t){return p.grep(p.timers,function(e){return t===e.elem}).length};var tn=n.document.documentElement;function en(t){return p.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}p.offset={setOffset:function(t,e,n){var i,o,r,a,s,l,u=p.css(t,"position"),c=p(t),d={};"static"===u&&(t.style.position="relative"),s=c.offset(),r=p.css(t,"top"),l=p.css(t,"left"),("absolute"===u||"fixed"===u)&&p.inArray("auto",[r,l])>-1?(a=(i=c.position()).top,o=i.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),p.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+o),"using"in e?e.using.call(t,d):c.css(d)}},p.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){p.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},o=this[0],r=o&&o.ownerDocument;return r?(e=r.documentElement,p.contains(e,o)?(typeof o.getBoundingClientRect!==F&&(i=o.getBoundingClientRect()),n=en(r),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===p.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),p.nodeName(t[0],"html")||(n=t.offset()),n.top+=p.css(t[0],"borderTopWidth",!0),n.left+=p.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-p.css(i,"marginTop",!0),left:e.left-n.left-p.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||tn;t&&!p.nodeName(t,"html")&&"static"===p.css(t,"position");)t=t.offsetParent;return t||tn})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);p.fn[t]=function(i){return W(this,function(t,i,o){var r=en(t);if(void 0===o)return r?e in r?r[e]:r.document.documentElement[i]:t[i];r?r.scrollTo(n?p(r).scrollLeft():o,n?o:p(r).scrollTop()):t[i]=o},t,i,arguments.length,null)}}),p.each(["top","left"],function(t,e){p.cssHooks[e]=Ft(f.pixelPosition,function(t,n){if(n)return n=It(t,e),Rt.test(n)?p(t).position()[e]+"px":n})}),p.each({Height:"height",Width:"width"},function(t,e){p.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){p.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return W(this,function(e,n,i){var o;return p.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?p.css(e,n,a):p.style(e,n,i,a)},e,r?i:void 0,r,null)}})}),p.fn.size=function(){return this.length},p.fn.andSelf=p.fn.addBack,void 0===(i=function(){return p}.apply(e,[]))||(t.exports=i);var nn=n.jQuery,on=n.$;return p.noConflict=function(t){return n.$===p&&(n.$=on),t&&n.jQuery===p&&(n.jQuery=nn),p},typeof o===F&&(n.jQuery=n.$=p),p},"object"==typeof t&&"object"==typeof t.exports?t.exports=o.document?r(o,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return r(t)}:r(o)},function(t,e,n){"use strict";var i=n(15),o=n(38),r=Object.prototype.toString;function a(t){return"[object Array]"===r.call(t)}function s(t){return null!==t&&"object"==typeof t}function l(t){return"[object Function]"===r.call(t)}function u(t,e){if(null!==t&&void 0!==t)if("object"==typeof t||a(t)||(t=[t]),a(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===r.call(t)},isBuffer:o,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===r.call(t)},isFile:function(t){return"[object File]"===r.call(t)},isBlob:function(t){return"[object Blob]"===r.call(t)},isFunction:l,isStream:function(t){return s(t)&&l(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function t(){var e={};function n(n,i){"object"==typeof e[i]&&"object"==typeof n?e[i]=t(e[i],n):e[i]=n}for(var i=0,o=arguments.length;i<o;i++)u(arguments[i],n);return e},extend:function(t,e,n){return u(e,function(e,o){t[o]=n&&"function"==typeof e?i(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return l});let i,o,r=0;var a=function(t,e){g[r]=t,g[r+1]=e,2===(r+=2)&&(o?o(m):v())};function s(t){o=t}function l(t){a=t}const u="undefined"!=typeof window?window:void 0,c=u||{},d=c.MutationObserver||c.WebKitMutationObserver,h="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){const t=setTimeout;return()=>t(m,1)}const g=new Array(1e3);function m(){for(let t=0;t<r;t+=2){(0,g[t])(g[t+1]),g[t]=void 0,g[t+1]=void 0}r=0}let v;v=h?()=>t.nextTick(m):d?function(){let t=0;const e=new d(m),n=document.createTextNode("");return e.observe(n,{characterData:!0}),()=>{n.data=t=++t%2}}():f?function(){const t=new MessageChannel;return t.port1.onmessage=m,()=>t.port2.postMessage(0)}():void 0===u?function(){try{const t=Function("return this")().require("vertx");return void 0!==(i=t.runOnLoop||t.runOnContext)?function(){i(m)}:p()}catch(t){return p()}}():p()}).call(this,n(6))},function(t,e){t.exports=function(t){function e(t){"undefined"!=typeof console&&(console.error||console.log)("[Script Loader]",t)}try{"undefined"!=typeof execScript&&"undefined"!=typeof attachEvent&&"undefined"==typeof addEventListener?execScript(t):"undefined"!=typeof eval?eval.call(null,t):e("EvalError: No eval function available")}catch(t){e(t)}}},function(t,e,n){"use strict";function i(t){return"function"==typeof t}let o;const r=o=Array.isArray?Array.isArray:t=>"[object Array]"===Object.prototype.toString.call(t);var a=n(2);function s(t,e){const n=this,i=new this.constructor(c);void 0===i[u]&&C(i);const{_state:o}=n;if(o){const t=arguments[o-1];Object(a.a)(()=>S(o,i,t,n._result))}else x(n,i,t,e);return i}function l(t){if(t&&"object"==typeof t&&t.constructor===this)return t;let e=new this(c);return v(e,t),e}const u=Math.random().toString(36).substring(2);function c(){}const d=void 0,h=1,f=2,p={error:null};function g(t){try{return t.then}catch(t){return p.error=t,p}}function m(t,e,n){e.constructor===t.constructor&&n===s&&e.constructor.resolve===l?function(t,e){e._state===h?y(t,e._result):e._state===f?b(t,e._result):x(e,void 0,e=>v(t,e),e=>b(t,e))}(t,e):n===p?(b(t,p.error),p.error=null):void 0===n?y(t,e):i(n)?function(t,e,n){Object(a.a)(t=>{var i=!1,o=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(n,e,n=>{i||(i=!0,e!==n?v(t,n):y(t,n))},e=>{i||(i=!0,b(t,e))},t._label);!i&&o&&(i=!0,b(t,o))},t)}(t,e,n):y(t,e)}function v(t,e){t===e?b(t,new TypeError("You cannot resolve a promise with itself")):!function(t){let e=typeof t;return null!==t&&("object"===e||"function"===e)}(e)?y(t,e):m(t,e,g(e))}function _(t){t._onerror&&t._onerror(t._result),w(t)}function y(t,e){t._state===d&&(t._result=e,t._state=h,0!==t._subscribers.length&&Object(a.a)(w,t))}function b(t,e){t._state===d&&(t._state=f,t._result=e,Object(a.a)(_,t))}function x(t,e,n,i){let{_subscribers:o}=t,{length:r}=o;t._onerror=null,o[r]=e,o[r+h]=n,o[r+f]=i,0===r&&t._state&&Object(a.a)(w,t)}function w(t){let e=t._subscribers,n=t._state;if(0===e.length)return;let i,o,r=t._result;for(let t=0;t<e.length;t+=3)i=e[t],o=e[t+n],i?S(n,i,o,r):o(r);t._subscribers.length=0}function S(t,e,n,o){let r,a,s,l,u=i(n);if(u){if((r=function(t,e){try{return t(e)}catch(t){return p.error=t,p}}(n,o))===p?(l=!0,a=r.error,r.error=null):s=!0,e===r)return void b(e,new TypeError("A promises callback cannot return that same promise."))}else r=o,s=!0;e._state!==d||(u&&s?v(e,r):l?b(e,a):t===h?y(e,r):t===f&&b(e,r))}let T=0;function C(t){t[u]=T++,t._state=void 0,t._result=void 0,t._subscribers=[]}class L{constructor(t,e){this._instanceConstructor=t,this.promise=new t(c),this.promise[u]||C(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?y(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&y(this.promise,this._result))):b(this.promise,new Error("Array Methods must be provided an Array"))}_enumerate(t){for(let e=0;this._state===d&&e<t.length;e++)this._eachEntry(t[e],e)}_eachEntry(t,e){let n=this._instanceConstructor,{resolve:i}=n;if(i===l){let i=g(t);if(i===s&&t._state!==d)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===D){let o=new n(c);m(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(e=>e(t)),e)}else this._willSettleAt(i(t),e)}_settledAt(t,e,n){let{promise:i}=this;i._state===d&&(this._remaining--,t===f?b(i,n):this._result[e]=n),0===this._remaining&&y(i,this._result)}_willSettleAt(t,e){let n=this;x(t,void 0,t=>n._settledAt(h,e,t),t=>n._settledAt(f,e,t))}}class A{constructor(t){this[u]=T++,this._result=this._state=void 0,this._subscribers=[],c!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof A?function(t,e){try{e(function(e){v(t,e)},function(e){b(t,e)})}catch(e){b(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}catch(t){return this.then(null,t)}finally(t){let e=this.constructor;return this.then(n=>e.resolve(t()).then(()=>n),n=>e.resolve(t()).then(()=>{throw n}))}}A.prototype.then=s;var D=e.a=A;A.all=function(t){return new L(this,t).promise},A.race=function(t){let e=this;return r(t)?new e((n,i)=>{let o=t.length;for(let r=0;r<o;r++)e.resolve(t[r]).then(n,i)}):new e((t,e)=>e(new TypeError("You must pass an array to race.")))},A.resolve=l,A.reject=function(t){let e=new this(c);return b(e,t),e},A._setScheduler=a.c,A._setAsap=a.b,A._asap=a.a},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n,i,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,u=[],c=!1,d=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&f())}function f(){if(!c){var t=s(h);c=!0;for(var e=u.length;e;){for(l=u,u=[];++d<e;)l&&l[d].run();d=-1,e=u.length}l=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";n.r(e),function(t,n){
/*!
 * Vue.js v2.5.16
 * (c) 2014-2018 Evan You
 * Released under the MIT License.
 */
var i=Object.freeze({});function o(t){return void 0===t||null===t}function r(t){return void 0!==t&&null!==t}function a(t){return!0===t}function s(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function l(t){return null!==t&&"object"==typeof t}var u=Object.prototype.toString;function c(t){return"[object Object]"===u.call(t)}function d(t){return"[object RegExp]"===u.call(t)}function h(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function f(t){return null==t?"":"object"==typeof t?JSON.stringify(t,null,2):String(t)}function p(t){var e=parseFloat(t);return isNaN(e)?t:e}function g(t,e){for(var n=Object.create(null),i=t.split(","),o=0;o<i.length;o++)n[i[o]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}g("slot,component",!0);var m=g("key,ref,slot,slot-scope,is");function v(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var _=Object.prototype.hasOwnProperty;function y(t,e){return _.call(t,e)}function b(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var x=/-(\w)/g,w=b(function(t){return t.replace(x,function(t,e){return e?e.toUpperCase():""})}),S=b(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),T=/\B([A-Z])/g,C=b(function(t){return t.replace(T,"-$1").toLowerCase()});var L=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function n(n){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n};function A(t,e){e=e||0;for(var n=t.length-e,i=new Array(n);n--;)i[n]=t[n+e];return i}function D(t,e){for(var n in e)t[n]=e[n];return t}function k(t){for(var e={},n=0;n<t.length;n++)t[n]&&D(e,t[n]);return e}function P(t,e,n){}var E=function(t,e,n){return!1},M=function(t){return t};function I(t,e){if(t===e)return!0;var n=l(t),i=l(e);if(!n||!i)return!n&&!i&&String(t)===String(e);try{var o=Array.isArray(t),r=Array.isArray(e);if(o&&r)return t.length===e.length&&t.every(function(t,n){return I(t,e[n])});if(o||r)return!1;var a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every(function(n){return I(t[n],e[n])})}catch(t){return!1}}function O(t,e){for(var n=0;n<t.length;n++)if(I(t[n],e))return n;return-1}function R(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var N="data-server-rendered",F=["component","directive","filter"],$=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],j={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:E,isReservedAttr:E,isUnknownElement:E,getTagNamespace:P,parsePlatformTagName:M,mustUseProp:E,_lifecycleHooks:$};function B(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var U=/[^\w.$]/;var z,G="__proto__"in{},H="undefined"!=typeof window,V="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,q=V&&WXEnvironment.platform.toLowerCase(),W=H&&window.navigator.userAgent.toLowerCase(),X=W&&/msie|trident/.test(W),Z=W&&W.indexOf("msie 9.0")>0,Y=W&&W.indexOf("edge/")>0,K=(W&&W.indexOf("android"),W&&/iphone|ipad|ipod|ios/.test(W)||"ios"===q),J=(W&&/chrome\/\d+/.test(W),{}.watch),Q=!1;if(H)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){Q=!0}}),window.addEventListener("test-passive",null,tt)}catch(t){}var et=function(){return void 0===z&&(z=!H&&!V&&void 0!==t&&"server"===t.process.env.VUE_ENV),z},nt=H&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function it(t){return"function"==typeof t&&/native code/.test(t.toString())}var ot,rt="undefined"!=typeof Symbol&&it(Symbol)&&"undefined"!=typeof Reflect&&it(Reflect.ownKeys);ot="undefined"!=typeof Set&&it(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var at=P,st=0,lt=function(){this.id=st++,this.subs=[]};lt.prototype.addSub=function(t){this.subs.push(t)},lt.prototype.removeSub=function(t){v(this.subs,t)},lt.prototype.depend=function(){lt.target&&lt.target.addDep(this)},lt.prototype.notify=function(){for(var t=this.subs.slice(),e=0,n=t.length;e<n;e++)t[e].update()},lt.target=null;var ut=[];function ct(t){lt.target&&ut.push(lt.target),lt.target=t}function dt(){lt.target=ut.pop()}var ht=function(t,e,n,i,o,r,a,s){this.tag=t,this.data=e,this.children=n,this.text=i,this.elm=o,this.ns=void 0,this.context=r,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ft={child:{configurable:!0}};ft.child.get=function(){return this.componentInstance},Object.defineProperties(ht.prototype,ft);var pt=function(t){void 0===t&&(t="");var e=new ht;return e.text=t,e.isComment=!0,e};function gt(t){return new ht(void 0,void 0,void 0,String(t))}function mt(t){var e=new ht(t.tag,t.data,t.children,t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.isCloned=!0,e}var vt=Array.prototype,_t=Object.create(vt);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=vt[t];B(_t,t,function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];var o,r=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2)}return o&&a.observeArray(o),a.dep.notify(),r})});var yt=Object.getOwnPropertyNames(_t),bt=!0;function xt(t){bt=t}var wt=function(t){(this.value=t,this.dep=new lt,this.vmCount=0,B(t,"__ob__",this),Array.isArray(t))?((G?St:Tt)(t,_t,yt),this.observeArray(t)):this.walk(t)};function St(t,e,n){t.__proto__=e}function Tt(t,e,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];B(t,r,e[r])}}function Ct(t,e){var n;if(l(t)&&!(t instanceof ht))return y(t,"__ob__")&&t.__ob__ instanceof wt?n=t.__ob__:bt&&!et()&&(Array.isArray(t)||c(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new wt(t)),e&&n&&n.vmCount++,n}function Lt(t,e,n,i,o){var r=new lt,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get;s||2!==arguments.length||(n=t[e]);var l=a&&a.set,u=!o&&Ct(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return lt.target&&(r.depend(),u&&(u.dep.depend(),Array.isArray(e)&&function t(e){for(var n=void 0,i=0,o=e.length;i<o;i++)(n=e[i])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&t(n)}(e))),e},set:function(e){var i=s?s.call(t):n;e===i||e!=e&&i!=i||(l?l.call(t,e):n=e,u=!o&&Ct(e),r.notify())}})}}function At(t,e,n){if(Array.isArray(t)&&h(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var i=t.__ob__;return t._isVue||i&&i.vmCount?n:i?(Lt(i.value,e,n),i.dep.notify(),n):(t[e]=n,n)}function Dt(t,e){if(Array.isArray(t)&&h(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||y(t,e)&&(delete t[e],n&&n.dep.notify())}}wt.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Lt(t,e[n])},wt.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Ct(t[e])};var kt=j.optionMergeStrategies;function Pt(t,e){if(!e)return t;for(var n,i,o,r=Object.keys(e),a=0;a<r.length;a++)i=t[n=r[a]],o=e[n],y(t,n)?c(i)&&c(o)&&Pt(i,o):At(t,n,o);return t}function Et(t,e,n){return n?function(){var i="function"==typeof e?e.call(n,n):e,o="function"==typeof t?t.call(n,n):t;return i?Pt(i,o):o}:e?t?function(){return Pt("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Mt(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t}function It(t,e,n,i){var o=Object.create(t||null);return e?D(o,e):o}kt.data=function(t,e,n){return n?Et(t,e,n):e&&"function"!=typeof e?t:Et(t,e)},$.forEach(function(t){kt[t]=Mt}),F.forEach(function(t){kt[t+"s"]=It}),kt.watch=function(t,e,n,i){if(t===J&&(t=void 0),e===J&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var o={};for(var r in D(o,t),e){var a=o[r],s=e[r];a&&!Array.isArray(a)&&(a=[a]),o[r]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},kt.props=kt.methods=kt.inject=kt.computed=function(t,e,n,i){if(!t)return e;var o=Object.create(null);return D(o,t),e&&D(o,e),o},kt.provide=Et;var Ot=function(t,e){return void 0===e?t:e};function Rt(t,e,n){"function"==typeof e&&(e=e.options),function(t,e){var n=t.props;if(n){var i,o,r={};if(Array.isArray(n))for(i=n.length;i--;)"string"==typeof(o=n[i])&&(r[w(o)]={type:null});else if(c(n))for(var a in n)o=n[a],r[w(a)]=c(o)?o:{type:o};t.props=r}}(e),function(t,e){var n=t.inject;if(n){var i=t.inject={};if(Array.isArray(n))for(var o=0;o<n.length;o++)i[n[o]]={from:n[o]};else if(c(n))for(var r in n){var a=n[r];i[r]=c(a)?D({from:r},a):{from:a}}}}(e),function(t){var e=t.directives;if(e)for(var n in e){var i=e[n];"function"==typeof i&&(e[n]={bind:i,update:i})}}(e);var i=e.extends;if(i&&(t=Rt(t,i,n)),e.mixins)for(var o=0,r=e.mixins.length;o<r;o++)t=Rt(t,e.mixins[o],n);var a,s={};for(a in t)l(a);for(a in e)y(t,a)||l(a);function l(i){var o=kt[i]||Ot;s[i]=o(t[i],e[i],n,i)}return s}function Nt(t,e,n,i){if("string"==typeof n){var o=t[e];if(y(o,n))return o[n];var r=w(n);if(y(o,r))return o[r];var a=S(r);return y(o,a)?o[a]:o[n]||o[r]||o[a]}}function Ft(t,e,n,i){var o=e[t],r=!y(n,t),a=n[t],s=Bt(Boolean,o.type);if(s>-1)if(r&&!y(o,"default"))a=!1;else if(""===a||a===C(t)){var l=Bt(String,o.type);(l<0||s<l)&&(a=!0)}if(void 0===a){a=function(t,e,n){if(!y(e,"default"))return;var i=e.default;0;if(t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n])return t._props[n];return"function"==typeof i&&"Function"!==$t(e.type)?i.call(t):i}(i,o,t);var u=bt;xt(!0),Ct(a),xt(u)}return a}function $t(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function jt(t,e){return $t(t)===$t(e)}function Bt(t,e){if(!Array.isArray(e))return jt(e,t)?0:-1;for(var n=0,i=e.length;n<i;n++)if(jt(e[n],t))return n;return-1}function Ut(t,e,n){if(e)for(var i=e;i=i.$parent;){var o=i.$options.errorCaptured;if(o)for(var r=0;r<o.length;r++)try{if(!1===o[r].call(i,t,e,n))return}catch(t){zt(t,i,"errorCaptured hook")}}zt(t,e,n)}function zt(t,e,n){if(j.errorHandler)try{return j.errorHandler.call(null,t,e,n)}catch(t){Gt(t,null,"config.errorHandler")}Gt(t,e,n)}function Gt(t,e,n){if(!H&&!V||"undefined"==typeof console)throw t;console.error(t)}var Ht,Vt,qt=[],Wt=!1;function Xt(){Wt=!1;var t=qt.slice(0);qt.length=0;for(var e=0;e<t.length;e++)t[e]()}var Zt=!1;if(void 0!==n&&it(n))Vt=function(){n(Xt)};else if("undefined"==typeof MessageChannel||!it(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())Vt=function(){setTimeout(Xt,0)};else{var Yt=new MessageChannel,Kt=Yt.port2;Yt.port1.onmessage=Xt,Vt=function(){Kt.postMessage(1)}}if("undefined"!=typeof Promise&&it(Promise)){var Jt=Promise.resolve();Ht=function(){Jt.then(Xt),K&&setTimeout(P)}}else Ht=Vt;function Qt(t,e){var n;if(qt.push(function(){if(t)try{t.call(e)}catch(t){Ut(t,e,"nextTick")}else n&&n(e)}),Wt||(Wt=!0,Zt?Vt():Ht()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){n=t})}var te=new ot;function ee(t){!function t(e,n){var i,o;var r=Array.isArray(e);if(!r&&!l(e)||Object.isFrozen(e)||e instanceof ht)return;if(e.__ob__){var a=e.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(r)for(i=e.length;i--;)t(e[i],n);else for(o=Object.keys(e),i=o.length;i--;)t(e[o[i]],n)}(t,te),te.clear()}var ne,ie=b(function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),i="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=i?t.slice(1):t,once:n,capture:i,passive:e}});function oe(t){function e(){var t=arguments,n=e.fns;if(!Array.isArray(n))return n.apply(null,arguments);for(var i=n.slice(),o=0;o<i.length;o++)i[o].apply(null,t)}return e.fns=t,e}function re(t,e,n,i,r){var a,s,l,u;for(a in t)s=t[a],l=e[a],u=ie(a),o(s)||(o(l)?(o(s.fns)&&(s=t[a]=oe(s)),n(u.name,s,u.once,u.capture,u.passive,u.params)):s!==l&&(l.fns=s,t[a]=l));for(a in e)o(t[a])&&i((u=ie(a)).name,e[a],u.capture)}function ae(t,e,n){var i;t instanceof ht&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function l(){n.apply(this,arguments),v(i.fns,l)}o(s)?i=oe([l]):r(s.fns)&&a(s.merged)?(i=s).fns.push(l):i=oe([s,l]),i.merged=!0,t[e]=i}function se(t,e,n,i,o){if(r(e)){if(y(e,n))return t[n]=e[n],o||delete e[n],!0;if(y(e,i))return t[n]=e[i],o||delete e[i],!0}return!1}function le(t){return s(t)?[gt(t)]:Array.isArray(t)?function t(e,n){var i=[];var l,u,c,d;for(l=0;l<e.length;l++)o(u=e[l])||"boolean"==typeof u||(c=i.length-1,d=i[c],Array.isArray(u)?u.length>0&&(ue((u=t(u,(n||"")+"_"+l))[0])&&ue(d)&&(i[c]=gt(d.text+u[0].text),u.shift()),i.push.apply(i,u)):s(u)?ue(d)?i[c]=gt(d.text+u):""!==u&&i.push(gt(u)):ue(u)&&ue(d)?i[c]=gt(d.text+u.text):(a(e._isVList)&&r(u.tag)&&o(u.key)&&r(n)&&(u.key="__vlist"+n+"_"+l+"__"),i.push(u)));return i}(t):void 0}function ue(t){return r(t)&&r(t.text)&&!1===t.isComment}function ce(t,e){return(t.__esModule||rt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),l(t)?e.extend(t):t}function de(t){return t.isComment&&t.asyncFactory}function he(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(r(n)&&(r(n.componentOptions)||de(n)))return n}}function fe(t,e,n){n?ne.$once(t,e):ne.$on(t,e)}function pe(t,e){ne.$off(t,e)}function ge(t,e,n){ne=t,re(e,n||{},fe,pe),ne=void 0}function me(t,e){var n={};if(!t)return n;for(var i=0,o=t.length;i<o;i++){var r=t[i],a=r.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,r.context!==e&&r.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(r);else{var s=a.slot,l=n[s]||(n[s]=[]);"template"===r.tag?l.push.apply(l,r.children||[]):l.push(r)}}for(var u in n)n[u].every(ve)&&delete n[u];return n}function ve(t){return t.isComment&&!t.asyncFactory||" "===t.text}function _e(t,e){e=e||{};for(var n=0;n<t.length;n++)Array.isArray(t[n])?_e(t[n],e):e[t[n].key]=t[n].fn;return e}var ye=null;function be(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function xe(t,e){if(e){if(t._directInactive=!1,be(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)xe(t.$children[n]);we(t,"activated")}}function we(t,e){ct();var n=t.$options[e];if(n)for(var i=0,o=n.length;i<o;i++)try{n[i].call(t)}catch(n){Ut(n,t,e+" hook")}t._hasHookEvent&&t.$emit("hook:"+e),dt()}var Se=[],Te=[],Ce={},Le=!1,Ae=!1,De=0;function ke(){var t,e;for(Ae=!0,Se.sort(function(t,e){return t.id-e.id}),De=0;De<Se.length;De++)e=(t=Se[De]).id,Ce[e]=null,t.run();var n=Te.slice(),i=Se.slice();De=Se.length=Te.length=0,Ce={},Le=Ae=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,xe(t[e],!0)}(n),function(t){var e=t.length;for(;e--;){var n=t[e],i=n.vm;i._watcher===n&&i._isMounted&&we(i,"updated")}}(i),nt&&j.devtools&&nt.emit("flush")}var Pe=0,Ee=function(t,e,n,i,o){this.vm=t,o&&(t._watcher=this),t._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++Pe,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ot,this.newDepIds=new ot,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!U.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}(e),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};Ee.prototype.get=function(){var t;ct(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;Ut(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ee(t),dt(),this.cleanupDeps()}return t},Ee.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},Ee.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Ee.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==Ce[e]){if(Ce[e]=!0,Ae){for(var n=Se.length-1;n>De&&Se[n].id>t.id;)n--;Se.splice(n+1,0,t)}else Se.push(t);Le||(Le=!0,Qt(ke))}}(this)},Ee.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||l(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){Ut(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},Ee.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Ee.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},Ee.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||v(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var Me={enumerable:!0,configurable:!0,get:P,set:P};function Ie(t,e,n){Me.get=function(){return this[e][n]},Me.set=function(t){this[e][n]=t},Object.defineProperty(t,n,Me)}function Oe(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var n=t.$options.propsData||{},i=t._props={},o=t.$options._propKeys=[];t.$parent&&xt(!1);var r=function(r){o.push(r);var a=Ft(r,e,n,t);Lt(i,r,a),r in t||Ie(t,"_props",r)};for(var a in e)r(a);xt(!0)}(t,e.props),e.methods&&function(t,e){t.$options.props;for(var n in e)t[n]=null==e[n]?P:L(e[n],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;c(e=t._data="function"==typeof e?function(t,e){ct();try{return t.call(e,e)}catch(t){return Ut(t,e,"data()"),{}}finally{dt()}}(e,t):e||{})||(e={});var n=Object.keys(e),i=t.$options.props,o=(t.$options.methods,n.length);for(;o--;){var r=n[o];0,i&&y(i,r)||(void 0,36!==(a=(r+"").charCodeAt(0))&&95!==a&&Ie(t,"_data",r))}var a;Ct(e,!0)}(t):Ct(t._data={},!0),e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),i=et();for(var o in e){var r=e[o],a="function"==typeof r?r:r.get;0,i||(n[o]=new Ee(t,a||P,P,Re)),o in t||Ne(t,o,r)}}(t,e.computed),e.watch&&e.watch!==J&&function(t,e){for(var n in e){var i=e[n];if(Array.isArray(i))for(var o=0;o<i.length;o++)$e(t,n,i[o]);else $e(t,n,i)}}(t,e.watch)}var Re={lazy:!0};function Ne(t,e,n){var i=!et();"function"==typeof n?(Me.get=i?Fe(e):n,Me.set=P):(Me.get=n.get?i&&!1!==n.cache?Fe(e):n.get:P,Me.set=n.set?n.set:P),Object.defineProperty(t,e,Me)}function Fe(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),lt.target&&e.depend(),e.value}}function $e(t,e,n,i){return c(n)&&(i=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,i)}function je(t,e){if(t){for(var n=Object.create(null),i=rt?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):Object.keys(t),o=0;o<i.length;o++){for(var r=i[o],a=t[r].from,s=e;s;){if(s._provided&&y(s._provided,a)){n[r]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[r]){var l=t[r].default;n[r]="function"==typeof l?l.call(e):l}else 0}return n}}function Be(t,e){var n,i,o,a,s;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),i=0,o=t.length;i<o;i++)n[i]=e(t[i],i);else if("number"==typeof t)for(n=new Array(t),i=0;i<t;i++)n[i]=e(i+1,i);else if(l(t))for(a=Object.keys(t),n=new Array(a.length),i=0,o=a.length;i<o;i++)s=a[i],n[i]=e(t[s],s,i);return r(n)&&(n._isVList=!0),n}function Ue(t,e,n,i){var o,r=this.$scopedSlots[t];if(r)n=n||{},i&&(n=D(D({},i),n)),o=r(n)||e;else{var a=this.$slots[t];a&&(a._rendered=!0),o=a||e}var s=n&&n.slot;return s?this.$createElement("template",{slot:s},o):o}function ze(t){return Nt(this.$options,"filters",t)||M}function Ge(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function He(t,e,n,i,o){var r=j.keyCodes[e]||n;return o&&i&&!j.keyCodes[e]?Ge(o,i):r?Ge(r,t):i?C(i)!==e:void 0}function Ve(t,e,n,i,o){if(n)if(l(n)){var r;Array.isArray(n)&&(n=k(n));var a=function(a){if("class"===a||"style"===a||m(a))r=t;else{var s=t.attrs&&t.attrs.type;r=i||j.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}a in r||(r[a]=n[a],o&&((t.on||(t.on={}))["update:"+a]=function(t){n[a]=t}))};for(var s in n)a(s)}else;return t}function qe(t,e){var n=this._staticTrees||(this._staticTrees=[]),i=n[t];return i&&!e?i:(Xe(i=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),i)}function We(t,e,n){return Xe(t,"__once__"+e+(n?"_"+n:""),!0),t}function Xe(t,e,n){if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]&&"string"!=typeof t[i]&&Ze(t[i],e+"_"+i,n);else Ze(t,e,n)}function Ze(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function Ye(t,e){if(e)if(c(e)){var n=t.on=t.on?D({},t.on):{};for(var i in e){var o=n[i],r=e[i];n[i]=o?[].concat(o,r):r}}else;return t}function Ke(t){t._o=We,t._n=p,t._s=f,t._l=Be,t._t=Ue,t._q=I,t._i=O,t._m=qe,t._f=ze,t._k=He,t._b=Ve,t._v=gt,t._e=pt,t._u=_e,t._g=Ye}function Je(t,e,n,o,r){var s,l=r.options;y(o,"_uid")?(s=Object.create(o))._original=o:(s=o,o=o._original);var u=a(l._compiled),c=!u;this.data=t,this.props=e,this.children=n,this.parent=o,this.listeners=t.on||i,this.injections=je(l.inject,o),this.slots=function(){return me(n,o)},u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=t.scopedSlots||i),l._scopeId?this._c=function(t,e,n,i){var r=sn(s,t,e,n,i,c);return r&&!Array.isArray(r)&&(r.fnScopeId=l._scopeId,r.fnContext=o),r}:this._c=function(t,e,n,i){return sn(s,t,e,n,i,c)}}function Qe(t,e,n,i){var o=mt(t);return o.fnContext=n,o.fnOptions=i,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function tn(t,e){for(var n in e)t[w(n)]=e[n]}Ke(Je.prototype);var en={init:function(t,e,n,i){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var o=t;en.prepatch(o,o)}else{(t.componentInstance=function(t,e,n,i){var o={_isComponent:!0,parent:e,_parentVnode:t,_parentElm:n||null,_refElm:i||null},a=t.data.inlineTemplate;r(a)&&(o.render=a.render,o.staticRenderFns=a.staticRenderFns);return new t.componentOptions.Ctor(o)}(t,ye,n,i)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions;!function(t,e,n,o,r){var a=!!(r||t.$options._renderChildren||o.data.scopedSlots||t.$scopedSlots!==i);if(t.$options._parentVnode=o,t.$vnode=o,t._vnode&&(t._vnode.parent=o),t.$options._renderChildren=r,t.$attrs=o.data.attrs||i,t.$listeners=n||i,e&&t.$options.props){xt(!1);for(var s=t._props,l=t.$options._propKeys||[],u=0;u<l.length;u++){var c=l[u],d=t.$options.props;s[c]=Ft(c,d,e,t)}xt(!0),t.$options.propsData=e}n=n||i;var h=t.$options._parentListeners;t.$options._parentListeners=n,ge(t,n,h),a&&(t.$slots=me(r,o.context),t.$forceUpdate())}(e.componentInstance=t.componentInstance,n.propsData,n.listeners,e,n.children)},insert:function(t){var e,n=t.context,i=t.componentInstance;i._isMounted||(i._isMounted=!0,we(i,"mounted")),t.data.keepAlive&&(n._isMounted?((e=i)._inactive=!1,Te.push(e)):xe(i,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?function t(e,n){if(!(n&&(e._directInactive=!0,be(e))||e._inactive)){e._inactive=!0;for(var i=0;i<e.$children.length;i++)t(e.$children[i]);we(e,"deactivated")}}(e,!0):e.$destroy())}},nn=Object.keys(en);function on(t,e,n,s,u){if(!o(t)){var c=n.$options._base;if(l(t)&&(t=c.extend(t)),"function"==typeof t){var d;if(o(t.cid)&&void 0===(t=function(t,e,n){if(a(t.error)&&r(t.errorComp))return t.errorComp;if(r(t.resolved))return t.resolved;if(a(t.loading)&&r(t.loadingComp))return t.loadingComp;if(!r(t.contexts)){var i=t.contexts=[n],s=!0,u=function(){for(var t=0,e=i.length;t<e;t++)i[t].$forceUpdate()},c=R(function(n){t.resolved=ce(n,e),s||u()}),d=R(function(e){r(t.errorComp)&&(t.error=!0,u())}),h=t(c,d);return l(h)&&("function"==typeof h.then?o(t.resolved)&&h.then(c,d):r(h.component)&&"function"==typeof h.component.then&&(h.component.then(c,d),r(h.error)&&(t.errorComp=ce(h.error,e)),r(h.loading)&&(t.loadingComp=ce(h.loading,e),0===h.delay?t.loading=!0:setTimeout(function(){o(t.resolved)&&o(t.error)&&(t.loading=!0,u())},h.delay||200)),r(h.timeout)&&setTimeout(function(){o(t.resolved)&&d(null)},h.timeout))),s=!1,t.loading?t.loadingComp:t.resolved}t.contexts.push(n)}(d=t,c,n)))return function(t,e,n,i,o){var r=pt();return r.asyncFactory=t,r.asyncMeta={data:e,context:n,children:i,tag:o},r}(d,e,n,s,u);e=e||{},un(t),r(e.model)&&function(t,e){var n=t.model&&t.model.prop||"value",i=t.model&&t.model.event||"input";(e.props||(e.props={}))[n]=e.model.value;var o=e.on||(e.on={});r(o[i])?o[i]=[e.model.callback].concat(o[i]):o[i]=e.model.callback}(t.options,e);var h=function(t,e,n){var i=e.options.props;if(!o(i)){var a={},s=t.attrs,l=t.props;if(r(s)||r(l))for(var u in i){var c=C(u);se(a,l,u,c,!0)||se(a,s,u,c,!1)}return a}}(e,t);if(a(t.options.functional))return function(t,e,n,o,a){var s=t.options,l={},u=s.props;if(r(u))for(var c in u)l[c]=Ft(c,u,e||i);else r(n.attrs)&&tn(l,n.attrs),r(n.props)&&tn(l,n.props);var d=new Je(n,l,a,o,t),h=s.render.call(null,d._c,d);if(h instanceof ht)return Qe(h,n,d.parent,s);if(Array.isArray(h)){for(var f=le(h)||[],p=new Array(f.length),g=0;g<f.length;g++)p[g]=Qe(f[g],n,d.parent,s);return p}}(t,h,e,n,s);var f=e.on;if(e.on=e.nativeOn,a(t.options.abstract)){var p=e.slot;e={},p&&(e.slot=p)}!function(t){for(var e=t.hook||(t.hook={}),n=0;n<nn.length;n++){var i=nn[n];e[i]=en[i]}}(e);var g=t.options.name||u;return new ht("vue-component-"+t.cid+(g?"-"+g:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:h,listeners:f,tag:u,children:s},d)}}}var rn=1,an=2;function sn(t,e,n,i,u,c){return(Array.isArray(n)||s(n))&&(u=i,i=n,n=void 0),a(c)&&(u=an),function(t,e,n,i,s){if(r(n)&&r(n.__ob__))return pt();r(n)&&r(n.is)&&(e=n.is);if(!e)return pt();0;Array.isArray(i)&&"function"==typeof i[0]&&((n=n||{}).scopedSlots={default:i[0]},i.length=0);s===an?i=le(i):s===rn&&(i=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(i));var u,c;if("string"==typeof e){var d;c=t.$vnode&&t.$vnode.ns||j.getTagNamespace(e),u=j.isReservedTag(e)?new ht(j.parsePlatformTagName(e),n,i,void 0,void 0,t):r(d=Nt(t.$options,"components",e))?on(d,n,t,i,e):new ht(e,n,i,void 0,void 0,t)}else u=on(e,n,t,i);return Array.isArray(u)?u:r(u)?(r(c)&&function t(e,n,i){e.ns=n;"foreignObject"===e.tag&&(n=void 0,i=!0);if(r(e.children))for(var s=0,l=e.children.length;s<l;s++){var u=e.children[s];r(u.tag)&&(o(u.ns)||a(i)&&"svg"!==u.tag)&&t(u,n,i)}}(u,c),r(n)&&function(t){l(t.style)&&ee(t.style);l(t.class)&&ee(t.class)}(n),u):pt()}(t,e,n,i,u)}var ln=0;function un(t){var e=t.options;if(t.super){var n=un(t.super);if(n!==t.superOptions){t.superOptions=n;var i=function(t){var e,n=t.options,i=t.extendOptions,o=t.sealedOptions;for(var r in n)n[r]!==o[r]&&(e||(e={}),e[r]=cn(n[r],i[r],o[r]));return e}(t);i&&D(t.extendOptions,i),(e=t.options=Rt(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function cn(t,e,n){if(Array.isArray(t)){var i=[];n=Array.isArray(n)?n:[n],e=Array.isArray(e)?e:[e];for(var o=0;o<t.length;o++)(e.indexOf(t[o])>=0||n.indexOf(t[o])<0)&&i.push(t[o]);return i}return t}function dn(t){this._init(t)}function hn(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,i=n.cid,o=t._Ctor||(t._Ctor={});if(o[i])return o[i];var r=t.name||n.options.name;var a=function(t){this._init(t)};return(a.prototype=Object.create(n.prototype)).constructor=a,a.cid=e++,a.options=Rt(n.options,t),a.super=n,a.options.props&&function(t){var e=t.options.props;for(var n in e)Ie(t.prototype,"_props",n)}(a),a.options.computed&&function(t){var e=t.options.computed;for(var n in e)Ne(t.prototype,n,e[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,F.forEach(function(t){a[t]=n[t]}),r&&(a.options.components[r]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=D({},a.options),o[i]=a,a}}function fn(t){return t&&(t.Ctor.options.name||t.tag)}function pn(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!d(t)&&t.test(e)}function gn(t,e){var n=t.cache,i=t.keys,o=t._vnode;for(var r in n){var a=n[r];if(a){var s=fn(a.componentOptions);s&&!e(s)&&mn(n,r,i,o)}}}function mn(t,e,n,i){var o=t[e];!o||i&&o.tag===i.tag||o.componentInstance.$destroy(),t[e]=null,v(n,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=ln++,e._isVue=!0,t&&t._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),i=e._parentVnode;n.parent=e.parent,n._parentVnode=i,n._parentElm=e._parentElm,n._refElm=e._refElm;var o=i.componentOptions;n.propsData=o.propsData,n._parentListeners=o.listeners,n._renderChildren=o.children,n._componentTag=o.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=Rt(un(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&ge(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,o=n&&n.context;t.$slots=me(e._renderChildren,o),t.$scopedSlots=i,t._c=function(e,n,i,o){return sn(t,e,n,i,o,!1)},t.$createElement=function(e,n,i,o){return sn(t,e,n,i,o,!0)};var r=n&&n.data;Lt(t,"$attrs",r&&r.attrs||i,null,!0),Lt(t,"$listeners",e._parentListeners||i,null,!0)}(e),we(e,"beforeCreate"),function(t){var e=je(t.$options.inject,t);e&&(xt(!1),Object.keys(e).forEach(function(n){Lt(t,n,e[n])}),xt(!0))}(e),Oe(e),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(e),we(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(dn),function(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=At,t.prototype.$delete=Dt,t.prototype.$watch=function(t,e,n){if(c(e))return $e(this,t,e,n);(n=n||{}).user=!0;var i=new Ee(this,t,e,n);return n.immediate&&e.call(this,i.value),function(){i.teardown()}}}(dn),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)this.$on(t[i],n);else(this._events[t]||(this._events[t]=[])).push(n),e.test(t)&&(this._hasHookEvent=!0);return this},t.prototype.$once=function(t,e){var n=this;function i(){n.$off(t,i),e.apply(n,arguments)}return i.fn=e,n.$on(t,i),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var i=0,o=t.length;i<o;i++)this.$off(t[i],e);return n}var r=n._events[t];if(!r)return n;if(!e)return n._events[t]=null,n;if(e)for(var a,s=r.length;s--;)if((a=r[s])===e||a.fn===e){r.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this._events[t];if(e){e=e.length>1?A(e):e;for(var n=A(arguments,1),i=0,o=e.length;i<o;i++)try{e[i].apply(this,n)}catch(e){Ut(e,this,'event handler for "'+t+'"')}}return this}}(dn),function(t){t.prototype._update=function(t,e){var n=this;n._isMounted&&we(n,"beforeUpdate");var i=n.$el,o=n._vnode,r=ye;ye=n,n._vnode=t,o?n.$el=n.__patch__(o,t):(n.$el=n.__patch__(n.$el,t,e,!1,n.$options._parentElm,n.$options._refElm),n.$options._parentElm=n.$options._refElm=null),ye=r,i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){we(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||v(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),we(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(dn),function(t){Ke(t.prototype),t.prototype.$nextTick=function(t){return Qt(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,o=n.render,r=n._parentVnode;r&&(e.$scopedSlots=r.data.scopedSlots||i),e.$vnode=r;try{t=o.call(e._renderProxy,e.$createElement)}catch(n){Ut(n,e,"render"),t=e._vnode}return t instanceof ht||(t=pt()),t.parent=r,t}}(dn);var vn=[String,RegExp,Array],_n={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:vn,exclude:vn,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)mn(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",function(e){gn(t,function(t){return pn(e,t)})}),this.$watch("exclude",function(e){gn(t,function(t){return!pn(e,t)})})},render:function(){var t=this.$slots.default,e=he(t),n=e&&e.componentOptions;if(n){var i=fn(n),o=this.include,r=this.exclude;if(o&&(!i||!pn(o,i))||r&&i&&pn(r,i))return e;var a=this.cache,s=this.keys,l=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;a[l]?(e.componentInstance=a[l].componentInstance,v(s,l),s.push(l)):(a[l]=e,s.push(l),this.max&&s.length>parseInt(this.max)&&mn(a,s[0],s,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return j}};Object.defineProperty(t,"config",e),t.util={warn:at,extend:D,mergeOptions:Rt,defineReactive:Lt},t.set=At,t.delete=Dt,t.nextTick=Qt,t.options=Object.create(null),F.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,D(t.options.components,_n),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=A(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Rt(this.options,t),this}}(t),hn(t),function(t){F.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&c(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}(t)}(dn),Object.defineProperty(dn.prototype,"$isServer",{get:et}),Object.defineProperty(dn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(dn,"FunctionalRenderContext",{value:Je}),dn.version="2.5.16";var yn=g("style,class"),bn=g("input,textarea,option,select,progress"),xn=g("contenteditable,draggable,spellcheck"),wn=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Sn="http://www.w3.org/1999/xlink",Tn=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Cn=function(t){return Tn(t)?t.slice(6,t.length):""},Ln=function(t){return null==t||!1===t};function An(t){for(var e=t.data,n=t,i=t;r(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(e=Dn(i.data,e));for(;r(n=n.parent);)n&&n.data&&(e=Dn(e,n.data));return function(t,e){if(r(t)||r(e))return kn(t,Pn(e));return""}(e.staticClass,e.class)}function Dn(t,e){return{staticClass:kn(t.staticClass,e.staticClass),class:r(t.class)?[t.class,e.class]:e.class}}function kn(t,e){return t?e?t+" "+e:t:e||""}function Pn(t){return Array.isArray(t)?function(t){for(var e,n="",i=0,o=t.length;i<o;i++)r(e=Pn(t[i]))&&""!==e&&(n&&(n+=" "),n+=e);return n}(t):l(t)?function(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}(t):"string"==typeof t?t:""}var En={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Mn=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),In=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),On=function(t){return Mn(t)||In(t)};var Rn=Object.create(null);var Nn=g("text,number,password,search,email,tel,url");var Fn=Object.freeze({createElement:function(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)},createElementNS:function(t,e){return document.createElementNS(En[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),$n={create:function(t,e){jn(e)},update:function(t,e){t.data.ref!==e.data.ref&&(jn(t,!0),jn(e))},destroy:function(t){jn(t,!0)}};function jn(t,e){var n=t.data.ref;if(r(n)){var i=t.context,o=t.componentInstance||t.elm,a=i.$refs;e?Array.isArray(a[n])?v(a[n],o):a[n]===o&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}var Bn=new ht("",{},[]),Un=["create","activate","update","remove","destroy"];function zn(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&r(t.data)===r(e.data)&&function(t,e){if("input"!==t.tag)return!0;var n,i=r(n=t.data)&&r(n=n.attrs)&&n.type,o=r(n=e.data)&&r(n=n.attrs)&&n.type;return i===o||Nn(i)&&Nn(o)}(t,e)||a(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&o(e.asyncFactory.error))}function Gn(t,e,n){var i,o,a={};for(i=e;i<=n;++i)r(o=t[i].key)&&(a[o]=i);return a}var Hn={create:Vn,update:Vn,destroy:function(t){Vn(t,Bn)}};function Vn(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n,i,o,r=t===Bn,a=e===Bn,s=Wn(t.data.directives,t.context),l=Wn(e.data.directives,e.context),u=[],c=[];for(n in l)i=s[n],o=l[n],i?(o.oldValue=i.value,Zn(o,"update",e,t),o.def&&o.def.componentUpdated&&c.push(o)):(Zn(o,"bind",e,t),o.def&&o.def.inserted&&u.push(o));if(u.length){var d=function(){for(var n=0;n<u.length;n++)Zn(u[n],"inserted",e,t)};r?ae(e,"insert",d):d()}c.length&&ae(e,"postpatch",function(){for(var n=0;n<c.length;n++)Zn(c[n],"componentUpdated",e,t)});if(!r)for(n in s)l[n]||Zn(s[n],"unbind",t,t,a)}(t,e)}var qn=Object.create(null);function Wn(t,e){var n,i,o=Object.create(null);if(!t)return o;for(n=0;n<t.length;n++)(i=t[n]).modifiers||(i.modifiers=qn),o[Xn(i)]=i,i.def=Nt(e.$options,"directives",i.name);return o}function Xn(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Zn(t,e,n,i,o){var r=t.def&&t.def[e];if(r)try{r(n.elm,t,n,i,o)}catch(i){Ut(i,n.context,"directive "+t.name+" "+e+" hook")}}var Yn=[$n,Hn];function Kn(t,e){var n=e.componentOptions;if(!(r(n)&&!1===n.Ctor.options.inheritAttrs||o(t.data.attrs)&&o(e.data.attrs))){var i,a,s=e.elm,l=t.data.attrs||{},u=e.data.attrs||{};for(i in r(u.__ob__)&&(u=e.data.attrs=D({},u)),u)a=u[i],l[i]!==a&&Jn(s,i,a);for(i in(X||Y)&&u.value!==l.value&&Jn(s,"value",u.value),l)o(u[i])&&(Tn(i)?s.removeAttributeNS(Sn,Cn(i)):xn(i)||s.removeAttribute(i))}}function Jn(t,e,n){t.tagName.indexOf("-")>-1?Qn(t,e,n):wn(e)?Ln(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):xn(e)?t.setAttribute(e,Ln(n)||"false"===n?"false":"true"):Tn(e)?Ln(n)?t.removeAttributeNS(Sn,Cn(e)):t.setAttributeNS(Sn,e,n):Qn(t,e,n)}function Qn(t,e,n){if(Ln(n))t.removeAttribute(e);else{if(X&&!Z&&"TEXTAREA"===t.tagName&&"placeholder"===e&&!t.__ieph){var i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)};t.addEventListener("input",i),t.__ieph=!0}t.setAttribute(e,n)}}var ti={create:Kn,update:Kn};function ei(t,e){var n=e.elm,i=e.data,a=t.data;if(!(o(i.staticClass)&&o(i.class)&&(o(a)||o(a.staticClass)&&o(a.class)))){var s=An(e),l=n._transitionClasses;r(l)&&(s=kn(s,Pn(l))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var ni,ii={create:ei,update:ei},oi="__r",ri="__c";function ai(t,e,n,i,o){var r;e=(r=e)._withTask||(r._withTask=function(){Zt=!0;var t=r.apply(null,arguments);return Zt=!1,t}),n&&(e=function(t,e,n){var i=ni;return function o(){null!==t.apply(null,arguments)&&si(e,o,n,i)}}(e,t,i)),ni.addEventListener(t,e,Q?{capture:i,passive:o}:i)}function si(t,e,n,i){(i||ni).removeEventListener(t,e._withTask||e,n)}function li(t,e){if(!o(t.data.on)||!o(e.data.on)){var n=e.data.on||{},i=t.data.on||{};ni=e.elm,function(t){if(r(t[oi])){var e=X?"change":"input";t[e]=[].concat(t[oi],t[e]||[]),delete t[oi]}r(t[ri])&&(t.change=[].concat(t[ri],t.change||[]),delete t[ri])}(n),re(n,i,ai,si,e.context),ni=void 0}}var ui={create:li,update:li};function ci(t,e){if(!o(t.data.domProps)||!o(e.data.domProps)){var n,i,a=e.elm,s=t.data.domProps||{},l=e.data.domProps||{};for(n in r(l.__ob__)&&(l=e.data.domProps=D({},l)),s)o(l[n])&&(a[n]="");for(n in l){if(i=l[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),i===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n){a._value=i;var u=o(i)?"":String(i);di(a,u)&&(a.value=u)}else a[n]=i}}}function di(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,e)||function(t,e){var n=t.value,i=t._vModifiers;if(r(i)){if(i.lazy)return!1;if(i.number)return p(n)!==p(e);if(i.trim)return n.trim()!==e.trim()}return n!==e}(t,e))}var hi={create:ci,update:ci},fi=b(function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach(function(t){if(t){var i=t.split(n);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e});function pi(t){var e=gi(t.style);return t.staticStyle?D(t.staticStyle,e):e}function gi(t){return Array.isArray(t)?k(t):"string"==typeof t?fi(t):t}var mi,vi=/^--/,_i=/\s*!important$/,yi=function(t,e,n){if(vi.test(e))t.style.setProperty(e,n);else if(_i.test(n))t.style.setProperty(e,n.replace(_i,""),"important");else{var i=xi(e);if(Array.isArray(n))for(var o=0,r=n.length;o<r;o++)t.style[i]=n[o];else t.style[i]=n}},bi=["Webkit","Moz","ms"],xi=b(function(t){if(mi=mi||document.createElement("div").style,"filter"!==(t=w(t))&&t in mi)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<bi.length;n++){var i=bi[n]+e;if(i in mi)return i}});function wi(t,e){var n=e.data,i=t.data;if(!(o(n.staticStyle)&&o(n.style)&&o(i.staticStyle)&&o(i.style))){var a,s,l=e.elm,u=i.staticStyle,c=i.normalizedStyle||i.style||{},d=u||c,h=gi(e.data.style)||{};e.data.normalizedStyle=r(h.__ob__)?D({},h):h;var f=function(t,e){var n,i={};if(e)for(var o=t;o.componentInstance;)(o=o.componentInstance._vnode)&&o.data&&(n=pi(o.data))&&D(i,n);(n=pi(t.data))&&D(i,n);for(var r=t;r=r.parent;)r.data&&(n=pi(r.data))&&D(i,n);return i}(e,!0);for(s in d)o(f[s])&&yi(l,s,"");for(s in f)(a=f[s])!==d[s]&&yi(l,s,null==a?"":a)}}var Si={create:wi,update:wi};function Ti(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Ci(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function Li(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&D(e,Ai(t.name||"v")),D(e,t),e}return"string"==typeof t?Ai(t):void 0}}var Ai=b(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),Di=H&&!Z,ki="transition",Pi="animation",Ei="transition",Mi="transitionend",Ii="animation",Oi="animationend";Di&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ei="WebkitTransition",Mi="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Ii="WebkitAnimation",Oi="webkitAnimationEnd"));var Ri=H?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Ni(t){Ri(function(){Ri(t)})}function Fi(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Ti(t,e))}function $i(t,e){t._transitionClasses&&v(t._transitionClasses,e),Ci(t,e)}function ji(t,e,n){var i=Ui(t,e),o=i.type,r=i.timeout,a=i.propCount;if(!o)return n();var s=o===ki?Mi:Oi,l=0,u=function(){t.removeEventListener(s,c),n()},c=function(e){e.target===t&&++l>=a&&u()};setTimeout(function(){l<a&&u()},r+1),t.addEventListener(s,c)}var Bi=/\b(transform|all)(,|$)/;function Ui(t,e){var n,i=window.getComputedStyle(t),o=i[Ei+"Delay"].split(", "),r=i[Ei+"Duration"].split(", "),a=zi(o,r),s=i[Ii+"Delay"].split(", "),l=i[Ii+"Duration"].split(", "),u=zi(s,l),c=0,d=0;return e===ki?a>0&&(n=ki,c=a,d=r.length):e===Pi?u>0&&(n=Pi,c=u,d=l.length):d=(n=(c=Math.max(a,u))>0?a>u?ki:Pi:null)?n===ki?r.length:l.length:0,{type:n,timeout:c,propCount:d,hasTransform:n===ki&&Bi.test(i[Ei+"Property"])}}function zi(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return Gi(e)+Gi(t[n])}))}function Gi(t){return 1e3*Number(t.slice(0,-1))}function Hi(t,e){var n=t.elm;r(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var i=Li(t.data.transition);if(!o(i)&&!r(n._enterCb)&&1===n.nodeType){for(var a=i.css,s=i.type,u=i.enterClass,c=i.enterToClass,d=i.enterActiveClass,h=i.appearClass,f=i.appearToClass,g=i.appearActiveClass,m=i.beforeEnter,v=i.enter,_=i.afterEnter,y=i.enterCancelled,b=i.beforeAppear,x=i.appear,w=i.afterAppear,S=i.appearCancelled,T=i.duration,C=ye,L=ye.$vnode;L&&L.parent;)C=(L=L.parent).context;var A=!C._isMounted||!t.isRootInsert;if(!A||x||""===x){var D=A&&h?h:u,k=A&&g?g:d,P=A&&f?f:c,E=A&&b||m,M=A&&"function"==typeof x?x:v,I=A&&w||_,O=A&&S||y,N=p(l(T)?T.enter:T);0;var F=!1!==a&&!Z,$=Wi(M),j=n._enterCb=R(function(){F&&($i(n,P),$i(n,k)),j.cancelled?(F&&$i(n,D),O&&O(n)):I&&I(n),n._enterCb=null});t.data.show||ae(t,"insert",function(){var e=n.parentNode,i=e&&e._pending&&e._pending[t.key];i&&i.tag===t.tag&&i.elm._leaveCb&&i.elm._leaveCb(),M&&M(n,j)}),E&&E(n),F&&(Fi(n,D),Fi(n,k),Ni(function(){$i(n,D),j.cancelled||(Fi(n,P),$||(qi(N)?setTimeout(j,N):ji(n,s,j)))})),t.data.show&&(e&&e(),M&&M(n,j)),F||$||j()}}}function Vi(t,e){var n=t.elm;r(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var i=Li(t.data.transition);if(o(i)||1!==n.nodeType)return e();if(!r(n._leaveCb)){var a=i.css,s=i.type,u=i.leaveClass,c=i.leaveToClass,d=i.leaveActiveClass,h=i.beforeLeave,f=i.leave,g=i.afterLeave,m=i.leaveCancelled,v=i.delayLeave,_=i.duration,y=!1!==a&&!Z,b=Wi(f),x=p(l(_)?_.leave:_);0;var w=n._leaveCb=R(function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),y&&($i(n,c),$i(n,d)),w.cancelled?(y&&$i(n,u),m&&m(n)):(e(),g&&g(n)),n._leaveCb=null});v?v(S):S()}function S(){w.cancelled||(t.data.show||((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),h&&h(n),y&&(Fi(n,u),Fi(n,d),Ni(function(){$i(n,u),w.cancelled||(Fi(n,c),b||(qi(x)?setTimeout(w,x):ji(n,s,w)))})),f&&f(n,w),y||b||w())}}function qi(t){return"number"==typeof t&&!isNaN(t)}function Wi(t){if(o(t))return!1;var e=t.fns;return r(e)?Wi(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Xi(t,e){!0!==e.data.show&&Hi(e)}var Zi=function(t){var e,n,i={},l=t.modules,u=t.nodeOps;for(e=0;e<Un.length;++e)for(i[Un[e]]=[],n=0;n<l.length;++n)r(l[n][Un[e]])&&i[Un[e]].push(l[n][Un[e]]);function c(t){var e=u.parentNode(t);r(e)&&u.removeChild(e,t)}function d(t,e,n,o,s,l,c){if(r(t.elm)&&r(l)&&(t=l[c]=mt(t)),t.isRootInsert=!s,!function(t,e,n,o){var s=t.data;if(r(s)){var l=r(t.componentInstance)&&s.keepAlive;if(r(s=s.hook)&&r(s=s.init)&&s(t,!1,n,o),r(t.componentInstance))return h(t,e),a(l)&&function(t,e,n,o){for(var a,s=t;s.componentInstance;)if(s=s.componentInstance._vnode,r(a=s.data)&&r(a=a.transition)){for(a=0;a<i.activate.length;++a)i.activate[a](Bn,s);e.push(s);break}f(n,t.elm,o)}(t,e,n,o),!0}}(t,e,n,o)){var d=t.data,g=t.children,m=t.tag;r(m)?(t.elm=t.ns?u.createElementNS(t.ns,m):u.createElement(m,t),_(t),p(t,g,e),r(d)&&v(t,e),f(n,t.elm,o)):a(t.isComment)?(t.elm=u.createComment(t.text),f(n,t.elm,o)):(t.elm=u.createTextNode(t.text),f(n,t.elm,o))}}function h(t,e){r(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,m(t)?(v(t,e),_(t)):(jn(t),e.push(t))}function f(t,e,n){r(t)&&(r(n)?n.parentNode===t&&u.insertBefore(t,e,n):u.appendChild(t,e))}function p(t,e,n){if(Array.isArray(e))for(var i=0;i<e.length;++i)d(e[i],n,t.elm,null,!0,e,i);else s(t.text)&&u.appendChild(t.elm,u.createTextNode(String(t.text)))}function m(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return r(t.tag)}function v(t,n){for(var o=0;o<i.create.length;++o)i.create[o](Bn,t);r(e=t.data.hook)&&(r(e.create)&&e.create(Bn,t),r(e.insert)&&n.push(t))}function _(t){var e;if(r(e=t.fnScopeId))u.setStyleScope(t.elm,e);else for(var n=t;n;)r(e=n.context)&&r(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e),n=n.parent;r(e=ye)&&e!==t.context&&e!==t.fnContext&&r(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e)}function y(t,e,n,i,o,r){for(;i<=o;++i)d(n[i],r,t,e,!1,n,i)}function b(t){var e,n,o=t.data;if(r(o))for(r(e=o.hook)&&r(e=e.destroy)&&e(t),e=0;e<i.destroy.length;++e)i.destroy[e](t);if(r(e=t.children))for(n=0;n<t.children.length;++n)b(t.children[n])}function x(t,e,n,i){for(;n<=i;++n){var o=e[n];r(o)&&(r(o.tag)?(w(o),b(o)):c(o.elm))}}function w(t,e){if(r(e)||r(t.data)){var n,o=i.remove.length+1;for(r(e)?e.listeners+=o:e=function(t,e){function n(){0==--n.listeners&&c(t)}return n.listeners=e,n}(t.elm,o),r(n=t.componentInstance)&&r(n=n._vnode)&&r(n.data)&&w(n,e),n=0;n<i.remove.length;++n)i.remove[n](t,e);r(n=t.data.hook)&&r(n=n.remove)?n(t,e):e()}else c(t.elm)}function S(t,e,n,i){for(var o=n;o<i;o++){var a=e[o];if(r(a)&&zn(t,a))return o}}function T(t,e,n,s){if(t!==e){var l=e.elm=t.elm;if(a(t.isAsyncPlaceholder))r(e.asyncFactory.resolved)?A(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(a(e.isStatic)&&a(t.isStatic)&&e.key===t.key&&(a(e.isCloned)||a(e.isOnce)))e.componentInstance=t.componentInstance;else{var c,h=e.data;r(h)&&r(c=h.hook)&&r(c=c.prepatch)&&c(t,e);var f=t.children,p=e.children;if(r(h)&&m(e)){for(c=0;c<i.update.length;++c)i.update[c](t,e);r(c=h.hook)&&r(c=c.update)&&c(t,e)}o(e.text)?r(f)&&r(p)?f!==p&&function(t,e,n,i,a){for(var s,l,c,h=0,f=0,p=e.length-1,g=e[0],m=e[p],v=n.length-1,_=n[0],b=n[v],w=!a;h<=p&&f<=v;)o(g)?g=e[++h]:o(m)?m=e[--p]:zn(g,_)?(T(g,_,i),g=e[++h],_=n[++f]):zn(m,b)?(T(m,b,i),m=e[--p],b=n[--v]):zn(g,b)?(T(g,b,i),w&&u.insertBefore(t,g.elm,u.nextSibling(m.elm)),g=e[++h],b=n[--v]):zn(m,_)?(T(m,_,i),w&&u.insertBefore(t,m.elm,g.elm),m=e[--p],_=n[++f]):(o(s)&&(s=Gn(e,h,p)),o(l=r(_.key)?s[_.key]:S(_,e,h,p))?d(_,i,t,g.elm,!1,n,f):zn(c=e[l],_)?(T(c,_,i),e[l]=void 0,w&&u.insertBefore(t,c.elm,g.elm)):d(_,i,t,g.elm,!1,n,f),_=n[++f]);h>p?y(t,o(n[v+1])?null:n[v+1].elm,n,f,v,i):f>v&&x(0,e,h,p)}(l,f,p,n,s):r(p)?(r(t.text)&&u.setTextContent(l,""),y(l,null,p,0,p.length-1,n)):r(f)?x(0,f,0,f.length-1):r(t.text)&&u.setTextContent(l,""):t.text!==e.text&&u.setTextContent(l,e.text),r(h)&&r(c=h.hook)&&r(c=c.postpatch)&&c(t,e)}}}function C(t,e,n){if(a(n)&&r(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}var L=g("attrs,class,staticClass,staticStyle,key");function A(t,e,n,i){var o,s=e.tag,l=e.data,u=e.children;if(i=i||l&&l.pre,e.elm=t,a(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(r(l)&&(r(o=l.hook)&&r(o=o.init)&&o(e,!0),r(o=e.componentInstance)))return h(e,n),!0;if(r(s)){if(r(u))if(t.hasChildNodes())if(r(o=l)&&r(o=o.domProps)&&r(o=o.innerHTML)){if(o!==t.innerHTML)return!1}else{for(var c=!0,d=t.firstChild,f=0;f<u.length;f++){if(!d||!A(d,u[f],n,i)){c=!1;break}d=d.nextSibling}if(!c||d)return!1}else p(e,u,n);if(r(l)){var g=!1;for(var m in l)if(!L(m)){g=!0,v(e,n);break}!g&&l.class&&ee(l.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,s,l,c){if(!o(e)){var h,f=!1,p=[];if(o(t))f=!0,d(e,p,l,c);else{var g=r(t.nodeType);if(!g&&zn(t,e))T(t,e,p,s);else{if(g){if(1===t.nodeType&&t.hasAttribute(N)&&(t.removeAttribute(N),n=!0),a(n)&&A(t,e,p))return C(e,p,!0),t;h=t,t=new ht(u.tagName(h).toLowerCase(),{},[],void 0,h)}var v=t.elm,_=u.parentNode(v);if(d(e,p,v._leaveCb?null:_,u.nextSibling(v)),r(e.parent))for(var y=e.parent,w=m(e);y;){for(var S=0;S<i.destroy.length;++S)i.destroy[S](y);if(y.elm=e.elm,w){for(var L=0;L<i.create.length;++L)i.create[L](Bn,y);var D=y.data.hook.insert;if(D.merged)for(var k=1;k<D.fns.length;k++)D.fns[k]()}else jn(y);y=y.parent}r(_)?x(0,[t],0,0):r(t.tag)&&b(t)}}return C(e,p,f),e.elm}r(t)&&b(t)}}({nodeOps:Fn,modules:[ti,ii,ui,hi,Si,H?{create:Xi,activate:Xi,remove:function(t,e){!0!==t.data.show?Vi(t,e):e()}}:{}].concat(Yn)});Z&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&io(t,"input")});var Yi={inserted:function(t,e,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?ae(n,"postpatch",function(){Yi.componentUpdated(t,e,n)}):Ki(t,e,n.context),t._vOptions=[].map.call(t.options,to)):("textarea"===n.tag||Nn(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",eo),t.addEventListener("compositionend",no),t.addEventListener("change",no),Z&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Ki(t,e,n.context);var i=t._vOptions,o=t._vOptions=[].map.call(t.options,to);if(o.some(function(t,e){return!I(t,i[e])}))(t.multiple?e.value.some(function(t){return Qi(t,o)}):e.value!==e.oldValue&&Qi(e.value,o))&&io(t,"change")}}};function Ki(t,e,n){Ji(t,e,n),(X||Y)&&setTimeout(function(){Ji(t,e,n)},0)}function Ji(t,e,n){var i=e.value,o=t.multiple;if(!o||Array.isArray(i)){for(var r,a,s=0,l=t.options.length;s<l;s++)if(a=t.options[s],o)r=O(i,to(a))>-1,a.selected!==r&&(a.selected=r);else if(I(to(a),i))return void(t.selectedIndex!==s&&(t.selectedIndex=s));o||(t.selectedIndex=-1)}}function Qi(t,e){return e.every(function(e){return!I(e,t)})}function to(t){return"_value"in t?t._value:t.value}function eo(t){t.target.composing=!0}function no(t){t.target.composing&&(t.target.composing=!1,io(t.target,"input"))}function io(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function oo(t){return!t.componentInstance||t.data&&t.data.transition?t:oo(t.componentInstance._vnode)}var ro={model:Yi,show:{bind:function(t,e,n){var i=e.value,o=(n=oo(n)).data&&n.data.transition,r=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;i&&o?(n.data.show=!0,Hi(n,function(){t.style.display=r})):t.style.display=i?r:"none"},update:function(t,e,n){var i=e.value;!i!=!e.oldValue&&((n=oo(n)).data&&n.data.transition?(n.data.show=!0,i?Hi(n,function(){t.style.display=t.__vOriginalDisplay}):Vi(n,function(){t.style.display="none"})):t.style.display=i?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,i,o){o||(t.style.display=t.__vOriginalDisplay)}}},ao={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function so(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?so(he(e.children)):t}function lo(t){var e={},n=t.$options;for(var i in n.propsData)e[i]=t[i];var o=n._parentListeners;for(var r in o)e[w(r)]=o[r];return e}function uo(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var co={name:"transition",props:ao,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(function(t){return t.tag||de(t)})).length){0;var i=this.mode;0;var o=n[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return o;var r=so(o);if(!r)return o;if(this._leaving)return uo(t,o);var a="__transition-"+this._uid+"-";r.key=null==r.key?r.isComment?a+"comment":a+r.tag:s(r.key)?0===String(r.key).indexOf(a)?r.key:a+r.key:r.key;var l=(r.data||(r.data={})).transition=lo(this),u=this._vnode,c=so(u);if(r.data.directives&&r.data.directives.some(function(t){return"show"===t.name})&&(r.data.show=!0),c&&c.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(r,c)&&!de(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var d=c.data.transition=D({},l);if("out-in"===i)return this._leaving=!0,ae(d,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),uo(t,o);if("in-out"===i){if(de(r))return u;var h,f=function(){h()};ae(l,"afterEnter",f),ae(l,"enterCancelled",f),ae(d,"delayLeave",function(t){h=t})}}return o}}},ho=D({tag:String,moveClass:String},ao);function fo(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function po(t){t.data.newPos=t.elm.getBoundingClientRect()}function go(t){var e=t.data.pos,n=t.data.newPos,i=e.left-n.left,o=e.top-n.top;if(i||o){t.data.moved=!0;var r=t.elm.style;r.transform=r.WebkitTransform="translate("+i+"px,"+o+"px)",r.transitionDuration="0s"}}delete ho.mode;var mo={Transition:co,TransitionGroup:{props:ho,render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,o=this.$slots.default||[],r=this.children=[],a=lo(this),s=0;s<o.length;s++){var l=o[s];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))r.push(l),n[l.key]=l,(l.data||(l.data={})).transition=a;else;}if(i){for(var u=[],c=[],d=0;d<i.length;d++){var h=i[d];h.data.transition=a,h.data.pos=h.elm.getBoundingClientRect(),n[h.key]?u.push(h):c.push(h)}this.kept=t(e,null,u),this.removed=c}return t(e,null,r)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(fo),t.forEach(po),t.forEach(go),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,i=n.style;Fi(n,e),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(Mi,n._moveCb=function t(i){i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(Mi,t),n._moveCb=null,$i(n,e))})}}))},methods:{hasMove:function(t,e){if(!Di)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){Ci(n,t)}),Ti(n,e),n.style.display="none",this.$el.appendChild(n);var i=Ui(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}}};dn.config.mustUseProp=function(t,e,n){return"value"===n&&bn(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},dn.config.isReservedTag=On,dn.config.isReservedAttr=yn,dn.config.getTagNamespace=function(t){return In(t)?"svg":"math"===t?"math":void 0},dn.config.isUnknownElement=function(t){if(!H)return!0;if(On(t))return!1;if(t=t.toLowerCase(),null!=Rn[t])return Rn[t];var e=document.createElement(t);return t.indexOf("-")>-1?Rn[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Rn[t]=/HTMLUnknownElement/.test(e.toString())},D(dn.options.directives,ro),D(dn.options.components,mo),dn.prototype.__patch__=H?Zi:P,dn.prototype.$mount=function(t,e){return function(t,e,n){return t.$el=e,t.$options.render||(t.$options.render=pt),we(t,"beforeMount"),new Ee(t,function(){t._update(t._render(),n)},P,null,!0),n=!1,null==t.$vnode&&(t._isMounted=!0,we(t,"mounted")),t}(this,t=t&&H?function(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}(t):void 0,e)},H&&setTimeout(function(){j.devtools&&nt&&nt.emit("init",dn)},0),e.default=dn}.call(this,n(5),n(44).setImmediate)},function(t,e,n){
/* @license C3.js v0.4.23 | (c) C3 Team and other contributors | http://c3js.org/ */
t.exports=function(){"use strict";var t,e,i={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},s=function(t){return t||0===t},l=function(t){return"function"==typeof t},u=function(t){return Array.isArray(t)},c=function(t){return"string"==typeof t},d=function(t){return void 0===t},h=function(t){return void 0!==t},f=function(t){return 10*Math.ceil(t/10)},p=function(t){return Math.ceil(t)+.5},g=function(t){return t[1]-t[0]},m=function(t){return void 0===t||null===t||c(t)&&0===t.length||"object"===(void 0===t?"undefined":o(t))&&0===Object.keys(t).length},v=function(t){return!C.isEmpty(t)},_=function(t,e,n){return h(t[e])?t[e]:n},y=function(t,e){var n=!1;return Object.keys(t).forEach(function(i){t[i]===e&&(n=!0)}),n},b=function(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},x=function(t){var e=t.getBoundingClientRect(),n=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)],i=n[0].x,o=Math.min(n[0].y,n[1].y);return{x:i,y:o,width:e.width,height:e.height}};function w(t,e){this.component=t,this.params=e||{},this.d3=t.d3,this.scale=this.d3.scale.linear(),this.range,this.orient="bottom",this.innerTickSize=6,this.outerTickSize=this.params.withOuterTick?6:0,this.tickPadding=3,this.tickValues=null,this.tickFormat,this.tickArguments,this.tickOffset=0,this.tickCulling=!0,this.tickCentered,this.tickTextCharSize,this.tickTextRotate=this.params.tickTextRotate,this.tickLength,this.axis=this.generateAxis()}(e=w.prototype).axisX=function(t,e,n){t.attr("transform",function(t){return"translate("+Math.ceil(e(t)+n)+", 0)"})},e.axisY=function(t,e){t.attr("transform",function(t){return"translate(0,"+Math.ceil(e(t))+")"})},e.scaleExtent=function(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]},e.generateTicks=function(t){var e,n,i=[];if(t.ticks)return t.ticks.apply(t,this.tickArguments);for(n=t.domain(),e=Math.ceil(n[0]);e<n[1];e++)i.push(e);return i.length>0&&i[0]>0&&i.unshift(i[0]-(i[1]-i[0])),i},e.copyScale=function(){var t,e=this.scale.copy();return this.params.isCategory&&(t=this.scale.domain(),e.domain([t[0],t[1]-1])),e},e.textFormatted=function(t){var e=this.tickFormat?this.tickFormat(t):t;return void 0!==e?e:""},e.updateRange=function(){return this.range=this.scale.rangeExtent?this.scale.rangeExtent():this.scaleExtent(this.scale.range()),this.range},e.updateTickTextCharSize=function(t){var e=this;if(e.tickTextCharSize)return e.tickTextCharSize;var n={h:11.5,w:5.5};return t.select("text").text(function(t){return e.textFormatted(t)}).each(function(t){var i=this.getBoundingClientRect(),o=e.textFormatted(t),r=i.height,a=o?i.width/o.length:void 0;r&&a&&(n.h=r,n.w=a)}).text(""),e.tickTextCharSize=n,n},e.transitionise=function(t){return this.params.withoutTransition?t:this.d3.transition(t)},e.isVertical=function(){return"left"===this.orient||"right"===this.orient},e.tspanData=function(t,e,n,i){var o=this.params.tickMultiline?this.splitTickText(t,n,i):[].concat(this.textFormatted(t));return this.params.tickMultiline&&this.params.tickMultilineMax>0&&(o=this.ellipsify(o,this.params.tickMultilineMax)),o.map(function(t){return{index:e,splitted:t,length:o.length}})},e.splitTickText=function(t,e,n){var i,o,r,a=this,s=a.textFormatted(t),l=a.params.tickWidth;return"[object Array]"===Object.prototype.toString.call(s)?s:((!l||l<=0)&&(l=a.isVertical()?95:a.params.isCategory?Math.ceil(n(e[1])-n(e[0]))-12:110),function t(e,n){o=void 0;for(var s=1;s<n.length;s++)if(" "===n.charAt(s)&&(o=s),i=n.substr(0,s+1),r=a.tickTextCharSize.w*i.length,l<r)return t(e.concat(n.substr(0,o||s)),n.slice(o?o+1:s));return e.concat(n)}([],s+""))},e.ellipsify=function(t,e){if(t.length<=e)return t;for(var n=t.slice(0,e),i=3,o=e-1;o>=0;o--){var r=n[o].length;if(n[o]=n[o].substr(0,r-i).padEnd(r,"."),(i-=r)<=0)break}return n},e.updateTickLength=function(){this.tickLength=Math.max(this.innerTickSize,0)+this.tickPadding},e.lineY2=function(t){var e=this.scale(t)+(this.tickCentered?0:this.tickOffset);return this.range[0]<e&&e<this.range[1]?this.innerTickSize:0},e.textY=function(){var t=this.tickTextRotate;return t?11.5-t/15*2.5*(t>0?1:-1):this.tickLength},e.textTransform=function(){var t=this.tickTextRotate;return t?"rotate("+t+")":""},e.textTextAnchor=function(){var t=this.tickTextRotate;return t?t>0?"start":"end":"middle"},e.tspanDx=function(){var t=this.tickTextRotate;return t?8*Math.sin(Math.PI*(t/180)):0},e.tspanDy=function(t,e){var n=this.tickTextCharSize.h;return 0===e&&(n=this.isVertical()?-((t.length-1)*(this.tickTextCharSize.h/2)-3):".71em"),n},e.generateAxis=function(){var t=this,e=t.d3,n=t.params;function i(o){o.each(function(){var o,r,a,s=i.g=e.select(this),l=this.__chart__||t.scale,u=this.__chart__=t.copyScale(),c=t.tickValues?t.tickValues:t.generateTicks(u),d=s.selectAll(".tick").data(c,u),h=d.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),f=d.exit().remove(),p=t.transitionise(d).style("opacity",1);n.isCategory?(t.tickOffset=Math.ceil((u(1)-u(0))/2),r=t.tickCentered?0:t.tickOffset,a=t.tickCentered?t.tickOffset:0):t.tickOffset=r=0,h.append("line"),h.append("text"),t.updateRange(),t.updateTickLength(),t.updateTickTextCharSize(s.select(".tick"));var g=p.select("line"),m=p.select("text"),v=d.select("text").selectAll("tspan").data(function(e,n){return t.tspanData(e,n,c,u)});v.enter().append("tspan"),v.exit().remove(),v.text(function(t){return t.splitted});var _=s.selectAll(".domain").data([0]),y=(_.enter().append("path").attr("class","domain"),t.transitionise(_));switch(t.orient){case"bottom":o=t.axisX,g.attr("x1",r).attr("x2",r).attr("y2",function(e,n){return t.lineY2(e,n)}),m.attr("x",0).attr("y",function(e,n){return t.textY(e,n)}).attr("transform",function(e,n){return t.textTransform(e,n)}).style("text-anchor",function(e,n){return t.textTextAnchor(e,n)}),v.attr("x",0).attr("dy",function(e,n){return t.tspanDy(e,n)}).attr("dx",function(e,n){return t.tspanDx(e,n)}),y.attr("d","M"+t.range[0]+","+t.outerTickSize+"V0H"+t.range[1]+"V"+t.outerTickSize);break;case"top":o=t.axisX,g.attr("x1",r).attr("x2",r).attr("y2",function(e,n){return-1*t.lineY2(e,n)}),m.attr("x",0).attr("y",function(e,i){return-1*t.textY(e,i)-(n.isCategory?2:t.tickLength-2)}).attr("transform",function(e,n){return t.textTransform(e,n)}).style("text-anchor",function(e,n){return t.textTextAnchor(e,n)}),v.attr("x",0).attr("dy",function(e,n){return t.tspanDy(e,n)}).attr("dx",function(e,n){return t.tspanDx(e,n)}),y.attr("d","M"+t.range[0]+","+-t.outerTickSize+"V0H"+t.range[1]+"V"+-t.outerTickSize);break;case"left":o=t.axisY,g.attr("x2",-t.innerTickSize).attr("y1",a).attr("y2",a),m.attr("x",-t.tickLength).attr("y",t.tickOffset).style("text-anchor","end"),v.attr("x",-t.tickLength).attr("dy",function(e,n){return t.tspanDy(e,n)}),y.attr("d","M"+-t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+-t.outerTickSize);break;case"right":o=t.axisY,g.attr("x2",t.innerTickSize).attr("y1",a).attr("y2",a),m.attr("x",t.tickLength).attr("y",t.tickOffset).style("text-anchor","start"),v.attr("x",t.tickLength).attr("dy",function(e,n){return t.tspanDy(e,n)}),y.attr("d","M"+t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+t.outerTickSize)}if(u.rangeBand){var b=u,x=b.rangeBand()/2;l=u=function(t){return b(t)+x}}else l.rangeBand?l=u:f.call(o,u,t.tickOffset);h.call(o,l,t.tickOffset),p.call(o,u,t.tickOffset)})}return i.scale=function(e){return arguments.length?(t.scale=e,i):t.scale},i.orient=function(e){return arguments.length?(t.orient=e in{top:1,right:1,bottom:1,left:1}?e+"":"bottom",i):t.orient},i.tickFormat=function(e){return arguments.length?(t.tickFormat=e,i):t.tickFormat},i.tickCentered=function(e){return arguments.length?(t.tickCentered=e,i):t.tickCentered},i.tickOffset=function(){return t.tickOffset},i.tickInterval=function(){var e,o;return n.isCategory?e=2*t.tickOffset:(o=i.g.select("path.domain").node().getTotalLength()-2*t.outerTickSize,e=o/i.g.selectAll("line").size()),e===1/0?0:e},i.ticks=function(){return arguments.length?(t.tickArguments=arguments,i):t.tickArguments},i.tickCulling=function(e){return arguments.length?(t.tickCulling=e,i):t.tickCulling},i.tickValues=function(e){if("function"==typeof e)t.tickValues=function(){return e(t.scale.domain())};else{if(!arguments.length)return t.tickValues;t.tickValues=e}return i},i};var S=function(n){function i(n){r(this,i);var o={fn:t,internal:{fn:e}},s=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,"axis",o));return s.d3=n.d3,s.internal=w,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,n),i}(function(t,e,n){this.owner=t,L.chart.internal[e]=n});(t=S.prototype).init=function(){var t=this.owner,e=t.config,n=t.main;t.axes.x=n.append("g").attr("class",i.axis+" "+i.axisX).attr("clip-path",e.axis_x_inner?"":t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",i.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=n.append("g").attr("class",i.axis+" "+i.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",i.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=n.append("g").attr("class",i.axis+" "+i.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",i.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},t.getXAxis=function(t,e,n,i,o,r,a){var s=this.owner,l=s.config,u={isCategory:s.isCategorized(),withOuterTick:o,tickMultiline:l.axis_x_tick_multiline,tickMultilineMax:l.axis_x_tick_multiline?Number(l.axis_x_tick_multilineMax):0,tickWidth:l.axis_x_tick_width,tickTextRotate:a?0:l.axis_x_tick_rotate,withoutTransition:r},c=new this.internal(this,u).axis.scale(t).orient(e);return s.isTimeSeries()&&i&&"function"!=typeof i&&(i=i.map(function(t){return s.parseDate(t)})),c.tickFormat(n).tickValues(i),s.isCategorized()&&(c.tickCentered(l.axis_x_tick_centered),m(l.axis_x_tick_culling)&&(l.axis_x_tick_culling=!1)),c},t.updateXAxisTickValues=function(t,e){var n,i=this.owner,o=i.config;return(o.axis_x_tick_fit||o.axis_x_tick_count)&&(n=this.generateTickValues(i.mapTargetsToUniqueXs(t),o.axis_x_tick_count,i.isTimeSeries())),e?e.tickValues(n):(i.xAxis.tickValues(n),i.subXAxis.tickValues(n)),n},t.getYAxis=function(t,e,n,i,o,r,a){var s=this.owner,l=s.config,u={withOuterTick:o,withoutTransition:r,tickTextRotate:a?0:l.axis_y_tick_rotate},c=new this.internal(this,u).axis.scale(t).orient(e).tickFormat(n);return s.isTimeSeriesY()?c.ticks(s.d3.time[l.axis_y_tick_time_value],l.axis_y_tick_time_interval):c.tickValues(i),c},t.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},t.getXAxisTickFormat=function(){var t=this.owner,e=t.config,n=t.isTimeSeries()?t.defaultAxisTimeFormat:t.isCategorized()?t.categoryName:function(t){return t<0?t.toFixed(0):t};return e.axis_x_tick_format&&(l(e.axis_x_tick_format)?n=e.axis_x_tick_format:t.isTimeSeries()&&(n=function(n){return n?t.axisTimeFormat(e.axis_x_tick_format)(n):""})),l(n)?function(e){return n.call(t,e)}:n},t.getTickValues=function(t,e){return t||(e?e.tickValues():void 0)},t.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},t.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},t.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},t.getLabelOptionByAxisId=function(t){var e,n=this.owner,i=n.config;return"y"===t?e=i.axis_y_label:"y2"===t?e=i.axis_y2_label:"x"===t&&(e=i.axis_x_label),e},t.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return c(e)?e:e?e.text:null},t.setLabelText=function(t,e){var n=this.owner,i=n.config,o=this.getLabelOptionByAxisId(t);c(o)?"y"===t?i.axis_y_label=e:"y2"===t?i.axis_y2_label=e:"x"===t&&(i.axis_x_label=e):o&&(o.text=e)},t.getLabelPosition=function(t,e){var n=this.getLabelOptionByAxisId(t),i=n&&"object"===(void 0===n?"undefined":o(n))&&n.position?n.position:e;return{isInner:i.indexOf("inner")>=0,isOuter:i.indexOf("outer")>=0,isLeft:i.indexOf("left")>=0,isCenter:i.indexOf("center")>=0,isRight:i.indexOf("right")>=0,isTop:i.indexOf("top")>=0,isMiddle:i.indexOf("middle")>=0,isBottom:i.indexOf("bottom")>=0}},t.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},t.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},t.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},t.getLabelPositionById=function(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},t.textForXAxisLabel=function(){return this.getLabelText("x")},t.textForYAxisLabel=function(){return this.getLabelText("y")},t.textForY2AxisLabel=function(){return this.getLabelText("y2")},t.xForAxisLabel=function(t,e){var n=this.owner;return t?e.isLeft?0:e.isCenter?n.width/2:n.width:e.isBottom?-n.height:e.isMiddle?-n.height/2:0},t.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},t.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},t.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},t.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},t.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},t.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},t.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},t.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},t.dyForXAxisLabel=function(){var t=this.owner,e=t.config,n=this.getXAxisLabelPosition();return e.axis_rotated?n.isInner?"1.2em":-25-(t.config.axis_x_inner?0:this.getMaxTickWidth("x")):n.isInner?"-0.5em":e.axis_x_height?e.axis_x_height-10:"3em"},t.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},t.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},t.textAnchorForXAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},t.textAnchorForYAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},t.textAnchorForY2AxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},t.getMaxTickWidth=function(t,e){var n,i,o,r,a=this.owner,s=a.config,l=0;return e&&a.currentMaxTickWidths[t]?a.currentMaxTickWidths[t]:(a.svg&&(n=a.filterTargetsToShow(a.data.targets),"y"===t?(i=a.y.copy().domain(a.getYDomain(n,"y")),o=this.getYAxis(i,a.yOrient,s.axis_y_tick_format,a.yAxisTickValues,!1,!0,!0)):"y2"===t?(i=a.y2.copy().domain(a.getYDomain(n,"y2")),o=this.getYAxis(i,a.y2Orient,s.axis_y2_tick_format,a.y2AxisTickValues,!1,!0,!0)):(i=a.x.copy().domain(a.getXDomain(n)),o=this.getXAxis(i,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(n,o)),(r=a.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(o).each(function(){a.d3.select(this).selectAll("text").each(function(){var t=this.getBoundingClientRect();l<t.width&&(l=t.width)}),r.remove()})),a.currentMaxTickWidths[t]=l<=0?a.currentMaxTickWidths[t]:l,a.currentMaxTickWidths[t])},t.updateLabels=function(t){var e=this.owner,n=e.main.select("."+i.axisX+" ."+i.axisXLabel),o=e.main.select("."+i.axisY+" ."+i.axisYLabel),r=e.main.select("."+i.axisY2+" ."+i.axisY2Label);(t?n.transition():n).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?o.transition():o).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?r.transition():r).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},t.getPadding=function(t,e,n,i){var o="number"==typeof t?t:t[e];return s(o)?"ratio"===t.unit?t[e]*i:this.convertPixelsToAxisPadding(o,i):n},t.convertPixelsToAxisPadding=function(t,e){var n=this.owner,i=n.config.axis_rotated?n.width:n.height;return e*(t/i)},t.generateTickValues=function(t,e,n){var i,o,r,a,s,u,c,d=t;if(e)if(1===(i=l(e)?e():e))d=[t[0]];else if(2===i)d=[t[0],t[t.length-1]];else if(i>2){for(a=i-2,o=t[0],r=t[t.length-1],s=(r-o)/(a+1),d=[o],u=0;u<a;u++)c=+o+s*(u+1),d.push(n?new Date(c):c);d.push(r)}return n||(d=d.sort(function(t,e){return t-e})),d},t.generateTransitions=function(t){var e=this.owner,n=e.axes;return{axisX:t?n.x.transition().duration(t):n.x,axisY:t?n.y.transition().duration(t):n.y,axisY2:t?n.y2.transition().duration(t):n.y2,axisSubX:t?n.subx.transition().duration(t):n.subx}},t.redraw=function(t,e){var n=this.owner;n.axes.x.style("opacity",e?0:1),n.axes.y.style("opacity",e?0:1),n.axes.y2.style("opacity",e?0:1),n.axes.subx.style("opacity",e?0:1),t.axisX.call(n.xAxis),t.axisY.call(n.yAxis),t.axisY2.call(n.y2Axis),t.axisSubX.call(n.subXAxis)};var T,C,L={version:"0.4.23"};function A(t){var e=this.internal=new D(this);e.loadConfig(t),e.beforeInit(t),e.init(),e.afterInit(t),function t(e,n,i){Object.keys(e).forEach(function(o){n[o]=e[o].bind(i),Object.keys(e[o]).length>0&&t(e[o],n[o],i)})}(T,this,this)}function D(t){var e=this;e.d3=window.d3?window.d3:n(10),e.api=t,e.config=e.getDefaultConfig(),e.data={},e.cache={},e.axes={}}return L.generate=function(t){return new A(t)},L.chart={fn:A.prototype,internal:{fn:D.prototype}},T=L.chart.fn,(C=L.chart.internal.fn).beforeInit=function(){},C.afterInit=function(){},C.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_headers,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},C.initParams=function(){var t=this,e=t.d3,n=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=!1,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeFormat=n.data_xLocaltime?e.time.format:e.time.format.utc,t.axisTimeFormat=n.axis_x_localtime?e.time.format:e.time.format.utc,t.defaultAxisTimeFormat=t.axisTimeFormat.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%-m/%-d",function(t){return t.getDay()&&1!==t.getDate()}],["%-m/%-d",function(t){return 1!==t.getDate()}],["%-m/%-d",function(t){return t.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=n.axis_rotated?n.axis_x_inner?"right":"left":n.axis_x_inner?"top":"bottom",t.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left",t.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right",t.subXOrient=n.axis_rotated?"left":"bottom",t.isLegendRight="right"===n.legend_position,t.isLegendInset="inset"===n.legend_position,t.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,t.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.axes.subx=e.selectAll([])},C.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},C.initWithData=function(t){var e,n,o=this,r=o.d3,a=o.config,s=!0;o.axis=new S(o),o.initPie&&o.initPie(),o.initBrush&&o.initBrush(),o.initZoom&&o.initZoom(),a.bindto?"function"==typeof a.bindto.node?o.selectChart=a.bindto:o.selectChart=r.select(a.bindto):o.selectChart=r.selectAll([]),o.selectChart.empty()&&(o.selectChart=r.select(document.createElement("div")).style("opacity",0),o.observeInserted(o.selectChart),s=!1),o.selectChart.html("").classed("c3",!0),o.data.xs={},o.data.targets=o.convertDataToTargets(t),a.data_filter&&(o.data.targets=o.data.targets.filter(a.data_filter)),a.data_hide&&o.addHiddenTargetIds(!0===a.data_hide?o.mapToIds(o.data.targets):a.data_hide),a.legend_hide&&o.addHiddenLegendIds(!0===a.legend_hide?o.mapToIds(o.data.targets):a.legend_hide),o.updateSizes(),o.updateScales(),o.x.domain(r.extent(o.getXDomain(o.data.targets))),o.y.domain(o.getYDomain(o.data.targets,"y")),o.y2.domain(o.getYDomain(o.data.targets,"y2")),o.subX.domain(o.x.domain()),o.subY.domain(o.y.domain()),o.subY2.domain(o.y2.domain()),o.orgXDomain=o.x.domain(),o.brush&&o.brush.scale(o.subX),a.zoom_enabled&&o.zoom.scale(o.x),o.svg=o.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return a.onmouseover.call(o)}).on("mouseleave",function(){return a.onmouseout.call(o)}),o.config.svg_classname&&o.svg.attr("class",o.config.svg_classname),e=o.svg.append("defs"),o.clipChart=o.appendClip(e,o.clipId),o.clipXAxis=o.appendClip(e,o.clipIdForXAxis),o.clipYAxis=o.appendClip(e,o.clipIdForYAxis),o.clipGrid=o.appendClip(e,o.clipIdForGrid),o.clipSubchart=o.appendClip(e,o.clipIdForSubchart),o.updateSvgSize(),n=o.main=o.svg.append("g").attr("transform",o.getTranslate("main")),o.initSubchart&&o.initSubchart(),o.initTooltip&&o.initTooltip(),o.initLegend&&o.initLegend(),o.initTitle&&o.initTitle(),n.append("text").attr("class",i.text+" "+i.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),o.initRegion(),o.initGrid(),n.append("g").attr("clip-path",o.clipPath).attr("class",i.chart),a.grid_lines_front&&o.initGridLines(),o.initEventRect(),o.initChartElements(),n.insert("rect",a.zoom_privileged?null:"g."+i.regions).attr("class",i.zoomRect).attr("width",o.width).attr("height",o.height).style("opacity",0).on("dblclick.zoom",null),a.axis_x_extent&&o.brush.extent(o.getDefaultExtent()),o.axis.init(),o.updateTargets(o.data.targets),s&&(o.updateDimension(),o.config.oninit.call(o),o.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),o.bindResize(),o.api.element=o.selectChart.node()},C.smoothLines=function(t,e){var n=this;"grid"===e&&t.each(function(){var t=n.d3.select(this),e=t.attr("x1"),i=t.attr("x2"),o=t.attr("y1"),r=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(i),y1:Math.ceil(o),y2:Math.ceil(r)})})},C.updateSizes=function(){var t=this,e=t.config,n=t.legend?t.getLegendHeight():0,i=t.legend?t.getLegendWidth():0,o=t.isLegendRight||t.isLegendInset?0:n,r=t.hasArcType(),a=e.axis_rotated||r?0:t.getHorizontalAxisHeight("x"),s=e.subchart_show&&!r?e.subchart_size_height+a:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:r?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+o+t.getCurrentPaddingBottom(),left:s+(r?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:r?0:t.getCurrentPaddingRight(),bottom:a+s+o+t.getCurrentPaddingBottom(),left:r?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+o,left:t.rotated_padding_left}:{top:t.currentHeight-s-o,right:NaN,bottom:a+o,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(n,i),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?i+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&!e.gauge_fullCircle&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&r&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},C.updateTargets=function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType()&&e.updateTargetsForArc&&e.updateTargetsForArc(t),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()},C.showTargets=function(){var t=this;t.svg.selectAll("."+i.target).filter(function(e){return t.isTargetToShow(e.id)}).transition().duration(t.config.transition_duration).style("opacity",1)},C.redraw=function(t,e){var n,o,r,a,s,l,u,c,d,h,f,p,g,m,v,y,b,x,w,S,T,C,L,A,D,k,P,E,M,I=this,O=I.main,R=I.d3,N=I.config,F=I.getShapeIndices(I.isAreaType),$=I.getShapeIndices(I.isBarType),j=I.getShapeIndices(I.isLineType),B=I.hasArcType(),U=I.filterTargetsToShow(I.data.targets),z=I.xv.bind(I);if(n=_(t=t||{},"withY",!0),o=_(t,"withSubchart",!0),r=_(t,"withTransition",!0),l=_(t,"withTransform",!1),u=_(t,"withUpdateXDomain",!1),c=_(t,"withUpdateOrgXDomain",!1),d=_(t,"withTrimXDomain",!0),g=_(t,"withUpdateXAxis",u),h=_(t,"withLegend",!1),f=_(t,"withEventRect",!0),p=_(t,"withDimension",!0),a=_(t,"withTransitionForExit",r),s=_(t,"withTransitionForAxis",r),w=r?N.transition_duration:0,S=a?w:0,T=s?w:0,e=e||I.axis.generateTransitions(T),h&&N.legend_show?I.updateLegend(I.mapToIds(I.data.targets),t,e):p&&I.updateDimension(!0),I.isCategorized()&&0===U.length&&I.x.domain([0,I.axes.x.selectAll(".tick").size()]),U.length?(I.updateXDomain(U,u,c,d),N.axis_x_tick_values||(A=I.axis.updateXAxisTickValues(U))):(I.xAxis.tickValues([]),I.subXAxis.tickValues([])),N.zoom_rescale&&!t.flow&&(P=I.x.orgDomain()),I.y.domain(I.getYDomain(U,"y",P)),I.y2.domain(I.getYDomain(U,"y2",P)),!N.axis_y_tick_values&&N.axis_y_tick_count&&I.yAxis.tickValues(I.axis.generateTickValues(I.y.domain(),N.axis_y_tick_count)),!N.axis_y2_tick_values&&N.axis_y2_tick_count&&I.y2Axis.tickValues(I.axis.generateTickValues(I.y2.domain(),N.axis_y2_tick_count)),I.axis.redraw(e,B),I.axis.updateLabels(r),(u||g)&&U.length)if(N.axis_x_tick_culling&&A){for(D=1;D<A.length;D++)if(A.length/D<N.axis_x_tick_culling_max){k=D;break}I.svg.selectAll("."+i.axisX+" .tick text").each(function(t){var e=A.indexOf(t);e>=0&&R.select(this).style("display",e%k?"none":"block")})}else I.svg.selectAll("."+i.axisX+" .tick text").style("display","block");m=I.generateDrawArea?I.generateDrawArea(F,!1):void 0,v=I.generateDrawBar?I.generateDrawBar($):void 0,y=I.generateDrawLine?I.generateDrawLine(j,!1):void 0,b=I.generateXYForText(F,$,j,!0),x=I.generateXYForText(F,$,j,!1),n&&(I.subY.domain(I.getYDomain(U,"y")),I.subY2.domain(I.getYDomain(U,"y2"))),I.updateXgridFocus(),O.select("text."+i.text+"."+i.empty).attr("x",I.width/2).attr("y",I.height/2).text(N.data_empty_label_text).transition().style("opacity",U.length?0:1),I.updateGrid(w),I.updateRegion(w),I.updateBar(S),I.updateLine(S),I.updateArea(S),I.updateCircle(),I.hasDataLabel()&&I.updateText(S),I.redrawTitle&&I.redrawTitle(),I.redrawArc&&I.redrawArc(w,S,l),I.redrawSubchart&&I.redrawSubchart(o,e,w,S,F,$,j),O.selectAll("."+i.selectedCircles).filter(I.isBarType.bind(I)).selectAll("circle").remove(),N.interaction_enabled&&!t.flow&&f&&(I.redrawEventRect(),I.updateZoom&&I.updateZoom()),I.updateCircleY(),E=(I.config.axis_rotated?I.circleY:I.circleX).bind(I),M=(I.config.axis_rotated?I.circleX:I.circleY).bind(I),t.flow&&(L=I.generateFlow({targets:U,flow:t.flow,duration:t.flow.duration,drawBar:v,drawLine:y,drawArea:m,cx:E,cy:M,xv:z,xForText:b,yForText:x})),(w||L)&&I.isTabVisible()?R.transition().duration(w).each(function(){var e=[];[I.redrawBar(v,!0),I.redrawLine(y,!0),I.redrawArea(m,!0),I.redrawCircle(E,M,!0),I.redrawText(b,x,t.flow,!0),I.redrawRegion(!0),I.redrawGrid(!0)].forEach(function(t){t.forEach(function(t){e.push(t)})}),C=I.generateWait(),e.forEach(function(t){C.add(t)})}).call(C,function(){L&&L(),N.onrendered&&N.onrendered.call(I)}):(I.redrawBar(v),I.redrawLine(y),I.redrawArea(m),I.redrawCircle(E,M),I.redrawText(b,x,t.flow),I.redrawRegion(),I.redrawGrid(),N.onrendered&&N.onrendered.call(I)),I.mapToIds(I.data.targets).forEach(function(t){I.withoutFadeIn[t]=!0})},C.updateAndRedraw=function(t){var e,n=this,i=n.config;(t=t||{}).withTransition=_(t,"withTransition",!0),t.withTransform=_(t,"withTransform",!1),t.withLegend=_(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=_(t,"withTransitionForTransform",t.withTransition),n.updateSizes(),t.withLegend&&i.legend_show||(e=n.axis.generateTransitions(t.withTransitionForAxis?i.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(t.withTransitionForTransform,e)),n.redraw(t,e)},C.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},C.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},C.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},C.isCustomX=function(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||v(t.data_xs))},C.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},C.getTranslate=function(t){var e,n,i=this,o=i.config;return"main"===t?(e=p(i.margin.left),n=p(i.margin.top)):"context"===t?(e=p(i.margin2.left),n=p(i.margin2.top)):"legend"===t?(e=i.margin3.left,n=i.margin3.top):"x"===t?(e=0,n=o.axis_rotated?0:i.height):"y"===t?(e=0,n=o.axis_rotated?i.height:0):"y2"===t?(e=o.axis_rotated?0:i.width,n=o.axis_rotated?1:0):"subx"===t?(e=0,n=o.axis_rotated?0:i.height2):"arc"===t&&(e=i.arcWidth/2,n=i.arcHeight/2-(i.hasType("gauge")?6:0)),"translate("+e+","+n+")"},C.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?1:0},C.initialOpacityForCircle=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},C.opacityForCircle=function(t){var e=(l(this.config.point_show)?this.config.point_show(t):this.config.point_show)?1:0;return s(t.value)?this.isScatterType(t)?.5:e:0},C.opacityForText=function(){return this.hasDataLabel()?1:0},C.xx=function(t){return t?this.x(t.x):null},C.xv=function(t){var e=this,n=t.value;return e.isTimeSeries()?n=e.parseDate(t.value):e.isCategorized()&&"string"==typeof t.value&&(n=e.config.axis_x_categories.indexOf(t.value)),Math.ceil(e.x(n))},C.yv=function(t){var e=t.axis&&"y2"===t.axis?this.y2:this.y;return Math.ceil(e(t.value))},C.subxx=function(t){return t?this.subX(t.x):null},C.transformMain=function(t,e){var n,o,r,a=this;e&&e.axisX?n=e.axisX:(n=a.main.select("."+i.axisX),t&&(n=n.transition())),e&&e.axisY?o=e.axisY:(o=a.main.select("."+i.axisY),t&&(o=o.transition())),e&&e.axisY2?r=e.axisY2:(r=a.main.select("."+i.axisY2),t&&(r=r.transition())),(t?a.main.transition():a.main).attr("transform",a.getTranslate("main")),n.attr("transform",a.getTranslate("x")),o.attr("transform",a.getTranslate("y")),r.attr("transform",a.getTranslate("y2")),a.main.select("."+i.chartArcs).attr("transform",a.getTranslate("arc"))},C.transformAll=function(t,e){var n=this;n.transformMain(t,e),n.config.subchart_show&&n.transformContext(t,e),n.legend&&n.transformLegend(t)},C.updateSvgSize=function(){var t=this,e=t.svg.select(".c3-brush .background");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()?e.attr("height"):0),t.svg.select("."+i.zoomRect).attr("width",t.width).attr("height",t.height),t.selectChart.style("max-height",t.currentHeight+"px")},C.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},C.observeInserted=function(t){var e,n=this;"undefined"!=typeof MutationObserver?(e=new MutationObserver(function(i){i.forEach(function(i){"childList"===i.type&&i.previousSibling&&(e.disconnect(),n.intervalForObserveInserted=window.setInterval(function(){t.node().parentNode&&(window.clearInterval(n.intervalForObserveInserted),n.updateDimension(),n.brush&&n.brush.update(),n.config.oninit.call(n),n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.transition().style("opacity",1))},10))})})).observe(t.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},C.bindResize=function(){var t=this,e=t.config;if(t.resizeFunction=t.generateResize(),t.resizeFunction.add(function(){e.onresize.call(t)}),e.resize_auto&&t.resizeFunction.add(function(){void 0!==t.resizeTimeout&&window.clearTimeout(t.resizeTimeout),t.resizeTimeout=window.setTimeout(function(){delete t.resizeTimeout,t.api.flush()},100)}),t.resizeFunction.add(function(){e.onresized.call(t)}),t.resizeIfElementDisplayed=function(){null!=t.api&&t.api.element.offsetParent&&t.resizeFunction()},window.attachEvent)window.attachEvent("onresize",t.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",t.resizeIfElementDisplayed,!1);else{var n=window.onresize;n?n.add&&n.remove||(n=t.generateResize()).add(window.onresize):n=t.generateResize(),n.add(t.resizeFunction),window.onresize=function(){t.api.element.offsetParent&&n()}}},C.generateResize=function(){var t=[];function e(){t.forEach(function(t){t()})}return e.add=function(e){t.push(e)},e.remove=function(e){for(var n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}},e},C.endall=function(t,e){var n=0;t.each(function(){++n}).each("end",function(){--n||e.apply(this,arguments)})},C.generateWait=function(){var t=[],e=function(e,n){var i=setInterval(function(){var e=0;t.forEach(function(t){if(t.empty())e+=1;else try{t.transition()}catch(t){e+=1}}),e===t.length&&(clearInterval(i),n&&n())},10)};return e.add=function(e){t.push(e)},e},C.parseDate=function(t){var e;return t instanceof Date?e=t:"string"==typeof t?e=this.dataTimeFormat(this.config.data_xFormat).parse(t):"object"===(void 0===t?"undefined":o(t))?e=new Date(+t):"number"!=typeof t||isNaN(t)||(e=new Date(+t)),e&&!isNaN(+e)||window.console.error("Failed to parse x '"+t+"' to Date object"),e},C.isTabVisible=function(){var t;return void 0!==document.hidden?t="hidden":void 0!==document.mozHidden?t="mozHidden":void 0!==document.msHidden?t="msHidden":void 0!==document.webkitHidden&&(t="webkitHidden"),!document[t]},C.isValue=s,C.isFunction=l,C.isString=c,C.isUndefined=d,C.isDefined=h,C.ceil10=f,C.asHalfPixel=p,C.diffDomain=g,C.isEmpty=m,C.notEmpty=v,C.notEmpty=v,C.getOption=_,C.hasValue=y,C.sanitise=b,C.getPathBox=x,C.CLASS=i,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o}),"SVGPathSeg"in window||(window.SVGPathSeg=function(t,e,n){this.pathSegType=t,this.pathSegTypeAsLetter=e,this._owningPathSegList=n},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t),this._x=e,this._y=n},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t),this._x=e,this._y=n},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t),this._x=e,this._y=n},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t),this._x=e,this._y=n},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(t,e,n,i,o,r,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t),this._x=e,this._y=n,this._x1=i,this._y1=o,this._x2=r,this._y2=a},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(t,e,n,i,o,r,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t),this._x=e,this._y=n,this._x1=i,this._y1=o,this._x2=r,this._y2=a},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(t,e,n,i,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t),this._x=e,this._y=n,this._x1=i,this._y1=o},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(t,e,n,i,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t),this._x=e,this._y=n,this._x1=i,this._y1=o},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(t,e,n,i,o,r,a,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t),this._x=e,this._y=n,this._r1=i,this._r2=o,this._angle=r,this._largeArcFlag=a,this._sweepFlag=s},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(t,e,n,i,o,r,a,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t),this._x=e,this._y=n,this._r1=i,this._r2=o,this._angle=r,this._largeArcFlag=a,this._sweepFlag=s},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t),this._x=e},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t),this._x=e},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t),this._y=e},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t),this._y=e},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,i,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t),this._x=e,this._y=n,this._x2=i,this._y2=o},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(t,e,n,i,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t),this._x=e,this._y=n,this._x2=i,this._y2=o},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t),this._x=e,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t),this._x=e,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,n,i,o,r){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,n,i,o,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,n,i,o,r){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,n,i,o,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,n,i){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,n,i){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,n,i,o,r,a){return new window.SVGPathSegArcAbs(void 0,t,e,n,i,o,r,a)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,n,i,o,r,a){return new window.SVGPathSegArcRel(void 0,t,e,n,i,o,r,a)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,i){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,n,i){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(void 0===t||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",this.getAttribute("d"));var n=e.pathSegList.numberOfItems-1;if(n<=0)return 0;do{if(e.pathSegList.removeItem(n),t>e.getTotalLength())break;n--}while(n>0);return n})),"SVGPathSegList"in window||(window.SVGPathSegList=function(t){this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){if(this._pathElement){var e=!1;t.forEach(function(t){"d"==t.attributeName&&(e=!0)}),e&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(t){t._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(t){return this._checkPathSynchronizedToList(),this._list=[t],t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(t){return this._checkPathSynchronizedToList(),this._checkValidIndex(t),this._list[t]},window.SVGPathSegList.prototype.insertItemBefore=function(t,e){return this._checkPathSynchronizedToList(),e>this.numberOfItems&&(e=this.numberOfItems),t._owningPathSegList&&(t=t.clone()),this._list.splice(e,0,t),t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList.prototype.replaceItem=function(t,e){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._checkValidIndex(e),this._list[e]=t,t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList(),this._checkValidIndex(t);var e=this._list[t];return this._list.splice(t,1),this._writeListToPath(),e},window.SVGPathSegList.prototype.appendItem=function(t){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._list.push(t),t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList._pathSegArrayAsString=function(t){var e="",n=!0;return t.forEach(function(t){n?(n=!1,e+=t._asPathString()):e+=" "+t._asPathString()}),e},window.SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];var e=this,n=function(){this.pathSegList=[]};n.prototype.appendSegment=function(t){this.pathSegList.push(t)};var i=function(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};i.prototype._isCurrentSpace=function(){var t=this._string[this._currentIndex];return t<=" "&&(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)},i.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},i.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},i.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},i.prototype.peekSegmentType=function(){var t=this._string[this._currentIndex];return this._pathSegTypeFromChar(t)},i.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},i.prototype._nextCommandHelper=function(t,e){return("+"==t||"-"==t||"."==t||t>="0"&&t<="9")&&e!=window.SVGPathSeg.PATHSEG_CLOSEPATH?e==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:e==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:e:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var t=this.peekSegmentType();return t==window.SVGPathSeg.PATHSEG_MOVETO_ABS||t==window.SVGPathSeg.PATHSEG_MOVETO_REL},i.prototype._parseNumber=function(){var t=0,e=0,n=1,i=0,o=1,r=1,a=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,o=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))){for(var s=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=s)for(var l=this._currentIndex-1,u=1;l>=s;)e+=u*(this._string.charAt(l--)-"0"),u*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)n*=10,i+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!=a&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,r=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)t*=10,t+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var c=e+i;if(c*=o,t&&(c*=Math.pow(10,r*t)),a!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),c}},i.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var t=!1,e=this._string.charAt(this._currentIndex++);if("0"==e)t=!1;else{if("1"!=e)return;t=!0}return this._skipOptionalSpacesOrDelimiter(),t}},i.prototype.parseSegment=function(){var t=this._string[this._currentIndex],n=this._pathSegTypeFromChar(t);if(n==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((n=this._nextCommandHelper(t,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=n,n){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(e);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(e,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(e,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(e,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(e,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(e,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(e,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(e,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(e,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);default:throw"Unknown path seg type."}};var o=new n,r=new i(t);if(!r.initialCommandIsMoveTo())return[];for(;r.hasMoreData();){var a=r.parseSegment();if(!a)return[];o.appendSegment(a)}return o.pathSegList}),String.prototype.padEnd||(String.prototype.padEnd=function(t,e){return t>>=0,e=String(void 0!==e?e:" "),this.length>t?String(this):((t-=this.length)>e.length&&(e+=e.repeat(t/e.length)),String(this)+e.slice(0,t))}),T.axis=function(){},T.axis.labels=function(t){var e=this.internal;arguments.length&&(Object.keys(t).forEach(function(n){e.axis.setLabelText(n,t[n])}),e.axis.updateLabels())},T.axis.max=function(t){var e=this.internal,n=e.config;if(!arguments.length)return{x:n.axis_x_max,y:n.axis_y_max,y2:n.axis_y2_max};"object"===(void 0===t?"undefined":o(t))?(s(t.x)&&(n.axis_x_max=t.x),s(t.y)&&(n.axis_y_max=t.y),s(t.y2)&&(n.axis_y2_max=t.y2)):n.axis_y_max=n.axis_y2_max=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},T.axis.min=function(t){var e=this.internal,n=e.config;if(!arguments.length)return{x:n.axis_x_min,y:n.axis_y_min,y2:n.axis_y2_min};"object"===(void 0===t?"undefined":o(t))?(s(t.x)&&(n.axis_x_min=t.x),s(t.y)&&(n.axis_y_min=t.y),s(t.y2)&&(n.axis_y2_min=t.y2)):n.axis_y_min=n.axis_y2_min=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},T.axis.range=function(t){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};h(t.max)&&this.axis.max(t.max),h(t.min)&&this.axis.min(t.min)},T.category=function(t,e){var n=this.internal,i=n.config;return arguments.length>1&&(i.axis_x_categories[t]=e,n.redraw()),i.axis_x_categories[t]},T.categories=function(t){var e=this.internal,n=e.config;return arguments.length?(n.axis_x_categories=t,e.redraw(),n.axis_x_categories):n.axis_x_categories},T.resize=function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},T.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},T.destroy=function(){var t=this.internal;if(window.clearInterval(t.intervalForObserveInserted),void 0!==t.resizeTimeout&&window.clearTimeout(t.resizeTimeout),window.detachEvent)window.detachEvent("onresize",t.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",t.resizeIfElementDisplayed);else{var e=window.onresize;e&&e.add&&e.remove&&e.remove(t.resizeFunction)}return t.resizeFunction.remove(),t.selectChart.classed("c3",!1).html(""),Object.keys(t).forEach(function(e){t[e]=null}),null},T.color=function(t){return this.internal.color(t)},T.data=function(t){var e=this.internal.data.targets;return void 0===t?e:e.filter(function(e){return[].concat(t).indexOf(e.id)>=0})},T.data.shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},T.data.values=function(t){var e,n=null;return t&&(n=(e=this.data(t))[0]?e[0].values.map(function(t){return t.value}):null),n},T.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},T.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},T.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},T.flow=function(t){var e,n,i,o,r,a,l,u=this.internal,c=[],d=u.getMaxDataCount(),f=0,p=0;if(t.json)n=u.convertJsonToData(t.json,t.keys);else if(t.rows)n=u.convertRowsToData(t.rows);else{if(!t.columns)return;n=u.convertColumnsToData(t.columns)}e=u.convertDataToTargets(n,!0),u.data.targets.forEach(function(t){var n,i,o=!1;for(n=0;n<e.length;n++)if(t.id===e[n].id){for(o=!0,t.values[t.values.length-1]&&(p=t.values[t.values.length-1].index+1),f=e[n].values.length,i=0;i<f;i++)e[n].values[i].index=p+i,u.isTimeSeries()||(e[n].values[i].x=p+i);t.values=t.values.concat(e[n].values),e.splice(n,1);break}o||c.push(t.id)}),u.data.targets.forEach(function(t){var e,n;for(e=0;e<c.length;e++)if(t.id===c[e])for(p=t.values[t.values.length-1].index+1,n=0;n<f;n++)t.values.push({id:t.id,index:p+n,x:u.isTimeSeries()?u.getOtherTargetX(p+n):p+n,value:null})}),u.data.targets.length&&e.forEach(function(t){var e,n=[];for(e=u.data.targets[0].values[0].index;e<p;e++)n.push({id:t.id,index:e,x:u.isTimeSeries()?u.getOtherTargetX(e):e,value:null});t.values.forEach(function(t){t.index+=p,u.isTimeSeries()||(t.x+=p)}),t.values=n.concat(t.values)}),u.data.targets=u.data.targets.concat(e),u.getMaxDataCount(),r=(o=u.data.targets[0]).values[0],h(t.to)?(f=0,l=u.isTimeSeries()?u.parseDate(t.to):t.to,o.values.forEach(function(t){t.x<l&&f++})):h(t.length)&&(f=t.length),d?1===d&&u.isTimeSeries()&&(a=(o.values[o.values.length-1].x-r.x)/2,i=[new Date(+r.x-a),new Date(+r.x+a)],u.updateXDomain(null,!0,!0,!1,i)):(a=u.isTimeSeries()?o.values.length>1?o.values[o.values.length-1].x-r.x:r.x-u.getXDomain(u.data.targets)[0]:1,i=[r.x-a,r.x],u.updateXDomain(null,!0,!0,!1,i)),u.updateTargets(u.data.targets),u.redraw({flow:{index:r.index,length:f,duration:s(t.duration)?t.duration:u.config.transition_duration,done:t.done,orgDataCount:d},withLegend:!0,withTransition:d>1,withTrimXDomain:!1,withUpdateXAxis:!0})},C.generateFlow=function(t){var e=this,n=e.config,o=e.d3;return function(){var r,a,s,l,u=t.targets,c=t.flow,d=t.drawBar,h=t.drawLine,f=t.drawArea,p=t.cx,m=t.cy,v=t.xv,_=t.xForText,y=t.yForText,b=t.duration,x=c.index,w=c.length,S=e.getValueOnIndex(e.data.targets[0].values,x),T=e.getValueOnIndex(e.data.targets[0].values,x+w),C=e.x.domain(),L=c.duration||b,A=c.done||function(){},D=e.generateWait(),k=e.xgrid||o.selectAll([]),P=e.xgridLines||o.selectAll([]),E=e.mainRegion||o.selectAll([]),M=e.mainText||o.selectAll([]),I=e.mainBar||o.selectAll([]),O=e.mainLine||o.selectAll([]),R=e.mainArea||o.selectAll([]),N=e.mainCircle||o.selectAll([]);e.flowing=!0,e.data.targets.forEach(function(t){t.values.splice(0,w)}),l=e.updateXDomain(u,!0,!0),e.updateXGrid&&e.updateXGrid(!0),c.orgDataCount?r=1===c.orgDataCount||(S&&S.x)===(T&&T.x)?e.x(C[0])-e.x(l[0]):e.isTimeSeries()?e.x(C[0])-e.x(l[0]):e.x(S.x)-e.x(T.x):1!==e.data.targets[0].values.length?r=e.x(C[0])-e.x(l[0]):e.isTimeSeries()?(S=e.getValueOnIndex(e.data.targets[0].values,0),T=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),r=e.x(S.x)-e.x(T.x)):r=g(l)/2,a=g(C)/g(l),s="translate("+r+",0) scale("+a+",1)",e.hideXGridFocus(),o.transition().ease("linear").duration(L).each(function(){D.add(e.axes.x.transition().call(e.xAxis)),D.add(I.transition().attr("transform",s)),D.add(O.transition().attr("transform",s)),D.add(R.transition().attr("transform",s)),D.add(N.transition().attr("transform",s)),D.add(M.transition().attr("transform",s)),D.add(E.filter(e.isRegionOnX).transition().attr("transform",s)),D.add(k.transition().attr("transform",s)),D.add(P.transition().attr("transform",s))}).call(D,function(){var t,o=[],r=[],a=[];if(w){for(t=0;t<w;t++)o.push("."+i.shape+"-"+(x+t)),r.push("."+i.text+"-"+(x+t)),a.push("."+i.eventRect+"-"+(x+t));e.svg.selectAll("."+i.shapes).selectAll(o).remove(),e.svg.selectAll("."+i.texts).selectAll(r).remove(),e.svg.selectAll("."+i.eventRects).selectAll(a).remove(),e.svg.select("."+i.xgrid).remove()}k.attr("transform",null).attr(e.xgridAttr),P.attr("transform",null),P.select("line").attr("x1",n.axis_rotated?0:v).attr("x2",n.axis_rotated?e.width:v),P.select("text").attr("x",n.axis_rotated?e.width:0).attr("y",v),I.attr("transform",null).attr("d",d),O.attr("transform",null).attr("d",h),R.attr("transform",null).attr("d",f),N.attr("transform",null).attr("cx",p).attr("cy",m),M.attr("transform",null).attr("x",_).attr("y",y).style("fill-opacity",e.opacityForText.bind(e)),E.attr("transform",null),E.select("rect").filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),n.interaction_enabled&&e.redrawEventRect(),A(),e.flowing=!1})}},T.focus=function(t){var e,n=this.internal;t=n.mapToTargetIds(t),e=n.svg.selectAll(n.selectorTargets(t.filter(n.isTargetToShow,n))),this.revert(),this.defocus(),e.classed(i.focused,!0).classed(i.defocused,!1),n.hasArcType()&&n.expandArc(t),n.toggleFocusLegend(t,!0),n.focusedTargetIds=t,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(e){return t.indexOf(e)<0})},T.defocus=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t.filter(e.isTargetToShow,e))).classed(i.focused,!1).classed(i.defocused,!0),e.hasArcType()&&e.unexpandArc(t),e.toggleFocusLegend(t,!1),e.focusedTargetIds=e.focusedTargetIds.filter(function(e){return t.indexOf(e)<0}),e.defocusedTargetIds=t},T.revert=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t)).classed(i.focused,!1).classed(i.defocused,!1),e.hasArcType()&&e.unexpandArc(t),e.config.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(t)).filter(function(){return e.d3.select(this).classed(i.legendItemFocused)}).classed(i.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]},T.xgrids=function(t){var e=this.internal,n=e.config;return t?(n.grid_x_lines=t,e.redrawWithoutRescale(),n.grid_x_lines):n.grid_x_lines},T.xgrids.add=function(t){var e=this.internal;return this.xgrids(e.config.grid_x_lines.concat(t||[]))},T.xgrids.remove=function(t){this.internal.removeGridLines(t,!0)},T.ygrids=function(t){var e=this.internal,n=e.config;return t?(n.grid_y_lines=t,e.redrawWithoutRescale(),n.grid_y_lines):n.grid_y_lines},T.ygrids.add=function(t){var e=this.internal;return this.ygrids(e.config.grid_y_lines.concat(t||[]))},T.ygrids.remove=function(t){this.internal.removeGridLines(t,!1)},T.groups=function(t){var e=this.internal,n=e.config;return d(t)?n.data_groups:(n.data_groups=t,e.redraw(),n.data_groups)},T.legend=function(){},T.legend.show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},T.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},T.load=function(t){var e=this.internal,n=e.config;t.xs&&e.addXs(t.xs),"names"in t&&T.data.names.bind(this)(t.names),"classes"in t&&Object.keys(t.classes).forEach(function(e){n.data_classes[e]=t.classes[e]}),"categories"in t&&e.isCategorized()&&(n.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(e){n.data_axes[e]=t.axes[e]}),"colors"in t&&Object.keys(t.colors).forEach(function(e){n.data_colors[e]=t.colors[e]}),"cacheIds"in t&&e.hasCaches(t.cacheIds)?e.load(e.getCaches(t.cacheIds),t.done):"unload"in t?e.unload(e.mapToTargetIds("boolean"==typeof t.unload&&t.unload?null:t.unload),function(){e.loadFromArgs(t)}):e.loadFromArgs(t)},T.unload=function(t){var e=this.internal;(t=t||{})instanceof Array?t={ids:t}:"string"==typeof t&&(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()})},T.regions=function(t){var e=this.internal,n=e.config;return t?(n.regions=t,e.redrawWithoutRescale(),n.regions):n.regions},T.regions.add=function(t){var e=this.internal,n=e.config;return t?(n.regions=n.regions.concat(t),e.redrawWithoutRescale(),n.regions):n.regions},T.regions.remove=function(t){var e,n,o,r=this.internal,a=r.config;return t=t||{},e=r.getOption(t,"duration",a.transition_duration),n=r.getOption(t,"classes",[i.region]),o=r.main.select("."+i.regions).selectAll(n.map(function(t){return"."+t})),(e?o.transition().duration(e):o).style("opacity",0).remove(),a.regions=a.regions.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){n.indexOf(t)>=0&&(e=!0)}),!e)}),a.regions},T.selected=function(t){var e=this.internal,n=e.d3;return n.merge(e.main.selectAll("."+i.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+i.shape).filter(function(){return n.select(this).classed(i.SELECTED)}).map(function(t){return t.map(function(t){var e=t.__data__;return e.data?e.data:e})}))},T.select=function(t,e,n){var o=this.internal,r=o.d3,a=o.config;a.data_selection_enabled&&o.main.selectAll("."+i.shapes).selectAll("."+i.shape).each(function(s,l){var u=r.select(this),c=s.data?s.data.id:s.id,d=o.getToggle(this,s).bind(o),f=a.data_selection_grouped||!t||t.indexOf(c)>=0,p=!e||e.indexOf(l)>=0,g=u.classed(i.SELECTED);u.classed(i.line)||u.classed(i.area)||(f&&p?a.data_selection_isselectable(s)&&!g&&d(!0,u.classed(i.SELECTED,!0),s,l):h(n)&&n&&g&&d(!1,u.classed(i.SELECTED,!1),s,l))})},T.unselect=function(t,e){var n=this.internal,o=n.d3,r=n.config;r.data_selection_enabled&&n.main.selectAll("."+i.shapes).selectAll("."+i.shape).each(function(a,s){var l=o.select(this),u=a.data?a.data.id:a.id,c=n.getToggle(this,a).bind(n),d=r.data_selection_grouped||!t||t.indexOf(u)>=0,h=!e||e.indexOf(s)>=0,f=l.classed(i.SELECTED);l.classed(i.line)||l.classed(i.area)||d&&h&&r.data_selection_isselectable(a)&&f&&c(!1,l.classed(i.SELECTED,!1),a,s)})},T.show=function(t,e){var n,i=this.internal;t=i.mapToTargetIds(t),e=e||{},i.removeHiddenTargetIds(t),(n=i.svg.selectAll(i.selectorTargets(t))).transition().style("opacity",1,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",1)}),e.withLegend&&i.showLegend(t),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},T.hide=function(t,e){var n,i=this.internal;t=i.mapToTargetIds(t),e=e||{},i.addHiddenTargetIds(t),(n=i.svg.selectAll(i.selectorTargets(t))).transition().style("opacity",0,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",0)}),e.withLegend&&i.hideLegend(t),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},T.toggle=function(t,e){var n=this,i=this.internal;i.mapToTargetIds(t).forEach(function(t){i.isTargetToShow(t)?n.hide(t,e):n.show(t,e)})},T.tooltip=function(){},T.tooltip.show=function(t){var e,n,i=this.internal;t.mouse&&(n=t.mouse),t.data?i.isMultipleX()?(n=[i.x(t.data.x),i.getYScale(t.data.id)(t.data.value)],e=null):e=s(t.data.index)?t.data.index:i.getIndexByX(t.data.x):void 0!==t.x?e=i.getIndexByX(t.x):void 0!==t.index&&(e=t.index),i.dispatchEvent("mouseover",e,n),i.dispatchEvent("mousemove",e,n),i.config.tooltip_onshow.call(i,t.data)},T.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},T.transform=function(t,e){var n=this.internal,i=["pie","donut"].indexOf(t)>=0?{withTransform:!0}:null;n.transformTo(e,t,i)},C.transformTo=function(t,e,n){var i=this,o=!i.hasArcType(),r=n||{withTransitionForAxis:o};r.withTransitionForTransform=!1,i.transiting=!1,i.setTargetType(t,e),i.updateTargets(i.data.targets),i.updateAndRedraw(r)},T.x=function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},T.xs=function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},T.zoom=function(t){var e=this.internal;return t&&(e.isTimeSeries()&&(t=t.map(function(t){return e.parseDate(t)})),e.brush.extent(t),e.redraw({withUpdateXDomain:!0,withY:e.config.zoom_rescale}),e.config.zoom_onzoom.call(this,e.x.orgDomain())),e.brush.extent()},T.zoom.enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},T.unzoom=function(){var t=this.internal;t.brush.clear().update(),t.redraw({withUpdateXDomain:!0})},T.zoom.max=function(t){var e=this.internal,n=e.config,i=e.d3;if(0!==t&&!t)return n.zoom_x_max;n.zoom_x_max=i.max([e.orgXDomain[1],t])},T.zoom.min=function(t){var e=this.internal,n=e.config,i=e.d3;if(0!==t&&!t)return n.zoom_x_min;n.zoom_x_min=i.min([e.orgXDomain[0],t])},T.zoom.range=function(t){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};h(t.max)&&this.domain.max(t.max),h(t.min)&&this.domain.min(t.min)},C.initPie=function(){var t=this.d3;this.pie=t.layout.pie().value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)}),this.pie.sort(this.getOrderFunction()||null)},C.updateRadius=function(){var t=this,e=t.config,n=e.gauge_width||e.donut_width,i=t.filterTargetsToShow(t.data.targets).length*t.config.gauge_arcs_minWidth;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2*(t.hasType("gauge")?.85:1),t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=n?(t.radius-n)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0,t.gaugeArcWidth=n||(i<=t.radius-t.innerRadius?t.radius-t.innerRadius:i<=t.radius?i:t.radius)},C.updateArc=function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},C.updateAngle=function(t){var e,n,i,o,r=this,a=r.config,s=!1,l=0;return a?(r.pie(r.filterTargetsToShow(r.data.targets)).forEach(function(e){s||e.data.id!==t.data.id||(s=!0,(t=e).index=l),l++}),isNaN(t.startAngle)&&(t.startAngle=0),isNaN(t.endAngle)&&(t.endAngle=t.startAngle),r.isGaugeType(t.data)&&(e=a.gauge_min,n=a.gauge_max,i=Math.PI*(a.gauge_fullCircle?2:1)/(n-e),o=t.value<e?0:t.value<n?t.value-e:n-e,t.startAngle=a.gauge_startingAngle,t.endAngle=t.startAngle+i*o),s?t:null):null},C.getSvgArc=function(){var t=this,e=t.hasType("gauge"),n=t.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,i=t.d3.svg.arc().outerRadius(function(i){return e?t.radius-n*i.index:t.radius}).innerRadius(function(i){return e?t.radius-n*(i.index+1):t.innerRadius}),o=function(e,n){var o;return n?i(e):(o=t.updateAngle(e))?i(o):"M 0 0"};return o.centroid=i.centroid,o},C.getSvgArcExpanded=function(t){t=t||1;var e=this,n=e.hasType("gauge"),i=e.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,o=Math.min(e.radiusExpanded*t-e.radius,.8*i-100*(1-t)),r=e.d3.svg.arc().outerRadius(function(r){return n?e.radius-i*r.index+o:e.radiusExpanded*t}).innerRadius(function(t){return n?e.radius-i*(t.index+1):e.innerRadius});return function(t){var n=e.updateAngle(t);return n?r(n):"M 0 0"}},C.getArc=function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},C.transformForArcLabel=function(t){var e,n,i,o,r,a=this,s=a.config,u=a.updateAngle(t),c="",d=a.hasType("gauge");if(u&&!d)e=this.svgArc.centroid(u),n=isNaN(e[0])?0:e[0],i=isNaN(e[1])?0:e[1],o=Math.sqrt(n*n+i*i),c="translate("+n*(r=a.hasType("donut")&&s.donut_label_ratio?l(s.donut_label_ratio)?s.donut_label_ratio(t,a.radius,o):s.donut_label_ratio:a.hasType("pie")&&s.pie_label_ratio?l(s.pie_label_ratio)?s.pie_label_ratio(t,a.radius,o):s.pie_label_ratio:a.radius&&o?(36/a.radius>.375?1.175-36/a.radius:.8)*a.radius/o:0)+","+i*r+")";else if(u&&d&&a.filterTargetsToShow(a.data.targets).length>1){var h=Math.sin(u.endAngle-Math.PI/2);c="translate("+(n=Math.cos(u.endAngle-Math.PI/2)*(a.radiusExpanded+25))+","+(i=h*(a.radiusExpanded+15-Math.abs(10*h))+3)+")"}return c},C.getArcRatio=function(t){var e=this.config,n=Math.PI*(this.hasType("gauge")&&!e.gauge_fullCircle?1:2);return t?(t.endAngle-t.startAngle)/n:null},C.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})},C.textForArcLabel=function(t){var e,n,i,o,r,a=this;return a.shouldShowArcLabel()?(n=(e=a.updateAngle(t))?e.value:null,i=a.getArcRatio(e),o=t.data.id,a.hasType("gauge")||a.meetsArcLabelThreshold(i)?(r=a.getArcLabelFormat())?r(n,i,o):a.defaultArcValueFormat(n,i):""):""},C.textForGaugeMinMax=function(t,e){var n=this.getGaugeLabelExtents();return n?n(t,e):t},C.expandArc=function(t){var e,n=this;n.transiting?e=window.setInterval(function(){n.transiting||(window.clearInterval(e),n.legend.selectAll(".c3-legend-item-focused").size()>0&&n.expandArc(t))},10):(t=n.mapToTargetIds(t),n.svg.selectAll(n.selectorTargets(t,"."+i.chartArc)).each(function(t){n.shouldExpand(t.data.id)&&n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(t.data.id)).attr("d",n.svgArcExpanded).transition().duration(2*n.expandDuration(t.data.id)).attr("d",n.svgArcExpandedSub).each(function(t){n.isDonutType(t.data)})}))},C.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+i.chartArc)).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll("."+i.arc))},C.expandDuration=function(t){var e=this.config;return this.isDonutType(t)?e.donut_expand_duration:this.isGaugeType(t)?e.gauge_expand_duration:this.isPieType(t)?e.pie_expand_duration:50},C.shouldExpand=function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},C.shouldShowArcLabel=function(){var t=this.config,e=!0;return this.hasType("donut")?e=t.donut_label_show:this.hasType("pie")&&(e=t.pie_label_show),e},C.meetsArcLabelThreshold=function(t){var e=this.config;return t>=(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)},C.getArcLabelFormat=function(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),e},C.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},C.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},C.updateTargetsForArc=function(t){var e,n=this,o=n.main,r=n.classChartArc.bind(n),a=n.classArcs.bind(n),s=n.classFocus.bind(n);(e=o.select("."+i.chartArcs).selectAll("."+i.chartArc).data(n.pie(t)).attr("class",function(t){return r(t)+s(t.data)}).enter().append("g").attr("class",r)).append("g").attr("class",a),e.append("text").attr("dy",n.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},C.initArc=function(){var t=this;t.arcs=t.main.select("."+i.chart).append("g").attr("class",i.chartArcs).attr("transform",t.getTranslate("arc")),t.arcs.append("text").attr("class",i.chartArcsTitle).style("text-anchor","middle").text(t.getArcTitle())},C.redrawArc=function(t,e,n){var o,r,a,s=this,l=s.d3,u=s.config,c=s.main,d=s.hasType("gauge");if((o=c.selectAll("."+i.arcs).selectAll("."+i.arc).data(s.arcData.bind(s))).enter().append("path").attr("class",s.classArc.bind(s)).style("fill",function(t){return s.color(t.data)}).style("cursor",function(t){return u.interaction_enabled&&u.data_selection_isselectable(t)?"pointer":null}).each(function(t){s.isGaugeType(t.data)&&(t.startAngle=t.endAngle=u.gauge_startingAngle),this._current=t}),d&&((a=c.selectAll("."+i.arcs).selectAll("."+i.arcLabelLine).data(s.arcData.bind(s))).enter().append("rect").attr("class",function(t){return i.arcLabelLine+" "+i.target+" "+i.target+"-"+t.data.id}),1===s.filterTargetsToShow(s.data.targets).length?a.style("display","none"):a.style("fill",function(t){return u.color_pattern.length>0?s.levelColor(t.data.values[0].value):s.color(t.data)}).style("display",u.gauge_labelLine_show?"":"none").each(function(t){var e=0,n=0,i=0,o="";if(s.hiddenTargetIds.indexOf(t.data.id)<0){var r=s.updateAngle(t),a=s.gaugeArcWidth/s.filterTargetsToShow(s.data.targets).length*(r.index+1),u=r.endAngle-Math.PI/2,c=s.radius-a,d=u-(0===c?0:1/c);e=s.radiusExpanded-s.radius+a,n=Math.cos(d)*c,i=Math.sin(d)*c,o="rotate("+180*u/Math.PI+", "+n+", "+i+")"}l.select(this).attr({x:n,y:i,width:e,height:2,transform:o}).style("stroke-dasharray","0, "+(e+2)+", 0")})),o.attr("transform",function(t){return!s.isGaugeType(t.data)&&n?"scale(0)":""}).on("mouseover",u.interaction_enabled?function(t){var e,n;s.transiting||(e=s.updateAngle(t))&&(n=s.convertToArcData(e),s.expandArc(e.data.id),s.api.focus(e.data.id),s.toggleFocusLegend(e.data.id,!0),s.config.data_onmouseover(n,this))}:null).on("mousemove",u.interaction_enabled?function(t){var e,n=s.updateAngle(t);n&&(e=[s.convertToArcData(n)],s.showTooltip(e,this))}:null).on("mouseout",u.interaction_enabled?function(t){var e,n;s.transiting||(e=s.updateAngle(t))&&(n=s.convertToArcData(e),s.unexpandArc(e.data.id),s.api.revert(),s.revertLegend(),s.hideTooltip(),s.config.data_onmouseout(n,this))}:null).on("click",u.interaction_enabled?function(t,e){var n,i=s.updateAngle(t);i&&(n=s.convertToArcData(i),s.toggleShape&&s.toggleShape(this,n,e),s.config.data_onclick.call(s.api,n,this))}:null).each(function(){s.transiting=!0}).transition().duration(t).attrTween("d",function(t){var e,n=s.updateAngle(t);return n?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),e=l.interpolate(this._current,n),this._current=e(0),function(n){var i=e(n);return i.data=t.data,s.getArc(i,!0)}):function(){return"M 0 0"}}).attr("transform",n?"scale(1)":"").style("fill",function(t){return s.levelColor?s.levelColor(t.data.values[0].value):s.color(t.data.id)}).call(s.endall,function(){s.transiting=!1}),o.exit().transition().duration(e).style("opacity",0).remove(),c.selectAll("."+i.chartArc).select("text").style("opacity",0).attr("class",function(t){return s.isGaugeType(t.data)?i.gaugeValue:""}).text(s.textForArcLabel.bind(s)).attr("transform",s.transformForArcLabel.bind(s)).style("font-size",function(t){return s.isGaugeType(t.data)&&1===s.filterTargetsToShow(s.data.targets).length?Math.round(s.radius/5)+"px":""}).transition().duration(t).style("opacity",function(t){return s.isTargetToShow(t.data.id)&&s.isArcType(t.data)?1:0}),c.select("."+i.chartArcsTitle).style("opacity",s.hasType("donut")||d?1:0),d){var h=0;(r=s.arcs.select("g."+i.chartArcsBackground).selectAll("path."+i.chartArcsBackground).data(s.data.targets)).enter().append("path"),r.attr("class",function(t,e){return i.chartArcsBackground+" "+i.chartArcsBackground+"-"+e}).attr("d",function(t){if(s.hiddenTargetIds.indexOf(t.id)>=0)return"M 0 0";var e={data:[{value:u.gauge_max}],startAngle:u.gauge_startingAngle,endAngle:-1*u.gauge_startingAngle*(u.gauge_fullCircle?Math.PI:1),index:h++};return s.getArc(e,!0,!0)}),r.exit().remove(),s.arcs.select("."+i.chartArcsGaugeUnit).attr("dy",".75em").text(u.gauge_label_show?u.gauge_units:""),s.arcs.select("."+i.chartArcsGaugeMin).attr("dx",-1*(s.innerRadius+(s.radius-s.innerRadius)/(u.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(u.gauge_label_show?s.textForGaugeMinMax(u.gauge_min,!1):""),s.arcs.select("."+i.chartArcsGaugeMax).attr("dx",s.innerRadius+(s.radius-s.innerRadius)/(u.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(u.gauge_label_show?s.textForGaugeMinMax(u.gauge_max,!0):"")}},C.initGauge=function(){var t=this.arcs;this.hasType("gauge")&&(t.append("g").attr("class",i.chartArcsBackground),t.append("text").attr("class",i.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",i.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",i.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},C.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},C.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return!1;return!0},C.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},C.getCaches=function(t){var e,n=[];for(e=0;e<t.length;e++)t[e]in this.cache&&n.push(this.cloneTarget(this.cache[t[e]]));return n},C.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},C.generateClass=function(t,e){return" "+t+" "+t+this.getTargetSelectorSuffix(e)},C.classText=function(t){return this.generateClass(i.text,t.index)},C.classTexts=function(t){return this.generateClass(i.texts,t.id)},C.classShape=function(t){return this.generateClass(i.shape,t.index)},C.classShapes=function(t){return this.generateClass(i.shapes,t.id)},C.classLine=function(t){return this.classShape(t)+this.generateClass(i.line,t.id)},C.classLines=function(t){return this.classShapes(t)+this.generateClass(i.lines,t.id)},C.classCircle=function(t){return this.classShape(t)+this.generateClass(i.circle,t.index)},C.classCircles=function(t){return this.classShapes(t)+this.generateClass(i.circles,t.id)},C.classBar=function(t){return this.classShape(t)+this.generateClass(i.bar,t.index)},C.classBars=function(t){return this.classShapes(t)+this.generateClass(i.bars,t.id)},C.classArc=function(t){return this.classShape(t.data)+this.generateClass(i.arc,t.data.id)},C.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(i.arcs,t.data.id)},C.classArea=function(t){return this.classShape(t)+this.generateClass(i.area,t.id)},C.classAreas=function(t){return this.classShapes(t)+this.generateClass(i.areas,t.id)},C.classRegion=function(t,e){return this.generateClass(i.region,e)+" "+("class"in t?t.class:"")},C.classEvent=function(t){return this.generateClass(i.eventRect,t.index)},C.classTarget=function(t){var e=this.config.data_classes[t],n="";return e&&(n=" "+i.target+"-"+e),this.generateClass(i.target,t)+n},C.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},C.classFocused=function(t){return" "+(this.focusedTargetIds.indexOf(t.id)>=0?i.focused:"")},C.classDefocused=function(t){return" "+(this.defocusedTargetIds.indexOf(t.id)>=0?i.defocused:"")},C.classChartText=function(t){return i.chartText+this.classTarget(t.id)},C.classChartLine=function(t){return i.chartLine+this.classTarget(t.id)},C.classChartBar=function(t){return i.chartBar+this.classTarget(t.id)},C.classChartArc=function(t){return i.chartArc+this.classTarget(t.data.id)},C.getTargetSelectorSuffix=function(t){return t||0===t?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},C.selectorTarget=function(t,e){return(e||"")+"."+i.target+this.getTargetSelectorSuffix(t)},C.selectorTargets=function(t,e){var n=this;return(t=t||[]).length?t.map(function(t){return n.selectorTarget(t,e)}):null},C.selectorLegend=function(t){return"."+i.legendItem+this.getTargetSelectorSuffix(t)},C.selectorLegends=function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null},C.getClipPath=function(t){return"url("+(window.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0?"":document.URL.split("#")[0])+"#"+t+")"},C.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},C.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},C.getAxisClipY=function(t){return t?-20:-this.margin.top},C.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},C.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},C.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},C.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},C.getAxisClipWidth=function(t){var e=Math.max(30,this.margin.left),n=Math.max(30,this.margin.right);return t?this.width+2+e+n:this.margin.left+20},C.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},C.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},C.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},C.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},C.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},C.generateColor=function(){var t=this.config,e=this.d3,n=t.data_colors,i=v(t.color_pattern)?t.color_pattern:e.scale.category10().range(),o=t.data_color,r=[];return function(t){var e,a=t.id||t.data&&t.data.id||t;return n[a]instanceof Function?e=n[a](t):n[a]?e=n[a]:(r.indexOf(a)<0&&r.push(a),e=i[r.indexOf(a)%i.length],n[a]=e),o instanceof Function?o(e,t):e}},C.generateLevelColor=function(){var t=this.config,e=t.color_pattern,n=t.color_threshold,i="value"===n.unit,o=n.values&&n.values.length?n.values:[],r=n.max||100;return v(t.color_threshold)?function(t){var n,a=e[e.length-1];for(n=0;n<o.length;n++)if((i?t:100*t/r)<o[n]){a=e[n];break}return a}:null},C.getDefaultConfig=function(){var t={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,n,i){return this.getTooltipContent?this.getTooltipContent(t,e,n,i):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(e){t[e]=this.additionalConfig[e]},this),t},C.additionalConfig={},C.loadConfig=function(t){var e,n,i,r=this.config;Object.keys(r).forEach(function(a){e=t,n=a.split("_"),i=function t(){var i=n.shift();return i&&e&&"object"===(void 0===e?"undefined":o(e))&&i in e?(e=e[i],t()):i?void 0:e}(),h(i)&&(r[a]=i)})},C.convertUrlToData=function(t,e,n,i,o){var r=this,a=e||"csv",s=r.d3.xhr(t);n&&Object.keys(n).forEach(function(t){s.header(t,n[t])}),s.get(function(t,e){var n,s=e.response||e.responseText;if(!e)throw new Error(t.responseURL+" "+t.status+" ("+t.statusText+")");n="json"===a?r.convertJsonToData(JSON.parse(s),i):"tsv"===a?r.convertTsvToData(s):r.convertCsvToData(s),o.call(r,n)})},C.convertXsvToData=function(t,e){var n,i=e.parseRows(t);return 1===i.length?(n=[{}],i[0].forEach(function(t){n[0][t]=null})):n=e.parse(t),n},C.convertCsvToData=function(t){return this.convertXsvToData(t,this.d3.csv)},C.convertTsvToData=function(t){return this.convertXsvToData(t,this.d3.tsv)},C.convertJsonToData=function(t,e){var n,i,o=this,r=[];return e?(e.x?(n=e.value.concat(e.x),o.config.data_x=e.x):n=e.value,r.push(n),t.forEach(function(t){var e=[];n.forEach(function(n){var i=o.findValueInJson(t,n);d(i)&&(i=null),e.push(i)}),r.push(e)}),i=o.convertRowsToData(r)):(Object.keys(t).forEach(function(e){r.push([e].concat(t[e]))}),i=o.convertColumnsToData(r)),i},C.findValueInJson=function(t,e){for(var n=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0;i<n.length;++i){var o=n[i];if(!(o in t))return;t=t[o]}return t},C.convertRowsToData=function(t){for(var e=[],n=t[0],i=1;i<t.length;i++){for(var o={},r=0;r<t[i].length;r++){if(d(t[i][r]))throw new Error("Source data is missing a component at ("+i+","+r+")!");o[n[r]]=t[i][r]}e.push(o)}return e},C.convertColumnsToData=function(t){for(var e=[],n=0;n<t.length;n++)for(var i=t[n][0],o=1;o<t[n].length;o++){if(d(e[o-1])&&(e[o-1]={}),d(t[n][o]))throw new Error("Source data is missing a component at ("+n+","+o+")!");e[o-1][i]=t[n][o]}return e},C.convertDataToTargets=function(t,e){var n,i=this,o=i.config,r=i.d3.keys(t[0]).filter(i.isNotX,i),a=i.d3.keys(t[0]).filter(i.isX,i);return r.forEach(function(n){var r=i.getXKey(n);i.isCustomX()||i.isTimeSeries()?a.indexOf(r)>=0?i.data.xs[n]=(e&&i.data.xs[n]?i.data.xs[n]:[]).concat(t.map(function(t){return t[r]}).filter(s).map(function(t,e){return i.generateTargetX(t,n,e)})):o.data_x?i.data.xs[n]=i.getOtherTargetXs():v(o.data_xs)&&(i.data.xs[n]=i.getXValuesOfXKey(r,i.data.targets)):i.data.xs[n]=t.map(function(t,e){return e})}),r.forEach(function(t){if(!i.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}),(n=r.map(function(e,n){var r=o.data_idConverter(e);return{id:r,id_org:e,values:t.map(function(t,a){var s,l=t[i.getXKey(e)],u=null===t[e]||isNaN(t[e])?null:+t[e];return i.isCustomX()&&i.isCategorized()&&!d(l)?(0===n&&0===a&&(o.axis_x_categories=[]),-1===(s=o.axis_x_categories.indexOf(l))&&(s=o.axis_x_categories.length,o.axis_x_categories.push(l))):s=i.generateTargetX(l,e,a),(d(t[e])||i.data.xs[e].length<=a)&&(s=void 0),{x:s,value:u,id:r}}).filter(function(t){return h(t.x)})}})).forEach(function(t){var e;o.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),e=0,t.values.forEach(function(t){t.index=e++}),i.data.xs[t.id].sort(function(t,e){return t-e})}),i.hasNegativeValue=i.hasNegativeValueInTargets(n),i.hasPositiveValue=i.hasPositiveValueInTargets(n),o.data_type&&i.setTargetType(i.mapToIds(n).filter(function(t){return!(t in o.data_types)}),o.data_type),n.forEach(function(t){i.addCache(t.id_org,t)}),n},C.isX=function(t){var e=this.config;return e.data_x&&t===e.data_x||v(e.data_xs)&&y(e.data_xs,t)},C.isNotX=function(t){return!this.isX(t)},C.getXKey=function(t){var e=this.config;return e.data_x?e.data_x:v(e.data_xs)?e.data_xs[t]:null},C.getXValuesOfXKey=function(t,e){var n,i=this;return(e&&v(e)?i.mapToIds(e):[]).forEach(function(e){i.getXKey(e)===t&&(n=i.data.xs[e])}),n},C.getIndexByX=function(t){var e=this.filterByX(this.data.targets,t);return e.length?e[0].index:null},C.getXValue=function(t,e){return t in this.data.xs&&this.data.xs[t]&&s(this.data.xs[t][e])?this.data.xs[t][e]:e},C.getOtherTargetXs=function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},C.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},C.addXs=function(t){var e=this;Object.keys(t).forEach(function(n){e.config.data_xs[n]=t[n]})},C.hasMultipleX=function(t){return this.d3.set(Object.keys(t).map(function(e){return t[e]})).size()>1},C.isMultipleX=function(){return v(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},C.addName=function(t){var e;return t&&(e=this.config.data_names[t.id],t.name=void 0!==e?e:t.id),t},C.getValueOnIndex=function(t,e){var n=t.filter(function(t){return t.index===e});return n.length?n[0]:null},C.updateTargetX=function(t,e){var n=this;t.forEach(function(t){t.values.forEach(function(i,o){i.x=n.generateTargetX(e[o],t.id,o)}),n.data.xs[t.id]=e})},C.updateTargetXs=function(t,e){var n=this;t.forEach(function(t){e[t.id]&&n.updateTargetX([t],e[t.id])})},C.generateTargetX=function(t,e,n){var i=this;return i.isTimeSeries()?t?i.parseDate(t):i.parseDate(i.getXValue(e,n)):i.isCustomX()&&!i.isCategorized()?s(t)?+t:i.getXValue(e,n):n},C.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},C.updateXs=function(){var t=this;t.data.targets.length&&(t.xs=[],t.data.targets[0].values.forEach(function(e){t.xs[e.index]=e.x}))},C.getPrevX=function(t){var e=this.xs[t-1];return void 0!==e?e:null},C.getNextX=function(t){var e=this.xs[t+1];return void 0!==e?e:null},C.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(t){return t.values.length})},C.getMaxDataCountTarget=function(t){var e,n=t.length,i=0;return n>1?t.forEach(function(t){t.values.length>i&&(e=t,i=t.values.length)}):e=n?t[0]:null,e},C.getEdgeX=function(t){return t.length?[this.d3.min(t,function(t){return t.values[0].x}),this.d3.max(t,function(t){return t.values[t.values.length-1].x})]:[0,0]},C.mapToIds=function(t){return t.map(function(t){return t.id})},C.mapToTargetIds=function(t){return t?[].concat(t):this.mapToIds(this.data.targets)},C.hasTarget=function(t,e){var n,i=this.mapToIds(t);for(n=0;n<i.length;n++)if(i[n]===e)return!0;return!1},C.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0},C.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0},C.filterTargetsToShow=function(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})},C.mapTargetsToUniqueXs=function(t){var e=this.d3.set(this.d3.merge(t.map(function(t){return t.values.map(function(t){return+t.x})}))).values();return(e=this.isTimeSeries()?e.map(function(t){return new Date(+t)}):e.map(function(t){return+t})).sort(function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN})},C.addHiddenTargetIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenTargetIds.indexOf(t[e])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(t[e]))},C.removeHiddenTargetIds=function(t){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(e){return t.indexOf(e)<0})},C.addHiddenLegendIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenLegendIds.indexOf(t[e])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(t[e]))},C.removeHiddenLegendIds=function(t){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(e){return t.indexOf(e)<0})},C.getValuesAsIdKeyed=function(t){var e={};return t.forEach(function(t){e[t.id]=[],t.values.forEach(function(n){e[t.id].push(n.value)})}),e},C.checkValueInTargets=function(t,e){var n,i,o,r=Object.keys(t);for(n=0;n<r.length;n++)for(o=t[r[n]].values,i=0;i<o.length;i++)if(e(o[i].value))return!0;return!1},C.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return t<0})},C.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return t>0})},C.isOrderDesc=function(){var t=this.config;return"string"==typeof t.data_order&&"desc"===t.data_order.toLowerCase()},C.isOrderAsc=function(){var t=this.config;return"string"==typeof t.data_order&&"asc"===t.data_order.toLowerCase()},C.getOrderFunction=function(){var t=this.config,e=this.isOrderAsc(),n=this.isOrderDesc();if(e||n)return function(t,e){var i=function(t,e){return t+Math.abs(e.value)},o=t.values.reduce(i,0),r=e.values.reduce(i,0);return n?r-o:o-r};if(l(t.data_order))return t.data_order;if(u(t.data_order)){var i=t.data_order;return function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}}},C.orderTargets=function(t){var e=this.getOrderFunction();return e&&(t.sort(e),(this.isOrderAsc()||this.isOrderDesc())&&t.reverse()),t},C.filterByX=function(t,e){return this.d3.merge(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},C.filterRemoveNull=function(t){return t.filter(function(t){return s(t.value)})},C.filterByXDomain=function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},C.hasDataLabel=function(){var t=this.config;return!("boolean"!=typeof t.data_labels||!t.data_labels)||!("object"!==o(t.data_labels)||!v(t.data_labels))},C.getDataLabelLength=function(t,e,n){var i=this,o=[0,0];return i.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return i.dataLabelFormat(t.id)(t)}).each(function(t,e){o[e]=1.3*this.getBoundingClientRect()[n]}).remove(),o},C.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},C.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},C.findSameXOfValues=function(t,e){var n,i=t[e].x,o=[];for(n=e-1;n>=0&&i===t[n].x;n--)o.push(t[n]);for(n=e;n<t.length&&i===t[n].x;n++)o.push(t[n]);return o},C.findClosestFromTargets=function(t,e){var n,i=this;return n=t.map(function(t){return i.findClosest(t.values,e)}),i.findClosest(n,e)},C.findClosest=function(t,e){var n,o=this,r=o.config.point_sensitivity;return t.filter(function(t){return t&&o.isBarType(t.id)}).forEach(function(t){var e=o.main.select("."+i.bars+o.getTargetSelectorSuffix(t.id)+" ."+i.bar+"-"+t.index).node();!n&&o.isWithinBar(e)&&(n=t)}),t.filter(function(t){return t&&!o.isBarType(t.id)}).forEach(function(t){var i=o.dist(t,e);i<r&&(r=i,n=t)}),n},C.dist=function(t,e){var n=this.config,i=n.axis_rotated?1:0,o=n.axis_rotated?0:1,r=this.circleY(t,t.index),a=this.x(t.x);return Math.sqrt(Math.pow(a-e[i],2)+Math.pow(r-e[o],2))},C.convertValuesToStep=function(t){var e,n=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;0<e;e--)n[e]=n[e-1];return n[0]={x:n[0].x-1,value:n[0].value,id:n[0].id},n[t.length+1]={x:n[t.length].x+1,value:n[t.length].value,id:n[t.length].id},n},C.updateDataAttributes=function(t,e){var n=this.config["data_"+t];return void 0===e?n:(Object.keys(e).forEach(function(t){n[t]=e[t]}),this.redraw({withLegend:!0}),n)},C.load=function(t,e){var n=this;t&&(e.filter&&(t=t.filter(e.filter)),(e.type||e.types)&&t.forEach(function(t){var i=e.types&&e.types[t.id]?e.types[t.id]:e.type;n.setTargetType(t.id,i)}),n.data.targets.forEach(function(e){for(var n=0;n<t.length;n++)if(e.id===t[n].id){e.values=t[n].values,t.splice(n,1);break}}),n.data.targets=n.data.targets.concat(t)),n.updateTargets(n.data.targets),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()},C.loadFromArgs=function(t){var e=this;t.data?e.load(e.convertDataToTargets(t.data),t):t.url?e.convertUrlToData(t.url,t.mimeType,t.headers,t.keys,function(n){e.load(e.convertDataToTargets(n),t)}):t.json?e.load(e.convertDataToTargets(e.convertJsonToData(t.json,t.keys)),t):t.rows?e.load(e.convertDataToTargets(e.convertRowsToData(t.rows)),t):t.columns?e.load(e.convertDataToTargets(e.convertColumnsToData(t.columns)),t):e.load(null,t)},C.unload=function(t,e){var n=this;e||(e=function(){}),(t=t.filter(function(t){return n.hasTarget(n.data.targets,t)}))&&0!==t.length?(n.svg.selectAll(t.map(function(t){return n.selectorTarget(t)})).transition().style("opacity",0).remove().call(n.endall,e),t.forEach(function(t){n.withoutFadeIn[t]=!1,n.legend&&n.legend.selectAll("."+i.legendItem+n.getTargetSelectorSuffix(t)).remove(),n.data.targets=n.data.targets.filter(function(e){return e.id!==t})})):e()},C.getYDomainMin=function(t){var e,n,i,o,r,a,s=this,l=s.config,u=s.mapToIds(t),c=s.getValuesAsIdKeyed(t);if(l.data_groups.length>0)for(a=s.hasNegativeValueInTargets(t),e=0;e<l.data_groups.length;e++)if(0!==(o=l.data_groups[e].filter(function(t){return u.indexOf(t)>=0})).length)for(i=o[0],a&&c[i]&&c[i].forEach(function(t,e){c[i][e]=t<0?t:0}),n=1;n<o.length;n++)r=o[n],c[r]&&c[r].forEach(function(t,e){s.axis.getId(r)!==s.axis.getId(i)||!c[i]||a&&+t>0||(c[i][e]+=+t)});return s.d3.min(Object.keys(c).map(function(t){return s.d3.min(c[t])}))},C.getYDomainMax=function(t){var e,n,i,o,r,a,s=this,l=s.config,u=s.mapToIds(t),c=s.getValuesAsIdKeyed(t);if(l.data_groups.length>0)for(a=s.hasPositiveValueInTargets(t),e=0;e<l.data_groups.length;e++)if(0!==(o=l.data_groups[e].filter(function(t){return u.indexOf(t)>=0})).length)for(i=o[0],a&&c[i]&&c[i].forEach(function(t,e){c[i][e]=t>0?t:0}),n=1;n<o.length;n++)r=o[n],c[r]&&c[r].forEach(function(t,e){s.axis.getId(r)!==s.axis.getId(i)||!c[i]||a&&+t<0||(c[i][e]+=+t)});return s.d3.max(Object.keys(c).map(function(t){return s.d3.max(c[t])}))},C.getYDomain=function(t,e,n){var i,o,r,a,l,u,c,d,h,f,p=this,m=p.config,_=t.filter(function(t){return p.axis.getId(t.id)===e}),y=n?p.filterByXDomain(_,n):_,b="y2"===e?m.axis_y2_min:m.axis_y_min,x="y2"===e?m.axis_y2_max:m.axis_y_max,w=p.getYDomainMin(y),S=p.getYDomainMax(y),T="y2"===e?m.axis_y2_center:m.axis_y_center,C=p.hasType("bar",y)&&m.bar_zerobased||p.hasType("area",y)&&m.area_zerobased,L="y2"===e?m.axis_y2_inverted:m.axis_y_inverted,A=p.hasDataLabel()&&m.axis_rotated,D=p.hasDataLabel()&&!m.axis_rotated;return w=s(b)?b:s(x)?w<x?w:x-10:w,S=s(x)?x:s(b)?b<S?S:b+10:S,0===y.length?"y2"===e?p.y2.domain():p.y.domain():(isNaN(w)&&(w=0),isNaN(S)&&(S=w),w===S&&(w<0?S=0:w=0),h=w>=0&&S>=0,f=w<=0&&S<=0,(s(b)&&h||s(x)&&f)&&(C=!1),C&&(h&&(w=0),f&&(S=0)),r=a=.1*(o=Math.abs(S-w)),void 0!==T&&(S=T+(l=Math.max(Math.abs(w),Math.abs(S))),w=T-l),A?(u=p.getDataLabelLength(w,S,"width"),c=g(p.y.range()),r+=o*((d=[u[0]/c,u[1]/c])[1]/(1-d[0]-d[1])),a+=o*(d[0]/(1-d[0]-d[1]))):D&&(u=p.getDataLabelLength(w,S,"height"),r+=p.axis.convertPixelsToAxisPadding(u[1],o),a+=p.axis.convertPixelsToAxisPadding(u[0],o)),"y"===e&&v(m.axis_y_padding)&&(r=p.axis.getPadding(m.axis_y_padding,"top",r,o),a=p.axis.getPadding(m.axis_y_padding,"bottom",a,o)),"y2"===e&&v(m.axis_y2_padding)&&(r=p.axis.getPadding(m.axis_y2_padding,"top",r,o),a=p.axis.getPadding(m.axis_y2_padding,"bottom",a,o)),C&&(h&&(a=w),f&&(r=-S)),i=[w-a,S+r],L?i.reverse():i)},C.getXDomainMin=function(t){var e=this,n=e.config;return h(n.axis_x_min)?e.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:e.d3.min(t,function(t){return e.d3.min(t.values,function(t){return t.x})})},C.getXDomainMax=function(t){var e=this,n=e.config;return h(n.axis_x_max)?e.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:e.d3.max(t,function(t){return e.d3.max(t.values,function(t){return t.x})})},C.getXDomainPadding=function(t){var e,n,i,r,a=this.config,l=t[1]-t[0];return n=this.isCategorized()?0:this.hasType("bar")?(e=this.getMaxDataCount())>1?l/(e-1)/2:.5:.01*l,"object"===o(a.axis_x_padding)&&v(a.axis_x_padding)?(i=s(a.axis_x_padding.left)?a.axis_x_padding.left:n,r=s(a.axis_x_padding.right)?a.axis_x_padding.right:n):i=r="number"==typeof a.axis_x_padding?a.axis_x_padding:n,{left:i,right:r}},C.getXDomain=function(t){var e=this,n=[e.getXDomainMin(t),e.getXDomainMax(t)],i=n[0],o=n[1],r=e.getXDomainPadding(n),a=0,s=0;return i-o!=0||e.isCategorized()||(e.isTimeSeries()?(i=new Date(.5*i.getTime()),o=new Date(1.5*o.getTime())):(i=0===i?1:.5*i,o=0===o?-1:1.5*o)),(i||0===i)&&(a=e.isTimeSeries()?new Date(i.getTime()-r.left):i-r.left),(o||0===o)&&(s=e.isTimeSeries()?new Date(o.getTime()+r.right):o+r.right),[a,s]},C.updateXDomain=function(t,e,n,i,o){var r=this,a=r.config;return n&&(r.x.domain(o||r.d3.extent(r.getXDomain(t))),r.orgXDomain=r.x.domain(),a.zoom_enabled&&r.zoom.scale(r.x).updateScaleExtent(),r.subX.domain(r.x.domain()),r.brush&&r.brush.scale(r.subX)),e&&(r.x.domain(o||(!r.brush||r.brush.empty()?r.orgXDomain:r.brush.extent())),a.zoom_enabled&&r.zoom.scale(r.x).updateScaleExtent()),i&&r.x.domain(r.trimXDomain(r.x.orgDomain())),r.x.domain()},C.trimXDomain=function(t){var e=this.getZoomDomain(),n=e[0],i=e[1];return t[0]<=n&&(t[1]=+t[1]+(n-t[0]),t[0]=n),i<=t[1]&&(t[0]=+t[0]-(t[1]-i),t[1]=i),t},C.drag=function(t){var e,n,o,r,a,s,l,u,c=this,d=c.config,h=c.main,f=c.d3;c.hasArcType()||d.data_selection_enabled&&(d.zoom_enabled&&!c.zoom.altDomain||d.data_selection_multiple&&(e=c.dragStart[0],n=c.dragStart[1],o=t[0],r=t[1],a=Math.min(e,o),s=Math.max(e,o),l=d.data_selection_grouped?c.margin.top:Math.min(n,r),u=d.data_selection_grouped?c.height:Math.max(n,r),h.select("."+i.dragarea).attr("x",a).attr("y",l).attr("width",s-a).attr("height",u-l),h.selectAll("."+i.shapes).selectAll("."+i.shape).filter(function(t){return d.data_selection_isselectable(t)}).each(function(t,e){var n,o,r,d,h,p,g=f.select(this),m=g.classed(i.SELECTED),v=g.classed(i.INCLUDED),_=!1;if(g.classed(i.circle))n=1*g.attr("cx"),o=1*g.attr("cy"),h=c.togglePoint,_=a<n&&n<s&&l<o&&o<u;else{if(!g.classed(i.bar))return;n=(p=x(this)).x,o=p.y,r=p.width,d=p.height,h=c.togglePath,_=!(s<n||n+r<a||u<o||o+d<l)}_^v&&(g.classed(i.INCLUDED,!v),g.classed(i.SELECTED,!m),h.call(c,!m,g,t,e))})))},C.dragstart=function(t){var e=this,n=e.config;e.hasArcType()||n.data_selection_enabled&&(e.dragStart=t,e.main.select("."+i.chart).append("rect").attr("class",i.dragarea).style("opacity",.1),e.dragging=!0)},C.dragend=function(){var t=this,e=t.config;t.hasArcType()||e.data_selection_enabled&&(t.main.select("."+i.dragarea).transition().duration(100).style("opacity",0).remove(),t.main.selectAll("."+i.shape).classed(i.INCLUDED,!1),t.dragging=!1)},C.getYFormat=function(t){var e=this,n=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.yFormat,i=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.y2Format;return function(t,o,r){return("y2"===e.axis.getId(r)?i:n).call(e,t,o)}},C.yFormat=function(t){var e=this.config;return(e.axis_y_tick_format?e.axis_y_tick_format:this.defaultValueFormat)(t)},C.y2Format=function(t){var e=this.config;return(e.axis_y2_tick_format?e.axis_y2_tick_format:this.defaultValueFormat)(t)},C.defaultValueFormat=function(t){return s(t)?+t:""},C.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},C.dataLabelFormat=function(t){var e=this.config.data_labels,n=function(t){return s(t)?+t:""};return"function"==typeof e.format?e.format:"object"===o(e.format)?e.format[t]?!0===e.format[t]?n:e.format[t]:function(){return""}:n},C.initGrid=function(){var t=this,e=t.config,n=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",i.grid),e.grid_x_show&&t.grid.append("g").attr("class",i.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",i.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",i.xgridFocus).append("line").attr("class",i.xgridFocus),t.xgrid=n.selectAll([]),e.grid_lines_front||t.initGridLines()},C.initGridLines=function(){var t=this,e=t.d3;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",i.grid+" "+i.gridLines),t.gridLines.append("g").attr("class",i.xgridLines),t.gridLines.append("g").attr("class",i.ygridLines),t.xgridLines=e.selectAll([])},C.updateXGrid=function(t){var e=this,n=e.config,o=e.d3,r=e.generateGridData(n.grid_x_type,e.x),a=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=n.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-a},y2:function(t){return e.x(t)-a}}:{x1:function(t){return e.x(t)+a},x2:function(t){return e.x(t)+a},y1:0,y2:e.height},e.xgrid=e.main.select("."+i.xgrids).selectAll("."+i.xgrid).data(r),e.xgrid.enter().append("line").attr("class",i.xgrid),t||e.xgrid.attr(e.xgridAttr).style("opacity",function(){return+o.select(this).attr(n.axis_rotated?"y1":"x1")===(n.axis_rotated?e.height:0)?0:1}),e.xgrid.exit().remove()},C.updateYGrid=function(){var t=this,e=t.config,n=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks);t.ygrid=t.main.select("."+i.ygrids).selectAll("."+i.ygrid).data(n),t.ygrid.enter().append("line").attr("class",i.ygrid),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),t.ygrid.exit().remove(),t.smoothLines(t.ygrid,"grid")},C.gridTextAnchor=function(t){return t.position?t.position:"end"},C.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},C.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},C.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},C.updateGrid=function(t){var e,n,o,r=this,a=r.main,s=r.config;r.grid.style("visibility",r.hasArcType()?"hidden":"visible"),a.select("line."+i.xgridFocus).style("visibility","hidden"),s.grid_x_show&&r.updateXGrid(),r.xgridLines=a.select("."+i.xgridLines).selectAll("."+i.xgridLine).data(s.grid_x_lines),(e=r.xgridLines.enter().append("g").attr("class",function(t){return i.xgridLine+(t.class?" "+t.class:"")})).append("line").style("opacity",0),e.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",s.axis_rotated?"":"rotate(-90)").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),r.xgridLines.exit().transition().duration(t).style("opacity",0).remove(),s.grid_y_show&&r.updateYGrid(),r.ygridLines=a.select("."+i.ygridLines).selectAll("."+i.ygridLine).data(s.grid_y_lines),(n=r.ygridLines.enter().append("g").attr("class",function(t){return i.ygridLine+(t.class?" "+t.class:"")})).append("line").style("opacity",0),n.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",s.axis_rotated?"rotate(-90)":"").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),o=r.yv.bind(r),r.ygridLines.select("line").transition().duration(t).attr("x1",s.axis_rotated?o:0).attr("x2",s.axis_rotated?o:r.width).attr("y1",s.axis_rotated?0:o).attr("y2",s.axis_rotated?r.height:o).style("opacity",1),r.ygridLines.select("text").transition().duration(t).attr("x",s.axis_rotated?r.xGridTextX.bind(r):r.yGridTextX.bind(r)).attr("y",o).text(function(t){return t.text}).style("opacity",1),r.ygridLines.exit().transition().duration(t).style("opacity",0).remove()},C.redrawGrid=function(t){var e=this,n=e.config,i=e.xv.bind(e),o=e.xgridLines.select("line"),r=e.xgridLines.select("text");return[(t?o.transition():o).attr("x1",n.axis_rotated?0:i).attr("x2",n.axis_rotated?e.width:i).attr("y1",n.axis_rotated?i:0).attr("y2",n.axis_rotated?i:e.height).style("opacity",1),(t?r.transition():r).attr("x",n.axis_rotated?e.yGridTextX.bind(e):e.xGridTextX.bind(e)).attr("y",i).text(function(t){return t.text}).style("opacity",1)]},C.showXGridFocus=function(t){var e=this,n=e.config,o=t.filter(function(t){return t&&s(t.value)}),r=e.main.selectAll("line."+i.xgridFocus),a=e.xx.bind(e);n.tooltip_show&&(e.hasType("scatter")||e.hasArcType()||(r.style("visibility","visible").data([o[0]]).attr(n.axis_rotated?"y1":"x1",a).attr(n.axis_rotated?"y2":"x2",a),e.smoothLines(r,"grid")))},C.hideXGridFocus=function(){this.main.select("line."+i.xgridFocus).style("visibility","hidden")},C.updateXgridFocus=function(){var t=this.config;this.main.select("line."+i.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?this.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:this.height)},C.generateGridData=function(t,e){var n,o,r,a,s=[],l=this.main.select("."+i.axisX).selectAll(".tick").size();if("year"===t)for(o=(n=this.getXDomain())[0].getFullYear(),r=n[1].getFullYear(),a=o;a<=r;a++)s.push(new Date(a+"-01-01 00:00:00"));else(s=e.ticks(10)).length>l&&(s=s.filter(function(t){return(""+t).indexOf(".")<0}));return s},C.getGridFilterToRemove=function(t){return t?function(e){var n=!1;return[].concat(t).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(n=!0)}),n}:function(){return!0}},C.removeGridLines=function(t,e){var n=this.config,o=this.getGridFilterToRemove(t),r=function(t){return!o(t)},a=e?i.xgridLines:i.ygridLines,s=e?i.xgridLine:i.ygridLine;this.main.select("."+a).selectAll("."+s).filter(o).transition().duration(n.transition_duration).style("opacity",0).remove(),e?n.grid_x_lines=n.grid_x_lines.filter(r):n.grid_y_lines=n.grid_y_lines.filter(r)},C.initEventRect=function(){this.main.select("."+i.chart).append("g").attr("class",i.eventRects).style("fill-opacity",0)},C.redrawEventRect=function(){var t,e,n=this,o=n.config,r=n.isMultipleX(),a=n.main.select("."+i.eventRects).style("cursor",o.zoom_enabled?o.axis_rotated?"ns-resize":"ew-resize":null).classed(i.eventRectsMultiple,r).classed(i.eventRectsSingle,!r);a.selectAll("."+i.eventRect).remove(),n.eventRect=a.selectAll("."+i.eventRect),r?(t=n.eventRect.data([0]),n.generateEventRectsForMultipleXs(t.enter()),n.updateEventRect(t)):(e=n.getMaxDataCountTarget(n.data.targets),a.datum(e?e.values:[]),n.eventRect=a.selectAll("."+i.eventRect),t=n.eventRect.data(function(t){return t}),n.generateEventRectsForSingleX(t.enter()),n.updateEventRect(t),t.exit().remove())},C.updateEventRect=function(t){var e,n,i,o,r,a,s=this,l=s.config;t=t||s.eventRect.data(function(t){return t}),s.isMultipleX()?(e=0,n=0,i=s.width,o=s.height):(!s.isCustomX()&&!s.isTimeSeries()||s.isCategorized()?(r=s.getEventRectWidth(),a=function(t){return s.x(t.x)-r/2}):(s.updateXs(),r=function(t){var e=s.getPrevX(t.index),n=s.getNextX(t.index);return null===e&&null===n?l.axis_rotated?s.height:s.width:(null===e&&(e=s.x.domain()[0]),null===n&&(n=s.x.domain()[1]),Math.max(0,(s.x(n)-s.x(e))/2))},a=function(t){var e=s.getPrevX(t.index),n=s.getNextX(t.index),i=s.data.xs[t.id][t.index];return null===e&&null===n?0:(null===e&&(e=s.x.domain()[0]),(s.x(i)+s.x(e))/2)}),e=l.axis_rotated?0:a,n=l.axis_rotated?a:0,i=l.axis_rotated?s.width:r,o=l.axis_rotated?r:s.height),t.attr("class",s.classEvent.bind(s)).attr("x",e).attr("y",n).attr("width",i).attr("height",o)},C.generateEventRectsForSingleX=function(t){var e=this,n=e.d3,o=e.config;t.append("rect").attr("class",e.classEvent.bind(e)).style("cursor",o.data_selection_enabled&&o.data_selection_grouped?"pointer":null).on("mouseover",function(t){var n=t.index;e.dragging||e.flowing||e.hasArcType()||(o.point_focus_expand_enabled&&e.expandCircles(n,null,!0),e.expandBars(n,null,!0),e.main.selectAll("."+i.shape+"-"+n).each(function(t){o.data_onmouseover.call(e.api,t)}))}).on("mouseout",function(t){var n=t.index;e.config&&(e.hasArcType()||(e.hideXGridFocus(),e.hideTooltip(),e.unexpandCircles(),e.unexpandBars(),e.main.selectAll("."+i.shape+"-"+n).each(function(t){o.data_onmouseout.call(e.api,t)})))}).on("mousemove",function(t){var r,a=t.index,s=e.svg.select("."+i.eventRect+"-"+a);e.dragging||e.flowing||e.hasArcType()||(e.isStepType(t)&&"step-after"===e.config.line_step_type&&n.mouse(this)[0]<e.x(e.getXValue(t.id,a))&&(a-=1),r=e.filterTargetsToShow(e.data.targets).map(function(t){return e.addName(e.getValueOnIndex(t.values,a))}),o.tooltip_grouped&&(e.showTooltip(r,this),e.showXGridFocus(r)),(!o.tooltip_grouped||o.data_selection_enabled&&!o.data_selection_grouped)&&e.main.selectAll("."+i.shape+"-"+a).each(function(){n.select(this).classed(i.EXPANDED,!0),o.data_selection_enabled&&s.style("cursor",o.data_selection_grouped?"pointer":null),o.tooltip_grouped||(e.hideXGridFocus(),e.hideTooltip(),o.data_selection_grouped||(e.unexpandCircles(a),e.unexpandBars(a)))}).filter(function(t){return e.isWithinShape(this,t)}).each(function(t){o.data_selection_enabled&&(o.data_selection_grouped||o.data_selection_isselectable(t))&&s.style("cursor","pointer"),o.tooltip_grouped||(e.showTooltip([t],this),e.showXGridFocus([t]),o.point_focus_expand_enabled&&e.expandCircles(a,t.id,!0),e.expandBars(a,t.id,!0))}))}).on("click",function(t){var r=t.index;!e.hasArcType()&&e.toggleShape&&(e.cancelClick?e.cancelClick=!1:(e.isStepType(t)&&"step-after"===o.line_step_type&&n.mouse(this)[0]<e.x(e.getXValue(t.id,r))&&(r-=1),e.main.selectAll("."+i.shape+"-"+r).each(function(t){(o.data_selection_grouped||e.isWithinShape(this,t))&&(e.toggleShape(this,t,r),e.config.data_onclick.call(e.api,t,this))})))}).call(o.data_selection_draggable&&e.drag?n.behavior.drag().origin(Object).on("drag",function(){e.drag(n.mouse(this))}).on("dragstart",function(){e.dragstart(n.mouse(this))}).on("dragend",function(){e.dragend()}):function(){})},C.generateEventRectsForMultipleXs=function(t){var e=this,n=e.d3,o=e.config;function r(){e.svg.select("."+i.eventRect).style("cursor",null),e.hideXGridFocus(),e.hideTooltip(),e.unexpandCircles(),e.unexpandBars()}t.append("rect").attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("class",i.eventRect).on("mouseout",function(){e.config&&(e.hasArcType()||r())}).on("mousemove",function(){var t,a,s,l=e.filterTargetsToShow(e.data.targets);e.dragging||e.hasArcType(l)||(t=n.mouse(this),a=e.findClosestFromTargets(l,t),!e.mouseover||a&&a.id===e.mouseover.id||(o.data_onmouseout.call(e.api,e.mouseover),e.mouseover=void 0),a?(s=(e.isScatterType(a)||!o.tooltip_grouped?[a]:e.filterByX(l,a.x)).map(function(t){return e.addName(t)}),e.showTooltip(s,this),o.point_focus_expand_enabled&&e.expandCircles(a.index,a.id,!0),e.expandBars(a.index,a.id,!0),e.showXGridFocus(s),(e.isBarType(a.id)||e.dist(a,t)<o.point_sensitivity)&&(e.svg.select("."+i.eventRect).style("cursor","pointer"),e.mouseover||(o.data_onmouseover.call(e.api,a),e.mouseover=a))):r())}).on("click",function(){var t,r,a=e.filterTargetsToShow(e.data.targets);e.hasArcType(a)||(t=n.mouse(this),(r=e.findClosestFromTargets(a,t))&&(e.isBarType(r.id)||e.dist(r,t)<o.point_sensitivity)&&e.main.selectAll("."+i.shapes+e.getTargetSelectorSuffix(r.id)).selectAll("."+i.shape+"-"+r.index).each(function(){(o.data_selection_grouped||e.isWithinShape(this,r))&&(e.toggleShape(this,r,r.index),e.config.data_onclick.call(e.api,r,this))}))}).call(o.data_selection_draggable&&e.drag?n.behavior.drag().origin(Object).on("drag",function(){e.drag(n.mouse(this))}).on("dragstart",function(){e.dragstart(n.mouse(this))}).on("dragend",function(){e.dragend()}):function(){})},C.dispatchEvent=function(t,e,n){var o="."+i.eventRect+(this.isMultipleX()?"":"-"+e),r=this.main.select(o).node(),a=r.getBoundingClientRect(),s=a.left+(n?n[0]:0),l=a.top+(n?n[1]:0),u=document.createEvent("MouseEvents");u.initMouseEvent(t,!0,!0,window,0,s,l,s,l,!1,!1,!1,!1,0,null),r.dispatchEvent(u)},C.initLegend=function(){var t=this;if(t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),!t.config.legend_show)return t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets));t.updateLegendWithDefaults()},C.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},C.updateSizeForLegend=function(t,e){var n=this,i=n.config,o={top:n.isLegendTop?n.getCurrentPaddingTop()+i.legend_inset_y+5.5:n.currentHeight-t-n.getCurrentPaddingBottom()-i.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+i.legend_inset_x+.5:n.currentWidth-e-n.getCurrentPaddingRight()-i.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?o.top:n.currentHeight-t,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-e:n.isLegendInset?o.left:0}},C.transformLegend=function(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},C.updateLegendStep=function(t){this.legendStep=t},C.updateLegendItemWidth=function(t){this.legendItemWidth=t},C.updateLegendItemHeight=function(t){this.legendItemHeight=t},C.getLegendWidth=function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},C.getLegendHeight=function(){var t=this,e=0;return t.config.legend_show&&(e=t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1)),e},C.opacityForLegend=function(t){return t.classed(i.legendItemHidden)?null:1},C.opacityForUnfocusedLegend=function(t){return t.classed(i.legendItemHidden)?null:.3},C.toggleFocusLegend=function(t,e){var n=this;t=n.mapToTargetIds(t),n.legend.selectAll("."+i.legendItem).filter(function(e){return t.indexOf(e)>=0}).classed(i.legendItemFocused,e).transition().duration(100).style("opacity",function(){return(e?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,n.d3.select(this))})},C.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+i.legendItem).classed(i.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(e.select(this))})},C.showLegend=function(t){var e=this,n=e.config;n.legend_show||(n.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(e.d3.select(this))})},C.hideLegend=function(t){var e=this,n=e.config;n.legend_show&&m(t)&&(n.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},C.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},C.updateLegend=function(t,e,n){var o,r,a,s,l,u,c,d,f,p,g,m,v,y,b,x,w=this,S=w.config,T=4,C=10,L=0,A=0,D=10,k=S.legend_item_tile_width+5,P=0,E={},M={},I={},O=[0],R={},N=0;function F(e,n,o){var r,a,s=0===o,l=o===t.length-1,u=function(t,e){return w.legendItemTextBox[e]||(w.legendItemTextBox[e]=w.getTextRect(t.textContent,i.legendItem,t)),w.legendItemTextBox[e]}(e,n),c=u.width+k+(!l||w.isLegendRight||w.isLegendInset?C:0)+S.legend_padding,d=u.height+T,h=w.isLegendRight||w.isLegendInset?d:c,f=w.isLegendRight||w.isLegendInset?w.getLegendHeight():w.getLegendWidth();function p(t,e){e||(r=(f-P-h)/2)<D&&(r=(f-h)/2,P=0,N++),R[t]=N,O[N]=w.isLegendInset?10:r,E[t]=P,P+=h}s&&(P=0,N=0,L=0,A=0),!S.legend_show||w.isLegendToShow(n)?(M[n]=c,I[n]=d,(!L||c>=L)&&(L=c),(!A||d>=A)&&(A=d),a=w.isLegendRight||w.isLegendInset?A:L,S.legend_equally?(Object.keys(M).forEach(function(t){M[t]=L}),Object.keys(I).forEach(function(t){I[t]=A}),(r=(f-a*t.length)/2)<D?(P=0,N=0,t.forEach(function(t){p(t)})):p(n,!0)):p(n)):M[n]=I[n]=R[n]=E[n]=0}t=t.filter(function(t){return!h(S.data_names[t])||null!==S.data_names[t]}),g=_(e=e||{},"withTransition",!0),m=_(e,"withTransitionForTransform",!0),w.isLegendInset&&(N=S.legend_inset_step?S.legend_inset_step:t.length,w.updateLegendStep(N)),w.isLegendRight?(o=function(t){return L*R[t]},s=function(t){return O[R[t]]+E[t]}):w.isLegendInset?(o=function(t){return L*R[t]+10},s=function(t){return O[R[t]]+E[t]}):(o=function(t){return O[R[t]]+E[t]},s=function(t){return A*R[t]}),r=function(t,e){return o(t,e)+4+S.legend_item_tile_width},l=function(t,e){return s(t,e)+9},a=function(t,e){return o(t,e)},u=function(t,e){return s(t,e)-5},c=function(t,e){return o(t,e)-2},d=function(t,e){return o(t,e)-2+S.legend_item_tile_width},f=function(t,e){return s(t,e)+4},(p=w.legend.selectAll("."+i.legendItem).data(t).enter().append("g").attr("class",function(t){return w.generateClass(i.legendItem,t)}).style("visibility",function(t){return w.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){S.legend_item_onclick?S.legend_item_onclick.call(w,t):w.d3.event.altKey?(w.api.hide(),w.api.show(t)):(w.api.toggle(t),w.isTargetToShow(t)?w.api.focus(t):w.api.revert())}).on("mouseover",function(t){S.legend_item_onmouseover?S.legend_item_onmouseover.call(w,t):(w.d3.select(this).classed(i.legendItemFocused,!0),!w.transiting&&w.isTargetToShow(t)&&w.api.focus(t))}).on("mouseout",function(t){S.legend_item_onmouseout?S.legend_item_onmouseout.call(w,t):(w.d3.select(this).classed(i.legendItemFocused,!1),w.api.revert())})).append("text").text(function(t){return h(S.data_names[t])?S.data_names[t]:t}).each(function(t,e){F(this,t,e)}).style("pointer-events","none").attr("x",w.isLegendRight||w.isLegendInset?r:-200).attr("y",w.isLegendRight||w.isLegendInset?-200:l),p.append("rect").attr("class",i.legendItemEvent).style("fill-opacity",0).attr("x",w.isLegendRight||w.isLegendInset?a:-200).attr("y",w.isLegendRight||w.isLegendInset?-200:u),p.append("line").attr("class",i.legendItemTile).style("stroke",w.color).style("pointer-events","none").attr("x1",w.isLegendRight||w.isLegendInset?c:-200).attr("y1",w.isLegendRight||w.isLegendInset?-200:f).attr("x2",w.isLegendRight||w.isLegendInset?d:-200).attr("y2",w.isLegendRight||w.isLegendInset?-200:f).attr("stroke-width",S.legend_item_tile_height),x=w.legend.select("."+i.legendBackground+" rect"),w.isLegendInset&&L>0&&0===x.size()&&(x=w.legend.insert("g","."+i.legendItem).attr("class",i.legendBackground).append("rect")),v=w.legend.selectAll("text").data(t).text(function(t){return h(S.data_names[t])?S.data_names[t]:t}).each(function(t,e){F(this,t,e)}),(g?v.transition():v).attr("x",r).attr("y",l),y=w.legend.selectAll("rect."+i.legendItemEvent).data(t),(g?y.transition():y).attr("width",function(t){return M[t]}).attr("height",function(t){return I[t]}).attr("x",a).attr("y",u),b=w.legend.selectAll("line."+i.legendItemTile).data(t),(g?b.transition():b).style("stroke",w.levelColor?function(t){return w.levelColor(w.cache[t].values[0].value)}:w.color).attr("x1",c).attr("y1",f).attr("x2",d).attr("y2",f),x&&(g?x.transition():x).attr("height",w.getLegendHeight()-12).attr("width",L*(N+1)+10),w.legend.selectAll("."+i.legendItem).classed(i.legendItemHidden,function(t){return!w.isTargetToShow(t)}),w.updateLegendItemWidth(L),w.updateLegendItemHeight(A),w.updateLegendStep(N),w.updateSizes(),w.updateScales(),w.updateSvgSize(),w.transformAll(m,n),w.legendHasRendered=!0},C.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",i.regions)},C.updateRegion=function(t){var e=this,n=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select("."+i.regions).selectAll("."+i.region).data(n.regions),e.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),e.mainRegion.attr("class",e.classRegion.bind(e)),e.mainRegion.exit().transition().duration(t).style("opacity",0).remove()},C.redrawRegion=function(t){var e=this,n=e.mainRegion.selectAll("rect").each(function(){var t=e.d3.select(this.parentNode).datum();e.d3.select(this).datum(t)}),i=e.regionX.bind(e),o=e.regionY.bind(e),r=e.regionWidth.bind(e),a=e.regionHeight.bind(e);return[(t?n.transition():n).attr("x",i).attr("y",o).attr("width",r).attr("height",a).style("fill-opacity",function(t){return s(t.opacity)?t.opacity:.1})]},C.regionX=function(t){var e=this,n=e.config,i="y"===t.axis?e.y:e.y2;return"y"===t.axis||"y2"===t.axis?n.axis_rotated&&"start"in t?i(t.start):0:n.axis_rotated?0:"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},C.regionY=function(t){var e=this,n=e.config,i="y"===t.axis?e.y:e.y2;return"y"===t.axis||"y2"===t.axis?n.axis_rotated?0:"end"in t?i(t.end):0:n.axis_rotated&&"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},C.regionWidth=function(t){var e,n=this,i=n.config,o=n.regionX(t),r="y"===t.axis?n.y:n.y2;return(e="y"===t.axis||"y2"===t.axis?i.axis_rotated&&"end"in t?r(t.end):n.width:i.axis_rotated?n.width:"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.width)<o?0:e-o},C.regionHeight=function(t){var e,n=this,i=n.config,o=this.regionY(t),r="y"===t.axis?n.y:n.y2;return(e="y"===t.axis||"y2"===t.axis?i.axis_rotated?n.height:"start"in t?r(t.start):n.height:i.axis_rotated&&"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.height)<o?0:e-o},C.isRegionOnX=function(t){return!t.axis||"x"===t.axis},C.getScale=function(t,e,n){return(n?this.d3.time.scale():this.d3.scale.linear()).range([t,e])},C.getX=function(t,e,n,i){var o,r=this.getScale(t,e,this.isTimeSeries()),a=n?r.domain(n):r;for(o in this.isCategorized()?(i=i||function(){return 0},r=function(t,e){var n=a(t)+i(t);return e?n:Math.ceil(n)}):r=function(t,e){var n=a(t);return e?n:Math.ceil(n)},a)r[o]=a[o];return r.orgDomain=function(){return a.domain()},this.isCategorized()&&(r.domain=function(t){return arguments.length?(a.domain(t),r):[(t=this.orgDomain())[0],t[1]+1]}),r},C.getY=function(t,e,n){var i=this.getScale(t,e,this.isTimeSeriesY());return n&&i.domain(n),i},C.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},C.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},C.updateScales=function(){var t=this,e=t.config,n=!t.x;t.xMin=e.axis_rotated?1:0,t.xMax=e.axis_rotated?t.height:t.width,t.yMin=e.axis_rotated?0:t.height,t.yMax=e.axis_rotated?t.width:1,t.subXMin=t.xMin,t.subXMax=t.xMax,t.subYMin=e.axis_rotated?0:t.height2,t.subYMax=e.axis_rotated?t.width2:1,t.x=t.getX(t.xMin,t.xMax,n?void 0:t.x.orgDomain(),function(){return t.xAxis.tickOffset()}),t.y=t.getY(t.yMin,t.yMax,n?e.axis_y_default:t.y.domain()),t.y2=t.getY(t.yMin,t.yMax,n?e.axis_y2_default:t.y2.domain()),t.subX=t.getX(t.xMin,t.xMax,t.orgXDomain,function(e){return e%1?0:t.subXAxis.tickOffset()}),t.subY=t.getY(t.subYMin,t.subYMax,n?e.axis_y_default:t.subY.domain()),t.subY2=t.getY(t.subYMin,t.subYMax,n?e.axis_y2_default:t.subY2.domain()),t.xAxisTickFormat=t.axis.getXAxisTickFormat(),t.xAxisTickValues=t.axis.getXAxisTickValues(),t.yAxisTickValues=t.axis.getYAxisTickValues(),t.y2AxisTickValues=t.axis.getY2AxisTickValues(),t.xAxis=t.axis.getXAxis(t.x,t.xOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.subXAxis=t.axis.getXAxis(t.subX,t.subXOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.yAxis=t.axis.getYAxis(t.y,t.yOrient,e.axis_y_tick_format,t.yAxisTickValues,e.axis_y_tick_outer),t.y2Axis=t.axis.getYAxis(t.y2,t.y2Orient,e.axis_y2_tick_format,t.y2AxisTickValues,e.axis_y2_tick_outer),n||(t.brush&&t.brush.scale(t.subX),e.zoom_enabled&&t.zoom.scale(t.x)),t.updateArc&&t.updateArc()},C.selectPoint=function(t,e,n){var o=this,r=o.config,a=(r.axis_rotated?o.circleY:o.circleX).bind(o),s=(r.axis_rotated?o.circleX:o.circleY).bind(o),l=o.pointSelectR.bind(o);r.data_onselected.call(o.api,e,t.node()),o.main.select("."+i.selectedCircles+o.getTargetSelectorSuffix(e.id)).selectAll("."+i.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",function(){return o.generateClass(i.selectedCircle,n)}).attr("cx",a).attr("cy",s).attr("stroke",function(){return o.color(e)}).attr("r",function(t){return 1.4*o.pointSelectR(t)}).transition().duration(100).attr("r",l)},C.unselectPoint=function(t,e,n){this.config.data_onunselected.call(this.api,e,t.node()),this.main.select("."+i.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+i.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},C.togglePoint=function(t,e,n,i){t?this.selectPoint(e,n,i):this.unselectPoint(e,n,i)},C.selectPath=function(t,e){var n=this;n.config.data_onselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return n.d3.rgb(n.color(e)).brighter(.75)})},C.unselectPath=function(t,e){var n=this;n.config.data_onunselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return n.color(e)})},C.togglePath=function(t,e,n,i){t?this.selectPath(e,n,i):this.unselectPath(e,n,i)},C.getToggle=function(t,e){var n;return"circle"===t.nodeName?n=this.isStepType(e)?function(){}:this.togglePoint:"path"===t.nodeName&&(n=this.togglePath),n},C.toggleShape=function(t,e,n){var o=this,r=o.d3,a=o.config,s=r.select(t),l=s.classed(i.SELECTED),u=o.getToggle(t,e).bind(o);a.data_selection_enabled&&a.data_selection_isselectable(e)&&(a.data_selection_multiple||o.main.selectAll("."+i.shapes+(a.data_selection_grouped?o.getTargetSelectorSuffix(e.id):"")).selectAll("."+i.shape).each(function(t,e){var n=r.select(this);n.classed(i.SELECTED)&&u(!1,n.classed(i.SELECTED,!1),t,e)}),s.classed(i.SELECTED,!l),u(!l,s,e,n))},C.initBar=function(){this.main.select("."+i.chart).append("g").attr("class",i.chartBars)},C.updateTargetsForBar=function(t){var e=this,n=e.config,o=e.classChartBar.bind(e),r=e.classBars.bind(e),a=e.classFocus.bind(e);e.main.select("."+i.chartBars).selectAll("."+i.chartBar).data(t).attr("class",function(t){return o(t)+a(t)}).enter().append("g").attr("class",o).style("pointer-events","none").append("g").attr("class",r).style("cursor",function(t){return n.data_selection_isselectable(t)?"pointer":null})},C.updateBar=function(t){var e=this,n=e.barData.bind(e),o=e.classBar.bind(e),r=e.initialOpacity.bind(e),a=function(t){return e.color(t.id)};e.mainBar=e.main.selectAll("."+i.bars).selectAll("."+i.bar).data(n),e.mainBar.enter().append("path").attr("class",o).style("stroke",a).style("fill",a),e.mainBar.style("opacity",r),e.mainBar.exit().transition().duration(t).remove()},C.redrawBar=function(t,e){return[(e?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",t).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},C.getBarW=function(t,e){var n=this.config,i="number"==typeof n.bar_width?n.bar_width:e?t.tickInterval()*n.bar_width_ratio/e:0;return n.bar_width_max&&i>n.bar_width_max?n.bar_width_max:i},C.getBars=function(t,e){return(e?this.main.selectAll("."+i.bars+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+i.bar+(s(t)?"-"+t:""))},C.expandBars=function(t,e,n){n&&this.unexpandBars(),this.getBars(t,e).classed(i.EXPANDED,!0)},C.unexpandBars=function(t){this.getBars(t).classed(i.EXPANDED,!1)},C.generateDrawBar=function(t,e){var n=this.config,i=this.generateGetBarPoints(t,e);return function(t,e){var o=i(t,e),r=n.axis_rotated?1:0,a=n.axis_rotated?0:1;return"M "+o[0][r]+","+o[0][a]+" L"+o[1][r]+","+o[1][a]+" L"+o[2][r]+","+o[2][a]+" L"+o[3][r]+","+o[3][a]+" z"}},C.generateGetBarPoints=function(t,e){var n=this,i=e?n.subXAxis:n.xAxis,o=t.__max__+1,r=n.getBarW(i,o),a=n.getShapeX(r,o,t,!!e),s=n.getShapeY(!!e),l=n.getShapeOffset(n.isBarType,t,!!e),u=r*(n.config.bar_space/2),c=e?n.getSubYScale:n.getYScale;return function(t,e){var i=c.call(n,t.id)(0),o=l(t,e)||i,d=a(t),h=s(t);return n.config.axis_rotated&&(0<t.value&&h<i||t.value<0&&i<h)&&(h=i),[[d+u,o],[d+u,h-(i-o)],[d+r-u,h-(i-o)],[d+r-u,o]]}},C.isWithinBar=function(t){var e=this.d3.mouse(t),n=t.getBoundingClientRect(),i=t.pathSegList.getItem(0),o=t.pathSegList.getItem(1),r=Math.min(i.x,o.x),a=Math.min(i.y,o.y),s=r+n.width+2,l=a+n.height+2,u=a-2;return r-2<e[0]&&e[0]<s&&u<e[1]&&e[1]<l},C.getShapeIndices=function(t){var e,n,i=this.config,o={},r=0;return this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(e=0;e<i.data_groups.length;e++)if(!(i.data_groups[e].indexOf(t.id)<0))for(n=0;n<i.data_groups[e].length;n++)if(i.data_groups[e][n]in o){o[t.id]=o[i.data_groups[e][n]];break}d(o[t.id])&&(o[t.id]=r++)}),o.__max__=r-1,o},C.getShapeX=function(t,e,n,i){var o=i?this.subX:this.x;return function(i){var r=i.id in n?n[i.id]:0;return i.x||0===i.x?o(i.x)-t*(e/2-r):0}},C.getShapeY=function(t){var e=this;return function(n){return(t?e.getSubYScale(n.id):e.getYScale(n.id))(n.value)}},C.getShapeOffset=function(t,e,n){var i=this,o=i.orderTargets(i.filterTargetsToShow(i.data.targets.filter(t,i))),r=o.map(function(t){return t.id});return function(t,a){var s=n?i.getSubYScale(t.id):i.getYScale(t.id),l=s(0),u=l;return o.forEach(function(n){var o=i.isStepType(t)?i.convertValuesToStep(n.values):n.values;n.id!==t.id&&e[n.id]===e[t.id]&&r.indexOf(n.id)<r.indexOf(t.id)&&(void 0!==o[a]&&+o[a].x==+t.x||(a=-1,o.forEach(function(e,n){e.x===t.x&&(a=n)})),a in o&&o[a].value*t.value>=0&&(u+=s(o[a].value)-l))}),u}},C.isWithinShape=function(t,e){var n,o=this,r=o.d3.select(t);return o.isTargetToShow(e.id)?"circle"===t.nodeName?n=o.isStepType(e)?o.isWithinStep(t,o.getYScale(e.id)(e.value)):o.isWithinCircle(t,1.5*o.pointSelectR(e)):"path"===t.nodeName&&(n=!r.classed(i.bar)||o.isWithinBar(t)):n=!1,n},C.getInterpolate=function(t){var e=this,n=e.isInterpolationType(e.config.spline_interpolation_type)?e.config.spline_interpolation_type:"cardinal";return e.isSplineType(t)?n:e.isStepType(t)?e.config.line_step_type:"linear"},C.initLine=function(){this.main.select("."+i.chart).append("g").attr("class",i.chartLines)},C.updateTargetsForLine=function(t){var e,n=this,o=n.config,r=n.classChartLine.bind(n),a=n.classLines.bind(n),s=n.classAreas.bind(n),l=n.classCircles.bind(n),u=n.classFocus.bind(n);(e=n.main.select("."+i.chartLines).selectAll("."+i.chartLine).data(t).attr("class",function(t){return r(t)+u(t)}).enter().append("g").attr("class",r).style("opacity",0).style("pointer-events","none")).append("g").attr("class",a),e.append("g").attr("class",s),e.append("g").attr("class",function(t){return n.generateClass(i.selectedCircles,t.id)}),e.append("g").attr("class",l).style("cursor",function(t){return o.data_selection_isselectable(t)?"pointer":null}),t.forEach(function(t){n.main.selectAll("."+i.selectedCircles+n.getTargetSelectorSuffix(t.id)).selectAll("."+i.selectedCircle).each(function(e){e.value=t.values[e.index].value})})},C.updateLine=function(t){var e=this;e.mainLine=e.main.selectAll("."+i.lines).selectAll("."+i.line).data(e.lineData.bind(e)),e.mainLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.mainLine.style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null),e.mainLine.exit().transition().duration(t).style("opacity",0).remove()},C.redrawLine=function(t,e){return[(e?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},C.generateDrawLine=function(t,e){var n=this,i=n.config,o=n.d3.svg.line(),r=n.generateGetLinePoints(t,e),a=e?n.getSubYScale:n.getYScale,s=function(t){return(e?n.subxx:n.xx).call(n,t)},l=function(t,e){return i.data_groups.length>0?r(t,e)[0][1]:a.call(n,t.id)(t.value)};return o=i.axis_rotated?o.x(l).y(s):o.x(s).y(l),i.line_connectNull||(o=o.defined(function(t){return null!=t.value})),function(t){var r,s=i.line_connectNull?n.filterRemoveNull(t.values):t.values,l=e?n.x:n.subX,u=a.call(n,t.id),c=0,d=0;return n.isLineType(t)?i.data_regions[t.id]?r=n.lineWithRegions(s,l,u,i.data_regions[t.id]):(n.isStepType(t)&&(s=n.convertValuesToStep(s)),r=o.interpolate(n.getInterpolate(t))(s)):(s[0]&&(c=l(s[0].x),d=u(s[0].value)),r=i.axis_rotated?"M "+d+" "+c:"M "+c+" "+d),r||"M 0 0"}},C.generateGetLinePoints=function(t,e){var n=this,i=n.config,o=t.__max__+1,r=n.getShapeX(0,o,t,!!e),a=n.getShapeY(!!e),s=n.getShapeOffset(n.isLineType,t,!!e),l=e?n.getSubYScale:n.getYScale;return function(t,e){var o=l.call(n,t.id)(0),u=s(t,e)||o,c=r(t),d=a(t);return i.axis_rotated&&(0<t.value&&d<o||t.value<0&&o<d)&&(d=o),[[c,d-(o-u)],[c,d-(o-u)],[c,d-(o-u)],[c,d-(o-u)]]}},C.lineWithRegions=function(t,e,n,i){var o,r,a,s,l,u,c,f,p,g,m,v=this,_=v.config,y="M",b=v.isCategorized()?.5:0,x=[];function w(t,e){var n;for(n=0;n<e.length;n++)if(e[n].start<t&&t<=e[n].end)return!0;return!1}if(h(i))for(o=0;o<i.length;o++)x[o]={},d(i[o].start)?x[o].start=t[0].x:x[o].start=v.isTimeSeries()?v.parseDate(i[o].start):i[o].start,d(i[o].end)?x[o].end=t[t.length-1].x:x[o].end=v.isTimeSeries()?v.parseDate(i[o].end):i[o].end;function S(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}for(g=_.axis_rotated?function(t){return n(t.value)}:function(t){return e(t.x)},m=_.axis_rotated?function(t){return e(t.x)}:function(t){return n(t.value)},a=v.isTimeSeries()?function(t,i,o,r){var a=t.x.getTime(),s=i.x-t.x,u=new Date(a+s*o),c=new Date(a+s*(o+r));return S(_.axis_rotated?[[n(l(o)),e(u)],[n(l(o+r)),e(c)]]:[[e(u),n(l(o))],[e(c),n(l(o+r))]])}:function(t,i,o,r){return S(_.axis_rotated?[[n(l(o),!0),e(s(o))],[n(l(o+r),!0),e(s(o+r))]]:[[e(s(o),!0),n(l(o))],[e(s(o+r),!0),n(l(o+r))]])},o=0;o<t.length;o++){if(d(x)||!w(t[o].x,x))y+=" "+g(t[o])+" "+m(t[o]);else for(s=v.getScale(t[o-1].x+b,t[o].x+b,v.isTimeSeries()),l=v.getScale(t[o-1].value,t[o].value),u=e(t[o].x)-e(t[o-1].x),c=n(t[o].value)-n(t[o-1].value),p=2*(f=2/Math.sqrt(Math.pow(u,2)+Math.pow(c,2))),r=f;r<=1;r+=p)y+=a(t[o-1],t[o],r,f);t[o].x}return y},C.updateArea=function(t){var e=this,n=e.d3;e.mainArea=e.main.selectAll("."+i.areas).selectAll("."+i.area).data(e.lineData.bind(e)),e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}),e.mainArea.style("opacity",e.orgAreaOpacity),e.mainArea.exit().transition().duration(t).style("opacity",0).remove()},C.redrawArea=function(t,e){return[(e?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},C.generateDrawArea=function(t,e){var n=this,i=n.config,o=n.d3.svg.area(),r=n.generateGetAreaPoints(t,e),a=e?n.getSubYScale:n.getYScale,s=function(t){return(e?n.subxx:n.xx).call(n,t)},l=function(t,e){return i.data_groups.length>0?r(t,e)[0][1]:a.call(n,t.id)(n.getAreaBaseValue(t.id))},u=function(t,e){return i.data_groups.length>0?r(t,e)[1][1]:a.call(n,t.id)(t.value)};return o=i.axis_rotated?o.x0(l).x1(u).y(s):o.x(s).y0(i.area_above?0:l).y1(u),i.line_connectNull||(o=o.defined(function(t){return null!==t.value})),function(t){var e,r=i.line_connectNull?n.filterRemoveNull(t.values):t.values,a=0,s=0;return n.isAreaType(t)?(n.isStepType(t)&&(r=n.convertValuesToStep(r)),e=o.interpolate(n.getInterpolate(t))(r)):(r[0]&&(a=n.x(r[0].x),s=n.getYScale(t.id)(r[0].value)),e=i.axis_rotated?"M "+s+" "+a:"M "+a+" "+s),e||"M 0 0"}},C.getAreaBaseValue=function(){return 0},C.generateGetAreaPoints=function(t,e){var n=this,i=n.config,o=t.__max__+1,r=n.getShapeX(0,o,t,!!e),a=n.getShapeY(!!e),s=n.getShapeOffset(n.isAreaType,t,!!e),l=e?n.getSubYScale:n.getYScale;return function(t,e){var o=l.call(n,t.id)(0),u=s(t,e)||o,c=r(t),d=a(t);return i.axis_rotated&&(0<t.value&&d<o||t.value<0&&o<d)&&(d=o),[[c,u],[c,d-(o-u)],[c,d-(o-u)],[c,u]]}},C.updateCircle=function(){var t=this;t.mainCircle=t.main.selectAll("."+i.circles).selectAll("."+i.circle).data(t.lineOrScatterData.bind(t)),t.mainCircle.enter().append("circle").attr("class",t.classCircle.bind(t)).attr("r",t.pointR.bind(t)).style("fill",t.color),t.mainCircle.style("opacity",t.initialOpacityForCircle.bind(t)),t.mainCircle.exit().remove()},C.redrawCircle=function(t,e,n){var o=this.main.selectAll("."+i.selectedCircle);return[(n?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",t).attr("cy",e),(n?o.transition(Math.random().toString()):o).attr("cx",t).attr("cy",e)]},C.circleX=function(t){return t.x||0===t.x?this.x(t.x):null},C.updateCircleY=function(){var t,e,n=this;n.config.data_groups.length>0?(t=n.getShapeIndices(n.isLineType),e=n.generateGetLinePoints(t),n.circleY=function(t,n){return e(t,n)[0][1]}):n.circleY=function(t){return n.getYScale(t.id)(t.value)}},C.getCircles=function(t,e){return(e?this.main.selectAll("."+i.circles+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+i.circle+(s(t)?"-"+t:""))},C.expandCircles=function(t,e,n){var o=this.pointExpandedR.bind(this);n&&this.unexpandCircles(),this.getCircles(t,e).classed(i.EXPANDED,!0).attr("r",o)},C.unexpandCircles=function(t){var e=this,n=e.pointR.bind(e);e.getCircles(t).filter(function(){return e.d3.select(this).classed(i.EXPANDED)}).classed(i.EXPANDED,!1).attr("r",n)},C.pointR=function(t){var e=this.config;return this.isStepType(t)?0:l(e.point_r)?e.point_r(t):e.point_r},C.pointExpandedR=function(t){var e=this.config;return e.point_focus_expand_enabled?l(e.point_focus_expand_r)?e.point_focus_expand_r(t):e.point_focus_expand_r?e.point_focus_expand_r:1.75*this.pointR(t):this.pointR(t)},C.pointSelectR=function(t){var e=this.config;return l(e.point_select_r)?e.point_select_r(t):e.point_select_r?e.point_select_r:4*this.pointR(t)},C.isWithinCircle=function(t,e){var n=this.d3,i=n.mouse(t),o=n.select(t),r=+o.attr("cx"),a=+o.attr("cy");return Math.sqrt(Math.pow(r-i[0],2)+Math.pow(a-i[1],2))<e},C.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30},C.getCurrentWidth=function(){var t=this.config;return t.size_width?t.size_width:this.getParentWidth()},C.getCurrentHeight=function(){var t=this.config,e=t.size_height?t.size_height:this.getParentHeight();return e>0?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},C.getCurrentPaddingTop=function(){var t=this.config,e=s(t.padding_top)?t.padding_top:0;return this.title&&this.title.node()&&(e+=this.getTitlePadding()),e},C.getCurrentPaddingBottom=function(){var t=this.config;return s(t.padding_bottom)?t.padding_bottom:0},C.getCurrentPaddingLeft=function(t){var e=this.config;return s(e.padding_left)?e.padding_left:e.axis_rotated?!e.axis_x_show||e.axis_x_inner?1:Math.max(f(this.getAxisWidthByAxisId("x",t)),40):!e.axis_y_show||e.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:f(this.getAxisWidthByAxisId("y",t))},C.getCurrentPaddingRight=function(){var t=this,e=t.config,n=t.isLegendRight?t.getLegendWidth()+20:0;return s(e.padding_right)?e.padding_right+1:e.axis_rotated?10+n:!e.axis_y2_show||e.axis_y2_inner?2+n+(t.axis.getY2AxisLabelPosition().isOuter?20:0):f(t.getAxisWidthByAxisId("y2"))+n},C.getParentRectValue=function(t){for(var e,n=this.selectChart.node();n&&"BODY"!==n.tagName;){try{e=n.getBoundingClientRect()[t]}catch(i){"width"===t&&(e=n.offsetWidth)}if(e)break;n=n.parentNode}return e},C.getParentWidth=function(){return this.getParentRectValue("width")},C.getParentHeight=function(){var t=this.selectChart.style("height");return t.indexOf("px")>0?+t.replace("px",""):0},C.getSvgLeft=function(t){var e=this,n=e.config,o=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,r=n.axis_rotated?i.axisX:i.axisY,a=e.main.select("."+r).node(),s=a&&o?a.getBoundingClientRect():{right:0},l=e.selectChart.node().getBoundingClientRect(),u=e.hasArcType(),c=s.right-l.left-(u?0:e.getCurrentPaddingLeft(t));return c>0?c:0},C.getAxisWidthByAxisId=function(t,e){var n=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)},C.getHorizontalAxisHeight=function(t){var e=this,n=e.config,i=30;return"x"!==t||n.axis_x_show?"x"===t&&n.axis_x_height?n.axis_x_height:"y"!==t||n.axis_y_show?"y2"!==t||n.axis_y2_show?("x"===t&&!n.axis_rotated&&n.axis_x_tick_rotate&&(i=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n.axis_x_tick_rotate)/180)),"y"===t&&n.axis_rotated&&n.axis_y_tick_rotate&&(i=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n.axis_y_tick_rotate)/180)),i+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):e.rotated_padding_top:!n.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},C.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},C.initBrush=function(){var t=this,e=t.d3;t.brush=e.svg.brush().on("brush",function(){t.redrawForBrush()}),t.brush.update=function(){return t.context&&t.context.select("."+i.brush).call(this),this},t.brush.scale=function(e){return t.config.axis_rotated?this.y(e):this.x(e)}},C.initSubchart=function(){var t=this,e=t.config,n=t.context=t.svg.append("g").attr("transform",t.getTranslate("context")),o=e.subchart_show?"visible":"hidden";n.style("visibility",o),n.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",i.chart),n.select("."+i.chart).append("g").attr("class",i.chartBars),n.select("."+i.chart).append("g").attr("class",i.chartLines),n.append("g").attr("clip-path",t.clipPath).attr("class",i.brush).call(t.brush),t.axes.subx=n.append("g").attr("class",i.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?o:"hidden")},C.updateTargetsForSubchart=function(t){var e,n=this,o=n.context,r=n.config,a=n.classChartBar.bind(n),s=n.classBars.bind(n),l=n.classChartLine.bind(n),u=n.classLines.bind(n),c=n.classAreas.bind(n);r.subchart_show&&(o.select("."+i.chartBars).selectAll("."+i.chartBar).data(t).attr("class",a).enter().append("g").style("opacity",0).attr("class",a).append("g").attr("class",s),(e=o.select("."+i.chartLines).selectAll("."+i.chartLine).data(t).attr("class",l).enter().append("g").style("opacity",0).attr("class",l)).append("g").attr("class",u),e.append("g").attr("class",c),o.selectAll("."+i.brush+" rect").attr(r.axis_rotated?"width":"height",r.axis_rotated?n.width2:n.height2))},C.updateBarForSubchart=function(t){var e=this;e.contextBar=e.context.selectAll("."+i.bars).selectAll("."+i.bar).data(e.barData.bind(e)),e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color),e.contextBar.style("opacity",e.initialOpacity.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity",0).remove()},C.redrawBarForSubchart=function(t,e,n){(e?this.contextBar.transition(Math.random().toString()).duration(n):this.contextBar).attr("d",t).style("opacity",1)},C.updateLineForSubchart=function(t){var e=this;e.contextLine=e.context.selectAll("."+i.lines).selectAll("."+i.line).data(e.lineData.bind(e)),e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.contextLine.style("opacity",e.initialOpacity.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity",0).remove()},C.redrawLineForSubchart=function(t,e,n){(e?this.contextLine.transition(Math.random().toString()).duration(n):this.contextLine).attr("d",t).style("opacity",1)},C.updateAreaForSubchart=function(t){var e=this,n=e.d3;e.contextArea=e.context.selectAll("."+i.areas).selectAll("."+i.area).data(e.lineData.bind(e)),e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}),e.contextArea.style("opacity",0),e.contextArea.exit().transition().duration(t).style("opacity",0).remove()},C.redrawAreaForSubchart=function(t,e,n){(e?this.contextArea.transition(Math.random().toString()).duration(n):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},C.redrawSubchart=function(t,e,n,i,o,r,a){var s,l,u,c=this,d=c.d3,h=c.config;c.context.style("visibility",h.subchart_show?"visible":"hidden"),h.subchart_show&&(d.event&&"zoom"===d.event.type&&c.brush.extent(c.x.orgDomain()).update(),t&&(c.brush.empty()||c.brush.extent(c.x.orgDomain()).update(),s=c.generateDrawArea(o,!0),l=c.generateDrawBar(r,!0),u=c.generateDrawLine(a,!0),c.updateBarForSubchart(n),c.updateLineForSubchart(n),c.updateAreaForSubchart(n),c.redrawBarForSubchart(l,n,n),c.redrawLineForSubchart(u,n,n),c.redrawAreaForSubchart(s,n,n)))},C.redrawForBrush=function(){var t=this,e=t.x;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t.config.subchart_onbrush.call(t.api,e.orgDomain())},C.transformContext=function(t,e){var n;e&&e.axisSubX?n=e.axisSubX:(n=this.context.select("."+i.axisX),t&&(n=n.transition())),this.context.attr("transform",this.getTranslate("context")),n.attr("transform",this.getTranslate("subx"))},C.getDefaultExtent=function(){var t=this,e=t.config,n=l(e.axis_x_extent)?e.axis_x_extent(t.getXDomain(t.data.targets)):e.axis_x_extent;return t.isTimeSeries()&&(n=[t.parseDate(n[0]),t.parseDate(n[1])]),n},C.initText=function(){this.main.select("."+i.chart).append("g").attr("class",i.chartTexts),this.mainText=this.d3.selectAll([])},C.updateTargetsForText=function(t){var e=this,n=e.classChartText.bind(e),o=e.classTexts.bind(e),r=e.classFocus.bind(e);e.main.select("."+i.chartTexts).selectAll("."+i.chartText).data(t).attr("class",function(t){return n(t)+r(t)}).enter().append("g").attr("class",n).style("opacity",0).style("pointer-events","none").append("g").attr("class",o)},C.updateText=function(t){var e=this,n=e.config,o=e.barOrLineData.bind(e),r=e.classText.bind(e);e.mainText=e.main.selectAll("."+i.texts).selectAll("."+i.text).data(o),e.mainText.enter().append("text").attr("class",r).attr("text-anchor",function(t){return n.axis_rotated?t.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(t){return e.color(t)}).style("fill-opacity",0),e.mainText.text(function(t,n,i){return e.dataLabelFormat(t.id)(t.value,t.id,n,i)}),e.mainText.exit().transition().duration(t).style("fill-opacity",0).remove()},C.redrawText=function(t,e,n,i){return[(i?this.mainText.transition():this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},C.getTextRect=function(t,e,n){var i,o=this.d3.select("body").append("div").classed("c3",!0),r=o.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),a=this.d3.select(n).style("font");return r.selectAll(".dummy").data([t]).enter().append("text").classed(e||"",!0).style("font",a).text(t).each(function(){i=this.getBoundingClientRect()}),o.remove(),i},C.generateXYForText=function(t,e,n,i){var o=this,r=o.generateGetAreaPoints(t,!1),a=o.generateGetBarPoints(e,!1),s=o.generateGetLinePoints(n,!1),l=i?o.getXForText:o.getYForText;return function(t,e){var n=o.isAreaType(t)?r:o.isBarType(t)?a:s;return l.call(o,n(t,e),t,this)}},C.getXForText=function(t,e,n){var i,o,r=this,a=n.getBoundingClientRect();return r.config.axis_rotated?(o=r.isBarType(e)?4:6,i=t[2][1]+o*(e.value<0?-1:1)):i=r.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(i>r.width?i=r.width-a.width:i<0&&(i=4)),i},C.getYForText=function(t,e,n){var i,o=this,r=n.getBoundingClientRect();return o.config.axis_rotated?i=(t[0][0]+t[2][0]+.6*r.height)/2:(i=t[2][1],e.value<0||0===e.value&&!o.hasPositiveValue?(i+=r.height,o.isBarType(e)&&o.isSafari()?i-=3:!o.isBarType(e)&&o.isChrome()&&(i+=3)):i+=o.isBarType(e)?-3:-6),null!==e.value||o.config.axis_rotated||(i<r.height?i=r.height:i>this.height&&(i=this.height-4)),i},C.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},C.redrawTitle=function(){var t=this;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t))},C.xForTitle=function(){var t=this,e=t.config,n=e.title_position||"left";return n.indexOf("right")>=0?t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width-e.title_padding.right:n.indexOf("center")>=0?(t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width)/2:e.title_padding.left},C.yForTitle=function(){var t=this;return t.config.title_padding.top+t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).height},C.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},C.initTooltip=function(){var t,e=this,n=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",i.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(e.isTimeSeries()&&c(n.tooltip_init_x)){for(n.tooltip_init_x=e.parseDate(n.tooltip_init_x),t=0;t<e.data.targets[0].values.length&&e.data.targets[0].values[t].x-n.tooltip_init_x!=0;t++);n.tooltip_init_x=t}e.tooltip.html(n.tooltip_contents.call(e,e.data.targets.map(function(t){return e.addName(t.values[n.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},C.getTooltipSortFunction=function(){var t=this,e=t.config;if(0!==e.data_groups.length&&void 0===e.tooltip_order){var n=t.orderTargets(t.data.targets).map(function(t){return t.id});return(t.isOrderAsc()||t.isOrderDesc())&&(n=n.reverse()),function(t,e){return n.indexOf(t.id)-n.indexOf(e.id)}}var i=e.tooltip_order;void 0===i&&(i=e.data_order);var o=function(t){return t?t.value:null};if(c(i)&&"asc"===i.toLowerCase())return function(t,e){return o(t)-o(e)};if(c(i)&&"desc"===i.toLowerCase())return function(t,e){return o(e)-o(t)};if(l(i)){var r=i;return void 0===e.tooltip_order&&(r=function(t,e){return i(t?{id:t.id,values:[t]}:null,e?{id:e.id,values:[e]}:null)}),r}return u(i)?function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}:void 0},C.getTooltipContent=function(t,e,n,i){var o,r,a,s,l,u,c=this,d=c.config,h=d.tooltip_format_title||e,f=d.tooltip_format_name||function(t){return t},p=d.tooltip_format_value||n,g=this.getTooltipSortFunction();for(g&&t.sort(g),r=0;r<t.length;r++)if(t[r]&&(t[r].value||0===t[r].value)&&(o||(a=b(h?h(t[r].x):t[r].x),o="<table class='"+c.CLASS.tooltip+"'>"+(a||0===a?"<tr><th colspan='2'>"+a+"</th></tr>":"")),void 0!==(s=b(p(t[r].value,t[r].ratio,t[r].id,t[r].index,t))))){if(null===t[r].name)continue;l=b(f(t[r].name,t[r].ratio,t[r].id,t[r].index)),u=c.levelColor?c.levelColor(t[r].value):i(t[r].id),o+="<tr class='"+c.CLASS.tooltipName+"-"+c.getTargetSelectorSuffix(t[r].id)+"'>",o+="<td class='name'><span style='background-color:"+u+"'></span>"+l+"</td>",o+="<td class='value'>"+s+"</td>",o+="</tr>"}return o+"</table>"},C.tooltipPosition=function(t,e,n,i){var o,r,a,s,l,u=this,c=u.config,d=u.d3,h=u.hasArcType(),f=d.mouse(i);return h?(r=(u.width-(u.isLegendRight?u.getLegendWidth():0))/2+f[0],s=(u.hasType("gauge")?u.height:u.height/2)+f[1]+20):(o=u.getSvgLeft(!0),c.axis_rotated?(a=(r=o+f[0]+100)+e,l=u.currentWidth-u.getCurrentPaddingRight(),s=u.x(t[0].x)+20):(a=(r=o+u.getCurrentPaddingLeft(!0)+u.x(t[0].x)+20)+e,l=o+u.currentWidth-u.getCurrentPaddingRight(),s=f[1]+15),a>l&&(r-=a-l+20),s+n>u.currentHeight&&(s-=n+30)),s<0&&(s=0),{top:s,left:r}},C.showTooltip=function(t,e){var n,i,o,r=this,a=r.config,l=r.hasArcType(),u=t.filter(function(t){return t&&s(t.value)}),c=a.tooltip_position||C.tooltipPosition;0!==u.length&&a.tooltip_show&&(r.tooltip.html(a.tooltip_contents.call(r,t,r.axis.getXAxisTickFormat(),r.getYFormat(l),r.color)).style("display","block"),n=r.tooltip.property("offsetWidth"),i=r.tooltip.property("offsetHeight"),o=c.call(this,u,n,i,e),r.tooltip.style("top",o.top+"px").style("left",o.left+"px"))},C.hideTooltip=function(){this.tooltip.style("display","none")},C.setTargetType=function(t,e){var n=this,i=n.config;n.mapToTargetIds(t).forEach(function(t){n.withoutFadeIn[t]=e===i.data_types[t],i.data_types[t]=e}),t||(i.data_type=e)},C.hasType=function(t,e){var n=this.config.data_types,i=!1;return(e=e||this.data.targets)&&e.length?e.forEach(function(e){var o=n[e.id];(o&&o.indexOf(t)>=0||!o&&"line"===t)&&(i=!0)}):Object.keys(n).length?Object.keys(n).forEach(function(e){n[e]===t&&(i=!0)}):i=this.config.data_type===t,i},C.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},C.isLineType=function(t){var e=this.config,n=c(t)?t:t.id;return!e.data_types[n]||["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[n])>=0},C.isStepType=function(t){var e=c(t)?t:t.id;return["step","area-step"].indexOf(this.config.data_types[e])>=0},C.isSplineType=function(t){var e=c(t)?t:t.id;return["spline","area-spline"].indexOf(this.config.data_types[e])>=0},C.isAreaType=function(t){var e=c(t)?t:t.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[e])>=0},C.isBarType=function(t){var e=c(t)?t:t.id;return"bar"===this.config.data_types[e]},C.isScatterType=function(t){var e=c(t)?t:t.id;return"scatter"===this.config.data_types[e]},C.isPieType=function(t){var e=c(t)?t:t.id;return"pie"===this.config.data_types[e]},C.isGaugeType=function(t){var e=c(t)?t:t.id;return"gauge"===this.config.data_types[e]},C.isDonutType=function(t){var e=c(t)?t:t.id;return"donut"===this.config.data_types[e]},C.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},C.lineData=function(t){return this.isLineType(t)?[t]:[]},C.arcData=function(t){return this.isArcType(t.data)?[t]:[]},C.barData=function(t){return this.isBarType(t)?t.values:[]},C.lineOrScatterData=function(t){return this.isLineType(t)||this.isScatterType(t)?t.values:[]},C.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},C.isInterpolationType=function(t){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(t)>=0},C.isSafari=function(){var t=window.navigator.userAgent;return t.indexOf("Safari")>=0&&t.indexOf("Chrome")<0},C.isChrome=function(){return window.navigator.userAgent.indexOf("Chrome")>=0},C.initZoom=function(){var t,e=this,n=e.d3,i=e.config;e.zoom=n.behavior.zoom().on("zoomstart",function(){t=n.event.sourceEvent,e.zoom.altDomain=n.event.sourceEvent.altKey?e.x.orgDomain():null,i.zoom_onzoomstart.call(e.api,n.event.sourceEvent)}).on("zoom",function(){e.redrawForZoom.call(e)}).on("zoomend",function(){var o=n.event.sourceEvent;o&&t.clientX===o.clientX&&t.clientY===o.clientY||(e.redrawEventRect(),e.updateZoom(),i.zoom_onzoomend.call(e.api,e.x.orgDomain()))}),e.zoom.scale=function(t){return i.axis_rotated?this.y(t):this.x(t)},e.zoom.orgScaleExtent=function(){var t=i.zoom_extent?i.zoom_extent:[1,10];return[t[0],Math.max(e.getMaxDataCount()/t[1],t[1])]},e.zoom.updateScaleExtent=function(){var t=g(e.x.orgDomain())/g(e.getZoomDomain()),n=this.orgScaleExtent();return this.scaleExtent([n[0]*t,n[1]*t]),this}},C.getZoomDomain=function(){var t=this.config,e=this.d3;return[e.min([this.orgXDomain[0],t.zoom_x_min]),e.max([this.orgXDomain[1],t.zoom_x_max])]},C.updateZoom=function(){var t=this.config.zoom_enabled?this.zoom:function(){};this.main.select("."+i.zoomRect).call(t).on("dblclick.zoom",null),this.main.selectAll("."+i.eventRect).call(t).on("dblclick.zoom",null)},C.redrawForZoom=function(){var t=this,e=t.d3,n=t.config,i=t.zoom,o=t.x;if(n.zoom_enabled&&0!==t.filterTargetsToShow(t.data.targets).length){if("mousemove"===e.event.sourceEvent.type&&i.altDomain)return o.domain(i.altDomain),void i.scale(o).updateScaleExtent();t.isCategorized()&&o.orgDomain()[0]===t.orgXDomain[0]&&o.domain([t.orgXDomain[0]-1e-10,o.orgDomain()[1]]),t.redraw({withTransition:!1,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===e.event.sourceEvent.type&&(t.cancelClick=!0),n.zoom_onzoom.call(t.api,o.orgDomain())}},L}()},function(t,e,n){"use strict";(function(e){var i=n(1),o=n(36),r={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,l={adapter:("undefined"!=typeof XMLHttpRequest?s=n(14):void 0!==e&&(s=n(14)),s),transformRequest:[function(t,e){return o(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){l.headers[t]={}}),i.forEach(["post","put","patch"],function(t){l.headers[t]=i.merge(r)}),t.exports=l}).call(this,n(6))},function(t,e,n){var i,o;!function(){var r={version:"3.5.17"},a=[].slice,s=function(t){return a.call(t)},l=this.document;function u(t){return t&&(t.ownerDocument||t.document||t).documentElement}function c(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(l)try{s(l.documentElement.childNodes)[0].nodeType}catch(t){s=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),l)try{l.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var d=this.Element.prototype,h=d.setAttribute,f=d.setAttributeNS,p=this.CSSStyleDeclaration.prototype,g=p.setProperty;d.setAttribute=function(t,e){h.call(this,t,e+"")},d.setAttributeNS=function(t,e,n){f.call(this,t,e,n+"")},p.setProperty=function(t,e,n){g.call(this,t,e+"",n)}}function m(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function v(t){return null===t?NaN:+t}function _(t){return!isNaN(t)}function y(t){return{left:function(e,n,i,o){for(arguments.length<3&&(i=0),arguments.length<4&&(o=e.length);i<o;){var r=i+o>>>1;t(e[r],n)<0?i=r+1:o=r}return i},right:function(e,n,i,o){for(arguments.length<3&&(i=0),arguments.length<4&&(o=e.length);i<o;){var r=i+o>>>1;t(e[r],n)>0?o=r:i=r+1}return i}}}r.ascending=m,r.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},r.min=function(t,e){var n,i,o=-1,r=t.length;if(1===arguments.length){for(;++o<r;)if(null!=(i=t[o])&&i>=i){n=i;break}for(;++o<r;)null!=(i=t[o])&&n>i&&(n=i)}else{for(;++o<r;)if(null!=(i=e.call(t,t[o],o))&&i>=i){n=i;break}for(;++o<r;)null!=(i=e.call(t,t[o],o))&&n>i&&(n=i)}return n},r.max=function(t,e){var n,i,o=-1,r=t.length;if(1===arguments.length){for(;++o<r;)if(null!=(i=t[o])&&i>=i){n=i;break}for(;++o<r;)null!=(i=t[o])&&i>n&&(n=i)}else{for(;++o<r;)if(null!=(i=e.call(t,t[o],o))&&i>=i){n=i;break}for(;++o<r;)null!=(i=e.call(t,t[o],o))&&i>n&&(n=i)}return n},r.extent=function(t,e){var n,i,o,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i>=i){n=o=i;break}for(;++r<a;)null!=(i=t[r])&&(n>i&&(n=i),o<i&&(o=i))}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=o=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&(n>i&&(n=i),o<i&&(o=i))}return[n,o]},r.sum=function(t,e){var n,i=0,o=t.length,r=-1;if(1===arguments.length)for(;++r<o;)_(n=+t[r])&&(i+=n);else for(;++r<o;)_(n=+e.call(t,t[r],r))&&(i+=n);return i},r.mean=function(t,e){var n,i=0,o=t.length,r=-1,a=o;if(1===arguments.length)for(;++r<o;)_(n=v(t[r]))?i+=n:--a;else for(;++r<o;)_(n=v(e.call(t,t[r],r)))?i+=n:--a;if(a)return i/a},r.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),o=+t[i-1],r=n-i;return r?o+r*(t[i]-o):o},r.median=function(t,e){var n,i=[],o=t.length,a=-1;if(1===arguments.length)for(;++a<o;)_(n=v(t[a]))&&i.push(n);else for(;++a<o;)_(n=v(e.call(t,t[a],a)))&&i.push(n);if(i.length)return r.quantile(i.sort(m),.5)},r.variance=function(t,e){var n,i,o=t.length,r=0,a=0,s=-1,l=0;if(1===arguments.length)for(;++s<o;)_(n=v(t[s]))&&(a+=(i=n-r)*(n-(r+=i/++l)));else for(;++s<o;)_(n=v(e.call(t,t[s],s)))&&(a+=(i=n-r)*(n-(r+=i/++l)));if(l>1)return a/(l-1)},r.deviation=function(){var t=r.variance.apply(this,arguments);return t?Math.sqrt(t):t};var b=y(m);function x(t){return t.length}r.bisectLeft=b.left,r.bisect=r.bisectRight=b.right,r.bisector=function(t){return y(1===t.length?function(e,n){return m(t(e),n)}:t)},r.shuffle=function(t,e,n){(r=arguments.length)<3&&(n=t.length,r<2&&(e=0));for(var i,o,r=n-e;r;)o=Math.random()*r--|0,i=t[r+e],t[r+e]=t[o+e],t[o+e]=i;return t},r.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},r.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],o=new Array(n<0?0:n);e<n;)o[e]=[i,i=t[++e]];return o},r.transpose=function(t){if(!(o=t.length))return[];for(var e=-1,n=r.min(t,x),i=new Array(n);++e<n;)for(var o,a=-1,s=i[e]=new Array(o);++a<o;)s[a]=t[a][e];return i},r.zip=function(){return r.transpose(arguments)},r.keys=function(t){var e=[];for(var n in t)e.push(n);return e},r.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},r.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},r.merge=function(t){for(var e,n,i,o=t.length,r=-1,a=0;++r<o;)a+=t[r].length;for(n=new Array(a);--o>=0;)for(e=(i=t[o]).length;--e>=0;)n[--a]=i[e];return n};var w=Math.abs;function S(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function T(){this._=Object.create(null)}r.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var i,o=[],r=function(t){var e=1;for(;t*e%1;)e*=10;return e}(w(n)),a=-1;if(t*=r,e*=r,(n*=r)<0)for(;(i=t+n*++a)>e;)o.push(i/r);else for(;(i=t+n*++a)<e;)o.push(i/r);return o},r.map=function(t,e){var n=new T;if(t instanceof T)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,o=-1,r=t.length;if(1===arguments.length)for(;++o<r;)n.set(o,t[o]);else for(;++o<r;)n.set(e.call(t,i=t[o],o),i)}else for(var a in t)n.set(a,t[a]);return n};var C="__proto__",L="\0";function A(t){return(t+="")===C||t[0]===L?L+t:t}function D(t){return(t+="")[0]===L?t.slice(1):t}function k(t){return A(t)in this._}function P(t){return(t=A(t))in this._&&delete this._[t]}function E(){var t=[];for(var e in this._)t.push(D(e));return t}function M(){var t=0;for(var e in this._)++t;return t}function I(){for(var t in this._)return!1;return!0}function O(){this._=Object.create(null)}function R(t){return t}function N(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function F(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=$.length;n<i;++n){var o=$[n]+e;if(o in t)return o}}S(T,{has:k,get:function(t){return this._[A(t)]},set:function(t,e){return this._[A(t)]=e},remove:P,keys:E,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:D(e),value:this._[e]});return t},size:M,empty:I,forEach:function(t){for(var e in this._)t.call(this,D(e),this._[e])}}),r.nest=function(){var t,e,n={},i=[],o=[];function a(o,r,s){if(s>=i.length)return e?e.call(n,r):t?r.sort(t):r;for(var l,u,c,d,h=-1,f=r.length,p=i[s++],g=new T;++h<f;)(d=g.get(l=p(u=r[h])))?d.push(u):g.set(l,[u]);return o?(u=o(),c=function(t,e){u.set(t,a(o,e,s))}):(u={},c=function(t,e){u[t]=a(o,e,s)}),g.forEach(c),u}return n.map=function(t,e){return a(e,t,0)},n.entries=function(t){return function t(e,n){if(n>=i.length)return e;var r=[],a=o[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),a?r.sort(function(t,e){return a(t.key,e.key)}):r}(a(r.map,t,0),0)},n.key=function(t){return i.push(t),n},n.sortKeys=function(t){return o[i.length-1]=t,n},n.sortValues=function(e){return t=e,n},n.rollup=function(t){return e=t,n},n},r.set=function(t){var e=new O;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},S(O,{has:k,add:function(t){return this._[A(t+="")]=!0,t},remove:P,values:E,size:M,empty:I,forEach:function(t){for(var e in this._)t.call(this,D(e))}}),r.behavior={},r.rebind=function(t,e){for(var n,i=1,o=arguments.length;++i<o;)t[n=arguments[i]]=N(t,e,e[n]);return t};var $=["webkit","ms","moz","Moz","o","O"];function j(){}function B(){}function U(t){var e=[],n=new T;function i(){for(var n,i=e,o=-1,r=i.length;++o<r;)(n=i[o].on)&&n.apply(this,arguments);return t}return i.on=function(i,o){var r,a=n.get(i);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,r=e.indexOf(a)).concat(e.slice(r+1)),n.remove(i)),o&&e.push(n.set(i,{on:o})),t)},i}function z(){r.event.preventDefault()}function G(){for(var t,e=r.event;t=e.sourceEvent;)e=t;return e}function H(t){for(var e=new B,n=0,i=arguments.length;++n<i;)e[arguments[n]]=U(e);return e.of=function(n,i){return function(o){try{var a=o.sourceEvent=r.event;o.target=t,r.event=o,e[o.type].apply(n,i)}finally{r.event=a}}},e}r.dispatch=function(){for(var t=new B,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=U(t);return t},B.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},r.event=null,r.requote=function(t){return t.replace(V,"\\$&")};var V=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,q={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function W(t){return q(t,K),t}var X=function(t,e){return e.querySelector(t)},Z=function(t,e){return e.querySelectorAll(t)},Y=function(t,e){var n=t.matches||t[F(t,"matchesSelector")];return(Y=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(X=function(t,e){return Sizzle(t,e)[0]||null},Z=Sizzle,Y=Sizzle.matchesSelector),r.selection=function(){return r.select(l.documentElement)};var K=r.selection.prototype=[];function J(t){return"function"==typeof t?t:function(){return X(t,this)}}function Q(t){return"function"==typeof t?t:function(){return Z(t,this)}}K.select=function(t){var e,n,i,o,r=[];t=J(t);for(var a=-1,s=this.length;++a<s;){r.push(e=[]),e.parentNode=(i=this[a]).parentNode;for(var l=-1,u=i.length;++l<u;)(o=i[l])?(e.push(n=t.call(o,o.__data__,l,a)),n&&"__data__"in o&&(n.__data__=o.__data__)):e.push(null)}return W(r)},K.selectAll=function(t){var e,n,i=[];t=Q(t);for(var o=-1,r=this.length;++o<r;)for(var a=this[o],l=-1,u=a.length;++l<u;)(n=a[l])&&(i.push(e=s(t.call(n,n.__data__,l,o))),e.parentNode=n);return W(i)};var tt="http://www.w3.org/1999/xhtml",et={svg:"http://www.w3.org/2000/svg",xhtml:tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nt(t,e){return t=r.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function it(t){return t.trim().replace(/\s+/g," ")}function ot(t){return new RegExp("(?:^|\\s+)"+r.requote(t)+"(?:\\s+|$)","g")}function rt(t){return(t+"").trim().split(/^|\s+/)}function at(t,e){var n=(t=rt(t).map(st)).length;return"function"==typeof e?function(){for(var i=-1,o=e.apply(this,arguments);++i<n;)t[i](this,o)}:function(){for(var i=-1;++i<n;)t[i](this,e)}}function st(t){var e=ot(t);return function(n,i){if(o=n.classList)return i?o.add(t):o.remove(t);var o=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(o)||n.setAttribute("class",it(o+" "+t))):n.setAttribute("class",it(o.replace(e," ")))}}function lt(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}:function(){this.style.setProperty(t,e,n)}}function ut(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function ct(t){return"function"==typeof t?t:(t=r.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n===tt&&e.documentElement.namespaceURI===tt?e.createElement(t):e.createElementNS(n,t)}}function dt(){var t=this.parentNode;t&&t.removeChild(this)}function ht(t){return{__data__:t}}function ft(t){return function(){return Y(this,t)}}function pt(t,e){for(var n=0,i=t.length;n<i;n++)for(var o,r=t[n],a=0,s=r.length;a<s;a++)(o=r[a])&&e(o,a,n);return t}function gt(t){return q(t,mt),t}r.ns={prefix:et,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),et.hasOwnProperty(n)?{space:et[n],local:t}:t}},K.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=r.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(nt(e,t[e]));return this}return this.each(nt(t,e))},K.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=rt(t)).length,o=-1;if(e=n.classList){for(;++o<i;)if(!e.contains(t[o]))return!1}else for(e=n.getAttribute("class");++o<i;)if(!ot(t[o]).test(e))return!1;return!0}for(e in t)this.each(at(e,t[e]));return this}return this.each(at(t,e))},K.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.each(lt(n,t[n],e));return this}if(i<2){var o=this.node();return c(o).getComputedStyle(o,null).getPropertyValue(t)}n=""}return this.each(lt(t,e,n))},K.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(ut(e,t[e]));return this}return this.each(ut(t,e))},K.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},K.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},K.append=function(t){return t=ct(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},K.insert=function(t,e){return t=ct(t),e=J(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},K.remove=function(){return this.each(dt)},K.data=function(t,e){var n,i,o=-1,r=this.length;if(!arguments.length){for(t=new Array(r=(n=this[0]).length);++o<r;)(i=n[o])&&(t[o]=i.__data__);return t}function a(t,n){var i,o,r,a=t.length,c=n.length,d=Math.min(a,c),h=new Array(c),f=new Array(c),p=new Array(a);if(e){var g,m=new T,v=new Array(a);for(i=-1;++i<a;)(o=t[i])&&(m.has(g=e.call(o,o.__data__,i))?p[i]=o:m.set(g,o),v[i]=g);for(i=-1;++i<c;)(o=m.get(g=e.call(n,r=n[i],i)))?!0!==o&&(h[i]=o,o.__data__=r):f[i]=ht(r),m.set(g,!0);for(i=-1;++i<a;)i in v&&!0!==m.get(v[i])&&(p[i]=t[i])}else{for(i=-1;++i<d;)o=t[i],r=n[i],o?(o.__data__=r,h[i]=o):f[i]=ht(r);for(;i<c;++i)f[i]=ht(n[i]);for(;i<a;++i)p[i]=t[i]}f.update=h,f.parentNode=h.parentNode=p.parentNode=t.parentNode,s.push(f),l.push(h),u.push(p)}var s=gt([]),l=W([]),u=W([]);if("function"==typeof t)for(;++o<r;)a(n=this[o],t.call(n,n.parentNode.__data__,o));else for(;++o<r;)a(n=this[o],t);return l.enter=function(){return s},l.exit=function(){return u},l},K.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},K.filter=function(t){var e,n,i,o=[];"function"!=typeof t&&(t=ft(t));for(var r=0,a=this.length;r<a;r++){o.push(e=[]),e.parentNode=(n=this[r]).parentNode;for(var s=0,l=n.length;s<l;s++)(i=n[s])&&t.call(i,i.__data__,s,r)&&e.push(i)}return W(o)},K.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],o=i.length-1,r=i[o];--o>=0;)(n=i[o])&&(r&&r!==n.nextSibling&&r.parentNode.insertBefore(n,r),r=n);return this},K.sort=function(t){t=function(t){arguments.length||(t=m);return function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},K.each=function(t){return pt(this,function(e,n,i){t.call(e,e.__data__,n,i)})},K.call=function(t){var e=s(arguments);return t.apply(e[0]=this,e),this},K.empty=function(){return!this.node()},K.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,o=n.length;i<o;i++){var r=n[i];if(r)return r}return null},K.size=function(){var t=0;return pt(this,function(){++t}),t};var mt=[];function vt(t,e,n){var i="__on"+t,o=t.indexOf("."),a=yt;o>0&&(t=t.slice(0,o));var l=_t.get(t);function u(){var e=this[i];e&&(this.removeEventListener(t,e,e.$),delete this[i])}return l&&(t=l,a=bt),o?e?function(){var o=a(e,s(arguments));u.call(this),this.addEventListener(t,this[i]=o,o.$=n),o._=e}:u:e?j:function(){var e,n=new RegExp("^__on([^.]+)"+r.requote(t)+"$");for(var i in this)if(e=i.match(n)){var o=this[i];this.removeEventListener(e[1],o,o.$),delete this[i]}}}r.selection.enter=gt,r.selection.enter.prototype=mt,mt.append=K.append,mt.empty=K.empty,mt.node=K.node,mt.call=K.call,mt.size=K.size,mt.select=function(t){for(var e,n,i,o,r,a=[],s=-1,l=this.length;++s<l;){i=(o=this[s]).update,a.push(e=[]),e.parentNode=o.parentNode;for(var u=-1,c=o.length;++u<c;)(r=o[u])?(e.push(i[u]=n=t.call(o.parentNode,r.__data__,u,s)),n.__data__=r.__data__):e.push(null)}return W(a)},mt.insert=function(t,e){var n,i,o;return arguments.length<2&&(n=this,e=function(t,e,r){var a,s=n[r].update,l=s.length;for(r!=o&&(o=r,i=0),e>=i&&(i=e+1);!(a=s[i])&&++i<l;);return a}),K.insert.call(this,t,e)},r.select=function(t){var e;return"string"==typeof t?(e=[X(t,l)]).parentNode=l.documentElement:(e=[t]).parentNode=u(t),W([e])},r.selectAll=function(t){var e;return"string"==typeof t?(e=s(Z(t,l))).parentNode=l.documentElement:(e=s(t)).parentNode=null,W([e])},K.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=!1),t)this.each(vt(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(vt(t,e,n))};var _t=r.map({mouseenter:"mouseover",mouseleave:"mouseout"});function yt(t,e){return function(n){var i=r.event;r.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{r.event=i}}}function bt(t,e){var n=yt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}l&&_t.forEach(function(t){"on"+t in l&&_t.remove(t)});var xt,wt=0;function St(t){var e=".dragsuppress-"+ ++wt,n="click"+e,i=r.select(c(t)).on("touchmove"+e,z).on("dragstart"+e,z).on("selectstart"+e,z);if(null==xt&&(xt=!("onselectstart"in t)&&F(t.style,"userSelect")),xt){var o=u(t).style,a=o[xt];o[xt]="none"}return function(t){if(i.on(e,null),xt&&(o[xt]=a),t){var r=function(){i.on(n,null)};i.on(n,function(){z(),r()},!0),setTimeout(r,0)}}}r.mouse=function(t){return Ct(t,G())};var Tt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ct(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(Tt<0){var o=c(t);if(o.scrollX||o.scrollY){var a=(n=r.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Tt=!(a.f||a.e),n.remove()}}return Tt?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function Lt(){return r.event.changedTouches[0].identifier}r.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=G().changedTouches),e)for(var i,o=0,r=e.length;o<r;++o)if((i=e[o]).identifier===n)return Ct(t,i)},r.behavior.drag=function(){var t=H(o,"drag","dragstart","dragend"),e=null,n=a(j,r.mouse,c,"mousemove","mouseup"),i=a(Lt,r.touch,R,"touchmove","touchend");function o(){this.on("mousedown.drag",n).on("touchstart.drag",i)}function a(n,i,o,a,s){return function(){var l,u=r.event.target.correspondingElement||r.event.target,c=this.parentNode,d=t.of(this,arguments),h=0,f=n(),p=".drag"+(null==f?"":"-"+f),g=r.select(o(u)).on(a+p,function(){var t,e,n=i(c,f);if(!n)return;t=n[0]-v[0],e=n[1]-v[1],h|=t|e,v=n,d({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:t,dy:e})}).on(s+p,function(){if(!i(c,f))return;g.on(a+p,null).on(s+p,null),m(h),d({type:"dragend"})}),m=St(u),v=i(c,f);l=e?[(l=e.apply(this,arguments)).x-v[0],l.y-v[1]]:[0,0],d({type:"dragstart"})}}return o.origin=function(t){return arguments.length?(e=t,o):e},r.rebind(o,t,"on")},r.touches=function(t,e){return arguments.length<2&&(e=G().touches),e?s(e).map(function(e){var n=Ct(t,e);return n.identifier=e.identifier,n}):[]};var At=1e-6,Dt=At*At,kt=Math.PI,Pt=2*kt,Et=Pt-At,Mt=kt/2,It=kt/180,Ot=180/kt;function Rt(t){return t>0?1:t<0?-1:0}function Nt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Ft(t){return t>1?0:t<-1?kt:Math.acos(t)}function $t(t){return t>1?Mt:t<-1?-Mt:Math.asin(t)}function jt(t){return((t=Math.exp(t))+1/t)/2}function Bt(t){return(t=Math.sin(t/2))*t}var Ut=Math.SQRT2;r.interpolateZoom=function(t,e){var n,i,o=t[0],r=t[1],a=t[2],s=e[0],l=e[1],u=e[2],c=s-o,d=l-r,h=c*c+d*d;if(h<Dt)i=Math.log(u/a)/Ut,n=function(t){return[o+t*c,r+t*d,a*Math.exp(Ut*t*i)]};else{var f=Math.sqrt(h),p=(u*u-a*a+4*h)/(2*a*2*f),g=(u*u-a*a-4*h)/(2*u*2*f),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);i=(v-m)/Ut,n=function(t){var e,n=t*i,s=jt(m),l=a/(2*f)*(s*(e=Ut*n+m,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[o+l*c,r+l*d,a*s/jt(Ut*n+m)]}}return n.duration=1e3*i,n},r.behavior.zoom=function(){var t,e,n,i,o,a,s,u,d,h={x:0,y:0,k:1},f=[960,500],p=Ht,g=250,m=0,v="mousedown.zoom",_="mousemove.zoom",y="mouseup.zoom",b="touchstart.zoom",x=H(w,"zoomstart","zoom","zoomend");function w(t){t.on(v,E).on(Gt+".zoom",I).on("dblclick.zoom",O).on(b,M)}function S(t){return[(t[0]-h.x)/h.k,(t[1]-h.y)/h.k]}function T(t){h.k=Math.max(p[0],Math.min(p[1],t))}function C(t,e){e=function(t){return[t[0]*h.k+h.x,t[1]*h.k+h.y]}(e),h.x+=t[0]-e[0],h.y+=t[1]-e[1]}function L(t,n,i,o){t.__chart__={x:h.x,y:h.y,k:h.k},T(Math.pow(2,o)),C(e=n,i),t=r.select(t),g>0&&(t=t.transition().duration(g)),t.call(w.event)}function A(){s&&s.domain(a.range().map(function(t){return(t-h.x)/h.k}).map(a.invert)),d&&d.domain(u.range().map(function(t){return(t-h.y)/h.k}).map(u.invert))}function D(t){m++||t({type:"zoomstart"})}function k(t){A(),t({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function P(t){--m||(t({type:"zoomend"}),e=null)}function E(){var t=this,e=x.of(t,arguments),n=0,i=r.select(c(t)).on(_,function(){n=1,C(r.mouse(t),o),k(e)}).on(y,function(){i.on(_,null).on(y,null),a(n),P(e)}),o=S(r.mouse(t)),a=St(t);ds.call(t),D(e)}function M(){var t,e=this,n=x.of(e,arguments),i={},a=0,s=".zoom-"+r.event.changedTouches[0].identifier,l="touchmove"+s,u="touchend"+s,c=[],d=r.select(e),f=St(e);function p(){var n=r.touches(e);return t=h.k,n.forEach(function(t){t.identifier in i&&(i[t.identifier]=S(t))}),n}function g(){var t=r.event.target;r.select(t).on(l,m).on(u,_),c.push(t);for(var n=r.event.changedTouches,s=0,d=n.length;s<d;++s)i[n[s].identifier]=null;var f=p(),g=Date.now();if(1===f.length){if(g-o<500){var v=f[0];L(e,v,i[v.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),z()}o=g}else if(f.length>1){v=f[0];var y=f[1],b=v[0]-y[0],x=v[1]-y[1];a=b*b+x*x}}function m(){var s,l,u,c,d=r.touches(e);ds.call(e);for(var h=0,f=d.length;h<f;++h,c=null)if(u=d[h],c=i[u.identifier]){if(l)break;s=u,l=c}if(c){var p=(p=u[0]-s[0])*p+(p=u[1]-s[1])*p,g=a&&Math.sqrt(p/a);s=[(s[0]+u[0])/2,(s[1]+u[1])/2],l=[(l[0]+c[0])/2,(l[1]+c[1])/2],T(g*t)}o=null,C(s,l),k(n)}function _(){if(r.event.touches.length){for(var t=r.event.changedTouches,e=0,o=t.length;e<o;++e)delete i[t[e].identifier];for(var a in i)return void p()}r.selectAll(c).on(s,null),d.on(v,E).on(b,M),f(),P(n)}g(),D(n),d.on(v,null).on(b,g)}function I(){var o=x.of(this,arguments);i?clearTimeout(i):(ds.call(this),t=S(e=n||r.mouse(this)),D(o)),i=setTimeout(function(){i=null,P(o)},50),z(),T(Math.pow(2,.002*zt())*h.k),C(e,t),k(o)}function O(){var t=r.mouse(this),e=Math.log(h.k)/Math.LN2;L(this,t,S(t),r.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return Gt||(Gt="onwheel"in l?(zt=function(){return-r.event.deltaY*(r.event.deltaMode?120:1)},"wheel"):"onmousewheel"in l?(zt=function(){return r.event.wheelDelta},"mousewheel"):(zt=function(){return-r.event.detail},"MozMousePixelScroll")),w.event=function(t){t.each(function(){var t=x.of(this,arguments),n=h;ps?r.select(this).transition().each("start.zoom",function(){h=this.__chart__||{x:0,y:0,k:1},D(t)}).tween("zoom:zoom",function(){var i=f[0],o=f[1],a=e?e[0]:i/2,s=e?e[1]:o/2,l=r.interpolateZoom([(a-h.x)/h.k,(s-h.y)/h.k,i/h.k],[(a-n.x)/n.k,(s-n.y)/n.k,i/n.k]);return function(e){var n=l(e),o=i/n[2];this.__chart__=h={x:a-n[0]*o,y:s-n[1]*o,k:o},k(t)}}).each("interrupt.zoom",function(){P(t)}).each("end.zoom",function(){P(t)}):(this.__chart__=h,D(t),k(t),P(t))})},w.translate=function(t){return arguments.length?(h={x:+t[0],y:+t[1],k:h.k},A(),w):[h.x,h.y]},w.scale=function(t){return arguments.length?(h={x:h.x,y:h.y,k:null},T(+t),A(),w):h.k},w.scaleExtent=function(t){return arguments.length?(p=null==t?Ht:[+t[0],+t[1]],w):p},w.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],w):n},w.size=function(t){return arguments.length?(f=t&&[+t[0],+t[1]],w):f},w.duration=function(t){return arguments.length?(g=+t,w):g},w.x=function(t){return arguments.length?(s=t,a=t.copy(),h={x:0,y:0,k:1},w):s},w.y=function(t){return arguments.length?(d=t,u=t.copy(),h={x:0,y:0,k:1},w):d},r.rebind(w,x,"on")};var zt,Gt,Ht=[0,1/0];function Vt(){}function qt(t,e,n){return this instanceof qt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof qt?new qt(t.h,t.s,t.l):pe(""+t,ge,qt):new qt(t,e,n)}r.color=Vt,Vt.prototype.toString=function(){return this.rgb()+""},r.hsl=qt;var Wt=qt.prototype=new Vt;function Xt(t,e,n){var i,o;function r(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?i+(o-i)*t/60:t<180?o:t<240?i+(o-i)*(240-t)/60:i}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,i=2*(n=n<0?0:n>1?1:n)-(o=n<=.5?n*(1+e):n+e-n*e),new ue(r(t+120),r(t),r(t-120))}function Zt(t,e,n){return this instanceof Zt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Zt?new Zt(t.h,t.c,t.l):re(t instanceof Jt?t.l:(t=me((t=r.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Zt(t,e,n)}Wt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new qt(this.h,this.s,this.l/t)},Wt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new qt(this.h,this.s,t*this.l)},Wt.rgb=function(){return Xt(this.h,this.s,this.l)},r.hcl=Zt;var Yt=Zt.prototype=new Vt;function Kt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Jt(n,Math.cos(t*=It)*e,Math.sin(t)*e)}function Jt(t,e,n){return this instanceof Jt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Jt?new Jt(t.l,t.a,t.b):t instanceof Zt?Kt(t.h,t.c,t.l):me((t=ue(t)).r,t.g,t.b):new Jt(t,e,n)}Yt.brighter=function(t){return new Zt(this.h,this.c,Math.min(100,this.l+Qt*(arguments.length?t:1)))},Yt.darker=function(t){return new Zt(this.h,this.c,Math.max(0,this.l-Qt*(arguments.length?t:1)))},Yt.rgb=function(){return Kt(this.h,this.c,this.l).rgb()},r.lab=Jt;var Qt=18,te=.95047,ee=1,ne=1.08883,ie=Jt.prototype=new Vt;function oe(t,e,n){var i=(t+16)/116,o=i+e/500,r=i-n/200;return new ue(le(3.2404542*(o=ae(o)*te)-1.5371385*(i=ae(i)*ee)-.4985314*(r=ae(r)*ne)),le(-.969266*o+1.8760108*i+.041556*r),le(.0556434*o-.2040259*i+1.0572252*r))}function re(t,e,n){return t>0?new Zt(Math.atan2(n,e)*Ot,Math.sqrt(e*e+n*n),t):new Zt(NaN,NaN,t)}function ae(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function se(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function le(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ue(t,e,n){return this instanceof ue?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ue?new ue(t.r,t.g,t.b):pe(""+t,ue,Xt):new ue(t,e,n)}function ce(t){return new ue(t>>16,t>>8&255,255&t)}function de(t){return ce(t)+""}ie.brighter=function(t){return new Jt(Math.min(100,this.l+Qt*(arguments.length?t:1)),this.a,this.b)},ie.darker=function(t){return new Jt(Math.max(0,this.l-Qt*(arguments.length?t:1)),this.a,this.b)},ie.rgb=function(){return oe(this.l,this.a,this.b)},r.rgb=ue;var he=ue.prototype=new Vt;function fe(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function pe(t,e,n){var i,o,r,a=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(o=i[2].split(","),i[1]){case"hsl":return n(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return e(_e(o[0]),_e(o[1]),_e(o[2]))}return(r=ye.get(t))?e(r.r,r.g,r.b):(null==t||"#"!==t.charAt(0)||isNaN(r=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&r)>>4,a|=a>>4,s=240&r,s|=s>>4,l=15&r,l|=l<<4):7===t.length&&(a=(16711680&r)>>16,s=(65280&r)>>8,l=255&r)),e(a,s,l))}function ge(t,e,n){var i,o,r=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-r,l=(a+r)/2;return s?(o=l<.5?s/(a+r):s/(2-a-r),i=t==a?(e-n)/s+(e<n?6:0):e==a?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,o=l>0&&l<1?0:i),new qt(i,o,l)}function me(t,e,n){var i=se((.4124564*(t=ve(t))+.3575761*(e=ve(e))+.1804375*(n=ve(n)))/te),o=se((.2126729*t+.7151522*e+.072175*n)/ee);return Jt(116*o-16,500*(i-o),200*(o-se((.0193339*t+.119192*e+.9503041*n)/ne)))}function ve(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function _e(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}he.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,o=30;return e||n||i?(e&&e<o&&(e=o),n&&n<o&&(n=o),i&&i<o&&(i=o),new ue(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new ue(o,o,o)},he.darker=function(t){return new ue((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},he.hsl=function(){return ge(this.r,this.g,this.b)},he.toString=function(){return"#"+fe(this.r)+fe(this.g)+fe(this.b)};var ye=r.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function be(t){return"function"==typeof t?t:function(){return t}}function xe(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),we(e,n,t,i)}}function we(t,e,n,i){var o={},a=r.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,c=null;function d(){var t,e=u.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(u)||e>=200&&e<300||304===e){try{t=n.call(o,u)}catch(t){return void a.error.call(o,t)}a.load.call(o,t)}else a.error.call(o,u)}return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=d:u.onreadystatechange=function(){u.readyState>3&&d()},u.onprogress=function(t){var e=r.event;r.event=t;try{a.progress.call(o,u)}finally{r.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(c=t,o):c},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(s(arguments)))}}),o.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),u.open(n,t,!0),null==e||"accept"in l||(l.accept=e+",*/*"),u.setRequestHeader)for(var s in l)u.setRequestHeader(s,l[s]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=c&&(u.responseType=c),null!=r&&o.on("error",r).on("load",function(t){r(null,t)}),a.beforesend.call(o,u),u.send(null==i?null:i),o},o.abort=function(){return u.abort(),o},r.rebind(o,a,"on"),null==i?o:o.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(i))}ye.forEach(function(t,e){ye.set(t,ce(e))}),r.functor=be,r.xhr=xe(R),r.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),i=t.charCodeAt(0);function o(t,n,i){arguments.length<3&&(i=n,n=null);var o=we(t,e,null==n?r:a(n),i);return o.row=function(t){return arguments.length?o.response(null==(n=t)?r:a(t)):n},o}function r(t){return o.parse(t.responseText)}function a(t){return function(e){return o.parse(e.responseText,t)}}function s(e){return e.map(l).join(t)}function l(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return o.parse=function(t,e){var n;return o.parseRows(t,function(t,i){if(n)return n(t,i-1);var o=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,n){return e(o(t),n)}:o})},o.parseRows=function(t,e){var n,o,r={},a={},s=[],l=t.length,u=0,c=0;function d(){if(u>=l)return a;if(o)return o=!1,r;var e=u;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return u=n+2,13===(s=t.charCodeAt(n+1))?(o=!0,10===t.charCodeAt(n+2)&&++u):10===s&&(o=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;u<l;){var s,c=1;if(10===(s=t.charCodeAt(u++)))o=!0;else if(13===s)o=!0,10===t.charCodeAt(u)&&(++u,++c);else if(s!==i)continue;return t.slice(e,u-c)}return t.slice(e)}for(;(n=d())!==a;){for(var h=[];n!==r&&n!==a;)h.push(n),n=d();e&&null==(h=e(h,c++))||s.push(h)}return s},o.format=function(e){if(Array.isArray(e[0]))return o.formatRows(e);var n=new O,i=[];return e.forEach(function(t){for(var e in t)n.has(e)||i.push(n.add(e))}),[i.map(l).join(t)].concat(e.map(function(e){return i.map(function(t){return l(e[t])}).join(t)})).join("\n")},o.formatRows=function(t){return t.map(s).join("\n")},o},r.csv=r.dsv(",","text/csv"),r.tsv=r.dsv("\t","text/tab-separated-values");var Se,Te,Ce,Le,Ae=this[F(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function De(t,e,n){var i=arguments.length;i<2&&(e=0),i<3&&(n=Date.now());var o={c:t,t:n+e,n:null};return Te?Te.n=o:Se=o,Te=o,Ce||(Le=clearTimeout(Le),Ce=1,Ae(ke)),o}function ke(){var t=Pe(),e=Ee()-t;e>24?(isFinite(e)&&(clearTimeout(Le),Le=setTimeout(ke,e)),Ce=0):(Ce=1,Ae(ke))}function Pe(){for(var t=Date.now(),e=Se;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ee(){for(var t,e=Se,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:Se=e.n;return Te=t,n}function Me(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}r.timer=function(){De.apply(this,arguments)},r.timer.flush=function(){Pe(),Ee()},r.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ie=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*w(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});r.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=r.round(t,Me(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Ie[8+n/3]};var Oe=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Re=r.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=r.round(t,Me(t,e))).toFixed(Math.max(0,Math.min(20,Me(t*(1+1e-15),e))))}});function Ne(t){return t+""}var Fe=r.time={},$e=Date;function je(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}je.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Be.setUTCDate.apply(this._,arguments)},setDay:function(){Be.setUTCDay.apply(this._,arguments)},setFullYear:function(){Be.setUTCFullYear.apply(this._,arguments)},setHours:function(){Be.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Be.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Be.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Be.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Be.setUTCSeconds.apply(this._,arguments)},setTime:function(){Be.setTime.apply(this._,arguments)}};var Be=Date.prototype;function Ue(t,e,n){function i(e){var n=t(e),i=r(n,1);return e-n<i-e?n:i}function o(n){return e(n=t(new $e(n-1)),1),n}function r(t,n){return e(t=new $e(+t),n),t}function a(t,i,r){var a=o(t),s=[];if(r>1)for(;a<i;)n(a)%r||s.push(new Date(+a)),e(a,1);else for(;a<i;)s.push(new Date(+a)),e(a,1);return s}t.floor=t,t.round=i,t.ceil=o,t.offset=r,t.range=a;var s=t.utc=ze(t);return s.floor=s,s.round=ze(i),s.ceil=ze(o),s.offset=ze(r),s.range=function(t,e,n){try{$e=je;var i=new je;return i._=t,a(i,e,n)}finally{$e=Date}},t}function ze(t){return function(e,n){try{$e=je;var i=new je;return i._=e,t(i,n)._}finally{$e=Date}}}Fe.year=Ue(function(t){return(t=Fe.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Fe.years=Fe.year.range,Fe.years.utc=Fe.year.utc.range,Fe.day=Ue(function(t){var e=new $e(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Fe.days=Fe.day.range,Fe.days.utc=Fe.day.utc.range,Fe.dayOfYear=function(t){var e=Fe.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Fe[t]=Ue(function(t){return(t=Fe.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Fe.year(t).getDay();return Math.floor((Fe.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Fe[t+"s"]=n.range,Fe[t+"s"].utc=n.utc.range,Fe[t+"OfYear"]=function(t){var n=Fe.year(t).getDay();return Math.floor((Fe.dayOfYear(t)+(n+e)%7)/7)}}),Fe.week=Fe.sunday,Fe.weeks=Fe.sunday.range,Fe.weeks.utc=Fe.sunday.utc.range,Fe.weekOfYear=Fe.sundayOfYear;var Ge={"-":"",_:" ",0:"0"},He=/^\s*\d+/,Ve=/^%/;function qe(t,e,n){var i=t<0?"-":"",o=(i?-t:t)+"",r=o.length;return i+(r<n?new Array(n-r+1).join(e)+o:o)}function We(t){return new RegExp("^(?:"+t.map(r.requote).join("|")+")","i")}function Xe(t){for(var e=new T,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Ze(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Ye(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Ke(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Je(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Qe(t,e,n){He.lastIndex=0;var i,o=He.exec(e.slice(n,n+2));return o?(t.y=(i=+o[0])+(i>68?1900:2e3),n+o[0].length):-1}function tn(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function en(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function nn(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function on(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function rn(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function an(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function sn(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function ln(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function un(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=w(e)/60|0,o=w(e)%60;return n+qe(i,"0",2)+qe(o,"0",2)}function cn(t,e,n){Ve.lastIndex=0;var i=Ve.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function dn(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}r.locale=function(t){return{numberFormat:function(t){var e=t.decimal,n=t.thousands,i=t.grouping,o=t.currency,a=i&&n?function(t,e){for(var o=t.length,r=[],a=0,s=i[0],l=0;o>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),r.push(t.substring(o-=s,o+s)),!((l+=s+1)>e));)s=i[a=(a+1)%i.length];return r.reverse().join(n)}:R;return function(t){var n=Oe.exec(t),i=n[1]||" ",s=n[2]||">",l=n[3]||"-",u=n[4]||"",c=n[5],d=+n[6],h=n[7],f=n[8],p=n[9],g=1,m="",v="",_=!1,y=!0;switch(f&&(f=+f.substring(1)),(c||"0"===i&&"="===s)&&(c=i="0",s="="),p){case"n":h=!0,p="g";break;case"%":g=100,v="%",p="f";break;case"p":g=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===u&&(m="0"+p.toLowerCase());case"c":y=!1;case"d":_=!0,f=0;break;case"s":g=-1,p="r"}"$"===u&&(m=o[0],v=o[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):"e"!=p&&"f"!=p||(f=Math.max(0,Math.min(20,f)))),p=Re.get(p)||Ne;var b=c&&h;return function(t){var n=v;if(_&&t%1)return"";var o=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===l?"":l;if(g<0){var u=r.formatPrefix(t,f);t=u.scale(t),n=u.symbol+v}else t*=g;var x,w,S=(t=p(t,f)).lastIndexOf(".");if(S<0){var T=y?t.lastIndexOf("e"):-1;T<0?(x=t,w=""):(x=t.substring(0,T),w=t.substring(T))}else x=t.substring(0,S),w=e+t.substring(S+1);!c&&h&&(x=a(x,1/0));var C=m.length+x.length+w.length+(b?0:o.length),L=C<d?new Array(C=d-C+1).join(i):"";return b&&(x=a(L+x,L.length?d-w.length:1/0)),o+=m,t=x+w,("<"===s?o+t+L:">"===s?L+o+t:"^"===s?L.substring(0,C>>=1)+o+t+L.substring(C):o+(b?t:L+t))+n}}}(t),timeFormat:function(t){var e=t.dateTime,n=t.date,i=t.time,o=t.periods,a=t.days,s=t.shortDays,l=t.months,u=t.shortMonths;function c(t){var e=t.length;function n(n){for(var i,o,r,a=[],s=-1,l=0;++s<e;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(o=Ge[i=t.charAt(++s)])&&(i=t.charAt(++s)),(r=x[i])&&(i=r(n,null==o?"e"===i?" ":"0":o)),a.push(i),l=s+1);return a.push(t.slice(l,s)),a.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(d(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var i=null!=n.Z&&$e!==je,o=new(i?je:$e);return"j"in n?o.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),o.setFullYear(n.y,0,1),o.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(o.getDay()+5)%7:n.w+7*n.U-(o.getDay()+6)%7)):o.setFullYear(n.y,n.m,n.d),o.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),i?o._:o},n.toString=function(){return t},n}function d(t,e,n,i){for(var o,r,a,s=0,l=e.length,u=n.length;s<l;){if(i>=u)return-1;if(37===(o=e.charCodeAt(s++))){if(a=e.charAt(s++),!(r=w[a in Ge?e.charAt(s++):a])||(i=r(t,n,i))<0)return-1}else if(o!=n.charCodeAt(i++))return-1}return i}c.utc=function(t){var e=c(t);function n(t){try{var n=new($e=je);return n._=t,e(n)}finally{$e=Date}}return n.parse=function(t){try{$e=je;var n=e.parse(t);return n&&n._}finally{$e=Date}},n.toString=e.toString,n},c.multi=c.utc.multi=dn;var h=r.map(),f=We(a),p=Xe(a),g=We(s),m=Xe(s),v=We(l),_=Xe(l),y=We(u),b=Xe(u);o.forEach(function(t,e){h.set(t.toLowerCase(),e)});var x={a:function(t){return s[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:c(e),d:function(t,e){return qe(t.getDate(),e,2)},e:function(t,e){return qe(t.getDate(),e,2)},H:function(t,e){return qe(t.getHours(),e,2)},I:function(t,e){return qe(t.getHours()%12||12,e,2)},j:function(t,e){return qe(1+Fe.dayOfYear(t),e,3)},L:function(t,e){return qe(t.getMilliseconds(),e,3)},m:function(t,e){return qe(t.getMonth()+1,e,2)},M:function(t,e){return qe(t.getMinutes(),e,2)},p:function(t){return o[+(t.getHours()>=12)]},S:function(t,e){return qe(t.getSeconds(),e,2)},U:function(t,e){return qe(Fe.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return qe(Fe.mondayOfYear(t),e,2)},x:c(n),X:c(i),y:function(t,e){return qe(t.getFullYear()%100,e,2)},Y:function(t,e){return qe(t.getFullYear()%1e4,e,4)},Z:un,"%":function(){return"%"}},w={a:function(t,e,n){g.lastIndex=0;var i=g.exec(e.slice(n));return i?(t.w=m.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){f.lastIndex=0;var i=f.exec(e.slice(n));return i?(t.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){y.lastIndex=0;var i=y.exec(e.slice(n));return i?(t.m=b.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){v.lastIndex=0;var i=v.exec(e.slice(n));return i?(t.m=_.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,e,n){return d(t,x.c.toString(),e,n)},d:nn,e:nn,H:rn,I:rn,j:on,L:ln,m:en,M:an,p:function(t,e,n){var i=h.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)},S:sn,U:Ye,w:Ze,W:Ke,x:function(t,e,n){return d(t,x.x.toString(),e,n)},X:function(t,e,n){return d(t,x.X.toString(),e,n)},y:Qe,Y:Je,Z:tn,"%":cn};return c}(t)}};var hn=r.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fn(){}r.format=hn.numberFormat,r.geo={},fn.prototype={s:0,t:0,add:function(t){gn(t,this.t,pn),gn(pn.s,this.s,this),this.s?this.t+=pn.t:this.s=pn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var pn=new fn;function gn(t,e,n){var i=n.s=t+e,o=i-t,r=i-o;n.t=t-r+(e-o)}function mn(t,e){t&&_n.hasOwnProperty(t.type)&&_n[t.type](t,e)}r.geo.stream=function(t,e){t&&vn.hasOwnProperty(t.type)?vn[t.type](t,e):mn(t,e)};var vn={Feature:function(t,e){mn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,o=n.length;++i<o;)mn(n[i].geometry,e)}},_n={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){yn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)yn(n[i],e,0)},Polygon:function(t,e){bn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)bn(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,o=n.length;++i<o;)mn(n[i],e)}};function yn(t,e,n){var i,o=-1,r=t.length-n;for(e.lineStart();++o<r;)i=t[o],e.point(i[0],i[1],i[2]);e.lineEnd()}function bn(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)yn(t[n],e,1);e.polygonEnd()}r.geo.area=function(t){return xn=0,r.geo.stream(t,On),xn};var xn,wn,Sn,Tn,Cn,Ln,An,Dn,kn,Pn,En,Mn,In=new fn,On={sphere:function(){xn+=4*kt},point:j,lineStart:j,lineEnd:j,polygonStart:function(){In.reset(),On.lineStart=Rn},polygonEnd:function(){var t=2*In;xn+=t<0?4*kt+t:t,On.lineStart=On.lineEnd=On.point=j}};function Rn(){var t,e,n,i,o;function r(t,e){e=e*It/2+kt/4;var r=(t*=It)-n,a=r>=0?1:-1,s=a*r,l=Math.cos(e),u=Math.sin(e),c=o*u,d=i*l+c*Math.cos(s),h=c*a*Math.sin(s);In.add(Math.atan2(h,d)),n=t,i=l,o=u}On.point=function(a,s){On.point=r,n=(t=a)*It,i=Math.cos(s=(e=s)*It/2+kt/4),o=Math.sin(s)},On.lineEnd=function(){r(t,e)}}function Nn(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function Fn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function $n(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function jn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Bn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Un(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function zn(t){return[Math.atan2(t[1],t[0]),$t(t[2])]}function Gn(t,e){return w(t[0]-e[0])<At&&w(t[1]-e[1])<At}r.geo.bounds=function(){var t,e,n,i,o,a,s,l,u,c,d,h={point:f,lineStart:g,lineEnd:m,polygonStart:function(){h.point=v,h.lineStart=_,h.lineEnd=y,u=0,On.polygonStart()},polygonEnd:function(){On.polygonEnd(),h.point=f,h.lineStart=g,h.lineEnd=m,In<0?(t=-(n=180),e=-(i=90)):u>At?i=90:u<-At&&(e=-90),d[0]=t,d[1]=n}};function f(o,r){c.push(d=[t=o,n=o]),r<e&&(e=r),r>i&&(i=r)}function p(r,a){var s=Nn([r*It,a*It]);if(l){var u=$n(l,s),c=$n([u[1],-u[0],0],u);Un(c),c=zn(c);var d=r-o,h=d>0?1:-1,p=c[0]*Ot*h,g=w(d)>180;if(g^(h*o<p&&p<h*r))(m=c[1]*Ot)>i&&(i=m);else if(g^(h*o<(p=(p+360)%360-180)&&p<h*r)){var m;(m=-c[1]*Ot)<e&&(e=m)}else a<e&&(e=a),a>i&&(i=a);g?r<o?b(t,r)>b(t,n)&&(n=r):b(r,n)>b(t,n)&&(t=r):n>=t?(r<t&&(t=r),r>n&&(n=r)):r>o?b(t,r)>b(t,n)&&(n=r):b(r,n)>b(t,n)&&(t=r)}else f(r,a);l=s,o=r}function g(){h.point=p}function m(){d[0]=t,d[1]=n,h.point=f,l=null}function v(t,e){if(l){var n=t-o;u+=w(n)>180?n+(n>0?360:-360):n}else a=t,s=e;On.point(t,e),p(t,e)}function _(){On.lineStart()}function y(){v(a,s),On.lineEnd(),w(u)>At&&(t=-(n=180)),d[0]=t,d[1]=n,l=null}function b(t,e){return(e-=t)<0?e+360:e}function x(t,e){return t[0]-e[0]}function S(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(o){if(i=n=-(t=e=1/0),c=[],r.geo.stream(o,h),u=c.length){c.sort(x);for(var a=1,s=[g=c[0]];a<u;++a)S((f=c[a])[0],g)||S(f[1],g)?(b(g[0],f[1])>b(g[0],g[1])&&(g[1]=f[1]),b(f[0],g[1])>b(g[0],g[1])&&(g[0]=f[0])):s.push(g=f);for(var l,u,f,p=-1/0,g=(a=0,s[u=s.length-1]);a<=u;g=f,++a)f=s[a],(l=b(g[1],f[0]))>p&&(p=l,t=f[0],n=g[1])}return c=d=null,t===1/0||e===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,e],[n,i]]}}(),r.geo.centroid=function(t){wn=Sn=Tn=Cn=Ln=An=Dn=kn=Pn=En=Mn=0,r.geo.stream(t,Hn);var e=Pn,n=En,i=Mn,o=e*e+n*n+i*i;return o<Dt&&(e=An,n=Dn,i=kn,Sn<At&&(e=Tn,n=Cn,i=Ln),(o=e*e+n*n+i*i)<Dt)?[NaN,NaN]:[Math.atan2(n,e)*Ot,$t(i/Math.sqrt(o))*Ot]};var Hn={sphere:j,point:Vn,lineStart:Wn,lineEnd:Xn,polygonStart:function(){Hn.lineStart=Zn},polygonEnd:function(){Hn.lineStart=Wn}};function Vn(t,e){t*=It;var n=Math.cos(e*=It);qn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function qn(t,e,n){Tn+=(t-Tn)/++wn,Cn+=(e-Cn)/wn,Ln+=(n-Ln)/wn}function Wn(){var t,e,n;function i(i,o){i*=It;var r=Math.cos(o*=It),a=r*Math.cos(i),s=r*Math.sin(i),l=Math.sin(o),u=Math.atan2(Math.sqrt((u=e*l-n*s)*u+(u=n*a-t*l)*u+(u=t*s-e*a)*u),t*a+e*s+n*l);Sn+=u,An+=u*(t+(t=a)),Dn+=u*(e+(e=s)),kn+=u*(n+(n=l)),qn(t,e,n)}Hn.point=function(o,r){o*=It;var a=Math.cos(r*=It);t=a*Math.cos(o),e=a*Math.sin(o),n=Math.sin(r),Hn.point=i,qn(t,e,n)}}function Xn(){Hn.point=Vn}function Zn(){var t,e,n,i,o;function r(t,e){t*=It;var r=Math.cos(e*=It),a=r*Math.cos(t),s=r*Math.sin(t),l=Math.sin(e),u=i*l-o*s,c=o*a-n*l,d=n*s-i*a,h=Math.sqrt(u*u+c*c+d*d),f=n*a+i*s+o*l,p=h&&-Ft(f)/h,g=Math.atan2(h,f);Pn+=p*u,En+=p*c,Mn+=p*d,Sn+=g,An+=g*(n+(n=a)),Dn+=g*(i+(i=s)),kn+=g*(o+(o=l)),qn(n,i,o)}Hn.point=function(a,s){t=a,e=s,Hn.point=r,a*=It;var l=Math.cos(s*=It);n=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(s),qn(n,i,o)},Hn.lineEnd=function(){r(t,e),Hn.lineEnd=Xn,Hn.point=Vn}}function Yn(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function Kn(){return!0}function Jn(t,e,n,i,o){var r=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(Gn(n,i)){o.lineStart();for(var s=0;s<e;++s)o.point((n=t[s])[0],n[1]);o.lineEnd()}else{var l=new ti(n,t,null,!0),u=new ti(n,null,l,!1);l.o=u,r.push(l),a.push(u),u=new ti(i,null,l=new ti(i,t,null,!1),!0),l.o=u,r.push(l),a.push(u)}}}),a.sort(e),Qn(r),Qn(a),r.length){for(var s=0,l=n,u=a.length;s<u;++s)a[s].e=l=!l;for(var c,d,h=r[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;c=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(s=0,u=c.length;s<u;++s)o.point((d=c[s])[0],d[1]);else i(f.x,f.n.x,1,o);f=f.n}else{if(p)for(s=(c=f.p.z).length-1;s>=0;--s)o.point((d=c[s])[0],d[1]);else i(f.x,f.p.x,-1,o);f=f.p}c=(f=f.o).z,p=!p}while(!f.v);o.lineEnd()}}}function Qn(t){if(e=t.length){for(var e,n,i=0,o=t[0];++i<e;)o.n=n=t[i],n.p=o,o=n;o.n=n=t[0],n.p=o}}function ti(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ei(t,e,n,i){return function(o,a){var s,l=e(a),u=o.invert(i[0],i[1]),c={point:d,lineStart:f,lineEnd:p,polygonStart:function(){c.point=b,c.lineStart=x,c.lineEnd=w,s=[],g=[]},polygonEnd:function(){c.point=d,c.lineStart=f,c.lineEnd=p,s=r.merge(s);var t=function(t,e){var n=t[0],i=t[1],o=[Math.sin(n),-Math.cos(n),0],r=0,a=0;In.reset();for(var s=0,l=e.length;s<l;++s){var u=e[s],c=u.length;if(c)for(var d=u[0],h=d[0],f=d[1]/2+kt/4,p=Math.sin(f),g=Math.cos(f),m=1;;){m===c&&(m=0);var v=(t=u[m])[0],_=t[1]/2+kt/4,y=Math.sin(_),b=Math.cos(_),x=v-h,w=x>=0?1:-1,S=w*x,T=S>kt,C=p*y;if(In.add(Math.atan2(C*w*Math.sin(S),g*b+C*Math.cos(S))),r+=T?x+w*Pt:x,T^h>=n^v>=n){var L=$n(Nn(d),Nn(t));Un(L);var A=$n(o,L);Un(A);var D=(T^x>=0?-1:1)*$t(A[2]);(i>D||i===D&&(L[0]||L[1]))&&(a+=T^x>=0?1:-1)}if(!m++)break;h=v,p=y,g=b,d=t}}return(r<-At||r<At&&In<-At)^1&a}(u,g);s.length?(y||(a.polygonStart(),y=!0),Jn(s,oi,t,n,a)):t&&(y||(a.polygonStart(),y=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),y&&(a.polygonEnd(),y=!1),s=g=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function d(e,n){var i=o(e,n);t(e=i[0],n=i[1])&&a.point(e,n)}function h(t,e){var n=o(t,e);l.point(n[0],n[1])}function f(){c.point=h,l.lineStart()}function p(){c.point=d,l.lineEnd()}var g,m,v=ii(),_=e(v),y=!1;function b(t,e){m.push([t,e]);var n=o(t,e);_.point(n[0],n[1])}function x(){_.lineStart(),m=[]}function w(){b(m[0][0],m[0][1]),_.lineEnd();var t,e=_.clean(),n=v.buffer(),i=n.length;if(m.pop(),g.push(m),m=null,i)if(1&e){var o,r=-1;if((i=(t=n[0]).length-1)>0){for(y||(a.polygonStart(),y=!0),a.lineStart();++r<i;)a.point((o=t[r])[0],o[1]);a.lineEnd()}}else i>1&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(ni))}return c}}function ni(t){return t.length>1}function ii(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:j,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function oi(t,e){return((t=t.x)[0]<0?t[1]-Mt-At:Mt-t[1])-((e=e.x)[0]<0?e[1]-Mt-At:Mt-e[1])}var ri=ei(Kn,function(t){var e,n=NaN,i=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(r,a){var s=r>0?kt:-kt,l=w(r-n);w(l-kt)<At?(t.point(n,i=(i+a)/2>0?Mt:-Mt),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(r,i),e=0):o!==s&&l>=kt&&(w(n-o)<At&&(n-=o*At),w(r-s)<At&&(r-=s*At),i=function(t,e,n,i){var o,r,a=Math.sin(t-n);return w(a)>At?Math.atan((Math.sin(e)*(r=Math.cos(i))*Math.sin(n)-Math.sin(i)*(o=Math.cos(e))*Math.sin(t))/(o*r*a)):(e+i)/2}(n,i,r,a),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=r,i=a),o=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var o;if(null==t)o=n*Mt,i.point(-kt,o),i.point(0,o),i.point(kt,o),i.point(kt,0),i.point(kt,-o),i.point(0,-o),i.point(-kt,-o),i.point(-kt,0),i.point(-kt,o);else if(w(t[0]-e[0])>At){var r=t[0]<e[0]?kt:-kt;o=n*r/2,i.point(-r,o),i.point(0,o),i.point(r,o)}else i.point(e[0],e[1])},[-kt,-kt/2]);function ai(t,e,n,i){return function(o){var r,a=o.a,s=o.b,l=a.x,u=a.y,c=0,d=1,h=s.x-l,f=s.y-u;if(r=t-l,h||!(r>0)){if(r/=h,h<0){if(r<c)return;r<d&&(d=r)}else if(h>0){if(r>d)return;r>c&&(c=r)}if(r=n-l,h||!(r<0)){if(r/=h,h<0){if(r>d)return;r>c&&(c=r)}else if(h>0){if(r<c)return;r<d&&(d=r)}if(r=e-u,f||!(r>0)){if(r/=f,f<0){if(r<c)return;r<d&&(d=r)}else if(f>0){if(r>d)return;r>c&&(c=r)}if(r=i-u,f||!(r<0)){if(r/=f,f<0){if(r>d)return;r>c&&(c=r)}else if(f>0){if(r<c)return;r<d&&(d=r)}return c>0&&(o.a={x:l+c*h,y:u+c*f}),d<1&&(o.b={x:l+d*h,y:u+d*f}),o}}}}}}var si=1e9;function li(t,e,n,i){return function(l){var u,c,d,h,f,p,g,m,v,_,y,b=l,x=ii(),w=ai(t,e,n,i),S={point:L,lineStart:function(){S.point=A,c&&c.push(d=[]);_=!0,v=!1,g=m=NaN},lineEnd:function(){u&&(A(h,f),p&&v&&x.rejoin(),u.push(x.buffer()));S.point=L,v&&l.lineEnd()},polygonStart:function(){l=x,u=[],c=[],y=!0},polygonEnd:function(){l=b,u=r.merge(u);var e=function(t){for(var e=0,n=c.length,i=t[1],o=0;o<n;++o)for(var r,a=1,s=c[o],l=s.length,u=s[0];a<l;++a)r=s[a],u[1]<=i?r[1]>i&&Nt(u,r,t)>0&&++e:r[1]<=i&&Nt(u,r,t)<0&&--e,u=r;return 0!==e}([t,i]),n=y&&e,o=u.length;(n||o)&&(l.polygonStart(),n&&(l.lineStart(),T(null,null,1,l),l.lineEnd()),o&&Jn(u,a,e,T,l),l.polygonEnd()),u=c=d=null}};function T(r,a,l,u){var c=0,d=0;if(null==r||(c=o(r,l))!==(d=o(a,l))||s(r,a)<0^l>0)do{u.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+l+4)%4)!==d);else u.point(a[0],a[1])}function C(o,r){return t<=o&&o<=n&&e<=r&&r<=i}function L(t,e){C(t,e)&&l.point(t,e)}function A(t,e){var n=C(t=Math.max(-si,Math.min(si,t)),e=Math.max(-si,Math.min(si,e)));if(c&&d.push([t,e]),_)h=t,f=e,p=n,_=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&v)l.point(t,e);else{var i={a:{x:g,y:m},b:{x:t,y:e}};w(i)?(v||(l.lineStart(),l.point(i.a.x,i.a.y)),l.point(i.b.x,i.b.y),n||l.lineEnd(),y=!1):n&&(l.lineStart(),l.point(t,e),y=!1)}g=t,m=e,v=n}return S};function o(i,o){return w(i[0]-t)<At?o>0?0:3:w(i[0]-n)<At?o>0?2:1:w(i[1]-e)<At?o>0?1:0:o>0?3:2}function a(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),i=o(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function ui(t){var e=0,n=kt/3,i=Ei(t),o=i(e,n);return o.parallels=function(t){return arguments.length?i(e=t[0]*kt/180,n=t[1]*kt/180):[e/kt*180,n/kt*180]},o}function ci(t,e){var n=Math.sin(t),i=(n+Math.sin(e))/2,o=1+n*(2*i-n),r=Math.sqrt(o)/i;function a(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),r-n*Math.cos(t)]}return a.invert=function(t,e){var n=r-e;return[Math.atan2(t,n)/i,$t((o-(t*t+n*n)*i*i)/(2*i))]},a}r.geo.clipExtent=function(){var t,e,n,i,o,r,a={stream:function(t){return o&&(o.valid=!1),(o=r(t)).valid=!0,o},extent:function(s){return arguments.length?(r=li(t=+s[0][0],e=+s[0][1],n=+s[1][0],i=+s[1][1]),o&&(o.valid=!1,o=null),a):[[t,e],[n,i]]}};return a.extent([[0,0],[960,500]])},(r.geo.conicEqualArea=function(){return ui(ci)}).raw=ci,r.geo.albers=function(){return r.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},r.geo.albersUsa=function(){var t,e,n,i,o=r.geo.albers(),a=r.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=r.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};function u(o){var r=o[0],a=o[1];return t=null,e(r,a),t||(n(r,a),t)||i(r,a),t}return u.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?a:r>=.166&&r<.234&&i>=-.214&&i<-.115?s:o).invert(t)},u.stream=function(t){var e=o.stream(t),n=a.stream(t),i=s.stream(t);return{point:function(t,o){e.point(t,o),n.point(t,o),i.point(t,o)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},u.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),s.precision(t),u):o.precision()},u.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),s.scale(t),u.translate(o.translate())):o.scale()},u.translate=function(t){if(!arguments.length)return o.translate();var r=o.scale(),c=+t[0],d=+t[1];return e=o.translate(t).clipExtent([[c-.455*r,d-.238*r],[c+.455*r,d+.238*r]]).stream(l).point,n=a.translate([c-.307*r,d+.201*r]).clipExtent([[c-.425*r+At,d+.12*r+At],[c-.214*r-At,d+.234*r-At]]).stream(l).point,i=s.translate([c-.205*r,d+.212*r]).clipExtent([[c-.214*r+At,d+.166*r+At],[c-.115*r-At,d+.234*r-At]]).stream(l).point,u},u.scale(1070)};var di,hi,fi,pi,gi,mi,vi={point:j,lineStart:j,lineEnd:j,polygonStart:function(){hi=0,vi.lineStart=_i},polygonEnd:function(){vi.lineStart=vi.lineEnd=vi.point=j,di+=w(hi/2)}};function _i(){var t,e,n,i;function o(t,e){hi+=i*t-n*e,n=t,i=e}vi.point=function(r,a){vi.point=o,t=n=r,e=i=a},vi.lineEnd=function(){o(t,e)}}var yi={point:function(t,e){t<fi&&(fi=t);t>gi&&(gi=t);e<pi&&(pi=e);e>mi&&(mi=e)},lineStart:j,lineEnd:j,polygonStart:j,polygonEnd:j};function bi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var xi,wi={point:Si,lineStart:Ti,lineEnd:Ci,polygonStart:function(){wi.lineStart=Li},polygonEnd:function(){wi.point=Si,wi.lineStart=Ti,wi.lineEnd=Ci}};function Si(t,e){Tn+=t,Cn+=e,++Ln}function Ti(){var t,e;function n(n,i){var o=n-t,r=i-e,a=Math.sqrt(o*o+r*r);An+=a*(t+n)/2,Dn+=a*(e+i)/2,kn+=a,Si(t=n,e=i)}wi.point=function(i,o){wi.point=n,Si(t=i,e=o)}}function Ci(){wi.point=Si}function Li(){var t,e,n,i;function o(t,e){var o=t-n,r=e-i,a=Math.sqrt(o*o+r*r);An+=a*(n+t)/2,Dn+=a*(i+e)/2,kn+=a,Pn+=(a=i*t-n*e)*(n+t),En+=a*(i+e),Mn+=3*a,Si(n=t,i=e)}wi.point=function(r,a){wi.point=o,Si(t=n=r,e=i=a)},wi.lineEnd=function(){o(t,e)}}function Ai(t){var e=.5,n=Math.cos(30*It),i=16;function o(e){return(i?function(e){var n,o,a,s,l,u,c,d,h,f,p,g,m={point:v,lineStart:_,lineEnd:b,polygonStart:function(){e.polygonStart(),m.lineStart=x},polygonEnd:function(){e.polygonEnd(),m.lineStart=_}};function v(n,i){n=t(n,i),e.point(n[0],n[1])}function _(){d=NaN,m.point=y,e.lineStart()}function y(n,o){var a=Nn([n,o]),s=t(n,o);r(d,h,c,f,p,g,d=s[0],h=s[1],c=n,f=a[0],p=a[1],g=a[2],i,e),e.point(d,h)}function b(){m.point=v,e.lineEnd()}function x(){_(),m.point=w,m.lineEnd=S}function w(t,e){y(n=t,e),o=d,a=h,s=f,l=p,u=g,m.point=y}function S(){r(d,h,c,f,p,g,o,a,n,s,l,u,i,e),m.lineEnd=b,b()}return m}:function(e){return ki(e,function(n,i){n=t(n,i),e.point(n[0],n[1])})})(e)}function r(i,o,a,s,l,u,c,d,h,f,p,g,m,v){var _=c-i,y=d-o,b=_*_+y*y;if(b>4*e&&m--){var x=s+f,S=l+p,T=u+g,C=Math.sqrt(x*x+S*S+T*T),L=Math.asin(T/=C),A=w(w(T)-1)<At||w(a-h)<At?(a+h)/2:Math.atan2(S,x),D=t(A,L),k=D[0],P=D[1],E=k-i,M=P-o,I=y*E-_*M;(I*I/b>e||w((_*E+y*M)/b-.5)>.3||s*f+l*p+u*g<n)&&(r(i,o,a,s,l,u,k,P,A,x/=C,S/=C,T,m,v),v.point(k,P),r(k,P,A,x,S,T,c,d,h,f,p,g,m,v))}}return o.precision=function(t){return arguments.length?(i=(e=t*t)>0&&16,o):Math.sqrt(e)},o}function Di(t){this.stream=t}function ki(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Pi(t){return Ei(function(){return t})()}function Ei(t){var e,n,i,o,a,s,l=Ai(function(t,n){return[(t=e(t,n))[0]*u+o,a-t[1]*u]}),u=150,c=480,d=250,h=0,f=0,p=0,g=0,m=0,v=ri,_=R,y=null,b=null;function x(t){return[(t=i(t[0]*It,t[1]*It))[0]*u+o,a-t[1]*u]}function S(t){return(t=i.invert((t[0]-o)/u,(a-t[1])/u))&&[t[0]*Ot,t[1]*Ot]}function T(){i=Yn(n=Ri(p,g,m),e);var t=e(h,f);return o=c-t[0]*u,a=d+t[1]*u,C()}function C(){return s&&(s.valid=!1,s=null),x}return x.stream=function(t){return s&&(s.valid=!1),(s=Mi(v(n,l(_(t))))).valid=!0,s},x.clipAngle=function(t){return arguments.length?(v=null==t?(y=t,ri):function(t){var e=Math.cos(t),n=e>0,i=w(e)>At;return ei(o,function(t){var e,s,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(d,h){var f,p=[d,h],g=o(d,h),m=n?g?0:a(d,h):g?a(d+(d<0?kt:-kt),h):0;if(!e&&(u=l=g)&&t.lineStart(),g!==l&&(f=r(e,p),(Gn(e,f)||Gn(p,f))&&(p[0]+=At,p[1]+=At,g=o(p[0],p[1]))),g!==l)c=0,g?(t.lineStart(),f=r(p,e),t.point(f[0],f[1])):(f=r(e,p),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(i&&e&&n^g){var v;m&s||!(v=r(p,e,!0))||(c=0,n?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&Gn(e,p)||t.point(p[0],p[1]),e=p,l=g,s=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}},ji(t,6*It),n?[0,-t]:[-kt,t-kt]);function o(t,n){return Math.cos(t)*Math.cos(n)>e}function r(t,n,i){var o=[1,0,0],r=$n(Nn(t),Nn(n)),a=Fn(r,r),s=r[0],l=a-s*s;if(!l)return!i&&t;var u=e*a/l,c=-e*s/l,d=$n(o,r),h=Bn(o,u);jn(h,Bn(r,c));var f=d,p=Fn(h,f),g=Fn(f,f),m=p*p-g*(Fn(h,h)-1);if(!(m<0)){var v=Math.sqrt(m),_=Bn(f,(-p-v)/g);if(jn(_,h),_=zn(_),!i)return _;var y,b=t[0],x=n[0],S=t[1],T=n[1];x<b&&(y=b,b=x,x=y);var C=x-b,L=w(C-kt)<At;if(!L&&T<S&&(y=S,S=T,T=y),L||C<At?L?S+T>0^_[1]<(w(_[0]-b)<At?S:T):S<=_[1]&&_[1]<=T:C>kt^(b<=_[0]&&_[0]<=x)){var A=Bn(f,(-p+v)/g);return jn(A,h),[_,zn(A)]}}}function a(e,i){var o=n?t:kt-t,r=0;return e<-o?r|=1:e>o&&(r|=2),i<-o?r|=4:i>o&&(r|=8),r}}((y=+t)*It),C()):y},x.clipExtent=function(t){return arguments.length?(b=t,_=t?li(t[0][0],t[0][1],t[1][0],t[1][1]):R,C()):b},x.scale=function(t){return arguments.length?(u=+t,T()):u},x.translate=function(t){return arguments.length?(c=+t[0],d=+t[1],T()):[c,d]},x.center=function(t){return arguments.length?(h=t[0]%360*It,f=t[1]%360*It,T()):[h*Ot,f*Ot]},x.rotate=function(t){return arguments.length?(p=t[0]%360*It,g=t[1]%360*It,m=t.length>2?t[2]%360*It:0,T()):[p*Ot,g*Ot,m*Ot]},r.rebind(x,l,"precision"),function(){return e=t.apply(this,arguments),x.invert=e.invert&&S,T()}}function Mi(t){return ki(t,function(e,n){t.point(e*It,n*It)})}function Ii(t,e){return[t,e]}function Oi(t,e){return[t>kt?t-Pt:t<-kt?t+Pt:t,e]}function Ri(t,e,n){return t?e||n?Yn(Fi(t),$i(e,n)):Fi(t):e||n?$i(e,n):Oi}function Ni(t){return function(e,n){return[(e+=t)>kt?e-Pt:e<-kt?e+Pt:e,n]}}function Fi(t){var e=Ni(t);return e.invert=Ni(-t),e}function $i(t,e){var n=Math.cos(t),i=Math.sin(t),o=Math.cos(e),r=Math.sin(e);function a(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,u=Math.sin(e),c=u*n+s*i;return[Math.atan2(l*o-c*r,s*n-u*i),$t(c*o+l*r)]}return a.invert=function(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,u=Math.sin(e),c=u*o-l*r;return[Math.atan2(l*o+u*r,s*n+c*i),$t(c*n-s*i)]},a}function ji(t,e){var n=Math.cos(t),i=Math.sin(t);return function(o,r,a,s){var l=a*e;null!=o?(o=Bi(n,o),r=Bi(n,r),(a>0?o<r:o>r)&&(o+=a*Pt)):(o=t+a*Pt,r=t-.5*l);for(var u,c=o;a>0?c>r:c<r;c-=l)s.point((u=zn([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],u[1])}}function Bi(t,e){var n=Nn(e);n[0]-=t,Un(n);var i=Ft(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-At)%(2*Math.PI)}function Ui(t,e,n){var i=r.range(t,e-At,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function zi(t,e,n){var i=r.range(t,e-At,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function Gi(t){return t.source}function Hi(t){return t.target}r.geo.path=function(){var t,e,n,i,o,a=4.5;function s(t){return t&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=n(i)),r.geo.stream(t,o)),i.result()}function l(){return o=null,s}return s.area=function(t){return di=0,r.geo.stream(t,n(vi)),di},s.centroid=function(t){return Tn=Cn=Ln=An=Dn=kn=Pn=En=Mn=0,r.geo.stream(t,n(wi)),Mn?[Pn/Mn,En/Mn]:kn?[An/kn,Dn/kn]:Ln?[Tn/Ln,Cn/Ln]:[NaN,NaN]},s.bounds=function(t){return gi=mi=-(fi=pi=1/0),r.geo.stream(t,n(yi)),[[fi,pi],[gi,mi]]},s.projection=function(e){return arguments.length?(n=(t=e)?e.stream||(i=e,o=Ai(function(t,e){return i([t*Ot,e*Ot])}),function(t){return Mi(o(t))}):R,l()):t;var i,o},s.context=function(t){return arguments.length?(i=null==(e=t)?new function(){var t=bi(4.5),e=[],n={point:i,lineStart:function(){n.point=o},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=i},pointRadius:function(e){return t=bi(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function i(n,i){e.push("M",n,",",i,t)}function o(t,i){e.push("M",t,",",i),n.point=r}function r(t,n){e.push("L",t,",",n)}function a(){n.point=i}function s(){e.push("Z")}return n}:new function(t){var e=4.5,n={point:i,lineStart:function(){n.point=o},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=i},pointRadius:function(t){return e=t,n},result:j};function i(n,i){t.moveTo(n+e,i),t.arc(n,i,e,0,Pt)}function o(e,i){t.moveTo(e,i),n.point=r}function r(e,n){t.lineTo(e,n)}function a(){n.point=i}function s(){t.closePath()}return n}(t),"function"!=typeof a&&i.pointRadius(a),l()):e},s.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),s):a},s.projection(r.geo.albersUsa()).context(null)},r.geo.transform=function(t){return{stream:function(e){var n=new Di(e);for(var i in t)n[i]=t[i];return n}}},Di.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},r.geo.projection=Pi,r.geo.projectionMutator=Ei,(r.geo.equirectangular=function(){return Pi(Ii)}).raw=Ii.invert=Ii,r.geo.rotation=function(t){function e(e){return(e=t(e[0]*It,e[1]*It))[0]*=Ot,e[1]*=Ot,e}return t=Ri(t[0]%360*It,t[1]*It,t.length>2?t[2]*It:0),e.invert=function(e){return(e=t.invert(e[0]*It,e[1]*It))[0]*=Ot,e[1]*=Ot,e},e},Oi.invert=Ii,r.geo.circle=function(){var t,e,n=[0,0],i=6;function o(){var t="function"==typeof n?n.apply(this,arguments):n,i=Ri(-t[0]*It,-t[1]*It,0).invert,o=[];return e(null,null,1,{point:function(t,e){o.push(t=i(t,e)),t[0]*=Ot,t[1]*=Ot}}),{type:"Polygon",coordinates:[o]}}return o.origin=function(t){return arguments.length?(n=t,o):n},o.angle=function(n){return arguments.length?(e=ji((t=+n)*It,i*It),o):t},o.precision=function(n){return arguments.length?(e=ji(t*It,(i=+n)*It),o):i},o.angle(90)},r.geo.distance=function(t,e){var n,i=(e[0]-t[0])*It,o=t[1]*It,r=e[1]*It,a=Math.sin(i),s=Math.cos(i),l=Math.sin(o),u=Math.cos(o),c=Math.sin(r),d=Math.cos(r);return Math.atan2(Math.sqrt((n=d*a)*n+(n=u*c-l*d*s)*n),l*c+u*d*s)},r.geo.graticule=function(){var t,e,n,i,o,a,s,l,u,c,d,h,f=10,p=f,g=90,m=360,v=2.5;function _(){return{type:"MultiLineString",coordinates:y()}}function y(){return r.range(Math.ceil(i/g)*g,n,g).map(d).concat(r.range(Math.ceil(l/m)*m,s,m).map(h)).concat(r.range(Math.ceil(e/f)*f,t,f).filter(function(t){return w(t%g)>At}).map(u)).concat(r.range(Math.ceil(a/p)*p,o,p).filter(function(t){return w(t%m)>At}).map(c))}return _.lines=function(){return y().map(function(t){return{type:"LineString",coordinates:t}})},_.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(h(s).slice(1),d(n).reverse().slice(1),h(l).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.majorExtent(t).minorExtent(t):_.minorExtent()},_.majorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],l=+t[0][1],s=+t[1][1],i>n&&(t=i,i=n,n=t),l>s&&(t=l,l=s,s=t),_.precision(v)):[[i,l],[n,s]]},_.minorExtent=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],o=+n[1][1],e>t&&(n=e,e=t,t=n),a>o&&(n=a,a=o,o=n),_.precision(v)):[[e,a],[t,o]]},_.step=function(t){return arguments.length?_.majorStep(t).minorStep(t):_.minorStep()},_.majorStep=function(t){return arguments.length?(g=+t[0],m=+t[1],_):[g,m]},_.minorStep=function(t){return arguments.length?(f=+t[0],p=+t[1],_):[f,p]},_.precision=function(r){return arguments.length?(v=+r,u=Ui(a,o,90),c=zi(e,t,v),d=Ui(l,s,90),h=zi(i,n,v),_):v},_.majorExtent([[-180,-90+At],[180,90-At]]).minorExtent([[-180,-80-At],[180,80+At]])},r.geo.greatArc=function(){var t,e,n=Gi,i=Hi;function o(){return{type:"LineString",coordinates:[t||n.apply(this,arguments),e||i.apply(this,arguments)]}}return o.distance=function(){return r.geo.distance(t||n.apply(this,arguments),e||i.apply(this,arguments))},o.source=function(e){return arguments.length?(n=e,t="function"==typeof e?null:e,o):n},o.target=function(t){return arguments.length?(i=t,e="function"==typeof t?null:t,o):i},o.precision=function(){return arguments.length?o:0},o},r.geo.interpolate=function(t,e){return n=t[0]*It,i=t[1]*It,o=e[0]*It,r=e[1]*It,a=Math.cos(i),s=Math.sin(i),l=Math.cos(r),u=Math.sin(r),c=a*Math.cos(n),d=a*Math.sin(n),h=l*Math.cos(o),f=l*Math.sin(o),p=2*Math.asin(Math.sqrt(Bt(r-i)+a*l*Bt(o-n))),g=1/Math.sin(p),(m=p?function(t){var e=Math.sin(t*=p)*g,n=Math.sin(p-t)*g,i=n*c+e*h,o=n*d+e*f,r=n*s+e*u;return[Math.atan2(o,i)*Ot,Math.atan2(r,Math.sqrt(i*i+o*o))*Ot]}:function(){return[n*Ot,i*Ot]}).distance=p,m;var n,i,o,r,a,s,l,u,c,d,h,f,p,g,m},r.geo.length=function(t){return xi=0,r.geo.stream(t,Vi),xi};var Vi={sphere:j,point:j,lineStart:function(){var t,e,n;function i(i,o){var r=Math.sin(o*=It),a=Math.cos(o),s=w((i*=It)-t),l=Math.cos(s);xi+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=n*r-e*a*l)*s),e*r+n*a*l),t=i,e=r,n=a}Vi.point=function(o,r){t=o*It,e=Math.sin(r*=It),n=Math.cos(r),Vi.point=i},Vi.lineEnd=function(){Vi.point=Vi.lineEnd=j}},lineEnd:j,polygonStart:j,polygonEnd:j};function qi(t,e){function n(e,n){var i=Math.cos(e),o=Math.cos(n),r=t(i*o);return[r*o*Math.sin(e),r*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),o=e(i),r=Math.sin(o),a=Math.cos(o);return[Math.atan2(t*r,i*a),Math.asin(i&&n*r/i)]},n}var Wi=qi(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(r.geo.azimuthalEqualArea=function(){return Pi(Wi)}).raw=Wi;var Xi=qi(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},R);function Zi(t,e){var n=Math.cos(t),i=function(t){return Math.tan(kt/4+t/2)},o=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(i(e)/i(t)),r=n*Math.pow(i(t),o)/o;if(!o)return Ji;function a(t,e){r>0?e<-Mt+At&&(e=-Mt+At):e>Mt-At&&(e=Mt-At);var n=r/Math.pow(i(e),o);return[n*Math.sin(o*t),r-n*Math.cos(o*t)]}return a.invert=function(t,e){var n=r-e,i=Rt(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(r/i,1/o))-Mt]},a}function Yi(t,e){var n=Math.cos(t),i=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),o=n/i+t;if(w(i)<At)return Ii;function r(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}return r.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-Rt(i)*Math.sqrt(t*t+n*n)]},r}(r.geo.azimuthalEquidistant=function(){return Pi(Xi)}).raw=Xi,(r.geo.conicConformal=function(){return ui(Zi)}).raw=Zi,(r.geo.conicEquidistant=function(){return ui(Yi)}).raw=Yi;var Ki=qi(function(t){return 1/t},Math.atan);function Ji(t,e){return[t,Math.log(Math.tan(kt/4+e/2))]}function Qi(t){var e,n=Pi(t),i=n.scale,o=n.translate,r=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=o.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=r.apply(n,arguments);if(a===n){if(e=null==t){var s=kt*i(),l=o();r([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}(r.geo.gnomonic=function(){return Pi(Ki)}).raw=Ki,Ji.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Mt]},(r.geo.mercator=function(){return Qi(Ji)}).raw=Ji;var to=qi(function(){return 1},Math.asin);(r.geo.orthographic=function(){return Pi(to)}).raw=to;var eo=qi(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function no(t,e){return[Math.log(Math.tan(kt/4+e/2)),-t]}function io(t){return t[0]}function oo(t){return t[1]}function ro(t){for(var e=t.length,n=[0,1],i=2,o=2;o<e;o++){for(;i>1&&Nt(t[n[i-2]],t[n[i-1]],t[o])<=0;)--i;n[i++]=o}return n.slice(0,i)}function ao(t,e){return t[0]-e[0]||t[1]-e[1]}(r.geo.stereographic=function(){return Pi(eo)}).raw=eo,no.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Mt]},(r.geo.transverseMercator=function(){var t=Qi(no),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=no,r.geom={},r.geom.hull=function(t){var e=io,n=oo;if(arguments.length)return i(t);function i(t){if(t.length<3)return[];var i,o=be(e),r=be(n),a=t.length,s=[],l=[];for(i=0;i<a;i++)s.push([+o.call(this,t[i],i),+r.call(this,t[i],i),i]);for(s.sort(ao),i=0;i<a;i++)l.push([s[i][0],-s[i][1]]);var u=ro(s),c=ro(l),d=c[0]===u[0],h=c[c.length-1]===u[u.length-1],f=[];for(i=u.length-1;i>=0;--i)f.push(t[s[u[i]][2]]);for(i=+d;i<c.length-h;++i)f.push(t[s[c[i]][2]]);return f}return i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(t){return arguments.length?(n=t,i):n},i},r.geom.polygon=function(t){return q(t,so),t};var so=r.geom.polygon.prototype=[];function lo(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function uo(t,e,n,i){var o=t[0],r=n[0],a=e[0]-o,s=i[0]-r,l=t[1],u=n[1],c=e[1]-l,d=i[1]-u,h=(s*(l-u)-d*(o-r))/(d*a-s*c);return[o+h*a,l+h*c]}function co(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}so.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],o=0;++e<n;)t=i,i=this[e],o+=t[1]*i[0]-t[0]*i[1];return.5*o},so.centroid=function(t){var e,n,i=-1,o=this.length,r=0,a=0,s=this[o-1];for(arguments.length||(t=-1/(6*this.area()));++i<o;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],r+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[r*t,a*t]},so.clip=function(t){for(var e,n,i,o,r,a,s=co(t),l=-1,u=this.length-co(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,o=this[l],r=e[(i=e.length-s)-1],n=-1;++n<i;)lo(a=e[n],c,o)?(lo(r,c,o)||t.push(uo(r,a,c,o)),t.push(a)):lo(r,c,o)&&t.push(uo(r,a,c,o)),r=a;s&&t.push(t[0]),c=o}return t};var ho,fo,po,go,mo,vo=[],_o=[];function yo(t){var e=vo.pop()||new function(){Ro(this),this.edge=this.site=this.circle=null};return e.site=t,e}function bo(t){Do(t),po.remove(t),vo.push(t),Ro(t)}function xo(t){var e=t.circle,n=e.x,i=e.cy,o={x:n,y:i},r=t.P,a=t.N,s=[t];bo(t);for(var l=r;l.circle&&w(n-l.circle.x)<At&&w(i-l.circle.cy)<At;)r=l.P,s.unshift(l),bo(l),l=r;s.unshift(l),Do(l);for(var u=a;u.circle&&w(n-u.circle.x)<At&&w(i-u.circle.cy)<At;)a=u.N,s.push(u),bo(u),u=a;s.push(u),Do(u);var c,d=s.length;for(c=1;c<d;++c)u=s[c],l=s[c-1],Mo(u.edge,l.site,u.site,o);l=s[0],(u=s[d-1]).edge=Eo(l.site,u.site,null,o),Ao(l),Ao(u)}function wo(t){for(var e,n,i,o,r=t.x,a=t.y,s=po._;s;)if((i=So(s,a)-r)>At)s=s.L;else{if(!((o=r-To(s,a))>At)){i>-At?(e=s.P,n=s):o>-At?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=yo(t);if(po.insert(e,l),e||n){if(e===n)return Do(e),n=yo(e.site),po.insert(l,n),l.edge=n.edge=Eo(e.site,l.site),Ao(e),void Ao(n);if(n){Do(e),Do(n);var u=e.site,c=u.x,d=u.y,h=t.x-c,f=t.y-d,p=n.site,g=p.x-c,m=p.y-d,v=2*(h*m-f*g),_=h*h+f*f,y=g*g+m*m,b={x:(m*_-f*y)/v+c,y:(h*y-g*_)/v+d};Mo(n.edge,u,p,b),l.edge=Eo(u,t,null,b),n.edge=Eo(t,p,null,b),Ao(e),Ao(n)}else l.edge=Eo(e.site,l.site)}}function So(t,e){var n=t.site,i=n.x,o=n.y,r=o-e;if(!r)return i;var a=t.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,u=l-e;if(!u)return s;var c=s-i,d=1/r-1/u,h=c/u;return d?(-h+Math.sqrt(h*h-2*d*(c*c/(-2*u)-l+u/2+o-r/2)))/d+i:(i+s)/2}function To(t,e){var n=t.N;if(n)return So(n,e);var i=t.site;return i.y===e?i.x:1/0}function Co(t){this.site=t,this.edges=[]}function Lo(t,e){return e.angle-t.angle}function Ao(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,o=t.site,r=n.site;if(i!==r){var a=o.x,s=o.y,l=i.x-a,u=i.y-s,c=r.x-a,d=2*(l*(m=r.y-s)-u*c);if(!(d>=-Dt)){var h=l*l+u*u,f=c*c+m*m,p=(m*h-u*f)/d,g=(l*f-c*h)/d,m=g+s,v=_o.pop()||new function(){Ro(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=o,v.x=p+a,v.y=m+Math.sqrt(p*p+g*g),v.cy=m,t.circle=v;for(var _=null,y=mo._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){_=y.P;break}y=y.L}else{if(!y.R){_=y;break}y=y.R}mo.insert(_,v),_||(go=v)}}}}function Do(t){var e=t.circle;e&&(e.P||(go=e.N),mo.remove(e),_o.push(e),Ro(e),t.circle=null)}function ko(t,e){var n=t.b;if(n)return!0;var i,o,r=t.a,a=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,d=t.r,h=c.x,f=c.y,p=d.x,g=d.y,m=(h+p)/2,v=(f+g)/2;if(g===f){if(m<a||m>=s)return;if(h>p){if(r){if(r.y>=u)return}else r={x:m,y:l};n={x:m,y:u}}else{if(r){if(r.y<l)return}else r={x:m,y:u};n={x:m,y:l}}}else if(o=v-(i=(h-p)/(g-f))*m,i<-1||i>1)if(h>p){if(r){if(r.y>=u)return}else r={x:(l-o)/i,y:l};n={x:(u-o)/i,y:u}}else{if(r){if(r.y<l)return}else r={x:(u-o)/i,y:u};n={x:(l-o)/i,y:l}}else if(f<g){if(r){if(r.x>=s)return}else r={x:a,y:i*a+o};n={x:s,y:i*s+o}}else{if(r){if(r.x<a)return}else r={x:s,y:i*s+o};n={x:a,y:i*a+o}}return t.a=r,t.b=n,!0}function Po(t,e){this.l=t,this.r=e,this.a=this.b=null}function Eo(t,e,n,i){var o=new Po(t,e);return ho.push(o),n&&Mo(o,t,e,n),i&&Mo(o,e,t,i),fo[t.i].edges.push(new Io(o,t,e)),fo[e.i].edges.push(new Io(o,e,t)),o}function Mo(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function Io(t,e,n){var i=t.a,o=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(o.x-i.x,i.y-o.y):Math.atan2(i.x-o.x,o.y-i.y)}function Oo(){this._=null}function Ro(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function No(t,e){var n=e,i=e.R,o=n.U;o?o.L===n?o.L=i:o.R=i:t._=i,i.U=o,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Fo(t,e){var n=e,i=e.L,o=n.U;o?o.L===n?o.L=i:o.R=i:t._=i,i.U=o,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function $o(t){for(;t.L;)t=t.L;return t}function jo(t,e){var n,i,o,r=t.sort(Bo).pop();for(ho=[],fo=new Array(t.length),po=new Oo,mo=new Oo;;)if(o=go,r&&(!o||r.y<o.y||r.y===o.y&&r.x<o.x))r.x===n&&r.y===i||(fo[r.i]=new Co(r),wo(r),n=r.x,i=r.y),r=t.pop();else{if(!o)break;xo(o.arc)}e&&(function(t){for(var e,n=ho,i=ai(t[0][0],t[0][1],t[1][0],t[1][1]),o=n.length;o--;)(!ko(e=n[o],t)||!i(e)||w(e.a.x-e.b.x)<At&&w(e.a.y-e.b.y)<At)&&(e.a=e.b=null,n.splice(o,1))}(e),function(t){for(var e,n,i,o,r,a,s,l,u,c,d=t[0][0],h=t[1][0],f=t[0][1],p=t[1][1],g=fo,m=g.length;m--;)if((r=g[m])&&r.prepare())for(l=(s=r.edges).length,a=0;a<l;)i=(c=s[a].end()).x,o=c.y,e=(u=s[++a%l].start()).x,n=u.y,(w(i-e)>At||w(o-n)>At)&&(s.splice(a,0,new Io((v=r.site,_=c,y=w(i-d)<At&&p-o>At?{x:d,y:w(e-d)<At?n:p}:w(o-p)<At&&h-i>At?{x:w(n-p)<At?e:h,y:p}:w(i-h)<At&&o-f>At?{x:h,y:w(e-h)<At?n:f}:w(o-f)<At&&i-d>At?{x:w(n-f)<At?e:d,y:f}:null,b=void 0,b=new Po(v,null),b.a=_,b.b=y,ho.push(b),b),r.site,null)),++l);var v,_,y,b}(e));var a={cells:fo,edges:ho};return po=mo=ho=fo=null,a}function Bo(t,e){return e.y-t.y||e.x-t.x}Co.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Lo),e.length},Io.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Oo.prototype={insert:function(t,e){var n,i,o;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=$o(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(o=i.R)&&o.C?(n.C=o.C=!1,i.C=!0,t=i):(t===n.R&&(No(this,n),n=(t=n).U),n.C=!1,i.C=!0,Fo(this,i)):(o=i.L)&&o.C?(n.C=o.C=!1,i.C=!0,t=i):(t===n.L&&(Fo(this,n),n=(t=n).U),n.C=!1,i.C=!0,No(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,o=t.U,r=t.L,a=t.R;if(n=r?a?$o(a):r:a,o?o.L===t?o.L=n:o.R=n:this._=n,r&&a?(i=n.C,n.C=t.C,n.L=r,r.U=n,n!==a?(o=n.U,n.U=t.U,t=n.R,o.L=t,n.R=a,a.U=n):(n.U=o,o=n,t=n.R)):(i=t.C,t=n),t&&(t.U=o),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===o.L){if((e=o.R).C&&(e.C=!1,o.C=!0,No(this,o),e=o.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Fo(this,e),e=o.R),e.C=o.C,o.C=e.R.C=!1,No(this,o),t=this._;break}}else if((e=o.L).C&&(e.C=!1,o.C=!0,Fo(this,o),e=o.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,No(this,e),e=o.L),e.C=o.C,o.C=e.L.C=!1,Fo(this,o),t=this._;break}e.C=!0,t=o,o=o.U}while(!t.C);t&&(t.C=!1)}}},r.geom.voronoi=function(t){var e=io,n=oo,i=e,o=n,r=Uo;if(t)return a(t);function a(t){var e=new Array(t.length),n=r[0][0],i=r[0][1],o=r[1][0],a=r[1][1];return jo(s(t),r).cells.forEach(function(r,s){var l=r.edges,u=r.site;(e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=n&&u.x<=o&&u.y>=i&&u.y<=a?[[n,a],[o,a],[o,i],[n,i]]:[]).point=t[s]}),e}function s(t){return t.map(function(t,e){return{x:Math.round(i(t,e)/At)*At,y:Math.round(o(t,e)/At)*At,i:e}})}return a.links=function(t){return jo(s(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},a.triangles=function(t){var e=[];return jo(s(t)).cells.forEach(function(n,i){for(var o,r,a,s,l=n.site,u=n.edges.sort(Lo),c=-1,d=u.length,h=u[d-1].edge,f=h.l===l?h.r:h.l;++c<d;)h,o=f,f=(h=u[c].edge).l===l?h.r:h.l,i<o.i&&i<f.i&&(a=o,s=f,((r=l).x-s.x)*(a.y-r.y)-(r.x-a.x)*(s.y-r.y)<0)&&e.push([t[i],t[o.i],t[f.i]])}),e},a.x=function(t){return arguments.length?(i=be(e=t),a):e},a.y=function(t){return arguments.length?(o=be(n=t),a):n},a.clipExtent=function(t){return arguments.length?(r=null==t?Uo:t,a):r===Uo?null:r},a.size=function(t){return arguments.length?a.clipExtent(t&&[[0,0],t]):r===Uo?null:r&&r[1]},a};var Uo=[[-1e6,-1e6],[1e6,1e6]];function zo(t){return t.x}function Go(t){return t.y}function Ho(t,e){t=r.rgb(t),e=r.rgb(e);var n=t.r,i=t.g,o=t.b,a=e.r-n,s=e.g-i,l=e.b-o;return function(t){return"#"+fe(Math.round(n+a*t))+fe(Math.round(i+s*t))+fe(Math.round(o+l*t))}}function Vo(t,e){var n,i={},o={};for(n in t)n in e?i[n]=Yo(t[n],e[n]):o[n]=t[n];for(n in e)n in t||(o[n]=e[n]);return function(t){for(n in i)o[n]=i[n](t);return o}}function qo(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Wo(t,e){var n,i,o,r=Xo.lastIndex=Zo.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=Xo.exec(t))&&(i=Zo.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:qo(n,i)})),r=Zo.lastIndex;return r<e.length&&(o=e.slice(r),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}r.geom.delaunay=function(t){return r.geom.voronoi().triangles(t)},r.geom.quadtree=function(t,e,n,i,o){var r,a=io,s=oo;if(r=arguments.length)return a=zo,s=Go,3===r&&(o=n,i=e,n=e=0),l(t);function l(t){var l,u,c,d,h,f,p,g,m,v=be(a),_=be(s);if(null!=e)f=e,p=n,g=i,m=o;else if(g=m=-(f=p=1/0),u=[],c=[],h=t.length,r)for(d=0;d<h;++d)(l=t[d]).x<f&&(f=l.x),l.y<p&&(p=l.y),l.x>g&&(g=l.x),l.y>m&&(m=l.y),u.push(l.x),c.push(l.y);else for(d=0;d<h;++d){var y=+v(l=t[d],d),b=+_(l,d);y<f&&(f=y),b<p&&(p=b),y>g&&(g=y),b>m&&(m=b),u.push(y),c.push(b)}var x=g-f,S=m-p;function T(t,e,n,i,o,r,a,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(w(l-n)+w(u-i)<.01)C(t,e,n,i,o,r,a,s);else{var c=t.point;t.x=t.y=t.point=null,C(t,c,l,u,o,r,a,s),C(t,e,n,i,o,r,a,s)}else t.x=n,t.y=i,t.point=e}else C(t,e,n,i,o,r,a,s)}function C(t,e,n,i,o,r,a,s){var l=.5*(o+a),u=.5*(r+s),c=n>=l,d=i>=u,h=d<<1|c;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){T(L,t,+v(t,++d),+_(t,d),f,p,g,m)}}),c?o=l:a=l,d?r=u:s=u,T(t,e,n,i,o,r,a,s)}x>S?m=p+x:g=f+S;var L={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){T(L,t,+v(t,++d),+_(t,d),f,p,g,m)}};if(L.visit=function(t){!function t(e,n,i,o,r,a){if(!e(n,i,o,r,a)){var s=.5*(i+r),l=.5*(o+a),u=n.nodes;u[0]&&t(e,u[0],i,o,s,l),u[1]&&t(e,u[1],s,o,r,l),u[2]&&t(e,u[2],i,l,s,a),u[3]&&t(e,u[3],s,l,r,a)}}(t,L,f,p,g,m)},L.find=function(t){return function(t,e,n,i,o,r,a){var s,l=1/0;return function t(u,c,d,h,f){if(!(c>r||d>a||h<i||f<o)){if(p=u.point){var p,g=e-u.x,m=n-u.y,v=g*g+m*m;if(v<l){var _=Math.sqrt(l=v);i=e-_,o=n-_,r=e+_,a=n+_,s=p}}for(var y=u.nodes,b=.5*(c+h),x=.5*(d+f),w=(n>=x)<<1|e>=b,S=w+4;w<S;++w)if(u=y[3&w])switch(3&w){case 0:t(u,c,d,b,x);break;case 1:t(u,b,d,h,x);break;case 2:t(u,c,x,b,f);break;case 3:t(u,b,x,h,f)}}}(t,i,o,r,a),s}(L,t[0],t[1],f,p,g,m)},d=-1,null==e){for(;++d<h;)T(L,t[d],u[d],c[d],f,p,g,m);--d}else t.forEach(L.add);return u=c=t=l=null,L}return l.x=function(t){return arguments.length?(a=t,l):a},l.y=function(t){return arguments.length?(s=t,l):s},l.extent=function(t){return arguments.length?(null==t?e=n=i=o=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],o=+t[1][1]),l):null==e?null:[[e,n],[i,o]]},l.size=function(t){return arguments.length?(null==t?e=n=i=o=null:(e=n=0,i=+t[0],o=+t[1]),l):null==e?null:[i-e,o-n]},l},r.interpolateRgb=Ho,r.interpolateObject=Vo,r.interpolateNumber=qo,r.interpolateString=Wo;var Xo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zo=new RegExp(Xo.source,"g");function Yo(t,e){for(var n,i=r.interpolators.length;--i>=0&&!(n=r.interpolators[i](t,e)););return n}function Ko(t,e){var n,i=[],o=[],r=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)i.push(Yo(t[n],e[n]));for(;n<r;++n)o[n]=t[n];for(;n<a;++n)o[n]=e[n];return function(t){for(n=0;n<s;++n)o[n]=i[n](t);return o}}r.interpolate=Yo,r.interpolators=[function(t,e){var n=typeof e;return("string"===n?ye.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Ho:Wo:e instanceof Vt?Ho:Array.isArray(e)?Ko:"object"===n&&isNaN(e)?Vo:qo)(t,e)}],r.interpolateArray=Ko;var Jo=function(){return R},Qo=r.map({linear:Jo,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return ir},cubic:function(){return or},sin:function(){return ar},exp:function(){return sr},circle:function(){return lr},elastic:function(t,e){var n;arguments.length<2&&(e=.45);arguments.length?n=e/Pt*Math.asin(1/t):(t=1,n=e/4);return function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*Pt/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return ur}}),tr=r.map({in:R,out:er,"in-out":nr,"out-in":function(t){return nr(er(t))}});function er(t){return function(e){return 1-t(1-e)}}function nr(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function ir(t){return t*t}function or(t){return t*t*t}function rr(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function ar(t){return 1-Math.cos(t*Mt)}function sr(t){return Math.pow(2,10*(t-1))}function lr(t){return 1-Math.sqrt(1-t*t)}function ur(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function cr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function dr(t){var e,n,i,o=[t.a,t.b],r=[t.c,t.d],a=fr(o),s=hr(o,r),l=fr(((e=r)[0]+=(i=-s)*(n=o)[0],e[1]+=i*n[1],e))||0;o[0]*r[1]<r[0]*o[1]&&(o[0]*=-1,o[1]*=-1,a*=-1,s*=-1),this.rotate=(a?Math.atan2(o[1],o[0]):Math.atan2(-r[0],r[1]))*Ot,this.translate=[t.e,t.f],this.scale=[a,l],this.skew=l?Math.atan2(s,l)*Ot:0}function hr(t,e){return t[0]*e[0]+t[1]*e[1]}function fr(t){var e=Math.sqrt(hr(t,t));return e&&(t[0]/=e,t[1]/=e),e}r.ease=function(t){var e,n=t.indexOf("-"),i=n>=0?t.slice(0,n):t,o=n>=0?t.slice(n+1):"in";return i=Qo.get(i)||Jo,o=tr.get(o)||R,e=o(i.apply(null,a.call(arguments,1))),function(t){return t<=0?0:t>=1?1:e(t)}},r.interpolateHcl=function(t,e){t=r.hcl(t),e=r.hcl(e);var n=t.h,i=t.c,o=t.l,a=e.h-n,s=e.c-i,l=e.l-o;isNaN(s)&&(s=0,i=isNaN(i)?e.c:i);isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360);return function(t){return Kt(n+a*t,i+s*t,o+l*t)+""}},r.interpolateHsl=function(t,e){t=r.hsl(t),e=r.hsl(e);var n=t.h,i=t.s,o=t.l,a=e.h-n,s=e.s-i,l=e.l-o;isNaN(s)&&(s=0,i=isNaN(i)?e.s:i);isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360);return function(t){return Xt(n+a*t,i+s*t,o+l*t)+""}},r.interpolateLab=function(t,e){t=r.lab(t),e=r.lab(e);var n=t.l,i=t.a,o=t.b,a=e.l-n,s=e.a-i,l=e.b-o;return function(t){return oe(n+a*t,i+s*t,o+l*t)+""}},r.interpolateRound=cr,r.transform=function(t){var e=l.createElementNS(r.ns.prefix.svg,"g");return(r.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new dr(n?n.matrix:pr)})(t)},dr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var pr={a:1,b:0,c:0,d:1,e:0,f:0};function gr(t){return t.length?t.pop()+",":""}function mr(t,e){var n=[],i=[];return t=r.transform(t),e=r.transform(e),function(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var o=n.push("translate(",null,",",null,")");i.push({i:o-4,x:qo(t[0],e[0])},{i:o-2,x:qo(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,n,i),function(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(gr(n)+"rotate(",null,")")-2,x:qo(t,e)})):e&&n.push(gr(n)+"rotate("+e+")")}(t.rotate,e.rotate,n,i),function(t,e,n,i){t!==e?i.push({i:n.push(gr(n)+"skewX(",null,")")-2,x:qo(t,e)}):e&&n.push(gr(n)+"skewX("+e+")")}(t.skew,e.skew,n,i),function(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var o=n.push(gr(n)+"scale(",null,",",null,")");i.push({i:o-4,x:qo(t[0],e[0])},{i:o-2,x:qo(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(gr(n)+"scale("+e+")")}(t.scale,e.scale,n,i),t=e=null,function(t){for(var e,o=-1,r=i.length;++o<r;)n[(e=i[o]).i]=e.x(t);return n.join("")}}function vr(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function _r(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function yr(t){for(var e=t.source,n=t.target,i=function(t,e){if(t===e)return t;var n=br(t),i=br(e),o=n.pop(),r=i.pop(),a=null;for(;o===r;)a=o,o=n.pop(),r=i.pop();return a}(e,n),o=[e];e!==i;)e=e.parent,o.push(e);for(var r=o.length;n!==i;)o.splice(r,0,n),n=n.parent;return o}function br(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function xr(t){t.fixed|=2}function wr(t){t.fixed&=-7}function Sr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Tr(t){t.fixed&=-5}r.interpolateTransform=mr,r.layout={},r.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(yr(t[n]));return e}},r.layout.chord=function(){var t,e,n,i,o,a,s,l={},u=0;function c(){var l,c,h,f,p,g={},m=[],v=r.range(i),_=[];for(t=[],e=[],l=0,f=-1;++f<i;){for(c=0,p=-1;++p<i;)c+=n[f][p];m.push(c),_.push(r.range(i)),l+=c}for(o&&v.sort(function(t,e){return o(m[t],m[e])}),a&&_.forEach(function(t,e){t.sort(function(t,i){return a(n[e][t],n[e][i])})}),l=(Pt-u*i)/l,c=0,f=-1;++f<i;){for(h=c,p=-1;++p<i;){var y=v[f],b=_[y][p],x=n[y][b],w=c,S=c+=x*l;g[y+"-"+b]={index:y,subindex:b,startAngle:w,endAngle:S,value:x}}e[y]={index:y,startAngle:h,endAngle:c,value:m[y]},c+=u}for(f=-1;++f<i;)for(p=f-1;++p<i;){var T=g[f+"-"+p],C=g[p+"-"+f];(T.value||C.value)&&t.push(T.value<C.value?{source:C,target:T}:{source:T,target:C})}s&&d()}function d(){t.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return l.matrix=function(o){return arguments.length?(i=(n=o)&&n.length,t=e=null,l):n},l.padding=function(n){return arguments.length?(u=n,t=e=null,l):u},l.sortGroups=function(n){return arguments.length?(o=n,t=e=null,l):o},l.sortSubgroups=function(e){return arguments.length?(a=e,t=null,l):a},l.sortChords=function(e){return arguments.length?(s=e,t&&d(),l):s},l.chords=function(){return t||c(),t},l.groups=function(){return e||c(),e},l},r.layout.force=function(){var t,e,n,i,o,a,s={},l=r.dispatch("start","tick","end"),u=[1,1],c=.9,d=Cr,h=Lr,f=-30,p=Ar,g=.1,m=.64,v=[],_=[];function y(t){return function(e,n,i,o){if(e.point!==t){var r=e.cx-t.x,a=e.cy-t.y,s=o-n,l=r*r+a*a;if(s*s/m<l){if(l<p){var u=e.charge/l;t.px-=r*u,t.py-=a*u}return!0}if(e.point&&l&&l<p){u=e.pointCharge/l;t.px-=r*u,t.py-=a*u}}return!e.charge}}function b(t){t.px=r.event.x,t.py=r.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return t=null,l.end({type:"end",alpha:n=0}),!0;var e,s,d,h,p,m,b,x,w,S=v.length,T=_.length;for(s=0;s<T;++s)h=(d=_[s]).source,(m=(x=(p=d.target).x-h.x)*x+(w=p.y-h.y)*w)&&(x*=m=n*o[s]*((m=Math.sqrt(m))-i[s])/m,w*=m,p.x-=x*(b=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=w*b,h.x+=x*(b=1-b),h.y+=w*b);if((b=n*g)&&(x=u[0]/2,w=u[1]/2,s=-1,b))for(;++s<S;)(d=v[s]).x+=(x-d.x)*b,d.y+=(w-d.y)*b;if(f)for(!function t(e,n,i){var o=0,r=0;e.charge=0;if(!e.leaf)for(var a,s=e.nodes,l=s.length,u=-1;++u<l;)null!=(a=s[u])&&(t(a,n,i),e.charge+=a.charge,o+=a.charge*a.cx,r+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=n*i[e.point.index];e.charge+=e.pointCharge=c,o+=c*e.point.x,r+=c*e.point.y}e.cx=o/e.charge;e.cy=r/e.charge}(e=r.geom.quadtree(v),n,a),s=-1;++s<S;)(d=v[s]).fixed||e.visit(y(d));for(s=-1;++s<S;)(d=v[s]).fixed?(d.x=d.px,d.y=d.py):(d.x-=(d.px-(d.px=d.x))*c,d.y-=(d.py-(d.py=d.y))*c);l.tick({type:"tick",alpha:n})},s.nodes=function(t){return arguments.length?(v=t,s):v},s.links=function(t){return arguments.length?(_=t,s):_},s.size=function(t){return arguments.length?(u=t,s):u},s.linkDistance=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.friction=function(t){return arguments.length?(c=+t,s):c},s.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(g=+t,s):g},s.theta=function(t){return arguments.length?(m=t*t,s):Math.sqrt(m)},s.alpha=function(e){return arguments.length?(e=+e,n?e>0?n=e:(t.c=null,t.t=NaN,t=null,l.end({type:"end",alpha:n=0})):e>0&&(l.start({type:"start",alpha:n=e}),t=De(s.tick)),s):n},s.start=function(){var t,e,n,r=v.length,l=_.length,c=u[0],p=u[1];for(t=0;t<r;++t)(n=v[t]).index=t,n.weight=0;for(t=0;t<l;++t)"number"==typeof(n=_[t]).source&&(n.source=v[n.source]),"number"==typeof n.target&&(n.target=v[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<r;++t)n=v[t],isNaN(n.x)&&(n.x=g("x",c)),isNaN(n.y)&&(n.y=g("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(i=[],"function"==typeof d)for(t=0;t<l;++t)i[t]=+d.call(this,_[t],t);else for(t=0;t<l;++t)i[t]=d;if(o=[],"function"==typeof h)for(t=0;t<l;++t)o[t]=+h.call(this,_[t],t);else for(t=0;t<l;++t)o[t]=h;if(a=[],"function"==typeof f)for(t=0;t<r;++t)a[t]=+f.call(this,v[t],t);else for(t=0;t<r;++t)a[t]=f;function g(n,i){if(!e){for(e=new Array(r),u=0;u<r;++u)e[u]=[];for(u=0;u<l;++u){var o=_[u];e[o.source.index].push(o.target),e[o.target.index].push(o.source)}}for(var a,s=e[t],u=-1,c=s.length;++u<c;)if(!isNaN(a=s[u][n]))return a;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(e||(e=r.behavior.drag().origin(R).on("dragstart.force",xr).on("drag.force",b).on("dragend.force",wr)),!arguments.length)return e;this.on("mouseover.force",Sr).on("mouseout.force",Tr).call(e)},r.rebind(s,l,"on")};var Cr=20,Lr=1,Ar=1/0;function Dr(t,e){return r.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Or,t}function kr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(o=t.children)&&(i=o.length))for(var i,o;--i>=0;)n.push(o[i])}function Pr(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(r=t.children)&&(o=r.length))for(var o,r,a=-1;++a<o;)n.push(r[a]);for(;null!=(t=i.pop());)e(t)}function Er(t){return t.children}function Mr(t){return t.value}function Ir(t,e){return e.value-t.value}function Or(t){return r.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}r.layout.hierarchy=function(){var t=Ir,e=Er,n=Mr;function i(o){var r,a=[o],s=[];for(o.depth=0;null!=(r=a.pop());)if(s.push(r),(u=e.call(i,r,r.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=r,c.depth=r.depth+1;n&&(r.value=0),r.children=u}else n&&(r.value=+n.call(i,r,r.depth)||0),delete r.children;return Pr(o,function(e){var i,o;t&&(i=e.children)&&i.sort(t),n&&(o=e.parent)&&(o.value+=e.value)}),s}return i.sort=function(e){return arguments.length?(t=e,i):t},i.children=function(t){return arguments.length?(e=t,i):e},i.value=function(t){return arguments.length?(n=t,i):n},i.revalue=function(t){return n&&(kr(t,function(t){t.children&&(t.value=0)}),Pr(t,function(t){var e;t.children||(t.value=+n.call(i,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},i},r.layout.partition=function(){var t=r.layout.hierarchy(),e=[1,1];function n(n,i){var o=t.call(this,n,i);return function t(e,n,i,o){var r=e.children;if(e.x=n,e.y=e.depth*o,e.dx=i,e.dy=o,r&&(a=r.length)){var a,s,l,u=-1;for(i=e.value?i/e.value:0;++u<a;)t(s=r[u],n,l=s.value*i,o),n+=l}}(o[0],0,e[0],e[1]/function t(e){var n=e.children,i=0;if(n&&(o=n.length))for(var o,r=-1;++r<o;)i=Math.max(i,t(n[r]));return 1+i}(o[0])),o}return n.size=function(t){return arguments.length?(e=t,n):e},Dr(n,t)},r.layout.pie=function(){var t=Number,e=Rr,n=0,i=Pt,o=0;function a(s){var l,u=s.length,c=s.map(function(e,n){return+t.call(a,e,n)}),d=+("function"==typeof n?n.apply(this,arguments):n),h=("function"==typeof i?i.apply(this,arguments):i)-d,f=Math.min(Math.abs(h)/u,+("function"==typeof o?o.apply(this,arguments):o)),p=f*(h<0?-1:1),g=r.sum(c),m=g?(h-u*p)/g:0,v=r.range(u),_=[];return null!=e&&v.sort(e===Rr?function(t,e){return c[e]-c[t]}:function(t,n){return e(s[t],s[n])}),v.forEach(function(t){_[t]={data:s[t],value:l=c[t],startAngle:d,endAngle:d+=l*m+p,padAngle:f}}),_}return a.value=function(e){return arguments.length?(t=e,a):t},a.sort=function(t){return arguments.length?(e=t,a):e},a.startAngle=function(t){return arguments.length?(n=t,a):n},a.endAngle=function(t){return arguments.length?(i=t,a):i},a.padAngle=function(t){return arguments.length?(o=t,a):o},a};var Rr={};function Nr(t){return t.x}function Fr(t){return t.y}function $r(t,e,n){t.y0=e,t.y=n}r.layout.stack=function(){var t=R,e=Ur,n=zr,i=$r,o=Nr,a=Fr;function s(l,u){if(!(f=l.length))return l;var c=l.map(function(e,n){return t.call(s,e,n)}),d=c.map(function(t){return t.map(function(t,e){return[o.call(s,t,e),a.call(s,t,e)]})}),h=e.call(s,d,u);c=r.permute(c,h),d=r.permute(d,h);var f,p,g,m,v=n.call(s,d,u),_=c[0].length;for(g=0;g<_;++g)for(i.call(s,c[0][g],m=v[g],d[0][g][1]),p=1;p<f;++p)i.call(s,c[p][g],m+=d[p-1][g][1],d[p][g][1]);return l}return s.values=function(e){return arguments.length?(t=e,s):t},s.order=function(t){return arguments.length?(e="function"==typeof t?t:jr.get(t)||Ur,s):e},s.offset=function(t){return arguments.length?(n="function"==typeof t?t:Br.get(t)||zr,s):n},s.x=function(t){return arguments.length?(o=t,s):o},s.y=function(t){return arguments.length?(a=t,s):a},s.out=function(t){return arguments.length?(i=t,s):i},s};var jr=r.map({"inside-out":function(t){var e,n,i=t.length,o=t.map(Gr),a=t.map(Hr),s=r.range(i).sort(function(t,e){return o[t]-o[e]}),l=0,u=0,c=[],d=[];for(e=0;e<i;++e)n=s[e],l<u?(l+=a[n],c.push(n)):(u+=a[n],d.push(n));return d.reverse().concat(c)},reverse:function(t){return r.range(t.length).reverse()},default:Ur}),Br=r.map({silhouette:function(t){var e,n,i,o=t.length,r=t[0].length,a=[],s=0,l=[];for(n=0;n<r;++n){for(e=0,i=0;e<o;e++)i+=t[e][n][1];i>s&&(s=i),a.push(i)}for(n=0;n<r;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,i,o,r,a,s,l,u,c=t.length,d=t[0],h=d.length,f=[];for(f[0]=l=u=0,n=1;n<h;++n){for(e=0,o=0;e<c;++e)o+=t[e][n][1];for(e=0,r=0,s=d[n][0]-d[n-1][0];e<c;++e){for(i=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);i<e;++i)a+=(t[i][n][1]-t[i][n-1][1])/s;r+=a*t[e][n][1]}f[n]=l-=o?r/o*s:0,l<u&&(u=l)}for(n=0;n<h;++n)f[n]-=u;return f},expand:function(t){var e,n,i,o=t.length,r=t[0].length,a=1/o,s=[];for(n=0;n<r;++n){for(e=0,i=0;e<o;e++)i+=t[e][n][1];if(i)for(e=0;e<o;e++)t[e][n][1]/=i;else for(e=0;e<o;e++)t[e][n][1]=a}for(n=0;n<r;++n)s[n]=0;return s},zero:zr});function Ur(t){return r.range(t.length)}function zr(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function Gr(t){for(var e,n=1,i=0,o=t[0][1],r=t.length;n<r;++n)(e=t[n][1])>o&&(i=n,o=e);return i}function Hr(t){return t.reduce(Vr,0)}function Vr(t,e){return t+e[1]}function qr(t,e){return Wr(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Wr(t,e){for(var n=-1,i=+t[0],o=(t[1]-i)/e,r=[];++n<=e;)r[n]=o*n+i;return r}function Xr(t){return[r.min(t),r.max(t)]}function Zr(t,e){return t.value-e.value}function Yr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Kr(t,e){t._pack_next=e,e._pack_prev=t}function Jr(t,e){var n=e.x-t.x,i=e.y-t.y,o=t.r+e.r;return.999*o*o>n*n+i*i}function Qr(t){if((e=t.children)&&(l=e.length)){var e,n,i,o,r,a,s,l,u=1/0,c=-1/0,d=1/0,h=-1/0;if(e.forEach(ta),(n=e[0]).x=-n.r,n.y=0,y(n),l>1&&((i=e[1]).x=i.r,i.y=0,y(i),l>2))for(na(n,i,o=e[2]),y(o),Yr(n,o),n._pack_prev=o,Yr(o,i),i=n._pack_next,r=3;r<l;r++){na(n,i,o=e[r]);var f=0,p=1,g=1;for(a=i._pack_next;a!==i;a=a._pack_next,p++)if(Jr(a,o)){f=1;break}if(1==f)for(s=n._pack_prev;s!==a._pack_prev&&!Jr(s,o);s=s._pack_prev,g++);f?(p<g||p==g&&i.r<n.r?Kr(n,i=a):Kr(n=s,i),r--):(Yr(n,o),i=o,y(o))}var m=(u+c)/2,v=(d+h)/2,_=0;for(r=0;r<l;r++)(o=e[r]).x-=m,o.y-=v,_=Math.max(_,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=_,e.forEach(ea)}function y(t){u=Math.min(t.x-t.r,u),c=Math.max(t.x+t.r,c),d=Math.min(t.y-t.r,d),h=Math.max(t.y+t.r,h)}}function ta(t){t._pack_next=t._pack_prev=t}function ea(t){delete t._pack_next,delete t._pack_prev}function na(t,e,n){var i=t.r+n.r,o=e.x-t.x,r=e.y-t.y;if(i&&(o||r)){var a=e.r+n.r,s=o*o+r*r,l=.5+((i*=i)-(a*=a))/(2*s),u=Math.sqrt(Math.max(0,2*a*(i+s)-(i-=s)*i-a*a))/(2*s);n.x=t.x+l*o+u*r,n.y=t.y+l*r-u*o}else n.x=t.x+i,n.y=t.y}function ia(t,e){return t.parent==e.parent?1:2}function oa(t){var e=t.children;return e.length?e[0]:t.t}function ra(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function aa(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function sa(t,e,n){return t.a.parent===e.parent?t.a:n}function la(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ua(t,e){var n=t.x+e[3],i=t.y+e[0],o=t.dx-e[1]-e[3],r=t.dy-e[0]-e[2];return o<0&&(n+=o/2,o=0),r<0&&(i+=r/2,r=0),{x:n,y:i,dx:o,dy:r}}function ca(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function da(t){return t.rangeExtent?t.rangeExtent():ca(t.range())}function ha(t,e,n,i){var o=n(t[0],t[1]),r=i(e[0],e[1]);return function(t){return r(o(t))}}function fa(t,e){var n,i=0,o=t.length-1,r=t[i],a=t[o];return a<r&&(n=i,i=o,o=n,n=r,r=a,a=n),t[i]=e.floor(r),t[o]=e.ceil(a),t}function pa(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:ga}r.layout.histogram=function(){var t=!0,e=Number,n=Xr,i=qr;function o(o,a){for(var s,l,u=[],c=o.map(e,this),d=n.call(this,c,a),h=i.call(this,d,c,a),f=(a=-1,c.length),p=h.length-1,g=t?1:1/f;++a<p;)(s=u[a]=[]).dx=h[a+1]-(s.x=h[a]),s.y=0;if(p>0)for(a=-1;++a<f;)(l=c[a])>=d[0]&&l<=d[1]&&((s=u[r.bisect(h,l,1,p)-1]).y+=g,s.push(o[a]));return u}return o.value=function(t){return arguments.length?(e=t,o):e},o.range=function(t){return arguments.length?(n=be(t),o):n},o.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return Wr(e,t)}:be(t),o):i},o.frequency=function(e){return arguments.length?(t=!!e,o):t},o},r.layout.pack=function(){var t,e=r.layout.hierarchy().sort(Zr),n=0,i=[1,1];function o(o,r){var a=e.call(this,o,r),s=a[0],l=i[0],u=i[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,Pr(s,function(t){t.r=+c(t.value)}),Pr(s,Qr),n){var d=n*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;Pr(s,function(t){t.r+=d}),Pr(s,Qr),Pr(s,function(t){t.r-=d})}return function t(e,n,i,o){var r=e.children;e.x=n+=o*e.x;e.y=i+=o*e.y;e.r*=o;if(r)for(var a=-1,s=r.length;++a<s;)t(r[a],n,i,o)}(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),a}return o.size=function(t){return arguments.length?(i=t,o):i},o.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,o):t},o.padding=function(t){return arguments.length?(n=+t,o):n},Dr(o,e)},r.layout.tree=function(){var t=r.layout.hierarchy().sort(null).value(null),e=ia,n=[1,1],i=null;function o(o,r){var u=t.call(this,o,r),c=u[0],d=function(t){var e,n={A:null,children:[t]},i=[n];for(;null!=(e=i.pop());)for(var o,r=e.children,a=0,s=r.length;a<s;++a)i.push((r[a]=o={_:r[a],parent:e,children:(o=r[a].children)&&o.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=o);return n.children[0]}(c);if(Pr(d,a),d.parent.m=-d.z,kr(d,s),i)kr(c,l);else{var h=c,f=c,p=c;kr(c,function(t){t.x<h.x&&(h=t),t.x>f.x&&(f=t),t.depth>p.depth&&(p=t)});var g=e(h,f)/2-h.x,m=n[0]/(f.x+e(f,h)/2+g),v=n[1]/(p.depth||1);kr(c,function(t){t.x=(t.x+g)*m,t.y=t.depth*v})}return u}function a(t){var n=t.children,i=t.parent.children,o=t.i?i[t.i-1]:null;if(n.length){!function(t){var e,n=0,i=0,o=t.children,r=o.length;for(;--r>=0;)(e=o[r]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var r=(n[0].z+n[n.length-1].z)/2;o?(t.z=o.z+e(t._,o._),t.m=t.z-r):t.z=r}else o&&(t.z=o.z+e(t._,o._));t.parent.A=function(t,n,i){if(n){for(var o,r=t,a=t,s=n,l=r.parent.children[0],u=r.m,c=a.m,d=s.m,h=l.m;s=ra(s),r=oa(r),s&&r;)l=oa(l),(a=ra(a)).a=t,(o=s.z+d-r.z-u+e(s._,r._))>0&&(aa(sa(s,t,i),t,o),u+=o,c+=o),d+=s.m,u+=r.m,h+=l.m,c+=a.m;s&&!ra(a)&&(a.t=s,a.m+=d-c),r&&!oa(l)&&(l.t=r,l.m+=u-h,i=t)}return i}(t,o,t.parent.A||i[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=n[0],t.y=t.depth*n[1]}return o.separation=function(t){return arguments.length?(e=t,o):e},o.size=function(t){return arguments.length?(i=null==(n=t)?l:null,o):i?null:n},o.nodeSize=function(t){return arguments.length?(i=null==(n=t)?null:l,o):i?n:null},Dr(o,t)},r.layout.cluster=function(){var t=r.layout.hierarchy().sort(null).value(null),e=ia,n=[1,1],i=!1;function o(o,a){var s,l=t.call(this,o,a),u=l[0],c=0;Pr(u,function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(n),t.y=function(t){return 1+r.max(t,function(t){return t.y})}(n)):(t.x=s?c+=e(t,s):0,t.y=0,s=t)});var d=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(u),h=function t(e){var n,i=e.children;return i&&(n=i.length)?t(i[n-1]):e}(u),f=d.x-e(d,h)/2,p=h.x+e(h,d)/2;return Pr(u,i?function(t){t.x=(t.x-u.x)*n[0],t.y=(u.y-t.y)*n[1]}:function(t){t.x=(t.x-f)/(p-f)*n[0],t.y=(1-(u.y?t.y/u.y:1))*n[1]}),l}return o.separation=function(t){return arguments.length?(e=t,o):e},o.size=function(t){return arguments.length?(i=null==(n=t),o):i?null:n},o.nodeSize=function(t){return arguments.length?(i=null!=(n=t),o):i?n:null},Dr(o,t)},r.layout.treemap=function(){var t,e=r.layout.hierarchy(),n=Math.round,i=[1,1],o=null,a=la,s=!1,l="squarify",u=.5*(1+Math.sqrt(5));function c(t,e){for(var n,i,o=-1,r=t.length;++o<r;)i=(n=t[o]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function d(t){var e=t.children;if(e&&e.length){var n,i,o,r=a(t),s=[],u=e.slice(),h=1/0,g="slice"===l?r.dx:"dice"===l?r.dy:"slice-dice"===l?1&t.depth?r.dy:r.dx:Math.min(r.dx,r.dy);for(c(u,r.dx*r.dy/t.value),s.area=0;(o=u.length)>0;)s.push(n=u[o-1]),s.area+=n.area,"squarify"!==l||(i=f(s,g))<=h?(u.pop(),h=i):(s.area-=s.pop().area,p(s,g,r,!1),g=Math.min(r.dx,r.dy),s.length=s.area=0,h=1/0);s.length&&(p(s,g,r,!0),s.length=s.area=0),e.forEach(d)}}function h(t){var e=t.children;if(e&&e.length){var n,i=a(t),o=e.slice(),r=[];for(c(o,i.dx*i.dy/t.value),r.area=0;n=o.pop();)r.push(n),r.area+=n.area,null!=n.z&&(p(r,n.z?i.dx:i.dy,i,!o.length),r.length=r.area=0);e.forEach(h)}}function f(t,e){for(var n,i=t.area,o=0,r=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(n<r&&(r=n),n>o&&(o=n));return e*=e,(i*=i)?Math.max(e*o*u/i,i/(e*r*u)):1/0}function p(t,e,i,o){var r,a=-1,s=t.length,l=i.x,u=i.y,c=e?n(t.area/e):0;if(e==i.dx){for((o||c>i.dy)&&(c=i.dy);++a<s;)(r=t[a]).x=l,r.y=u,r.dy=c,l+=r.dx=Math.min(i.x+i.dx-l,c?n(r.area/c):0);r.z=!0,r.dx+=i.x+i.dx-l,i.y+=c,i.dy-=c}else{for((o||c>i.dx)&&(c=i.dx);++a<s;)(r=t[a]).x=l,r.y=u,r.dx=c,u+=r.dy=Math.min(i.y+i.dy-u,c?n(r.area/c):0);r.z=!1,r.dy+=i.y+i.dy-u,i.x+=c,i.dx-=c}}function g(n){var o=t||e(n),r=o[0];return r.x=r.y=0,r.value?(r.dx=i[0],r.dy=i[1]):r.dx=r.dy=0,t&&e.revalue(r),c([r],r.dx*r.dy/r.value),(t?h:d)(r),s&&(t=o),o}return g.size=function(t){return arguments.length?(i=t,g):i},g.padding=function(t){if(!arguments.length)return o;function e(e){return ua(e,t)}var n;return a=null==(o=t)?la:"function"==(n=typeof t)?function(e){var n=t.call(g,e,e.depth);return null==n?la(e):ua(e,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,g},g.round=function(t){return arguments.length?(n=t?Math.round:Number,g):n!=Number},g.sticky=function(e){return arguments.length?(s=e,t=null,g):s},g.ratio=function(t){return arguments.length?(u=t,g):u},g.mode=function(t){return arguments.length?(l=t+"",g):l},Dr(g,e)},r.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,i,o;do{o=(n=2*Math.random()-1)*n+(i=2*Math.random()-1)*i}while(!o||o>1);return t+e*n*Math.sqrt(-2*Math.log(o)/o)}},logNormal:function(){var t=r.random.normal.apply(r,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=r.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},r.scale={};var ga={floor:R,ceil:R};function ma(t,e,n,i){var o=[],a=[],s=0,l=Math.min(t.length,e.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=l;)o.push(n(t[s-1],t[s])),a.push(i(e[s-1],e[s]));return function(e){var n=r.bisect(t,e,1,l)-1;return a[n](o[n](e))}}function va(t,e){return r.rebind(t,e,"range","rangeRound","interpolate","clamp")}function _a(t,e){return fa(t,pa(ya(t,e)[2])),fa(t,pa(ya(t,e)[2])),t}function ya(t,e){null==e&&(e=10);var n=ca(t),i=n[1]-n[0],o=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),r=e/i*o;return r<=.15?o*=10:r<=.35?o*=5:r<=.75&&(o*=2),n[0]=Math.ceil(n[0]/o)*o,n[1]=Math.floor(n[1]/o)*o+.5*o,n[2]=o,n}function ba(t,e){return r.range.apply(r,ya(t,e))}function xa(t,e,n){var i=ya(t,e);if(n){var o=Oe.exec(n);if(o.shift(),"s"===o[8]){var a=r.formatPrefix(Math.max(w(i[0]),w(i[1])));return o[7]||(o[7]="."+Sa(a.scale(i[2]))),o[8]="f",n=r.format(o.join("")),function(t){return n(a.scale(t))+a.symbol}}o[7]||(o[7]="."+function(t,e){var n=Sa(e[2]);return t in wa?Math.abs(n-Sa(Math.max(w(e[0]),w(e[1]))))+ +("e"!==t):n-2*("%"===t)}(o[8],i)),n=o.join("")}else n=",."+Sa(i[2])+"f";return r.format(n)}r.scale.linear=function(){return function t(e,n,i,o){var r,a;function s(){var t=Math.min(e.length,n.length)>2?ma:ha,s=o?_r:vr;return r=t(e,n,s,i),a=t(n,e,s,Yo),l}function l(t){return r(t)}l.invert=function(t){return a(t)};l.domain=function(t){return arguments.length?(e=t.map(Number),s()):e};l.range=function(t){return arguments.length?(n=t,s()):n};l.rangeRound=function(t){return l.range(t).interpolate(cr)};l.clamp=function(t){return arguments.length?(o=t,s()):o};l.interpolate=function(t){return arguments.length?(i=t,s()):i};l.ticks=function(t){return ba(e,t)};l.tickFormat=function(t,n){return xa(e,t,n)};l.nice=function(t){return _a(e,t),s()};l.copy=function(){return t(e,n,i,o)};return s()}([0,1],[0,1],Yo,!1)};var wa={s:1,g:1,p:1,r:1,e:1};function Sa(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}r.scale.log=function(){return function t(e,n,i,o){function a(t){return(i?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function s(t){return i?Math.pow(n,t):-Math.pow(n,-t)}function l(t){return e(a(t))}l.invert=function(t){return s(e.invert(t))};l.domain=function(t){return arguments.length?(i=t[0]>=0,e.domain((o=t.map(Number)).map(a)),l):o};l.base=function(t){return arguments.length?(n=+t,e.domain(o.map(a)),l):n};l.nice=function(){var t=fa(o.map(a),i?Math:Ca);return e.domain(t),o=t.map(s),l};l.ticks=function(){var t=ca(o),e=[],r=t[0],l=t[1],u=Math.floor(a(r)),c=Math.ceil(a(l)),d=n%1?2:n;if(isFinite(c-u)){if(i){for(;u<c;u++)for(var h=1;h<d;h++)e.push(s(u)*h);e.push(s(u))}else for(e.push(s(u));u++<c;)for(var h=d-1;h>0;h--)e.push(s(u)*h);for(u=0;e[u]<r;u++);for(c=e.length;e[c-1]>l;c--);e=e.slice(u,c)}return e};l.tickFormat=function(t,e){if(!arguments.length)return Ta;arguments.length<2?e=Ta:"function"!=typeof e&&(e=r.format(e));var i=Math.max(1,n*t/l.ticks().length);return function(t){var o=t/s(Math.round(a(t)));return o*n<n-.5&&(o*=n),o<=i?e(t):""}};l.copy=function(){return t(e.copy(),n,i,o)};return va(l,e)}(r.scale.linear().domain([0,1]),10,!0,[1,10])};var Ta=r.format(".0e"),Ca={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function La(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}r.scale.pow=function(){return function t(e,n,i){var o=La(n),r=La(1/n);function a(t){return e(o(t))}a.invert=function(t){return r(e.invert(t))};a.domain=function(t){return arguments.length?(e.domain((i=t.map(Number)).map(o)),a):i};a.ticks=function(t){return ba(i,t)};a.tickFormat=function(t,e){return xa(i,t,e)};a.nice=function(t){return a.domain(_a(i,t))};a.exponent=function(t){return arguments.length?(o=La(n=t),r=La(1/n),e.domain(i.map(o)),a):n};a.copy=function(){return t(e.copy(),n,i)};return va(a,e)}(r.scale.linear(),1,[0,1])},r.scale.sqrt=function(){return r.scale.pow().exponent(.5)},r.scale.ordinal=function(){return function t(e,n){var i,o,a;function s(t){return o[((i.get(t)||("range"===n.t?i.set(t,e.push(t)):NaN))-1)%o.length]}function l(t,n){return r.range(e.length).map(function(e){return t+n*e})}s.domain=function(t){if(!arguments.length)return e;e=[],i=new T;for(var o,r=-1,a=t.length;++r<a;)i.has(o=t[r])||i.set(o,e.push(o));return s[n.t].apply(s,n.a)};s.range=function(t){return arguments.length?(o=t,a=0,n={t:"range",a:arguments},s):o};s.rangePoints=function(t,i){arguments.length<2&&(i=0);var r=t[0],u=t[1],c=e.length<2?(r=(r+u)/2,0):(u-r)/(e.length-1+i);return o=l(r+c*i/2,c),a=0,n={t:"rangePoints",a:arguments},s};s.rangeRoundPoints=function(t,i){arguments.length<2&&(i=0);var r=t[0],u=t[1],c=e.length<2?(r=u=Math.round((r+u)/2),0):(u-r)/(e.length-1+i)|0;return o=l(r+Math.round(c*i/2+(u-r-(e.length-1+i)*c)/2),c),a=0,n={t:"rangeRoundPoints",a:arguments},s};s.rangeBands=function(t,i,r){arguments.length<2&&(i=0),arguments.length<3&&(r=i);var u=t[1]<t[0],c=t[u-0],d=t[1-u],h=(d-c)/(e.length-i+2*r);return o=l(c+h*r,h),u&&o.reverse(),a=h*(1-i),n={t:"rangeBands",a:arguments},s};s.rangeRoundBands=function(t,i,r){arguments.length<2&&(i=0),arguments.length<3&&(r=i);var u=t[1]<t[0],c=t[u-0],d=t[1-u],h=Math.floor((d-c)/(e.length-i+2*r));return o=l(c+Math.round((d-c-(e.length-i)*h)/2),h),u&&o.reverse(),a=Math.round(h*(1-i)),n={t:"rangeRoundBands",a:arguments},s};s.rangeBand=function(){return a};s.rangeExtent=function(){return ca(n.a[0])};s.copy=function(){return t(e,n)};return s.domain(e)}([],{t:"range",a:[[]]})},r.scale.category10=function(){return r.scale.ordinal().range(Aa)},r.scale.category20=function(){return r.scale.ordinal().range(Da)},r.scale.category20b=function(){return r.scale.ordinal().range(ka)},r.scale.category20c=function(){return r.scale.ordinal().range(Pa)};var Aa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(de),Da=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(de),ka=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(de),Pa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(de);function Ea(){return 0}r.scale.quantile=function(){return function t(e,n){var i;function o(){var t=0,o=n.length;for(i=[];++t<o;)i[t-1]=r.quantile(e,t/o);return a}function a(t){if(!isNaN(t=+t))return n[r.bisect(i,t)]}a.domain=function(t){return arguments.length?(e=t.map(v).filter(_).sort(m),o()):e};a.range=function(t){return arguments.length?(n=t,o()):n};a.quantiles=function(){return i};a.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[t>0?i[t-1]:e[0],t<i.length?i[t]:e[e.length-1]]};a.copy=function(){return t(e,n)};return o()}([],[])},r.scale.quantize=function(){return function t(e,n,i){var o,r;function a(t){return i[Math.max(0,Math.min(r,Math.floor(o*(t-e))))]}function s(){return o=i.length/(n-e),r=i.length-1,a}a.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],s()):[e,n]};a.range=function(t){return arguments.length?(i=t,s()):i};a.invertExtent=function(t){return[t=(t=i.indexOf(t))<0?NaN:t/o+e,t+1/o]};a.copy=function(){return t(e,n,i)};return s()}(0,1,[0,1])},r.scale.threshold=function(){return function t(e,n){function i(t){if(t<=t)return n[r.bisect(e,t)]}i.domain=function(t){return arguments.length?(e=t,i):e};i.range=function(t){return arguments.length?(n=t,i):n};i.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]};i.copy=function(){return t(e,n)};return i}([.5],[0,1])},r.scale.identity=function(){return function t(e){function n(t){return+t}n.invert=n;n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e};n.ticks=function(t){return ba(e,t)};n.tickFormat=function(t,n){return xa(e,t,n)};n.copy=function(){return t(e)};return n}([0,1])},r.svg={},r.svg.arc=function(){var t=Ia,e=Oa,n=Ea,i=Ma,o=Ra,r=Na,a=Fa;function s(){var s=Math.max(0,+t.apply(this,arguments)),u=Math.max(0,+e.apply(this,arguments)),c=o.apply(this,arguments)-Mt,d=r.apply(this,arguments)-Mt,h=Math.abs(d-c),f=c>d?0:1;if(u<s&&(p=u,u=s,s=p),h>=Et)return l(u,f)+(s?l(s,1-f):"")+"Z";var p,g,m,v,_,y,b,x,w,S,T,C,L=0,A=0,D=[];if((v=(+a.apply(this,arguments)||0)/2)&&(m=i===Ma?Math.sqrt(s*s+u*u):+i.apply(this,arguments),f||(A*=-1),u&&(A=$t(m/u*Math.sin(v))),s&&(L=$t(m/s*Math.sin(v)))),u){_=u*Math.cos(c+A),y=u*Math.sin(c+A),b=u*Math.cos(d-A),x=u*Math.sin(d-A);var k=Math.abs(d-c-2*A)<=kt?0:1;if(A&&$a(_,y,b,x)===f^k){var P=(c+d)/2;_=u*Math.cos(P),y=u*Math.sin(P),b=x=null}}else _=y=0;if(s){w=s*Math.cos(d-L),S=s*Math.sin(d-L),T=s*Math.cos(c+L),C=s*Math.sin(c+L);var E=Math.abs(c-d+2*L)<=kt?0:1;if(L&&$a(w,S,T,C)===1-f^E){var M=(c+d)/2;w=s*Math.cos(M),S=s*Math.sin(M),T=C=null}}else w=S=0;if(h>At&&(p=Math.min(Math.abs(u-s)/2,+n.apply(this,arguments)))>.001){g=s<u^f?0:1;var I=p,O=p;if(h<kt){var R=null==T?[w,S]:null==b?[_,y]:uo([_,y],[T,C],[b,x],[w,S]),N=_-R[0],F=y-R[1],$=b-R[0],j=x-R[1],B=1/Math.sin(Math.acos((N*$+F*j)/(Math.sqrt(N*N+F*F)*Math.sqrt($*$+j*j)))/2),U=Math.sqrt(R[0]*R[0]+R[1]*R[1]);O=Math.min(p,(s-U)/(B-1)),I=Math.min(p,(u-U)/(B+1))}if(null!=b){var z=ja(null==T?[w,S]:[T,C],[_,y],u,I,f),G=ja([b,x],[w,S],u,I,f);p===I?D.push("M",z[0],"A",I,",",I," 0 0,",g," ",z[1],"A",u,",",u," 0 ",1-f^$a(z[1][0],z[1][1],G[1][0],G[1][1]),",",f," ",G[1],"A",I,",",I," 0 0,",g," ",G[0]):D.push("M",z[0],"A",I,",",I," 0 1,",g," ",G[0])}else D.push("M",_,",",y);if(null!=T){var H=ja([_,y],[T,C],s,-O,f),V=ja([w,S],null==b?[_,y]:[b,x],s,-O,f);p===O?D.push("L",V[0],"A",O,",",O," 0 0,",g," ",V[1],"A",s,",",s," 0 ",f^$a(V[1][0],V[1][1],H[1][0],H[1][1]),",",1-f," ",H[1],"A",O,",",O," 0 0,",g," ",H[0]):D.push("L",V[0],"A",O,",",O," 0 0,",g," ",H[0])}else D.push("L",w,",",S)}else D.push("M",_,",",y),null!=b&&D.push("A",u,",",u," 0 ",k,",",f," ",b,",",x),D.push("L",w,",",S),null!=T&&D.push("A",s,",",s," 0 ",E,",",1-f," ",T,",",C);return D.push("Z"),D.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=be(e),s):t},s.outerRadius=function(t){return arguments.length?(e=be(t),s):e},s.cornerRadius=function(t){return arguments.length?(n=be(t),s):n},s.padRadius=function(t){return arguments.length?(i=t==Ma?Ma:be(t),s):i},s.startAngle=function(t){return arguments.length?(o=be(t),s):o},s.endAngle=function(t){return arguments.length?(r=be(t),s):r},s.padAngle=function(t){return arguments.length?(a=be(t),s):a},s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+o.apply(this,arguments)+ +r.apply(this,arguments))/2-Mt;return[Math.cos(i)*n,Math.sin(i)*n]},s};var Ma="auto";function Ia(t){return t.innerRadius}function Oa(t){return t.outerRadius}function Ra(t){return t.startAngle}function Na(t){return t.endAngle}function Fa(t){return t&&t.padAngle}function $a(t,e,n,i){return(t-n)*e-(e-i)*t>0?0:1}function ja(t,e,n,i,o){var r=t[0]-e[0],a=t[1]-e[1],s=(o?i:-i)/Math.sqrt(r*r+a*a),l=s*a,u=-s*r,c=t[0]+l,d=t[1]+u,h=e[0]+l,f=e[1]+u,p=(c+h)/2,g=(d+f)/2,m=h-c,v=f-d,_=m*m+v*v,y=n-i,b=c*f-h*d,x=(v<0?-1:1)*Math.sqrt(Math.max(0,y*y*_-b*b)),w=(b*v-m*x)/_,S=(-b*m-v*x)/_,T=(b*v+m*x)/_,C=(-b*m+v*x)/_,L=w-p,A=S-g,D=T-p,k=C-g;return L*L+A*A>D*D+k*k&&(w=T,S=C),[[w-l,S-u],[w*n/y,S*n/y]]}function Ba(t){var e=io,n=oo,i=Kn,o=za,r=o.key,a=.7;function s(r){var s,l=[],u=[],c=-1,d=r.length,h=be(e),f=be(n);function p(){l.push("M",o(t(u),a))}for(;++c<d;)i.call(this,s=r[c],c)?u.push([+h.call(this,s,c),+f.call(this,s,c)]):u.length&&(p(),u=[]);return u.length&&p(),l.length?l.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(n=t,s):n},s.defined=function(t){return arguments.length?(i=t,s):i},s.interpolate=function(t){return arguments.length?(r="function"==typeof t?o=t:(o=Ua.get(t)||za).key,s):r},s.tension=function(t){return arguments.length?(a=t,s):a},s}r.svg.line=function(){return Ba(R)};var Ua=r.map({linear:za,"linear-closed":Ga,step:function(t){var e=0,n=t.length,i=t[0],o=[i[0],",",i[1]];for(;++e<n;)o.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);n>1&&o.push("H",i[0]);return o.join("")},"step-before":Ha,"step-after":Va,basis:Xa,"basis-open":function(t){if(t.length<4)return za(t);var e,n=[],i=-1,o=t.length,r=[0],a=[0];for(;++i<3;)e=t[i],r.push(e[0]),a.push(e[1]);n.push(Za(Ja,r)+","+Za(Ja,a)),--i;for(;++i<o;)e=t[i],r.shift(),r.push(e[0]),a.shift(),a.push(e[1]),Qa(n,r,a);return n.join("")},"basis-closed":function(t){var e,n,i=-1,o=t.length,r=o+4,a=[],s=[];for(;++i<4;)n=t[i%o],a.push(n[0]),s.push(n[1]);e=[Za(Ja,a),",",Za(Ja,s)],--i;for(;++i<r;)n=t[i%o],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Qa(e,a,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,o,r=t[0][0],a=t[0][1],s=t[n][0]-r,l=t[n][1]-a,u=-1;++u<=n;)i=t[u],o=u/n,i[0]=e*i[0]+(1-e)*(r+o*s),i[1]=e*i[1]+(1-e)*(a+o*l);return Xa(t)},cardinal:function(t,e){return t.length<3?za(t):t[0]+qa(t,Wa(t,e))},"cardinal-open":function(t,e){return t.length<4?za(t):t[1]+qa(t.slice(1,-1),Wa(t,e))},"cardinal-closed":function(t,e){return t.length<3?Ga(t):t[0]+qa((t.push(t[0]),t),Wa([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?za(t):t[0]+qa(t,function(t){var e,n,i,o,r=[],a=function(t){var e=0,n=t.length-1,i=[],o=t[0],r=t[1],a=i[0]=ts(o,r);for(;++e<n;)i[e]=(a+(a=ts(o=r,r=t[e+1])))/2;return i[e]=a,i}(t),s=-1,l=t.length-1;for(;++s<l;)e=ts(t[s],t[s+1]),w(e)<At?a[s]=a[s+1]=0:(n=a[s]/e,i=a[s+1]/e,(o=n*n+i*i)>9&&(o=3*e/Math.sqrt(o),a[s]=o*n,a[s+1]=o*i));s=-1;for(;++s<=l;)o=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),r.push([o||0,a[s]*o||0]);return r}(t))}});function za(t){return t.length>1?t.join("L"):t+"Z"}function Ga(t){return t.join("L")+"Z"}function Ha(t){for(var e=0,n=t.length,i=t[0],o=[i[0],",",i[1]];++e<n;)o.push("V",(i=t[e])[1],"H",i[0]);return o.join("")}function Va(t){for(var e=0,n=t.length,i=t[0],o=[i[0],",",i[1]];++e<n;)o.push("H",(i=t[e])[0],"V",i[1]);return o.join("")}function qa(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return za(t);var n=t.length!=e.length,i="",o=t[0],r=t[1],a=e[0],s=a,l=1;if(n&&(i+="Q"+(r[0]-2*a[0]/3)+","+(r[1]-2*a[1]/3)+","+r[0]+","+r[1],o=t[1],l=2),e.length>1){s=e[1],r=t[l],l++,i+="C"+(o[0]+a[0])+","+(o[1]+a[1])+","+(r[0]-s[0])+","+(r[1]-s[1])+","+r[0]+","+r[1];for(var u=2;u<e.length;u++,l++)r=t[l],s=e[u],i+="S"+(r[0]-s[0])+","+(r[1]-s[1])+","+r[0]+","+r[1]}if(n){var c=t[l];i+="Q"+(r[0]+2*s[0]/3)+","+(r[1]+2*s[1]/3)+","+c[0]+","+c[1]}return i}function Wa(t,e){for(var n,i=[],o=(1-e)/2,r=t[0],a=t[1],s=1,l=t.length;++s<l;)n=r,r=a,a=t[s],i.push([o*(a[0]-n[0]),o*(a[1]-n[1])]);return i}function Xa(t){if(t.length<3)return za(t);var e=1,n=t.length,i=t[0],o=i[0],r=i[1],a=[o,o,o,(i=t[1])[0]],s=[r,r,r,i[1]],l=[o,",",r,"L",Za(Ja,a),",",Za(Ja,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],a.shift(),a.push(i[0]),s.shift(),s.push(i[1]),Qa(l,a,s);return t.pop(),l.push("L",i),l.join("")}function Za(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Ua.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Ya=[0,2/3,1/3,0],Ka=[0,1/3,2/3,0],Ja=[0,1/6,2/3,1/6];function Qa(t,e,n){t.push("C",Za(Ya,e),",",Za(Ya,n),",",Za(Ka,e),",",Za(Ka,n),",",Za(Ja,e),",",Za(Ja,n))}function ts(t,e){return(e[1]-t[1])/(e[0]-t[0])}function es(t){for(var e,n,i,o=-1,r=t.length;++o<r;)n=(e=t[o])[0],i=e[1]-Mt,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function ns(t){var e=io,n=io,i=0,o=oo,r=Kn,a=za,s=a.key,l=a,u="L",c=.7;function d(s){var d,h,f,p=[],g=[],m=[],v=-1,_=s.length,y=be(e),b=be(i),x=e===n?function(){return h}:be(n),w=i===o?function(){return f}:be(o);function S(){p.push("M",a(t(m),c),u,l(t(g.reverse()),c),"Z")}for(;++v<_;)r.call(this,d=s[v],v)?(g.push([h=+y.call(this,d,v),f=+b.call(this,d,v)]),m.push([+x.call(this,d,v),+w.call(this,d,v)])):g.length&&(S(),g=[],m=[]);return g.length&&S(),p.length?p.join(""):null}return d.x=function(t){return arguments.length?(e=n=t,d):n},d.x0=function(t){return arguments.length?(e=t,d):e},d.x1=function(t){return arguments.length?(n=t,d):n},d.y=function(t){return arguments.length?(i=o=t,d):o},d.y0=function(t){return arguments.length?(i=t,d):i},d.y1=function(t){return arguments.length?(o=t,d):o},d.defined=function(t){return arguments.length?(r=t,d):r},d.interpolate=function(t){return arguments.length?(s="function"==typeof t?a=t:(a=Ua.get(t)||za).key,l=a.reverse||a,u=a.closed?"M":"L",d):s},d.tension=function(t){return arguments.length?(c=t,d):c},d}function is(t){return t.radius}function os(t){return[t.x,t.y]}function rs(){return 64}function as(){return"circle"}function ss(t){var e=Math.sqrt(t/kt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}r.svg.line.radial=function(){var t=Ba(es);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ha.reverse=Va,Va.reverse=Ha,r.svg.area=function(){return ns(R)},r.svg.area.radial=function(){var t=ns(es);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},r.svg.chord=function(){var t=Gi,e=Hi,n=is,i=Ra,o=Na;function r(n,i){var o,r,u=a(this,t,n,i),c=a(this,e,n,i);return"M"+u.p0+s(u.r,u.p1,u.a1-u.a0)+(r=c,(o=u).a0==r.a0&&o.a1==r.a1?l(u.r,u.p1,u.r,u.p0):l(u.r,u.p1,c.r,c.p0)+s(c.r,c.p1,c.a1-c.a0)+l(c.r,c.p1,u.r,u.p0))+"Z"}function a(t,e,r,a){var s=e.call(t,r,a),l=n.call(t,s,a),u=i.call(t,s,a)-Mt,c=o.call(t,s,a)-Mt;return{r:l,a0:u,a1:c,p0:[l*Math.cos(u),l*Math.sin(u)],p1:[l*Math.cos(c),l*Math.sin(c)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(n>kt)+",1 "+e}function l(t,e,n,i){return"Q 0,0 "+i}return r.radius=function(t){return arguments.length?(n=be(t),r):n},r.source=function(e){return arguments.length?(t=be(e),r):t},r.target=function(t){return arguments.length?(e=be(t),r):e},r.startAngle=function(t){return arguments.length?(i=be(t),r):i},r.endAngle=function(t){return arguments.length?(o=be(t),r):o},r},r.svg.diagonal=function(){var t=Gi,e=Hi,n=os;function i(i,o){var r=t.call(this,i,o),a=e.call(this,i,o),s=(r.y+a.y)/2,l=[r,{x:r.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return i.source=function(e){return arguments.length?(t=be(e),i):t},i.target=function(t){return arguments.length?(e=be(t),i):e},i.projection=function(t){return arguments.length?(n=t,i):n},i},r.svg.diagonal.radial=function(){var t=r.svg.diagonal(),e=os,n=t.projection;return t.projection=function(t){return arguments.length?n(function(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]-Mt;return[n*Math.cos(i),n*Math.sin(i)]}}(e=t)):e},t},r.svg.symbol=function(){var t=as,e=rs;function n(n,i){return(ls.get(t.call(this,n,i))||ss)(e.call(this,n,i))}return n.type=function(e){return arguments.length?(t=be(e),n):t},n.size=function(t){return arguments.length?(e=be(t),n):e},n};var ls=r.map({circle:ss,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*cs)),n=e*cs;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/us),n=e*us/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/us),n=e*us/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});r.svg.symbolTypes=ls.keys();var us=Math.sqrt(3),cs=Math.tan(30*It);K.transition=function(t){for(var e,n,i=ps||++vs,o=bs(t),r=[],a=gs||{time:Date.now(),ease:rr,delay:0,duration:250},s=-1,l=this.length;++s<l;){r.push(e=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(n=u[c])&&xs(n,c,o,i,a),e.push(n)}return fs(r,o,i)},K.interrupt=function(t){return this.each(null==t?ds:hs(bs(t)))};var ds=hs(bs());function hs(t){return function(){var e,n,i;(e=this[t])&&(i=e[n=e.active])&&(i.timer.c=null,i.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,i.event&&i.event.interrupt.call(this,this.__data__,i.index))}}function fs(t,e,n){return q(t,ms),t.namespace=e,t.id=n,t}var ps,gs,ms=[],vs=0;function _s(t,e,n,i){var o=t.id,r=t.namespace;return pt(t,"function"==typeof n?function(t,a,s){t[r][o].tween.set(e,i(n.call(t,t.__data__,a,s)))}:(n=i(n),function(t){t[r][o].tween.set(e,n)}))}function ys(t){return null==t&&(t=""),function(){this.textContent=t}}function bs(t){return null==t?"__transition__":"__transition_"+t+"__"}function xs(t,e,n,i,o){var r,a,s,l,u,c=t[n]||(t[n]={active:0,count:0}),d=c[i];function h(n){var o=c.active,h=c[o];for(var p in h&&(h.timer.c=null,h.timer.t=NaN,--c.count,delete c[o],h.event&&h.event.interrupt.call(t,t.__data__,h.index)),c)if(+p<i){var g=c[p];g.timer.c=null,g.timer.t=NaN,--c.count,delete c[p]}a.c=f,De(function(){return a.c&&f(n||1)&&(a.c=null,a.t=NaN),1},0,r),c.active=i,d.event&&d.event.start.call(t,t.__data__,e),u=[],d.tween.forEach(function(n,i){(i=i.call(t,t.__data__,e))&&u.push(i)}),l=d.ease,s=d.duration}function f(o){for(var r=o/s,a=l(r),h=u.length;h>0;)u[--h].call(t,a);if(r>=1)return d.event&&d.event.end.call(t,t.__data__,e),--c.count?delete c[i]:delete t[n],1}d||(r=o.time,a=De(function(t){var e=d.delay;if(a.t=e+r,e<=t)return h(t-e);a.c=h},0,r),d=c[i]={tween:new T,time:r,timer:a,delay:o.delay,duration:o.duration,ease:o.ease,index:e},o=null,++c.count)}ms.call=K.call,ms.empty=K.empty,ms.node=K.node,ms.size=K.size,r.transition=function(t,e){return t&&t.transition?ps?t.transition(e):t:r.selection().transition(t)},r.transition.prototype=ms,ms.select=function(t){var e,n,i,o=this.id,r=this.namespace,a=[];t=J(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(i=u[c])&&(n=t.call(i,i.__data__,c,s))?("__data__"in i&&(n.__data__=i.__data__),xs(n,c,r,o,i[r][o]),e.push(n)):e.push(null)}return fs(a,r,o)},ms.selectAll=function(t){var e,n,i,o,r,a=this.id,s=this.namespace,l=[];t=Q(t);for(var u=-1,c=this.length;++u<c;)for(var d=this[u],h=-1,f=d.length;++h<f;)if(i=d[h]){r=i[s][a],n=t.call(i,i.__data__,h,u),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(o=n[p])&&xs(o,p,s,a,r),e.push(o)}return fs(l,s,a)},ms.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=ft(t));for(var o=0,r=this.length;o<r;o++){i.push(e=[]);for(var a,s=0,l=(a=this[o]).length;s<l;s++)(n=a[s])&&t.call(n,n.__data__,s,o)&&e.push(n)}return fs(i,this.namespace,this.id)},ms.tween=function(t,e){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(t):pt(this,null==e?function(e){e[i][n].tween.remove(t)}:function(o){o[i][n].tween.set(t,e)})},ms.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var n="transform"==t?mr:Yo,i=r.ns.qualify(t);function o(){this.removeAttribute(i)}function a(){this.removeAttributeNS(i.space,i.local)}return _s(this,"attr."+t,e,i.local?function(t){return null==t?a:(t+="",function(){var e,o=this.getAttributeNS(i.space,i.local);return o!==t&&(e=n(o,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}:function(t){return null==t?o:(t+="",function(){var e,o=this.getAttribute(i);return o!==t&&(e=n(o,t),function(t){this.setAttribute(i,e(t))})})})},ms.attrTween=function(t,e){var n=r.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,i){var o=e.call(this,t,i,this.getAttributeNS(n.space,n.local));return o&&function(t){this.setAttributeNS(n.space,n.local,o(t))}}:function(t,i){var o=e.call(this,t,i,this.getAttribute(n));return o&&function(t){this.setAttribute(n,o(t))}})},ms.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function o(){this.style.removeProperty(t)}return _s(this,"style."+t,e,function(e){return null==e?o:(e+="",function(){var i,o=c(this).getComputedStyle(this,null).getPropertyValue(t);return o!==e&&(i=Yo(o,e),function(e){this.style.setProperty(t,i(e),n)})})})},ms.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(i,o){var r=e.call(this,i,o,c(this).getComputedStyle(this,null).getPropertyValue(t));return r&&function(e){this.style.setProperty(t,r(e),n)}})},ms.text=function(t){return _s(this,"text",t,ys)},ms.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},ms.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=r.ease.apply(r,arguments)),pt(this,function(i){i[n][e].ease=t}))},ms.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:pt(this,"function"==typeof t?function(i,o,r){i[n][e].delay=+t.call(i,i.__data__,o,r)}:(t=+t,function(i){i[n][e].delay=t}))},ms.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:pt(this,"function"==typeof t?function(i,o,r){i[n][e].duration=Math.max(1,t.call(i,i.__data__,o,r))}:(t=Math.max(1,t),function(i){i[n][e].duration=t}))},ms.each=function(t,e){var n=this.id,i=this.namespace;if(arguments.length<2){var o=gs,a=ps;try{ps=n,pt(this,function(e,o,r){gs=e[i][n],t.call(e,e.__data__,o,r)})}finally{gs=o,ps=a}}else pt(this,function(o){var a=o[i][n];(a.event||(a.event=r.dispatch("start","end","interrupt"))).on(t,e)});return this},ms.transition=function(){for(var t,e,n,i=this.id,o=++vs,r=this.namespace,a=[],s=0,l=this.length;s<l;s++){a.push(t=[]);for(var u,c=0,d=(u=this[s]).length;c<d;c++)(e=u[c])&&xs(e,c,r,o,{time:(n=e[r][i]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return fs(a,r,o)},r.svg.axis=function(){var t,e=r.scale.linear(),n=ws,i=6,o=6,a=3,l=[10],u=null;function c(s){s.each(function(){var s,c=r.select(this),d=this.__chart__||e,h=this.__chart__=e.copy(),f=null==u?h.ticks?h.ticks.apply(h,l):h.domain():u,p=null==t?h.tickFormat?h.tickFormat.apply(h,l):R:t,g=c.selectAll(".tick").data(f,h),m=g.enter().insert("g",".domain").attr("class","tick").style("opacity",At),v=r.transition(g.exit()).style("opacity",At).remove(),_=r.transition(g.order()).style("opacity",1),y=Math.max(i,0)+a,b=da(h),x=c.selectAll(".domain").data([0]),w=(x.enter().append("path").attr("class","domain"),r.transition(x));m.append("line"),m.append("text");var S,T,C,L,A=m.select("line"),D=_.select("line"),k=g.select("text").text(p),P=m.select("text"),E=_.select("text"),M="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=Ts,S="x",C="y",T="x2",L="y2",k.attr("dy",M<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+b[0]+","+M*o+"V0H"+b[1]+"V"+M*o)):(s=Cs,S="y",C="x",T="y2",L="x2",k.attr("dy",".32em").style("text-anchor",M<0?"end":"start"),w.attr("d","M"+M*o+","+b[0]+"H0V"+b[1]+"H"+M*o)),A.attr(L,M*i),P.attr(C,M*y),D.attr(T,0).attr(L,M*i),E.attr(S,0).attr(C,M*y),h.rangeBand){var I=h,O=I.rangeBand()/2;d=h=function(t){return I(t)+O}}else d.rangeBand?d=h:v.call(s,h,d);m.call(s,d,h),_.call(s,h,h)})}return c.scale=function(t){return arguments.length?(e=t,c):e},c.orient=function(t){return arguments.length?(n=t in Ss?t+"":ws,c):n},c.ticks=function(){return arguments.length?(l=s(arguments),c):l},c.tickValues=function(t){return arguments.length?(u=t,c):u},c.tickFormat=function(e){return arguments.length?(t=e,c):t},c.tickSize=function(t){var e=arguments.length;return e?(i=+t,o=+arguments[e-1],c):i},c.innerTickSize=function(t){return arguments.length?(i=+t,c):i},c.outerTickSize=function(t){return arguments.length?(o=+t,c):o},c.tickPadding=function(t){return arguments.length?(a=+t,c):a},c.tickSubdivide=function(){return arguments.length&&c},c};var ws="bottom",Ss={top:1,right:1,bottom:1,left:1};function Ts(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate("+(isFinite(i)?i:n(t))+",0)"})}function Cs(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate(0,"+(isFinite(i)?i:n(t))+")"})}r.svg.brush=function(){var t,e,n=H(h,"brushstart","brush","brushend"),i=null,o=null,a=[0,0],s=[0,0],l=!0,u=!0,d=As[0];function h(t){t.each(function(){var t=r.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(d,R);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Ls[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",h.empty()?"none":null);var a,s=r.transition(t),l=r.transition(e);i&&(a=da(i),l.attr("x",a[0]).attr("width",a[1]-a[0]),p(s)),o&&(a=da(o),l.attr("y",a[0]).attr("height",a[1]-a[0]),g(s)),f(s)})}function f(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+a[+/e$/.test(t)]+","+s[+/^s/.test(t)]+")"})}function p(t){t.select(".extent").attr("x",a[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",a[1]-a[0])}function g(t){t.select(".extent").attr("y",s[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function m(){var d,m,v=this,_=r.select(r.event.target),y=n.of(v,arguments),b=r.select(v),x=_.datum(),w=!/^(n|s)$/.test(x)&&i,S=!/^(e|w)$/.test(x)&&o,T=_.classed("extent"),C=St(v),L=r.mouse(v),A=r.select(c(v)).on("keydown.brush",function(){32==r.event.keyCode&&(T||(d=null,L[0]-=a[1],L[1]-=s[1],T=2),z())}).on("keyup.brush",function(){32==r.event.keyCode&&2==T&&(L[0]+=a[1],L[1]+=s[1],T=0,z())});if(r.event.changedTouches?A.on("touchmove.brush",P).on("touchend.brush",M):A.on("mousemove.brush",P).on("mouseup.brush",M),b.interrupt().selectAll("*").interrupt(),T)L[0]=a[0]-L[0],L[1]=s[0]-L[1];else if(x){var D=+/w$/.test(x),k=+/^n/.test(x);m=[a[1-D]-L[0],s[1-k]-L[1]],L[0]=a[D],L[1]=s[k]}else r.event.altKey&&(d=L.slice());function P(){var t=r.mouse(v),e=!1;m&&(t[0]+=m[0],t[1]+=m[1]),T||(r.event.altKey?(d||(d=[(a[0]+a[1])/2,(s[0]+s[1])/2]),L[0]=a[+(t[0]<d[0])],L[1]=s[+(t[1]<d[1])]):d=null),w&&E(t,i,0)&&(p(b),e=!0),S&&E(t,o,1)&&(g(b),e=!0),e&&(f(b),y({type:"brush",mode:T?"move":"resize"}))}function E(n,i,o){var r,c,h=da(i),f=h[0],p=h[1],g=L[o],m=o?s:a,v=m[1]-m[0];if(T&&(f-=g,p-=v+g),r=(o?u:l)?Math.max(f,Math.min(p,n[o])):n[o],T?c=(r+=g)+v:(d&&(g=Math.max(f,Math.min(p,2*d[o]-r))),g<r?(c=r,r=g):c=g),m[0]!=r||m[1]!=c)return o?e=null:t=null,m[0]=r,m[1]=c,!0}function M(){P(),b.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),r.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),y({type:"brushend"})}b.style("pointer-events","none").selectAll(".resize").style("display",null),r.select("body").style("cursor",_.style("cursor")),y({type:"brushstart"}),P()}return h.event=function(i){i.each(function(){var i=n.of(this,arguments),o={x:a,y:s,i:t,j:e},l=this.__chart__||o;this.__chart__=o,ps?r.select(this).transition().each("start.brush",function(){t=l.i,e=l.j,a=l.x,s=l.y,i({type:"brushstart"})}).tween("brush:brush",function(){var n=Ko(a,o.x),r=Ko(s,o.y);return t=e=null,function(t){a=o.x=n(t),s=o.y=r(t),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){t=o.i,e=o.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},h.x=function(t){return arguments.length?(d=As[!(i=t)<<1|!o],h):i},h.y=function(t){return arguments.length?(d=As[!i<<1|!(o=t)],h):o},h.clamp=function(t){return arguments.length?(i&&o?(l=!!t[0],u=!!t[1]):i?l=!!t:o&&(u=!!t),h):i&&o?[l,u]:i?l:o?u:null},h.extent=function(n){var r,l,u,c,d;return arguments.length?(i&&(r=n[0],l=n[1],o&&(r=r[0],l=l[0]),t=[r,l],i.invert&&(r=i(r),l=i(l)),l<r&&(d=r,r=l,l=d),r==a[0]&&l==a[1]||(a=[r,l])),o&&(u=n[0],c=n[1],i&&(u=u[1],c=c[1]),e=[u,c],o.invert&&(u=o(u),c=o(c)),c<u&&(d=u,u=c,c=d),u==s[0]&&c==s[1]||(s=[u,c])),h):(i&&(t?(r=t[0],l=t[1]):(r=a[0],l=a[1],i.invert&&(r=i.invert(r),l=i.invert(l)),l<r&&(d=r,r=l,l=d))),o&&(e?(u=e[0],c=e[1]):(u=s[0],c=s[1],o.invert&&(u=o.invert(u),c=o.invert(c)),c<u&&(d=u,u=c,c=d))),i&&o?[[r,u],[l,c]]:i?[r,l]:o&&[u,c])},h.clear=function(){return h.empty()||(a=[0,0],s=[0,0],t=e=null),h},h.empty=function(){return!!i&&a[0]==a[1]||!!o&&s[0]==s[1]},r.rebind(h,n,"on")};var Ls={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},As=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ds=Fe.format=hn.timeFormat,ks=Ds.utc,Ps=ks("%Y-%m-%dT%H:%M:%S.%LZ");function Es(t){return t.toISOString()}function Ms(t,e,n){function i(e){return t(e)}function o(t,n){var i=(t[1]-t[0])/n,o=r.bisect(Os,i);return o==Os.length?[e.year,ya(t.map(function(t){return t/31536e6}),n)[2]]:o?e[i/Os[o-1]<Os[o]/i?o-1:o]:[Fs,ya(t,n)[2]]}return i.invert=function(e){return Is(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Is)},i.nice=function(t,e){var n=i.domain(),r=ca(n),a=null==t?o(r,10):"number"==typeof t&&o(r,t);function s(n){return!isNaN(n)&&!t.range(n,Is(+n+1),e).length}return a&&(t=a[0],e=a[1]),i.domain(fa(n,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=Is(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=Is(+e+1);return e}}:t))},i.ticks=function(t,e){var n=ca(i.domain()),r=null==t?o(n,10):"number"==typeof t?o(n,t):!t.range&&[{range:t},e];return r&&(t=r[0],e=r[1]),t.range(n[0],Is(+n[1]+1),e<1?1:e)},i.tickFormat=function(){return n},i.copy=function(){return Ms(t.copy(),e,n)},va(i,t)}function Is(t){return new Date(t)}Ds.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Es:Ps,Es.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Es.toString=Ps.toString,Fe.second=Ue(function(t){return new $e(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Fe.seconds=Fe.second.range,Fe.seconds.utc=Fe.second.utc.range,Fe.minute=Ue(function(t){return new $e(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Fe.minutes=Fe.minute.range,Fe.minutes.utc=Fe.minute.utc.range,Fe.hour=Ue(function(t){var e=t.getTimezoneOffset()/60;return new $e(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Fe.hours=Fe.hour.range,Fe.hours.utc=Fe.hour.utc.range,Fe.month=Ue(function(t){return(t=Fe.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Fe.months=Fe.month.range,Fe.months.utc=Fe.month.utc.range;var Os=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Rs=[[Fe.second,1],[Fe.second,5],[Fe.second,15],[Fe.second,30],[Fe.minute,1],[Fe.minute,5],[Fe.minute,15],[Fe.minute,30],[Fe.hour,1],[Fe.hour,3],[Fe.hour,6],[Fe.hour,12],[Fe.day,1],[Fe.day,2],[Fe.week,1],[Fe.month,1],[Fe.month,3],[Fe.year,1]],Ns=Ds.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Kn]]),Fs={range:function(t,e,n){return r.range(Math.ceil(t/n)*n,+e,n).map(Is)},floor:R,ceil:R};Rs.year=Fe.year,Fe.scale=function(){return Ms(r.scale.linear(),Rs,Ns)};var $s=Rs.map(function(t){return[t[0].utc,t[1]]}),js=ks.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Kn]]);function Bs(t){return JSON.parse(t.responseText)}function Us(t){var e=l.createRange();return e.selectNode(l.body),e.createContextualFragment(t.responseText)}$s.year=Fe.year.utc,Fe.scale.utc=function(){return Ms(r.scale.linear(),$s,js)},r.text=xe(function(t){return t.responseText}),r.json=function(t,e){return we(t,"application/json",Bs,e)},r.html=function(t,e){return we(t,"text/html",Us,e)},r.xml=xe(function(t){return t.responseXML}),this.d3=r,void 0===(o="function"==typeof(i=r)?i.call(e,n,e,t):i)||(t.exports=o)}()},function(t,e,n){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";var i=n(34);t.exports=function(t,e,n,o,r){var a=new Error(t);return i(a,e,n,o,r)}},function(t,e,n){"use strict";var i=n(1),o=n(35),r=n(33),a=n(32),s=n(31),l=n(13),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(30);t.exports=function(t){return new Promise(function(e,c){var d=t.data,h=t.headers;i.isFormData(d)&&delete h["Content-Type"];var f=new XMLHttpRequest,p="onreadystatechange",g=!1;if(window.XMLHttpRequest||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in f||s(t.url)||(f=new window.XDomainRequest,p="onload",g=!0,f.onprogress=function(){},f.ontimeout=function(){}),t.auth){var m=t.auth.username||"",v=t.auth.password||"";h.Authorization="Basic "+u(m+":"+v)}if(f.open(t.method.toUpperCase(),r(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f[p]=function(){if(f&&(4===f.readyState||g)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?f.response:f.responseText,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:n,config:t,request:f};o(e,c,i),f=null}},f.onerror=function(){c(l("Network Error",t,null,f)),f=null},f.ontimeout=function(){c(l("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},i.isStandardBrowserEnv()){var _=n(29),y=(t.withCredentials||s(t.url))&&t.xsrfCookieName?_.read(t.xsrfCookieName):void 0;y&&(h[t.xsrfHeaderName]=y)}if("setRequestHeader"in f&&i.forEach(h,function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete h[e]:f.setRequestHeader(e,t)}),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),c(t),f=null)}),void 0===d&&(d=null),f.send(d)})}},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},function(t,e,n){t.exports=n(39)},function(t,e,n){var i,o,r;
/*!
 * jQuery Validation Plugin v1.17.0
 *
 * https://jqueryvalidation.org/
 *
 * Copyright (c) 2017 Jrn Zaefferer
 * Released under the MIT license
 */o=[n(0)],void 0===(r="function"==typeof(i=function(t){t.extend(t.fn,{validate:function(e){if(this.length){var n=t.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(e){n.submitButton=e.currentTarget,t(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(e){function i(){var i,o;return n.submitButton&&(n.settings.submitHandler||n.formSubmitted)&&(i=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),!n.settings.submitHandler||(o=n.settings.submitHandler.call(n,n.currentForm,e),i&&i.remove(),void 0!==o&&o)}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,n,i;return t(this[0]).is("form")?e=this.validate().form():(i=[],e=!0,n=t(this[0].form).validate(),this.each(function(){(e=n.element(this)&&e)||(i=i.concat(n.errorList))}),n.errorList=i),e},rules:function(e,n){var i,o,r,a,s,l,u=this[0];if(null!=u&&(!u.form&&u.hasAttribute("contenteditable")&&(u.form=this.closest("form")[0],u.name=this.attr("name")),null!=u.form)){if(e)switch(i=t.data(u.form,"validator").settings,o=i.rules,r=t.validator.staticRules(u),e){case"add":t.extend(r,t.validator.normalizeRule(n)),delete r.messages,o[u.name]=r,n.messages&&(i.messages[u.name]=t.extend(i.messages[u.name],n.messages));break;case"remove":return n?(l={},t.each(n.split(/\s/),function(t,e){l[e]=r[e],delete r[e]}),l):(delete o[u.name],r)}return(a=t.validator.normalizeRules(t.extend({},t.validator.classRules(u),t.validator.attributeRules(u),t.validator.dataRules(u),t.validator.staticRules(u)),u)).required&&(s=a.required,delete a.required,a=t.extend({required:s},a)),a.remote&&(s=a.remote,delete a.remote,a=t.extend(a,{remote:s})),a}}}),t.extend(t.expr.pseudos||t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){var n=t(e).val();return null!==n&&!!t.trim(""+n)},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:void 0===n?e:(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return n})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(e,n){9===n.which&&""===this.elementValue(e)||-1!==t.inArray(n.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(i):t(e).addClass(n).removeClass(i)},unhighlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(i):t(e).removeClass(n).addClass(i)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}."),step:t.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var e,n=this.groups={};function i(e){!this.form&&this.hasAttribute("contenteditable")&&(this.form=t(this).closest("form")[0],this.name=t(this).attr("name"));var n=t.data(this.form,"validator"),i="on"+e.type.replace(/^validate/,""),o=n.settings;o[i]&&!t(this).is(o.ignore)&&o[i].call(n,this,e)}t.each(this.settings.groups,function(e,i){"string"==typeof i&&(i=i.split(/\s/)),t.each(i,function(t,i){n[i]=e})}),e=this.settings.rules,t.each(e,function(n,i){e[n]=t.validator.normalizeRule(i)}),t(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",i).on("click.validate","select, option, [type='radio'], [type='checkbox']",i),this.settings.invalidHandler&&t(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var n,i,o=this.clean(e),r=this.validationTargetFor(o),a=this,s=!0;return void 0===r?delete this.invalid[o.name]:(this.prepareElement(r),this.currentElements=t(r),(i=this.groups[r.name])&&t.each(this.groups,function(t,e){e===i&&t!==r.name&&(o=a.validationTargetFor(a.clean(a.findByName(t))))&&o.name in a.invalid&&(a.currentElements.push(o),s=a.check(o)&&s)}),n=!1!==this.check(r),s=s&&n,this.invalid[r.name]=!n,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t(e).attr("aria-invalid",!n)),s},showErrors:function(e){if(e){var n=this;t.extend(this.errorMap,e),this.errorList=t.map(this.errorMap,function(t,e){return{message:t,element:n.findByName(e)[0]}}),this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)void 0!==t[e]&&null!==t[e]&&!1!==t[e]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var i=this.name||t(this).attr("name");return!i&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=t(this).closest("form")[0],this.name=i),!(i in n||!e.objectLength(t(this).rules())||(n[i]=!0,0))})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([])},reset:function(){this.resetInternals(),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n,i,o=t(e),r=e.type;return"radio"===r||"checkbox"===r?this.findByName(e.name).filter(":checked").val():"number"===r&&void 0!==e.validity?e.validity.badInput?"NaN":o.val():(n=e.hasAttribute("contenteditable")?o.text():o.val(),"file"===r?"C:\\fakepath\\"===n.substr(0,12)?n.substr(12):(i=n.lastIndexOf("/"))>=0?n.substr(i+1):(i=n.lastIndexOf("\\"))>=0?n.substr(i+1):n:"string"==typeof n?n.replace(/\r/g,""):n)},check:function(e){e=this.validationTargetFor(this.clean(e));var n,i,o,r,a=t(e).rules(),s=t.map(a,function(t,e){return e}).length,l=!1,u=this.elementValue(e);if("function"==typeof a.normalizer?r=a.normalizer:"function"==typeof this.settings.normalizer&&(r=this.settings.normalizer),r){if("string"!=typeof(u=r.call(e,u)))throw new TypeError("The normalizer should return a string value.");delete a.normalizer}for(i in a){o={method:i,parameters:a[i]};try{if("dependency-mismatch"===(n=t.validator.methods[i].call(this,u,e,o.parameters))&&1===s){l=!0;continue}if(l=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,o),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+o.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+o.method+"' method."),t}}if(!l)return this.objectLength(a)&&this.successList.push(e),!0},customDataMessage:function(e,n){return t(e).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,n){"string"==typeof n&&(n={method:n});var i=this.findDefined(this.customMessage(e.name,n.method),this.customDataMessage(e,n.method),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),o=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,n.parameters,e):o.test(i)&&(i=t.validator.format(i.replace(o,"{$1}"),n.parameters)),i},formatAndAdd:function(t,e){var n=this.defaultMessage(t,e);this.errorList.push({message:n,element:t,method:e.method}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,n;for(t=0;this.errorList[t];t++)n=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var i,o,r,a,s=this.errorsFor(e),l=this.idOrName(e),u=t(e).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(n)):(s=t("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(n||""),i=s,this.settings.wrapper&&(i=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,t(e)):i.insertAfter(e),s.is("label")?s.attr("for",l):0===s.parents("label[for='"+this.escapeCssMeta(l)+"']").length&&(r=s.attr("id"),u?u.match(new RegExp("\\b"+this.escapeCssMeta(r)+"\\b"))||(u+=" "+r):u=r,t(e).attr("aria-describedby",u),(o=this.groups[e.name])&&(a=this,t.each(a.groups,function(e,n){n===o&&t("[name='"+a.escapeCssMeta(e)+"']",a.currentForm).attr("aria-describedby",s.attr("id"))})))),!n&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var n=this.escapeCssMeta(this.idOrName(e)),i=t(e).attr("aria-describedby"),o="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(o=o+", #"+this.escapeCssMeta(i).replace(/\s+/g,", #")),this.errors().filter(o)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(e,n){return!!t(e,n.form).length},function:function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,t(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t(e).removeClass(this.settings.pendingClass),n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.submitButton&&t("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,n){return n="string"==typeof n&&n||"remote",t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:n})})},destroy:function(){this.resetForm(),t(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},i=t(e).attr("class");return i&&t.each(i.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},normalizeAttributeRule:function(t,e,n,i){/min|max|step/.test(n)&&(null===e||/number|range|text/.test(e))&&(i=Number(i),isNaN(i)&&(i=void 0)),i||0===i?t[n]=i:e===n&&"range"!==e&&(t[n]=!0)},attributeRules:function(e){var n,i,o={},r=t(e),a=e.getAttribute("type");for(n in t.validator.methods)"required"===n?(""===(i=e.getAttribute(n))&&(i=!0),i=!!i):i=r.attr(n),this.normalizeAttributeRule(o,a,n,i);return o.maxlength&&/-1|2147483647|524288/.test(o.maxlength)&&delete o.maxlength,o},dataRules:function(e){var n,i,o={},r=t(e),a=e.getAttribute("type");for(n in t.validator.methods)i=r.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),this.normalizeAttributeRule(o,a,n,i);return o},staticRules:function(e){var n={},i=t.data(e.form,"validator");return i.settings.rules&&(n=t.validator.normalizeRule(i.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(i,o){if(!1!==o){if(o.param||o.depends){var r=!0;switch(typeof o.depends){case"string":r=!!t(o.depends,n.form).length;break;case"function":r=o.depends.call(n,n)}r?e[i]=void 0===o.param||o.param:(t.data(n.form,"validator").resetElements(t(n)),delete e[i])}}else delete e[i]}),t.each(e,function(i,o){e[i]=t.isFunction(o)&&"normalizer"!==i?o(n):o}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),function(){n[this]=!0}),e=n}return e},addMethod:function(e,n,i){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==i?i:t.validator.messages[e],n.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var o=t(n).val();return o&&o.length>0}return this.checkable(n)?this.getLength(e,n)>0:e.length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||o>=i},maxlength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||o<=i},rangelength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||o>=i[0]&&o<=i[1]},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||t<=n},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},step:function(e,n,i){var o,r=t(n).attr("type"),a="Step attribute on input type "+r+" is not supported.",s=new RegExp("\\b"+r+"\\b"),l=r&&!s.test(["text","number","range"].join()),u=function(t){var e=(""+t).match(/(?:\.(\d+))?$/);return e&&e[1]?e[1].length:0},c=function(t){return Math.round(t*Math.pow(10,o))},d=!0;if(l)throw new Error(a);return o=u(i),(u(e)>o||c(e)%c(i)!=0)&&(d=!1),this.optional(n)||d},equalTo:function(e,n,i){var o=t(i);return this.settings.onfocusout&&o.not(".validate-equalTo-blur").length&&o.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){t(n).valid()}),e===o.val()},remote:function(e,n,i,o){if(this.optional(n))return"dependency-mismatch";o="string"==typeof o&&o||"remote";var r,a,s,l=this.previousValue(n,o);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),l.originalMessage=l.originalMessage||this.settings.messages[n.name][o],this.settings.messages[n.name][o]=l.message,i="string"==typeof i&&{url:i}||i,s=t.param(t.extend({data:e},i.data)),l.old===s?l.valid:(l.old=s,r=this,this.startRequest(n),(a={})[n.name]=e,t.ajax(t.extend(!0,{mode:"abort",port:"validate"+n.name,dataType:"json",data:a,context:r.currentForm,success:function(t){var i,a,s,u=!0===t||"true"===t;r.settings.messages[n.name][o]=l.originalMessage,u?(s=r.formSubmitted,r.resetInternals(),r.toHide=r.errorsFor(n),r.formSubmitted=s,r.successList.push(n),r.invalid[n.name]=!1,r.showErrors()):(i={},a=t||r.defaultMessage(n,{method:o,parameters:e}),i[n.name]=l.message=a,r.invalid[n.name]=!0,r.showErrors(i)),l.valid=u,r.stopRequest(n,u)}},i)),"pending")}}});var e,n={};return t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,i){var o=t.port;"abort"===t.mode&&(n[o]&&n[o].abort(),n[o]=i)}):(e=t.ajax,t.ajax=function(i){var o=("mode"in i?i:t.ajaxSettings).mode,r=("port"in i?i:t.ajaxSettings).port;return"abort"===o?(n[r]&&n[r].abort(),n[r]=e.apply(this,arguments),n[r]):e.apply(this,arguments)}),t})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){n(3)(n(99))},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return o});var i=n(4);function o(){let e;if(void 0!==t)e=t;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}let n=e.Promise;if(n){var o=null;try{o=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===o&&!n.cast)return}e.Promise=i.a}}).call(this,n(5))},function(t,e,n){"use strict";n.r(e);n(108);var i=n(0),o=n.n(i),r=(n(107),n(106),n(105),n(104),n(103),n(102),n(101),n(100),n(84),n(83),n(82),n(81),n(79),n(4)),a=n(19);r.a.polyfill=a.a,r.a.Promise=r.a;var s=r.a;s.polyfill();n(78),n(77),n(76),n(75),n(74),n(10);var l=n(8),u=n.n(l);n(73),n(17),n(72),n(71),n(70),n(69),n(68),n(67),n(66),n(65),n(64),n(63),n(62),n(61),n(60),n(59),n(58),n(57),n(56),n(55),n(54),n(53),n(52),n(51),n(50),n(49),n(48),n(47),n(46),n(45),n(7),n(40),n(21);window.jQuery=o.a,window.$=o.a,n(18),n(98),n(96),n(94),n(92),n(90),n(88),n(86),window.c3=u.a,n(42)},function(t,e,n){(function(t,e,n){TDAR.vuejs.editcollectionapp=function(t,e,n,i,o,r){"use strict";return{init:function(n){var o=!1;return null!=n&&1==n.enableUnmanagedCollections&&(o=!0),new i({el:"#editCollectionApp",data:{managedAdditions:[],managedRemovals:[],unmanagedAdditions:[],unmanagedRemovals:[],enableUnmanagedCollections:o},mounted:function(){t.log("enableUnmanagedCollections",this.enableUnmanagedCollections)},computed:{pendingRemovals:function(){return this.managedRemovals.length+this.unmanagedRemovals.length},pendingAdditions:function(){return this.managedAdditions.length+this.unmanagedAdditions.length},pendingAdditionText:function(){var t=this.pendingAdditions;return t<=1?"resource":t+" resources"},pendingRemovalText:function(){var t=this.pendingRemovals;return t<=1?"resource":t+" resources"}},methods:{ellipse:function(t){return r.common.htmlEncode(r.ellipsify(t,80))},search:function(e,n){for(var i=0;i<n.length;i++)if(n[i].id==e)return t.debug("Found value "+e+" at position "+i),i;return-1},removeFromArray:function(e,n){var i=this.search(e,n);-1!==i&&(t.debug("Removing "+e+" at  "+i),n.splice(i,1))},undoModification:function(n,i,o){var a=e(o?"#resource_datatable":"#existing_resources_datatable");i?o?(t.debug("Removing "+n+" from managed additions"),this.removeFromArray(n,this.managedAdditions)):(t.debug("Removing "+n+" from managed removals"),this.removeFromArray(n,this.managedRemovals)):o?(t.debug("Removing "+n+" from unmanaged additions"),this.removeFromArray(n,this.unmanagedAdditions)):(t.debug("Removing "+n+" from unmanaged removals"),this.removeFromArray(n,this.unmanagedRemovals));try{r.datatable.removePendingChange(parseInt(n),i,o,a)}catch(e){t.warn(e)}}}})},main:function(){r.vuejs.editcollectionapp.init(appId)}}}(console,t,window,e,0,TDAR)}).call(this,n(0),n(7),n(16))},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";var i=n(11);function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new i(t),e(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},t.exports=o},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";var i=n(1);t.exports=function(t,e,n){return i.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";var i=n(1),o=n(26),r=n(12),a=n(9),s=n(25),l=n(24);function u(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return u(t),t.baseURL&&!s(t.url)&&(t.url=l(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return u(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return r(e)||(u(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var i=n(1);function o(){this.handlers=[]}o.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=o},function(t,e,n){"use strict";var i=n(1);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,n,o,r,a){var s=[];s.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),i.isString(o)&&s.push("path="+o),i.isString(r)&&s.push("domain="+r),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(){this.message="String contains an invalid character"}o.prototype=new Error,o.prototype.code=5,o.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,n,r=String(t),a="",s=0,l=i;r.charAt(0|s)||(l="=",s%1);a+=l.charAt(63&e>>8-s%1*8)){if((n=r.charCodeAt(s+=.75))>255)throw new o;e=e<<8|n}return a}},function(t,e,n){"use strict";var i=n(1);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=o(window.location.href),function(e){var n=i.isString(e)?o(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var i=n(1),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,r,a={};return t?(i.forEach(t.split("\n"),function(t){if(r=t.indexOf(":"),e=i.trim(t.substr(0,r)).toLowerCase(),n=i.trim(t.substr(r+1)),e){if(a[e]&&o.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}}),a):a}},function(t,e,n){"use strict";var i=n(1);function o(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(i.isURLSearchParams(e))r=e.toString();else{var a=[];i.forEach(e,function(t,e){null!==t&&void 0!==t&&(i.isArray(t)&&(e+="[]"),i.isArray(t)||(t=[t]),i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(o(e)+"="+o(t))}))}),r=a.join("&")}return r&&(t+=(-1===t.indexOf("?")?"?":"&")+r),t}},function(t,e,n){"use strict";t.exports=function(t,e,n,i,o){return t.config=e,n&&(t.code=n),t.request=i,t.response=o,t}},function(t,e,n){"use strict";var i=n(13);t.exports=function(t,e,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";var i=n(1);t.exports=function(t,e){i.forEach(t,function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])})}},function(t,e,n){"use strict";var i=n(9),o=n(1),r=n(28),a=n(27);function s(t){this.defaults=t,this.interceptors={request:new r,response:new r}}s.prototype.request=function(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),(t=o.merge(i,this.defaults,{method:"get"},t)).method=t.method.toLowerCase();var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},o.forEach(["delete","get","head","options"],function(t){s.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){s.prototype[t]=function(e,n,i){return this.request(o.merge(i||{},{method:t,url:e,data:n}))}}),t.exports=s},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){"use strict";var i=n(1),o=n(15),r=n(37),a=n(9);function s(t){var e=new r(t),n=o(r.prototype.request,e);return i.extend(n,r.prototype,e),i.extend(n,e),n}var l=s(a);l.Axios=r,l.create=function(t){return s(i.merge(a,t))},l.Cancel=n(11),l.CancelToken=n(23),l.isCancel=n(12),l.all=function(t){return Promise.all(t)},l.spread=n(22),t.exports=l,t.exports.default=l},function(t,e,n){"use strict";(function(t,e){var i=n(7);TDAR.vuejs.collectionwidget=function(t,e,n,i,o,r){return{init:function(n){return e("#addToExisting").popover({placement:"right",delay:{hide:2e3}}),new i({el:n,data:{items:[{id:"1",name:"Sample"}],selectedCollection:0,pick:"existing",options:[],unmanagedEnabled:!0,newCollectionName:"",newCollectionDescription:"",managedCollectionsToRemove:[],unmanagedCollectionsToRemove:[],changesMade:!1,showPermission:!1,managedResource:!0,resourceId:-1,administrator:!1,canEdit:!1,collections:{managed:[],unmanaged:[]},progressStatus:0,lastSavedCollectionId:0},watch:{newCollectionName:function(t){i.set(this,"changesMade",!0)},selectedCollection:function(t){i.set(this,"changesMade",!0)}},mounted:function(){var n=e(this.$el);t.log("Calling mounting functions"),null!=n.data("resourceId")&&(i.set(this,"administrator",n.data("administrator")),i.set(this,"canEdit",n.data("canEdit")),i.set(this,"unmanagedEnabled",n.data("unmanagedEnabled")),i.set(this,"resourceId",n.data("resourceId")),t.log("Mounted"),t.log("Is Administrator: ",this.administrator),t.log("Is unmanagedEnabled: ",this.unmanagedEnabled),void 0!=this.unmanagedEnabled&&0!=this.unmanagedEnabled||(t.log("Forcing resource to be managed"),i.set(this,"managedResource",!0)),this._getCollectionsForResource())},methods:{_arrayRemove:function(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},ellipse:function(t){return r.common.htmlEncode(r.ellipsify(t,80))},_resetForm:function(){t.log("Resetting the 'Add to Collection' form"),this.selectedCollection="",this.pick="existing",this.newCollectionName="",this.newCollectionDescription="",this.managedResource=!1,this.managedCollectionsToRemove=[],this.unmanagedCollectionsToRemove=[],i.set(this,"changesMade",!1),void 0!=this.unmanagedEnabled&&0!=this.unmanagedEnabled||i.set(this,"managedResource",!0),e("#collection-list").selectize()[0].selectize.clear()},getCollections:function(){t.log("Getting list of all available collections");var e=this,n="ADD_TO_COLLECTION";1==this.unmanagedEnabled&&(n=ADD_TO_COLLECTION),o.get("/api/lookup/collection?permission="+n).then(function(t){e.items=t.data,i.set(this,"changesMade",!0)})},_addResourceToCollection:function(e){t.log("Adding resource to collection "+e);var n=this,i={resourceId:n.resourceId,collectionId:e,addAsManagedResource:this.managedResource};o.post("/api/collection/addtocollection",Qs.stringify(i)).then(function(){n._getCollectionsForResource(),n._resetForm()}).catch(function(e){t.log("An error occurred when adding to collection"),t.log(e)})},_getCollectionsForResource:function(){t.log("Getting all collections for the resource "+this.resourceId);var e=this,n="/api/collection/resourcecollections?resourceId="+this.resourceId;t.log("Calling ",n);var r=!1;o.get(n).then(function(n){t.log("response is:",n.data),r=!0,t.log("Managed collections: ",n.data.managed.length),t.log("Unmanaged collections: ",n.data.unmanaged.length),i.set(e,"collections",n.data)}).catch(function(e){t.error("An error ocurred getting a list of collections for this resource"),t.error(e)}),t.log("This was called? ",r)},_removeResourceFromCollection:function(e,n){t.log("removing collection id",e),i.set(this,"changesMade",!0);var r={resourceId:this.resourceId,collectionId:e,type:n},a=this;o.post("/api/collection/removefromcollection",Qs.stringify(r)).then(function(){a._getCollectionsForResource()}).catch(function(e){t.error("couldn't remove item from collection"),t.debug(e)})},_processCollectionRemovals:function(){var n=this;e.each(this.managedCollectionsToRemove,function(e,i){t.log("Removing collection "+i+" from managed"),n._removeResourceFromCollection(i,"MANAGED")}),e.each(this.unmanagedCollectionsToRemove,function(e,i){t.log("Removing collection "+i+" from unmanaged"),n._removeResourceFromCollection(i,"UNMANAGED")})},_disableSubmitButton:function(){e("#modal .btn-primary").addClass("disabled"),e("#modal .btn-primary").prop("disabled",!0)},_enableSubmitButton:function(){e("#modal .btn-primary").removeClass("disabled"),e("#modal .btn-primary").prop("disabled",!1)},_addResultsToCollection:function(n){var i=e(this.$el).data("url"),r=this,a=e("#upload-progress"),s=e("#upload-form"),l=(e("#upload-progress-status"),e("#progress-message")),u=e("#progress-title");this.lastSavedCollectionId=n,u.show(),u.text("Saving Results To Collection '"+e("#collection-list").text()+"'"),o.post("/api/search/"+i+"&collectionId="+n).then(function(e){a.show(),l.show(),s.hide(),t.log("Finished adding!!"),r.updateProgressBar(n)})},_resetCollectionSelectionState:function(){var t=e("#upload-progress"),n=e("#progress-message"),i=e("#upload-form"),o=e("#collection-list").selectize(),r=e("#progress-title");o[0].selectize.clear(),o[0].selectize.clearOptions(),this._enableSubmitButton(),t.hide(),n.hide(),r.hide(),i.show()},removeResourceFromCollection:function(e,n){i.set(this,"changesMade",!0),t.log("Pending collection removal from "+e.id+" - "+n),"MANAGED"==n?(this.managedCollectionsToRemove.push(e.id),this._arrayRemove(this.collections.managed,e)):(this.unmanagedCollectionsToRemove.push(e.id),this._arrayRemove(this.collections.unmanaged,e))},addToCollection:function(){var n=this;if(""==this.selectedCollection)e("#addToNew").popover("show"),setTimeout(function(){e("#addToNew").popover("hide")},2e3);else if(isNaN(this.selectedCollection)){t.log("Creating a new collection"),t.log("Disabling submit button");var i={collectionName:this.selectedCollection,collectionDescription:this.newCollectionDescription};o.post("/api/collection/newcollection",Qs.stringify(i)).then(function(e){t.log("New Collection added");var i=e.data.id;t.debug("new collection id is "+i),n._addResourceToCollection(i),n._resetForm()})}else this.selectedCollection<1?(e("#collection-list").addClass("invalid-feedback"),t.debug("Adding popover"),e("#addToExisting").popover("show"),setTimeout(function(){e("#addToExisting").popover("hide")},2e3)):(n._addResourceToCollection(this.selectedCollection),n._getCollectionsForResource())},showGrant:function(){var t=e("#collection-list").prop("selectedIndex");this.showPermission=t>0&&1==this.items[t-1].owned},cancelSaveSearchChanges:function(){t.log("Cancelling Save Search."),this._resetForm()},cancelAddToCollectionChanges:function(){t.log("Cancelling Add To Collection."),this._resetForm(),this._getCollectionsForResource()},saveAddToCollectionChanges:function(){this.addToCollection(),this._processCollectionRemovals(),this._resetForm()},saveResultsToCollection:function(){var n=this;if(""==this.selectedCollection)e("#addToNew").popover("show"),setTimeout(function(){e("#addToNew").popover("hide")},2e3);else if(isNaN(this.selectedCollection)){n._disableSubmitButton();var i={collectionName:this.selectedCollection,collectionDescription:this.newCollectionDescription};o.post("/api/collection/newcollection",Qs.stringify(i)).then(function(e){t.log("New Collection added");var i=e.data.id;t.debug("new collection id is "+i),n._addResultsToCollection(i)})}else n._disableSubmitButton(),n._addResultsToCollection(this.selectedCollection)},updateProgressBar:function(n){var i=this;o.get("/api/search/checkstatus?collectionId="+n).then(function(o){var r=parseInt(o.data.percentComplete),a=o.data.message,s=e("#upload-progress-status"),l=e("#progress-message");if(t.log("progress is "+r+"%"),null==a&&(a=""),l.text(a),s.css("width",r+"%").attr("aria-valuenow",r).text(r+"% Complete"),r<100)setTimeout(function(){i.updateProgressBar(n)},1e3);else{t.log("Progress is 100%");var u=e("#collection-list").text();e("#progress-complete-text").text("Results successfully saved to "+u),e("#progress-complete-alert").show(),i._resetCollectionSelectionState()}}).catch(function(e){t.log("An error occurred when getting the progress status",log),i._resetCollectionSelectionState()})}}})},collectionSelectizeOptions:function(){return{valueField:"id",labelField:"name",searchField:"name",create:!0,createOnBlur:!0,render:{option:function(t,e){return'<div><span class="title"><span class="name">'+e(t.name)+"</span></span></div>"}},load:function(t,n){if(!t.length)return n();e.ajax({url:"/api/lookup/collection",type:"GET",data:{term:t,permission:"ADMINISTER_COLLECTION"},error:function(){n()},success:function(t){n(t.collections)}})}}},main:function(){var t="#add-resource-form";e(t).length>0&&r.vuejs.collectionwidget.init(t)}}}(console,t,window,i.default,e,TDAR)}).call(this,n(0),n(16))},function(t,e){t.exports="/* ===================================================\n * bootstrap-transition.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#transitions\n * ===================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n  /* CSS TRANSITION SUPPORT (http://www.modernizr.com/)\n   * ======================================================= */\n\n  $(function () {\n\n    $.support.transition = (function () {\n\n      var transitionEnd = (function () {\n\n        var el = document.createElement('bootstrap')\n          , transEndEventNames = {\n               'WebkitTransition' : 'webkitTransitionEnd'\n            ,  'MozTransition'    : 'transitionend'\n            ,  'OTransition'      : 'oTransitionEnd otransitionend'\n            ,  'transition'       : 'transitionend'\n            }\n          , name\n\n        for (name in transEndEventNames){\n          if (el.style[name] !== undefined) {\n            return transEndEventNames[name]\n          }\n        }\n\n      }())\n\n      return transitionEnd && {\n        end: transitionEnd\n      }\n\n    })()\n\n  })\n\n}(window.jQuery);/* ==========================================================\n * bootstrap-alert.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#alerts\n * ==========================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* ALERT CLASS DEFINITION\n  * ====================== */\n\n  var dismiss = '[data-dismiss=\"alert\"]'\n    , Alert = function (el) {\n        $(el).on('click', dismiss, this.close)\n      }\n\n  Alert.prototype.close = function (e) {\n    var $this = $(this)\n      , selector = $this.attr('data-target')\n      , $parent\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\n    }\n\n    $parent = $(selector)\n\n    e && e.preventDefault()\n\n    $parent.length || ($parent = $this.hasClass('alert') ? $this : $this.parent())\n\n    $parent.trigger(e = $.Event('close'))\n\n    if (e.isDefaultPrevented()) return\n\n    $parent.removeClass('in')\n\n    function removeElement() {\n      $parent\n        .trigger('closed')\n        .remove()\n    }\n\n    $.support.transition && $parent.hasClass('fade') ?\n      $parent.on($.support.transition.end, removeElement) :\n      removeElement()\n  }\n\n\n /* ALERT PLUGIN DEFINITION\n  * ======================= */\n\n  var old = $.fn.alert\n\n  $.fn.alert = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('alert')\n      if (!data) $this.data('alert', (data = new Alert(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  $.fn.alert.Constructor = Alert\n\n\n /* ALERT NO CONFLICT\n  * ================= */\n\n  $.fn.alert.noConflict = function () {\n    $.fn.alert = old\n    return this\n  }\n\n\n /* ALERT DATA-API\n  * ============== */\n\n  $(document).on('click.alert.data-api', dismiss, Alert.prototype.close)\n\n}(window.jQuery);/* ============================================================\n * bootstrap-button.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#buttons\n * ============================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* BUTTON PUBLIC CLASS DEFINITION\n  * ============================== */\n\n  var Button = function (element, options) {\n    this.$element = $(element)\n    this.options = $.extend({}, $.fn.button.defaults, options)\n  }\n\n  Button.prototype.setState = function (state) {\n    var d = 'disabled'\n      , $el = this.$element\n      , data = $el.data()\n      , val = $el.is('input') ? 'val' : 'html'\n\n    state = state + 'Text'\n    data.resetText || $el.data('resetText', $el[val]())\n\n    $el[val](data[state] || this.options[state])\n\n    // push to event loop to allow forms to submit\n    setTimeout(function () {\n      state == 'loadingText' ?\n        $el.addClass(d).attr(d, d) :\n        $el.removeClass(d).removeAttr(d)\n    }, 0)\n  }\n\n  Button.prototype.toggle = function () {\n    var $parent = this.$element.closest('[data-toggle=\"buttons-radio\"]')\n\n    $parent && $parent\n      .find('.active')\n      .removeClass('active')\n\n    this.$element.toggleClass('active')\n  }\n\n\n /* BUTTON PLUGIN DEFINITION\n  * ======================== */\n\n  var old = $.fn.button\n\n  $.fn.button = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('button')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('button', (data = new Button(this, options)))\n      if (option == 'toggle') data.toggle()\n      else if (option) data.setState(option)\n    })\n  }\n\n  $.fn.button.defaults = {\n    loadingText: 'loading...'\n  }\n\n  $.fn.button.Constructor = Button\n\n\n /* BUTTON NO CONFLICT\n  * ================== */\n\n  $.fn.button.noConflict = function () {\n    $.fn.button = old\n    return this\n  }\n\n\n /* BUTTON DATA-API\n  * =============== */\n\n  $(document).on('click.button.data-api', '[data-toggle^=button]', function (e) {\n    var $btn = $(e.target)\n    if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn')\n    $btn.button('toggle')\n  })\n\n}(window.jQuery);/* ==========================================================\n * bootstrap-carousel.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#carousel\n * ==========================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* CAROUSEL CLASS DEFINITION\n  * ========================= */\n\n  var Carousel = function (element, options) {\n    this.$element = $(element)\n    this.$indicators = this.$element.find('.carousel-indicators')\n    this.options = options\n    this.options.pause == 'hover' && this.$element\n      .on('mouseenter', $.proxy(this.pause, this))\n      .on('mouseleave', $.proxy(this.cycle, this))\n  }\n\n  Carousel.prototype = {\n\n    cycle: function (e) {\n      if (!e) this.paused = false\n      if (this.interval) clearInterval(this.interval);\n      this.options.interval\n        && !this.paused\n        && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))\n      return this\n    }\n\n  , getActiveIndex: function () {\n      this.$active = this.$element.find('.item.active')\n      this.$items = this.$active.parent().children()\n      return this.$items.index(this.$active)\n    }\n\n  , to: function (pos) {\n      var activeIndex = this.getActiveIndex()\n        , that = this\n\n      if (pos > (this.$items.length - 1) || pos < 0) return\n\n      if (this.sliding) {\n        return this.$element.one('slid', function () {\n          that.to(pos)\n        })\n      }\n\n      if (activeIndex == pos) {\n        return this.pause().cycle()\n      }\n\n      return this.slide(pos > activeIndex ? 'next' : 'prev', $(this.$items[pos]))\n    }\n\n  , pause: function (e) {\n      if (!e) this.paused = true\n      if (this.$element.find('.next, .prev').length && $.support.transition.end) {\n        this.$element.trigger($.support.transition.end)\n        this.cycle(true)\n      }\n      clearInterval(this.interval)\n      this.interval = null\n      return this\n    }\n\n  , next: function () {\n      if (this.sliding) return\n      return this.slide('next')\n    }\n\n  , prev: function () {\n      if (this.sliding) return\n      return this.slide('prev')\n    }\n\n  , slide: function (type, next) {\n      var $active = this.$element.find('.item.active')\n        , $next = next || $active[type]()\n        , isCycling = this.interval\n        , direction = type == 'next' ? 'left' : 'right'\n        , fallback  = type == 'next' ? 'first' : 'last'\n        , that = this\n        , e\n\n      this.sliding = true\n\n      isCycling && this.pause()\n\n      $next = $next.length ? $next : this.$element.find('.item')[fallback]()\n\n      e = $.Event('slide', {\n        relatedTarget: $next[0]\n      , direction: direction\n      })\n\n      if ($next.hasClass('active')) return\n\n      if (this.$indicators.length) {\n        this.$indicators.find('.active').removeClass('active')\n        this.$element.one('slid', function () {\n          var $nextIndicator = $(that.$indicators.children()[that.getActiveIndex()])\n          $nextIndicator && $nextIndicator.addClass('active')\n        })\n      }\n\n      if ($.support.transition && this.$element.hasClass('slide')) {\n        this.$element.trigger(e)\n        if (e.isDefaultPrevented()) return\n        $next.addClass(type)\n        $next[0].offsetWidth // force reflow\n        $active.addClass(direction)\n        $next.addClass(direction)\n        this.$element.one($.support.transition.end, function () {\n          $next.removeClass([type, direction].join(' ')).addClass('active')\n          $active.removeClass(['active', direction].join(' '))\n          that.sliding = false\n          setTimeout(function () { that.$element.trigger('slid') }, 0)\n        })\n      } else {\n        this.$element.trigger(e)\n        if (e.isDefaultPrevented()) return\n        $active.removeClass('active')\n        $next.addClass('active')\n        this.sliding = false\n        this.$element.trigger('slid')\n      }\n\n      isCycling && this.cycle()\n\n      return this\n    }\n\n  }\n\n\n /* CAROUSEL PLUGIN DEFINITION\n  * ========================== */\n\n  var old = $.fn.carousel\n\n  $.fn.carousel = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('carousel')\n        , options = $.extend({}, $.fn.carousel.defaults, typeof option == 'object' && option)\n        , action = typeof option == 'string' ? option : options.slide\n      if (!data) $this.data('carousel', (data = new Carousel(this, options)))\n      if (typeof option == 'number') data.to(option)\n      else if (action) data[action]()\n      else if (options.interval) data.pause().cycle()\n    })\n  }\n\n  $.fn.carousel.defaults = {\n    interval: 5000\n  , pause: 'hover'\n  }\n\n  $.fn.carousel.Constructor = Carousel\n\n\n /* CAROUSEL NO CONFLICT\n  * ==================== */\n\n  $.fn.carousel.noConflict = function () {\n    $.fn.carousel = old\n    return this\n  }\n\n /* CAROUSEL DATA-API\n  * ================= */\n\n  $(document).on('click.carousel.data-api', '[data-slide], [data-slide-to]', function (e) {\n    var $this = $(this), href\n      , $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) //strip for ie7\n      , options = $.extend({}, $target.data(), $this.data())\n      , slideIndex\n\n    $target.carousel(options)\n\n    if (slideIndex = $this.attr('data-slide-to')) {\n      $target.data('carousel').pause().to(slideIndex).cycle()\n    }\n\n    e.preventDefault()\n  })\n\n}(window.jQuery);/* =============================================================\n * bootstrap-collapse.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#collapse\n * =============================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* COLLAPSE PUBLIC CLASS DEFINITION\n  * ================================ */\n\n  var Collapse = function (element, options) {\n    this.$element = $(element)\n    this.options = $.extend({}, $.fn.collapse.defaults, options)\n\n    if (this.options.parent) {\n      this.$parent = $(this.options.parent)\n    }\n\n    this.options.toggle && this.toggle()\n  }\n\n  Collapse.prototype = {\n\n    constructor: Collapse\n\n  , dimension: function () {\n      var hasWidth = this.$element.hasClass('width')\n      return hasWidth ? 'width' : 'height'\n    }\n\n  , show: function () {\n      var dimension\n        , scroll\n        , actives\n        , hasData\n\n      if (this.transitioning || this.$element.hasClass('in')) return\n\n      dimension = this.dimension()\n      scroll = $.camelCase(['scroll', dimension].join('-'))\n      actives = this.$parent && this.$parent.find('> .accordion-group > .in')\n\n      if (actives && actives.length) {\n        hasData = actives.data('collapse')\n        if (hasData && hasData.transitioning) return\n        actives.collapse('hide')\n        hasData || actives.data('collapse', null)\n      }\n\n      this.$element[dimension](0)\n      this.transition('addClass', $.Event('show'), 'shown')\n      $.support.transition && this.$element[dimension](this.$element[0][scroll])\n    }\n\n  , hide: function () {\n      var dimension\n      if (this.transitioning || !this.$element.hasClass('in')) return\n      dimension = this.dimension()\n      this.reset(this.$element[dimension]())\n      this.transition('removeClass', $.Event('hide'), 'hidden')\n      this.$element[dimension](0)\n    }\n\n  , reset: function (size) {\n      var dimension = this.dimension()\n\n      this.$element\n        .removeClass('collapse')\n        [dimension](size || 'auto')\n        [0].offsetWidth\n\n      this.$element[size !== null ? 'addClass' : 'removeClass']('collapse')\n\n      return this\n    }\n\n  , transition: function (method, startEvent, completeEvent) {\n      var that = this\n        , complete = function () {\n            if (startEvent.type == 'show') that.reset()\n            that.transitioning = 0\n            that.$element.trigger(completeEvent)\n          }\n\n      this.$element.trigger(startEvent)\n\n      if (startEvent.isDefaultPrevented()) return\n\n      this.transitioning = 1\n\n      this.$element[method]('in')\n\n      $.support.transition && this.$element.hasClass('collapse') ?\n        this.$element.one($.support.transition.end, complete) :\n        complete()\n    }\n\n  , toggle: function () {\n      this[this.$element.hasClass('in') ? 'hide' : 'show']()\n    }\n\n  }\n\n\n /* COLLAPSE PLUGIN DEFINITION\n  * ========================== */\n\n  var old = $.fn.collapse\n\n  $.fn.collapse = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('collapse')\n        , options = $.extend({}, $.fn.collapse.defaults, $this.data(), typeof option == 'object' && option)\n      if (!data) $this.data('collapse', (data = new Collapse(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.collapse.defaults = {\n    toggle: true\n  }\n\n  $.fn.collapse.Constructor = Collapse\n\n\n /* COLLAPSE NO CONFLICT\n  * ==================== */\n\n  $.fn.collapse.noConflict = function () {\n    $.fn.collapse = old\n    return this\n  }\n\n\n /* COLLAPSE DATA-API\n  * ================= */\n\n  $(document).on('click.collapse.data-api', '[data-toggle=collapse]', function (e) {\n    var $this = $(this), href\n      , target = $this.attr('data-target')\n        || e.preventDefault()\n        || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '') //strip for ie7\n      , option = $(target).data('collapse') ? 'toggle' : $this.data()\n    $this[$(target).hasClass('in') ? 'addClass' : 'removeClass']('collapsed')\n    $(target).collapse(option)\n  })\n\n}(window.jQuery);/* ============================================================\n * bootstrap-dropdown.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#dropdowns\n * ============================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* DROPDOWN CLASS DEFINITION\n  * ========================= */\n\n  var toggle = '[data-toggle=dropdown]'\n    , Dropdown = function (element) {\n        var $el = $(element).on('click.dropdown.data-api', this.toggle)\n        $('html').on('click.dropdown.data-api', function () {\n          $el.parent().removeClass('open')\n        })\n      }\n\n  Dropdown.prototype = {\n\n    constructor: Dropdown\n\n  , toggle: function (e) {\n      var $this = $(this)\n        , $parent\n        , isActive\n\n      if ($this.is('.disabled, :disabled')) return\n\n      $parent = getParent($this)\n\n      isActive = $parent.hasClass('open')\n\n      clearMenus()\n\n      if (!isActive) {\n        if ('ontouchstart' in document.documentElement) {\n          // if mobile we we use a backdrop because click events don't delegate\n          $('<div class=\"dropdown-backdrop\"/>').insertBefore($(this)).on('click', clearMenus)\n        }\n        $parent.toggleClass('open')\n      }\n\n      $this.focus()\n\n      return false\n    }\n\n  , keydown: function (e) {\n      var $this\n        , $items\n        , $active\n        , $parent\n        , isActive\n        , index\n\n      if (!/(38|40|27)/.test(e.keyCode)) return\n\n      $this = $(this)\n\n      e.preventDefault()\n      e.stopPropagation()\n\n      if ($this.is('.disabled, :disabled')) return\n\n      $parent = getParent($this)\n\n      isActive = $parent.hasClass('open')\n\n      if (!isActive || (isActive && e.keyCode == 27)) {\n        if (e.which == 27) $parent.find(toggle).focus()\n        return $this.click()\n      }\n\n      $items = $('[role=menu] li:not(.divider):visible a', $parent)\n\n      if (!$items.length) return\n\n      index = $items.index($items.filter(':focus'))\n\n      if (e.keyCode == 38 && index > 0) index--                                        // up\n      if (e.keyCode == 40 && index < $items.length - 1) index++                        // down\n      if (!~index) index = 0\n\n      $items\n        .eq(index)\n        .focus()\n    }\n\n  }\n\n  function clearMenus() {\n    $('.dropdown-backdrop').remove()\n    $(toggle).each(function () {\n      getParent($(this)).removeClass('open')\n    })\n  }\n\n  function getParent($this) {\n    var selector = $this.attr('data-target')\n      , $parent\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && /#/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\n    }\n\n    $parent = selector && $(selector)\n\n    if (!$parent || !$parent.length) $parent = $this.parent()\n\n    return $parent\n  }\n\n\n  /* DROPDOWN PLUGIN DEFINITION\n   * ========================== */\n\n  var old = $.fn.dropdown\n\n  $.fn.dropdown = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('dropdown')\n      if (!data) $this.data('dropdown', (data = new Dropdown(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  $.fn.dropdown.Constructor = Dropdown\n\n\n /* DROPDOWN NO CONFLICT\n  * ==================== */\n\n  $.fn.dropdown.noConflict = function () {\n    $.fn.dropdown = old\n    return this\n  }\n\n\n  /* APPLY TO STANDARD DROPDOWN ELEMENTS\n   * =================================== */\n\n  $(document)\n    .on('click.dropdown.data-api', clearMenus)\n    .on('click.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })\n    .on('click.dropdown.data-api'  , toggle, Dropdown.prototype.toggle)\n    .on('keydown.dropdown.data-api', toggle + ', [role=menu]' , Dropdown.prototype.keydown)\n\n}(window.jQuery);\n/* =========================================================\n * bootstrap-modal.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#modals\n * =========================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================= */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* MODAL CLASS DEFINITION\n  * ====================== */\n\n  var Modal = function (element, options) {\n    this.options = options\n    this.$element = $(element)\n      .delegate('[data-dismiss=\"modal\"]', 'click.dismiss.modal', $.proxy(this.hide, this))\n    this.options.remote && this.$element.find('.modal-body').load(this.options.remote)\n  }\n\n  Modal.prototype = {\n\n      constructor: Modal\n\n    , toggle: function () {\n        return this[!this.isShown ? 'show' : 'hide']()\n      }\n\n    , show: function () {\n        var that = this\n          , e = $.Event('show')\n\n        this.$element.trigger(e)\n\n        if (this.isShown || e.isDefaultPrevented()) return\n\n        this.isShown = true\n\n        this.escape()\n\n        this.backdrop(function () {\n          var transition = $.support.transition && that.$element.hasClass('fade')\n\n          if (!that.$element.parent().length) {\n            that.$element.appendTo(document.body) //don't move modals dom position\n          }\n\n          that.$element.show()\n\n          if (transition) {\n            that.$element[0].offsetWidth // force reflow\n          }\n\n          that.$element\n            .addClass('in')\n            .attr('aria-hidden', false)\n\n          that.enforceFocus()\n\n          transition ?\n            that.$element.one($.support.transition.end, function () { that.$element.focus().trigger('shown') }) :\n            that.$element.focus().trigger('shown')\n\n        })\n      }\n\n    , hide: function (e) {\n        e && e.preventDefault()\n\n        var that = this\n\n        e = $.Event('hide')\n\n        this.$element.trigger(e)\n\n        if (!this.isShown || e.isDefaultPrevented()) return\n\n        this.isShown = false\n\n        this.escape()\n\n        $(document).off('focusin.modal')\n\n        this.$element\n          .removeClass('in')\n          .attr('aria-hidden', true)\n\n        $.support.transition && this.$element.hasClass('fade') ?\n          this.hideWithTransition() :\n          this.hideModal()\n      }\n\n    , enforceFocus: function () {\n        var that = this\n        $(document).on('focusin.modal', function (e) {\n          if (that.$element[0] !== e.target && !that.$element.has(e.target).length) {\n            that.$element.focus()\n          }\n        })\n      }\n\n    , escape: function () {\n        var that = this\n        if (this.isShown && this.options.keyboard) {\n          this.$element.on('keyup.dismiss.modal', function ( e ) {\n            e.which == 27 && that.hide()\n          })\n        } else if (!this.isShown) {\n          this.$element.off('keyup.dismiss.modal')\n        }\n      }\n\n    , hideWithTransition: function () {\n        var that = this\n          , timeout = setTimeout(function () {\n              that.$element.off($.support.transition.end)\n              that.hideModal()\n            }, 500)\n\n        this.$element.one($.support.transition.end, function () {\n          clearTimeout(timeout)\n          that.hideModal()\n        })\n      }\n\n    , hideModal: function () {\n        var that = this\n        this.$element.hide()\n        this.backdrop(function () {\n          that.removeBackdrop()\n          that.$element.trigger('hidden')\n        })\n      }\n\n    , removeBackdrop: function () {\n        this.$backdrop && this.$backdrop.remove()\n        this.$backdrop = null\n      }\n\n    , backdrop: function (callback) {\n        var that = this\n          , animate = this.$element.hasClass('fade') ? 'fade' : ''\n\n        if (this.isShown && this.options.backdrop) {\n          var doAnimate = $.support.transition && animate\n\n          this.$backdrop = $('<div class=\"modal-backdrop ' + animate + '\" />')\n            .appendTo(document.body)\n\n          this.$backdrop.click(\n            this.options.backdrop == 'static' ?\n              $.proxy(this.$element[0].focus, this.$element[0])\n            : $.proxy(this.hide, this)\n          )\n\n          if (doAnimate) this.$backdrop[0].offsetWidth // force reflow\n\n          this.$backdrop.addClass('in')\n\n          if (!callback) return\n\n          doAnimate ?\n            this.$backdrop.one($.support.transition.end, callback) :\n            callback()\n\n        } else if (!this.isShown && this.$backdrop) {\n          this.$backdrop.removeClass('in')\n\n          $.support.transition && this.$element.hasClass('fade')?\n            this.$backdrop.one($.support.transition.end, callback) :\n            callback()\n\n        } else if (callback) {\n          callback()\n        }\n      }\n  }\n\n\n /* MODAL PLUGIN DEFINITION\n  * ======================= */\n\n  var old = $.fn.modal\n\n  $.fn.modal = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('modal')\n        , options = $.extend({}, $.fn.modal.defaults, $this.data(), typeof option == 'object' && option)\n      if (!data) $this.data('modal', (data = new Modal(this, options)))\n      if (typeof option == 'string') data[option]()\n      else if (options.show) data.show()\n    })\n  }\n\n  $.fn.modal.defaults = {\n      backdrop: true\n    , keyboard: true\n    , show: true\n  }\n\n  $.fn.modal.Constructor = Modal\n\n\n /* MODAL NO CONFLICT\n  * ================= */\n\n  $.fn.modal.noConflict = function () {\n    $.fn.modal = old\n    return this\n  }\n\n\n /* MODAL DATA-API\n  * ============== */\n\n  $(document).on('click.modal.data-api', '[data-toggle=\"modal\"]', function (e) {\n    var $this = $(this)\n      , href = $this.attr('href')\n      , $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, ''))) //strip for ie7\n      , option = $target.data('modal') ? 'toggle' : $.extend({ remote:!/#/.test(href) && href }, $target.data(), $this.data())\n\n    e.preventDefault()\n\n    $target\n      .modal(option)\n      .one('hide', function () {\n        $this.focus()\n      })\n  })\n\n}(window.jQuery);\n/* ===========================================================\n * bootstrap-tooltip.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#tooltips\n * Inspired by the original jQuery.tipsy by Jason Frame\n * ===========================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* TOOLTIP PUBLIC CLASS DEFINITION\n  * =============================== */\n\n  var Tooltip = function (element, options) {\n    this.init('tooltip', element, options)\n  }\n\n  Tooltip.prototype = {\n\n    constructor: Tooltip\n\n  , init: function (type, element, options) {\n      var eventIn\n        , eventOut\n        , triggers\n        , trigger\n        , i\n\n      this.type = type\n      this.$element = $(element)\n      this.options = this.getOptions(options)\n      this.enabled = true\n\n      triggers = this.options.trigger.split(' ')\n\n      for (i = triggers.length; i--;) {\n        trigger = triggers[i]\n        if (trigger == 'click') {\n          this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))\n        } else if (trigger != 'manual') {\n          eventIn = trigger == 'hover' ? 'mouseenter' : 'focus'\n          eventOut = trigger == 'hover' ? 'mouseleave' : 'blur'\n          this.$element.on(eventIn + '.' + this.type, this.options.selector, $.proxy(this.enter, this))\n          this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))\n        }\n      }\n\n      this.options.selector ?\n        (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :\n        this.fixTitle()\n    }\n\n  , getOptions: function (options) {\n      options = $.extend({}, $.fn[this.type].defaults, this.$element.data(), options)\n\n      if (options.delay && typeof options.delay == 'number') {\n        options.delay = {\n          show: options.delay\n        , hide: options.delay\n        }\n      }\n\n      return options\n    }\n\n  , enter: function (e) {\n      var defaults = $.fn[this.type].defaults\n        , options = {}\n        , self\n\n      this._options && $.each(this._options, function (key, value) {\n        if (defaults[key] != value) options[key] = value\n      }, this)\n\n      self = $(e.currentTarget)[this.type](options).data(this.type)\n\n      if (!self.options.delay || !self.options.delay.show) return self.show()\n\n      clearTimeout(this.timeout)\n      self.hoverState = 'in'\n      this.timeout = setTimeout(function() {\n        if (self.hoverState == 'in') self.show()\n      }, self.options.delay.show)\n    }\n\n  , leave: function (e) {\n      var self = $(e.currentTarget)[this.type](this._options).data(this.type)\n\n      if (this.timeout) clearTimeout(this.timeout)\n      if (!self.options.delay || !self.options.delay.hide) return self.hide()\n\n      self.hoverState = 'out'\n      this.timeout = setTimeout(function() {\n        if (self.hoverState == 'out') self.hide()\n      }, self.options.delay.hide)\n    }\n\n  , show: function () {\n      var $tip\n        , pos\n        , actualWidth\n        , actualHeight\n        , placement\n        , tp\n        , e = $.Event('show')\n\n      if (this.hasContent() && this.enabled) {\n        this.$element.trigger(e)\n        if (e.isDefaultPrevented()) return\n        $tip = this.tip()\n        this.setContent()\n\n        if (this.options.animation) {\n          $tip.addClass('fade')\n        }\n\n        placement = typeof this.options.placement == 'function' ?\n          this.options.placement.call(this, $tip[0], this.$element[0]) :\n          this.options.placement\n\n        $tip\n          .detach()\n          .css({ top: 0, left: 0, display: 'block' })\n\n        this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)\n\n        pos = this.getPosition()\n\n        actualWidth = $tip[0].offsetWidth\n        actualHeight = $tip[0].offsetHeight\n\n        switch (placement) {\n          case 'bottom':\n            tp = {top: pos.top + pos.height, left: pos.left + pos.width / 2 - actualWidth / 2}\n            break\n          case 'top':\n            tp = {top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2}\n            break\n          case 'left':\n            tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth}\n            break\n          case 'right':\n            tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width}\n            break\n        }\n\n        this.applyPlacement(tp, placement)\n        this.$element.trigger('shown')\n      }\n    }\n\n  , applyPlacement: function(offset, placement){\n      var $tip = this.tip()\n        , width = $tip[0].offsetWidth\n        , height = $tip[0].offsetHeight\n        , actualWidth\n        , actualHeight\n        , delta\n        , replace\n\n      $tip\n        .offset(offset)\n        .addClass(placement)\n        .addClass('in')\n\n      actualWidth = $tip[0].offsetWidth\n      actualHeight = $tip[0].offsetHeight\n\n      if (placement == 'top' && actualHeight != height) {\n        offset.top = offset.top + height - actualHeight\n        replace = true\n      }\n\n      if (placement == 'bottom' || placement == 'top') {\n        delta = 0\n\n        if (offset.left < 0){\n          delta = offset.left * -2\n          offset.left = 0\n          $tip.offset(offset)\n          actualWidth = $tip[0].offsetWidth\n          actualHeight = $tip[0].offsetHeight\n        }\n\n        this.replaceArrow(delta - width + actualWidth, actualWidth, 'left')\n      } else {\n        this.replaceArrow(actualHeight - height, actualHeight, 'top')\n      }\n\n      if (replace) $tip.offset(offset)\n    }\n\n  , replaceArrow: function(delta, dimension, position){\n      this\n        .arrow()\n        .css(position, delta ? (50 * (1 - delta / dimension) + \"%\") : '')\n    }\n\n  , setContent: function () {\n      var $tip = this.tip()\n        , title = this.getTitle()\n\n      $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)\n      $tip.removeClass('fade in top bottom left right')\n    }\n\n  , hide: function () {\n      var that = this\n        , $tip = this.tip()\n        , e = $.Event('hide')\n\n      this.$element.trigger(e)\n      if (e.isDefaultPrevented()) return\n\n      $tip.removeClass('in')\n\n      function removeWithAnimation() {\n        var timeout = setTimeout(function () {\n          $tip.off($.support.transition.end).detach()\n        }, 500)\n\n        $tip.one($.support.transition.end, function () {\n          clearTimeout(timeout)\n          $tip.detach()\n        })\n      }\n\n      $.support.transition && this.$tip.hasClass('fade') ?\n        removeWithAnimation() :\n        $tip.detach()\n\n      this.$element.trigger('hidden')\n\n      return this\n    }\n\n  , fixTitle: function () {\n      var $e = this.$element\n      if ($e.attr('title') || typeof($e.attr('data-original-title')) != 'string') {\n        $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')\n      }\n    }\n\n  , hasContent: function () {\n      return this.getTitle()\n    }\n\n  , getPosition: function () {\n      var el = this.$element[0]\n      return $.extend({}, (typeof el.getBoundingClientRect == 'function') ? el.getBoundingClientRect() : {\n        width: el.offsetWidth\n      , height: el.offsetHeight\n      }, this.$element.offset())\n    }\n\n  , getTitle: function () {\n      var title\n        , $e = this.$element\n        , o = this.options\n\n      title = $e.attr('data-original-title')\n        || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)\n\n      return title\n    }\n\n  , tip: function () {\n      return this.$tip = this.$tip || $(this.options.template)\n    }\n\n  , arrow: function(){\n      return this.$arrow = this.$arrow || this.tip().find(\".tooltip-arrow\")\n    }\n\n  , validate: function () {\n      if (!this.$element[0].parentNode) {\n        this.hide()\n        this.$element = null\n        this.options = null\n      }\n    }\n\n  , enable: function () {\n      this.enabled = true\n    }\n\n  , disable: function () {\n      this.enabled = false\n    }\n\n  , toggleEnabled: function () {\n      this.enabled = !this.enabled\n    }\n\n  , toggle: function (e) {\n      var self = e ? $(e.currentTarget)[this.type](this._options).data(this.type) : this\n      self.tip().hasClass('in') ? self.hide() : self.show()\n    }\n\n  , destroy: function () {\n      this.hide().$element.off('.' + this.type).removeData(this.type)\n    }\n\n  }\n\n\n /* TOOLTIP PLUGIN DEFINITION\n  * ========================= */\n\n  var old = $.fn.tooltip\n\n  $.fn.tooltip = function ( option ) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('tooltip')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('tooltip', (data = new Tooltip(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.tooltip.Constructor = Tooltip\n\n  $.fn.tooltip.defaults = {\n    animation: true\n  , placement: 'top'\n  , selector: false\n  , template: '<div class=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>'\n  , trigger: 'hover focus'\n  , title: ''\n  , delay: 0\n  , html: false\n  , container: false\n  }\n\n\n /* TOOLTIP NO CONFLICT\n  * =================== */\n\n  $.fn.tooltip.noConflict = function () {\n    $.fn.tooltip = old\n    return this\n  }\n\n}(window.jQuery);\n/* ===========================================================\n * bootstrap-popover.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#popovers\n * ===========================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =========================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* POPOVER PUBLIC CLASS DEFINITION\n  * =============================== */\n\n  var Popover = function (element, options) {\n    this.init('popover', element, options)\n  }\n\n\n  /* NOTE: POPOVER EXTENDS BOOTSTRAP-TOOLTIP.js\n     ========================================== */\n\n  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype, {\n\n    constructor: Popover\n\n  , setContent: function () {\n      var $tip = this.tip()\n        , title = this.getTitle()\n        , content = this.getContent()\n\n      $tip.find('.popover-title')[this.options.html ? 'html' : 'text'](title)\n      $tip.find('.popover-content')[this.options.html ? 'html' : 'text'](content)\n\n      $tip.removeClass('fade top bottom left right in')\n    }\n\n  , hasContent: function () {\n      return this.getTitle() || this.getContent()\n    }\n\n  , getContent: function () {\n      var content\n        , $e = this.$element\n        , o = this.options\n\n      content = (typeof o.content == 'function' ? o.content.call($e[0]) :  o.content)\n        || $e.attr('data-content')\n\n      return content\n    }\n\n  , tip: function () {\n      if (!this.$tip) {\n        this.$tip = $(this.options.template)\n      }\n      return this.$tip\n    }\n\n  , destroy: function () {\n      this.hide().$element.off('.' + this.type).removeData(this.type)\n    }\n\n  })\n\n\n /* POPOVER PLUGIN DEFINITION\n  * ======================= */\n\n  var old = $.fn.popover\n\n  $.fn.popover = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('popover')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('popover', (data = new Popover(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.popover.Constructor = Popover\n\n  $.fn.popover.defaults = $.extend({} , $.fn.tooltip.defaults, {\n    placement: 'right'\n  , trigger: 'click'\n  , content: ''\n  , template: '<div class=\"popover\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'\n  })\n\n\n /* POPOVER NO CONFLICT\n  * =================== */\n\n  $.fn.popover.noConflict = function () {\n    $.fn.popover = old\n    return this\n  }\n\n}(window.jQuery);\n/* =============================================================\n * bootstrap-scrollspy.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#scrollspy\n * =============================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* SCROLLSPY CLASS DEFINITION\n  * ========================== */\n\n  function ScrollSpy(element, options) {\n    var process = $.proxy(this.process, this)\n      , $element = $(element).is('body') ? $(window) : $(element)\n      , href\n    this.options = $.extend({}, $.fn.scrollspy.defaults, options)\n    this.$scrollElement = $element.on('scroll.scroll-spy.data-api', process)\n    this.selector = (this.options.target\n      || ((href = $(element).attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) //strip for ie7\n      || '') + ' .nav li > a'\n    this.$body = $('body')\n    this.refresh()\n    this.process()\n  }\n\n  ScrollSpy.prototype = {\n\n      constructor: ScrollSpy\n\n    , refresh: function () {\n        var self = this\n          , $targets\n\n        this.offsets = $([])\n        this.targets = $([])\n\n        $targets = this.$body\n          .find(this.selector)\n          .map(function () {\n            var $el = $(this)\n              , href = $el.data('target') || $el.attr('href')\n              , $href = /^#\\w/.test(href) && $(href)\n            return ( $href\n              && $href.length\n              && [[ $href.position().top + (!$.isWindow(self.$scrollElement.get(0)) && self.$scrollElement.scrollTop()), href ]] ) || null\n          })\n          .sort(function (a, b) { return a[0] - b[0] })\n          .each(function () {\n            self.offsets.push(this[0])\n            self.targets.push(this[1])\n          })\n      }\n\n    , process: function () {\n        var scrollTop = this.$scrollElement.scrollTop() + this.options.offset\n          , scrollHeight = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight\n          , maxScroll = scrollHeight - this.$scrollElement.height()\n          , offsets = this.offsets\n          , targets = this.targets\n          , activeTarget = this.activeTarget\n          , i\n\n        if (scrollTop >= maxScroll) {\n          return activeTarget != (i = targets.last()[0])\n            && this.activate ( i )\n        }\n\n        for (i = offsets.length; i--;) {\n          activeTarget != targets[i]\n            && scrollTop >= offsets[i]\n            && (!offsets[i + 1] || scrollTop <= offsets[i + 1])\n            && this.activate( targets[i] )\n        }\n      }\n\n    , activate: function (target) {\n        var active\n          , selector\n\n        this.activeTarget = target\n\n        $(this.selector)\n          .parent('.active')\n          .removeClass('active')\n\n        selector = this.selector\n          + '[data-target=\"' + target + '\"],'\n          + this.selector + '[href=\"' + target + '\"]'\n\n        active = $(selector)\n          .parent('li')\n          .addClass('active')\n\n        if (active.parent('.dropdown-menu').length)  {\n          active = active.closest('li.dropdown').addClass('active')\n        }\n\n        active.trigger('activate')\n      }\n\n  }\n\n\n /* SCROLLSPY PLUGIN DEFINITION\n  * =========================== */\n\n  var old = $.fn.scrollspy\n\n  $.fn.scrollspy = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('scrollspy')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('scrollspy', (data = new ScrollSpy(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.scrollspy.Constructor = ScrollSpy\n\n  $.fn.scrollspy.defaults = {\n    offset: 10\n  }\n\n\n /* SCROLLSPY NO CONFLICT\n  * ===================== */\n\n  $.fn.scrollspy.noConflict = function () {\n    $.fn.scrollspy = old\n    return this\n  }\n\n\n /* SCROLLSPY DATA-API\n  * ================== */\n\n  $(window).on('load', function () {\n    $('[data-spy=\"scroll\"]').each(function () {\n      var $spy = $(this)\n      $spy.scrollspy($spy.data())\n    })\n  })\n\n}(window.jQuery);/* ========================================================\n * bootstrap-tab.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#tabs\n * ========================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ======================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* TAB CLASS DEFINITION\n  * ==================== */\n\n  var Tab = function (element) {\n    this.element = $(element)\n  }\n\n  Tab.prototype = {\n\n    constructor: Tab\n\n  , show: function () {\n      var $this = this.element\n        , $ul = $this.closest('ul:not(.dropdown-menu)')\n        , selector = $this.attr('data-target')\n        , previous\n        , $target\n        , e\n\n      if (!selector) {\n        selector = $this.attr('href')\n        selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\n      }\n\n      if ( $this.parent('li').hasClass('active') ) return\n\n      previous = $ul.find('.active:last a')[0]\n\n      e = $.Event('show', {\n        relatedTarget: previous\n      })\n\n      $this.trigger(e)\n\n      if (e.isDefaultPrevented()) return\n\n      $target = $(selector)\n\n      this.activate($this.parent('li'), $ul)\n      this.activate($target, $target.parent(), function () {\n        $this.trigger({\n          type: 'shown'\n        , relatedTarget: previous\n        })\n      })\n    }\n\n  , activate: function ( element, container, callback) {\n      var $active = container.find('> .active')\n        , transition = callback\n            && $.support.transition\n            && $active.hasClass('fade')\n\n      function next() {\n        $active\n          .removeClass('active')\n          .find('> .dropdown-menu > .active')\n          .removeClass('active')\n\n        element.addClass('active')\n\n        if (transition) {\n          element[0].offsetWidth // reflow for transition\n          element.addClass('in')\n        } else {\n          element.removeClass('fade')\n        }\n\n        if ( element.parent('.dropdown-menu') ) {\n          element.closest('li.dropdown').addClass('active')\n        }\n\n        callback && callback()\n      }\n\n      transition ?\n        $active.one($.support.transition.end, next) :\n        next()\n\n      $active.removeClass('in')\n    }\n  }\n\n\n /* TAB PLUGIN DEFINITION\n  * ===================== */\n\n  var old = $.fn.tab\n\n  $.fn.tab = function ( option ) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('tab')\n      if (!data) $this.data('tab', (data = new Tab(this)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.tab.Constructor = Tab\n\n\n /* TAB NO CONFLICT\n  * =============== */\n\n  $.fn.tab.noConflict = function () {\n    $.fn.tab = old\n    return this\n  }\n\n\n /* TAB DATA-API\n  * ============ */\n\n  $(document).on('click.tab.data-api', '[data-toggle=\"tab\"], [data-toggle=\"pill\"]', function (e) {\n    e.preventDefault()\n    $(this).tab('show')\n  })\n\n}(window.jQuery);/* =============================================================\n * bootstrap-typeahead.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#typeahead\n * =============================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n\n!function($){\n\n  \"use strict\"; // jshint ;_;\n\n\n /* TYPEAHEAD PUBLIC CLASS DEFINITION\n  * ================================= */\n\n  var Typeahead = function (element, options) {\n    this.$element = $(element)\n    this.options = $.extend({}, $.fn.typeahead.defaults, options)\n    this.matcher = this.options.matcher || this.matcher\n    this.sorter = this.options.sorter || this.sorter\n    this.highlighter = this.options.highlighter || this.highlighter\n    this.updater = this.options.updater || this.updater\n    this.source = this.options.source\n    this.$menu = $(this.options.menu)\n    this.shown = false\n    this.listen()\n  }\n\n  Typeahead.prototype = {\n\n    constructor: Typeahead\n\n  , select: function () {\n      var val = this.$menu.find('.active').attr('data-value')\n      this.$element\n        .val(this.updater(val))\n        .change()\n      return this.hide()\n    }\n\n  , updater: function (item) {\n      return item\n    }\n\n  , show: function () {\n      var pos = $.extend({}, this.$element.position(), {\n        height: this.$element[0].offsetHeight\n      })\n\n      this.$menu\n        .insertAfter(this.$element)\n        .css({\n          top: pos.top + pos.height\n        , left: pos.left\n        })\n        .show()\n\n      this.shown = true\n      return this\n    }\n\n  , hide: function () {\n      this.$menu.hide()\n      this.shown = false\n      return this\n    }\n\n  , lookup: function (event) {\n      var items\n\n      this.query = this.$element.val()\n\n      if (!this.query || this.query.length < this.options.minLength) {\n        return this.shown ? this.hide() : this\n      }\n\n      items = $.isFunction(this.source) ? this.source(this.query, $.proxy(this.process, this)) : this.source\n\n      return items ? this.process(items) : this\n    }\n\n  , process: function (items) {\n      var that = this\n\n      items = $.grep(items, function (item) {\n        return that.matcher(item)\n      })\n\n      items = this.sorter(items)\n\n      if (!items.length) {\n        return this.shown ? this.hide() : this\n      }\n\n      return this.render(items.slice(0, this.options.items)).show()\n    }\n\n  , matcher: function (item) {\n      return ~item.toLowerCase().indexOf(this.query.toLowerCase())\n    }\n\n  , sorter: function (items) {\n      var beginswith = []\n        , caseSensitive = []\n        , caseInsensitive = []\n        , item\n\n      while (item = items.shift()) {\n        if (!item.toLowerCase().indexOf(this.query.toLowerCase())) beginswith.push(item)\n        else if (~item.indexOf(this.query)) caseSensitive.push(item)\n        else caseInsensitive.push(item)\n      }\n\n      return beginswith.concat(caseSensitive, caseInsensitive)\n    }\n\n  , highlighter: function (item) {\n      var query = this.query.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&')\n      return item.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {\n        return '<strong>' + match + '</strong>'\n      })\n    }\n\n  , render: function (items) {\n      var that = this\n\n      items = $(items).map(function (i, item) {\n        i = $(that.options.item).attr('data-value', item)\n        i.find('a').html(that.highlighter(item))\n        return i[0]\n      })\n\n      items.first().addClass('active')\n      this.$menu.html(items)\n      return this\n    }\n\n  , next: function (event) {\n      var active = this.$menu.find('.active').removeClass('active')\n        , next = active.next()\n\n      if (!next.length) {\n        next = $(this.$menu.find('li')[0])\n      }\n\n      next.addClass('active')\n    }\n\n  , prev: function (event) {\n      var active = this.$menu.find('.active').removeClass('active')\n        , prev = active.prev()\n\n      if (!prev.length) {\n        prev = this.$menu.find('li').last()\n      }\n\n      prev.addClass('active')\n    }\n\n  , listen: function () {\n      this.$element\n        .on('focus',    $.proxy(this.focus, this))\n        .on('blur',     $.proxy(this.blur, this))\n        .on('keypress', $.proxy(this.keypress, this))\n        .on('keyup',    $.proxy(this.keyup, this))\n\n      if (this.eventSupported('keydown')) {\n        this.$element.on('keydown', $.proxy(this.keydown, this))\n      }\n\n      this.$menu\n        .on('click', $.proxy(this.click, this))\n        .on('mouseenter', 'li', $.proxy(this.mouseenter, this))\n        .on('mouseleave', 'li', $.proxy(this.mouseleave, this))\n    }\n\n  , eventSupported: function(eventName) {\n      var isSupported = eventName in this.$element\n      if (!isSupported) {\n        this.$element.setAttribute(eventName, 'return;')\n        isSupported = typeof this.$element[eventName] === 'function'\n      }\n      return isSupported\n    }\n\n  , move: function (e) {\n      if (!this.shown) return\n\n      switch(e.keyCode) {\n        case 9: // tab\n        case 13: // enter\n        case 27: // escape\n          e.preventDefault()\n          break\n\n        case 38: // up arrow\n          e.preventDefault()\n          this.prev()\n          break\n\n        case 40: // down arrow\n          e.preventDefault()\n          this.next()\n          break\n      }\n\n      e.stopPropagation()\n    }\n\n  , keydown: function (e) {\n      this.suppressKeyPressRepeat = ~$.inArray(e.keyCode, [40,38,9,13,27])\n      this.move(e)\n    }\n\n  , keypress: function (e) {\n      if (this.suppressKeyPressRepeat) return\n      this.move(e)\n    }\n\n  , keyup: function (e) {\n      switch(e.keyCode) {\n        case 40: // down arrow\n        case 38: // up arrow\n        case 16: // shift\n        case 17: // ctrl\n        case 18: // alt\n          break\n\n        case 9: // tab\n        case 13: // enter\n          if (!this.shown) return\n          this.select()\n          break\n\n        case 27: // escape\n          if (!this.shown) return\n          this.hide()\n          break\n\n        default:\n          this.lookup()\n      }\n\n      e.stopPropagation()\n      e.preventDefault()\n  }\n\n  , focus: function (e) {\n      this.focused = true\n    }\n\n  , blur: function (e) {\n      this.focused = false\n      if (!this.mousedover && this.shown) this.hide()\n    }\n\n  , click: function (e) {\n      e.stopPropagation()\n      e.preventDefault()\n      this.select()\n      this.$element.focus()\n    }\n\n  , mouseenter: function (e) {\n      this.mousedover = true\n      this.$menu.find('.active').removeClass('active')\n      $(e.currentTarget).addClass('active')\n    }\n\n  , mouseleave: function (e) {\n      this.mousedover = false\n      if (!this.focused && this.shown) this.hide()\n    }\n\n  }\n\n\n  /* TYPEAHEAD PLUGIN DEFINITION\n   * =========================== */\n\n  var old = $.fn.typeahead\n\n  $.fn.typeahead = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('typeahead')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('typeahead', (data = new Typeahead(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.typeahead.defaults = {\n    source: []\n  , items: 8\n  , menu: '<ul class=\"typeahead dropdown-menu\"></ul>'\n  , item: '<li><a href=\"#\"></a></li>'\n  , minLength: 1\n  }\n\n  $.fn.typeahead.Constructor = Typeahead\n\n\n /* TYPEAHEAD NO CONFLICT\n  * =================== */\n\n  $.fn.typeahead.noConflict = function () {\n    $.fn.typeahead = old\n    return this\n  }\n\n\n /* TYPEAHEAD DATA-API\n  * ================== */\n\n  $(document).on('focus.typeahead.data-api', '[data-provide=\"typeahead\"]', function (e) {\n    var $this = $(this)\n    if ($this.data('typeahead')) return\n    $this.typeahead($this.data())\n  })\n\n}(window.jQuery);\n/* ==========================================================\n * bootstrap-affix.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#affix\n * ==========================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* AFFIX CLASS DEFINITION\n  * ====================== */\n\n  var Affix = function (element, options) {\n    this.options = $.extend({}, $.fn.affix.defaults, options)\n    this.$window = $(window)\n      .on('scroll.affix.data-api', $.proxy(this.checkPosition, this))\n      .on('click.affix.data-api',  $.proxy(function () { setTimeout($.proxy(this.checkPosition, this), 1) }, this))\n    this.$element = $(element)\n    this.checkPosition()\n  }\n\n  Affix.prototype.checkPosition = function () {\n    if (!this.$element.is(':visible')) return\n\n    var scrollHeight = $(document).height()\n      , scrollTop = this.$window.scrollTop()\n      , position = this.$element.offset()\n      , offset = this.options.offset\n      , offsetBottom = offset.bottom\n      , offsetTop = offset.top\n      , reset = 'affix affix-top affix-bottom'\n      , affix\n\n    if (typeof offset != 'object') offsetBottom = offsetTop = offset\n    if (typeof offsetTop == 'function') offsetTop = offset.top()\n    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom()\n\n    affix = this.unpin != null && (scrollTop + this.unpin <= position.top) ?\n      false    : offsetBottom != null && (position.top + this.$element.height() >= scrollHeight - offsetBottom) ?\n      'bottom' : offsetTop != null && scrollTop <= offsetTop ?\n      'top'    : false\n\n    if (this.affixed === affix) return\n\n    this.affixed = affix\n    this.unpin = affix == 'bottom' ? position.top - scrollTop : null\n\n    this.$element.removeClass(reset).addClass('affix' + (affix ? '-' + affix : ''))\n  }\n\n\n /* AFFIX PLUGIN DEFINITION\n  * ======================= */\n\n  var old = $.fn.affix\n\n  $.fn.affix = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('affix')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('affix', (data = new Affix(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.affix.Constructor = Affix\n\n  $.fn.affix.defaults = {\n    offset: 0\n  }\n\n\n /* AFFIX NO CONFLICT\n  * ================= */\n\n  $.fn.affix.noConflict = function () {\n    $.fn.affix = old\n    return this\n  }\n\n\n /* AFFIX DATA-API\n  * ============== */\n\n  $(window).on('load', function () {\n    $('[data-spy=\"affix\"]').each(function () {\n      var $spy = $(this)\n        , data = $spy.data()\n\n      data.offset = data.offset || {}\n\n      data.offsetBottom && (data.offset.bottom = data.offsetBottom)\n      data.offsetTop && (data.offset.top = data.offsetTop)\n\n      $spy.affix(data)\n    })\n  })\n\n\n}(window.jQuery);"},function(t,e,n){n(3)(n(41))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,o,r,a,s,l=1,u={},c=!1,d=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){p(t.data)},i=function(t){r.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(o=d.documentElement,i=function(t){var e=d.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):i=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),i=function(e){t.postMessage(a+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return u[l]=o,i(l),l++},h.clearImmediate=f}function f(t){delete u[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{f(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(5),n(6))},function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(43),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(5))},function(t,e,n){(function(t,e){TDAR.worldmap={},TDAR.worldmap=function(t,n,i){"use strict";var o,r,a,s,l,u="_PLURAL",c={},d=.8,h=[44.505,-.03],f=void 0,p=!1,g=new Array,m=!0,v="worldmap",_="",y=[],b=0;function x(t){var e=n(t).find("script[data-mapdata]").text()||"null";if("null"!=e)return JSON.parse(e)}var w={scale:["#FFF","#FED976","#FEB24C","#FD8D3C","#FC4E2A","#E31A1C","#BD0026"]},S={valueProperty:function(t){return t&&c[t.id]?c[t.id]:0},scale:["#fff","#4B514D"],mode:"q",style:{color:"#ccc",weight:1,fillOpacity:.8},onEachFeature:function(t,e){m&&(e.title="test",e.alt="test",e.on({click:C,mouseover:P,mouseout:E}),"USA"==e.feature.id&&e.setStyle({fillColor:"#800026"}))}};function T(t,e,i){var o={};i?o=S:n.extend(o,S,w);var r=L.choropleth(t,o);return L.DomEvent.on(r,"click",L.DomEvent.stopPropagation),r.addTo(e),r}function C(e){if(m){e.target.feature.geometry.coordinates[0];var i=e.target.feature.id;t.log(e.target.feature);var o=n("#mapGraphZoomOut"),a=n("#mapGraphSearch"),l=e.target.feature.properties.name;return void 0!=i?("RUS"!=i&&o.show(),a.show(),_=D(void 0,i,l)):(o.hide(),a.hide()),s=i,i&&0!=i.indexOf("US")&&void 0!=f&&(r.removeLayer(f),f=void 0),"USA"==i&&void 0==f&&n.getJSON(TDAR.uri("/js/maps/USA.json")).done(function(t){f=T(t,r,!0)}),A(l,i),"RUS"!=i&&(r.fitBounds(e.target.getBounds()),p=!0),e&&L.DomEvent.preventDefault(e),!1}}function A(t,i){var o=n("#mapgraphdata"),r=n("#mapGraphHeader");void 0==t?r.html("Worldwide"):r.html(t);var c=[];c=x(a.parent())["geographic.ISO,resourceType"];if(void 0!=i)c.filter(function(t){return t.value==i}).forEach(function(t){t.pivot.forEach(function(t){if(parseInt(t.count)&&t.count>0&&"resourceType"==t.field){var e=l[t.value+u];1==parseInt(t.count)&&(e=l[t.value]),c.push([e,t.count])}})});else{if(0==g.length){var d={};if(c&&c.length>0)for(var h in c.forEach(function(t){3==t.value.length&&t.pivot.forEach(function(t){if(parseInt(t.count)&&t.count>0&&"resourceType"==t.field){var e=0;parseInt(d[t.value])&&(e=parseInt(d[t.value])),d[t.value]=e+parseInt(t.count)}})}),d)if(d.hasOwnProperty(h)){var f=d[h],p=l[h+u];1==f&&(p=l[h]),g.push([p,f])}}c=g}var m={bindto:"#mapgraphpie",data:{columns:c,type:"pie",onclick:function(e,n){var i="";for(var o in l)e.id===l[o]&&(i=o);i.indexOf(u)>0&&(i=i.substring(0,i.length-u.length));var r=D(i,s,t);window.location.href=TDAR.c3graphsupport.getClickPath(r)}},pie:{label:{show:!1}},donut:{label:{show:!1}},tooltip:{format:{value:function(t,e,n,i){return I(t)+" ("+(100*e).toFixed(2)+"%)"}}},size:{height:3*o.height()/5}};"vertical"==o.data("mode")?(m.legend={position:"bottom",inset:{anchor:"top-left",x:20,y:0,step:4}},m.size.height="300px"):m.legend={position:"right",inset:{anchor:"top-left",x:20,y:0,step:4}},y.length>0&&(m.color={},m.color.pattern=y),setTimeout(100,e.generate(m))}function D(t,e,n){var i="/geographic/"+e+"?";return void 0==e&&(i="/search/results?"),t&&(i+="resourceTypes="+t),i}function k(){r.setView(h,d),p=!1;var t=n("#mapGraphZoomOut"),e=n("#mapGraphSearch");t.hide(),e.hide(),s=void 0,void 0!=o&&o.setStyle({fillOpacity:1}),r.eachLayer(function(t){"function"==typeof t.redraw&&t.redraw()}),void 0!=f&&(r.removeLayer(f),f=void 0),A()}function P(t){var e,i=t.target,o=0;if(void 0!=i.feature.id&&(e=i.feature.id,o=void 0!=c[e]?c[e]:0),n("#data").html(i.feature.properties.name+": "+I(o)),!0===p)return!1;i.setStyle({fillOpacity:.7})}function E(t){if(!0===p)return!1;t.target.setStyle({fillOpacity:1}),n("#data").html("")}function M(t){return(t=parseInt(t))>1e3?"#800026":t>100?"#BD0026":t>20?"#E31A1C":t>10?"#FC4E2A":t>5?"#FD8D3C":t>2?"#FEB24C":t>1?"#FED976":"#FFF"}function I(t){var e=Math.floor(t).toString().split("."),n=t%1,i=e[0].split("").reverse().join("").replace(/(\d{3})\B/g,"$1,").split("").reverse().join("");return i+=e[1]?"."+e[1]:"",n>0&&(i+="."+n.toFixed(2).replace("0.","")),i}return{initWorldMap:function(e,i,o){if(void 0!=e&&(v=e),void 0!=document.getElementById(v)){t.log("init:"+e);var s=(a=n("#"+v)).parent(),u=x(s),f=n("#c3colors");f.length>0&&(y=JSON.parse(f.html()));var p=!0,g=!0;"mini"==i&&(p=!1,d=-.4,m=!1,g=!1,h=[44.505,40]),r=L.map(v,{sleep:!0,sleepTime:750,wakeTime:750,sleepNote:!1,hoverToWake:!0,sleepOpacity:1,zoomControl:p,minZoom:-1,dragging:g,scrollWheelZoom:g,touchZoom:g,doubleClickZoom:g}),!function(e){t.log(e);var n=e["geographic.ISO,resourceType"];if(n&&n.length>0)for(var i=0;i<n.length;i++)if(c[n[i].value]=n[i].count,n[i].value.length<4){var o=parseInt(n[i].count);o>b&&(b=o)}}(u),l=function(t){var e=n(t).find("script[data-locales]").text()||"null";if("null"!=e)return JSON.parse(e)}(s),"mini"!=i&&function(t,e,i,o){var r=L.control({position:"bottomright"}),a=L.control({position:"topright"});a.onAdd=function(t){var e=L.DomUtil.create("div","topright"),i=L.DomUtil.create("div","mapGraphZoomOut");i.id="mapGraphZoomOut";var o=n(i).append("<i class='icon-zoom-out'></i> Zoom Out"),r=L.DomUtil.create("div","mapGraphSearch");r.id="mapGraphSearch";var a=n(r);return a.append("<i class='icon-search'></i> Search"),a.click(function(){window.location.href=TDAR.c3graphsupport.getClickPath(_)}),o.click(function(){k()}),e.appendChild(i),e.appendChild(r),e},a.addTo(t),r.onAdd=function(t){var r=L.DomUtil.create("div","info");n(r).append("<div id='data'></div>");var a=L.DomUtil.create("div"," legend");a.innerHTML+=" <span>0</span> ";for(var s=0;s<e.length;s++)a.innerHTML+='<i style="width:10px;height:10px;display:inline-block;background:'+i(e[s]+1)+'">&nbsp;</i> ';return a.innerHTML+=" <span>"+I(o)+"</span> ",n(r).append(a),r},r.addTo(t)}(r,[0,1,2,5,10,20,100,1e3],M,b),k();var w=n.getJSON(TDAR.uri("/js/maps/world.json"));if(w.done(function(t){T(t,r)}),w.fail(function(e){t.error("Failed to load world.json file. XHR result follows this line.",e)}),r.on("click",k),void 0!=o&&o.length>0){var S=JSON.parse(n(""+o).html()),C=L.geoJson(S,{style:{className:"keywordHighlight"}});"USA"==n("#worldmap").data("code")?(r.setZoom(1),r.panTo([39.5,-98.35])):(r.fitBounds(C.getBounds()),r.zoomOut(1)),C.addTo(r),C.bringToFront(),C.setZIndex(1e3)}return r}},resetView:k,main:function(){t.log("running main..."),TDAR.worldmap.initWorldMap("worldmap","horizontal","")}}}(console,t,window)}).call(this,n(0),n(8))},function(t,e,n){(function(i){var o,r,a,s,l,u,c,d,h;a={id:"sifter",exports:{},loaded:!1},o="function"==typeof(r=function(){var t=function(t,e){this.items=t,this.settings=e||{diacritics:!0}};t.prototype.tokenize=function(t){if(!(t=r(String(t||"").toLowerCase()))||!t.length)return[];var e,n,i,o,s=[],u=t.split(/ +/);for(e=0,n=u.length;e<n;e++){if(i=a(u[e]),this.settings.diacritics)for(o in l)l.hasOwnProperty(o)&&(i=i.replace(new RegExp(o,"g"),l[o]));s.push({string:u[e],regex:new RegExp(i,"i")})}return s},t.prototype.iterator=function(t,e){(s(t)?Array.prototype.forEach||function(t){for(var e=0,n=this.length;e<n;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)}).apply(t,[e])},t.prototype.getScoreFunction=function(t,e){var n,i,r,a;t=this.prepareSearch(t,e),i=t.tokens,n=t.options.fields,r=i.length,a=t.options.nesting;var s,l=function(t,e){var n,i;return t?(t=String(t||""),-1===(i=t.search(e.regex))?0:(n=e.string.length/t.length,0===i&&(n+=.5),n)):0},u=(s=n.length)?1===s?function(t,e){return l(o(e,n[0],a),t)}:function(t,e){for(var i=0,r=0;i<s;i++)r+=l(o(e,n[i],a),t);return r/s}:function(){return 0};return r?1===r?function(t){return u(i[0],t)}:"and"===t.options.conjunction?function(t){for(var e,n=0,o=0;n<r;n++){if((e=u(i[n],t))<=0)return 0;o+=e}return o/r}:function(t){for(var e=0,n=0;e<r;e++)n+=u(i[e],t);return n/r}:function(){return 0}},t.prototype.getSortFunction=function(t,n){var i,r,a,s,l,u,c,d,h,f,p;if(t=(a=this).prepareSearch(t,n),p=!t.query&&n.sort_empty||n.sort,h=function(t,e){return"$score"===t?e.score:o(a.items[e.id],t,n.nesting)},l=[],p)for(i=0,r=p.length;i<r;i++)(t.query||"$score"!==p[i].field)&&l.push(p[i]);if(t.query){for(f=!0,i=0,r=l.length;i<r;i++)if("$score"===l[i].field){f=!1;break}f&&l.unshift({field:"$score",direction:"desc"})}else for(i=0,r=l.length;i<r;i++)if("$score"===l[i].field){l.splice(i,1);break}for(d=[],i=0,r=l.length;i<r;i++)d.push("desc"===l[i].direction?-1:1);return(u=l.length)?1===u?(s=l[0].field,c=d[0],function(t,n){return c*e(h(s,t),h(s,n))}):function(t,n){var i,o,r;for(i=0;i<u;i++)if(r=l[i].field,o=d[i]*e(h(r,t),h(r,n)))return o;return 0}:null},t.prototype.prepareSearch=function(t,e){if("object"==typeof t)return t;var i=(e=n({},e)).fields,o=e.sort,r=e.sort_empty;return i&&!s(i)&&(e.fields=[i]),o&&!s(o)&&(e.sort=[o]),r&&!s(r)&&(e.sort_empty=[r]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t),total:0,items:[]}},t.prototype.search=function(t,e){var n,i,o,r;return i=this.prepareSearch(t,e),e=i.options,t=i.query,r=e.score||this.getScoreFunction(i),t.length?this.iterator(this.items,function(t,o){n=r(t),(!1===e.filter||n>0)&&i.items.push({score:n,id:o})}):this.iterator(this.items,function(t,e){i.items.push({score:1,id:e})}),(o=this.getSortFunction(i,e))&&i.items.sort(o),i.total=i.items.length,"number"==typeof e.limit&&(i.items=i.items.slice(0,e.limit)),i};var e=function(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=u(String(t||"")),e=u(String(e||"")),t>e?1:e>t?-1:0)},n=function(t,e){var n,i,o,r;for(n=1,i=arguments.length;n<i;n++)if(r=arguments[n])for(o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);return t},o=function(t,e,n){if(t&&e){if(!n)return t[e];for(var i=e.split(".");i.length&&(t=t[i.shift()]););return t}},r=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},a=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},s=Array.isArray||void 0!==i&&i.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},l={a:"[a]",b:"[bB]",c:"[cCc]",d:"[dDd]",e:"[e]",f:"[f]",g:"[g]",h:"[h]",i:"[iiI]",j:"[j]",k:"[k]",l:"[l]",n:"[nNn]",o:"[o]",p:"[p]",q:"[qq]",r:"[r]",s:"[sSs]",t:"[t]",u:"[u]",v:"[v]",w:"[w]",x:"[x]",y:"[y]",z:"[z]"},u=function(){var t,e,n,i,o="",r={};for(n in l)if(l.hasOwnProperty(n))for(i=l[n].substring(2,l[n].length-1),o+=i,t=0,e=i.length;t<e;t++)r[i.charAt(t)]=n;var a=new RegExp("["+o+"]","g");return function(t){return t.replace(a,function(t){return r[t]}).toLowerCase()}}();return t})?r.call(a.exports,n,a.exports,a):r,a.loaded=!0,void 0!==o||(o=a.exports),u={id:"microplugin",exports:{},loaded:!1},s="function"==typeof(l=function(){var t={mixin:function(t){t.plugins={},t.prototype.initializePlugins=function(t){var n,i,o,r=[];if(this.plugins={names:[],settings:{},requested:{},loaded:{}},e.isArray(t))for(n=0,i=t.length;n<i;n++)"string"==typeof t[n]?r.push(t[n]):(this.plugins.settings[t[n].name]=t[n].options,r.push(t[n].name));else if(t)for(o in t)t.hasOwnProperty(o)&&(this.plugins.settings[o]=t[o],r.push(o));for(;r.length;)this.require(r.shift())},t.prototype.loadPlugin=function(e){var n=this.plugins,i=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');n.requested[e]=!0,n.loaded[e]=i.fn.apply(this,[this.plugins.settings[e]||{}]),n.names.push(e)},t.prototype.require=function(t){var e=this.plugins;if(!this.plugins.loaded.hasOwnProperty(t)){if(e.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');this.loadPlugin(t)}return e.loaded[t]},t.define=function(e,n){t.plugins[e]={name:e,fn:n}}}},e={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}};return t})?l.call(u.exports,n,u.exports,u):l,u.loaded=!0,void 0!==s||(s=u.exports),d=[n(0),o,s],void 0===(h="function"==typeof(c=function(t,e,n){"use strict";var i=function(t,e){if("string"!=typeof e||e.length){var n="string"==typeof e?new RegExp(e,"i"):e,i=function(t){var e=0;if(3===t.nodeType){var o=t.data.search(n);if(o>=0&&t.data.length>0){var r=t.data.match(n),a=document.createElement("span");a.className="highlight";var s=t.splitText(o),l=(s.splitText(r[0].length),s.cloneNode(!0));a.appendChild(l),s.parentNode.replaceChild(a,s),e=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName))for(var u=0;u<t.childNodes.length;++u)u+=i(t.childNodes[u]);return e};return t.each(function(){i(this)})}};t.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var t=this.parentNode;t.replaceChild(this.firstChild,this),t.normalize()}).end()};var o=function(){};o.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[t]:(this._events=this._events||{},void(t in this._events!=0&&this._events[t].splice(this._events[t].indexOf(e),1)))},trigger:function(t){if(this._events=this._events||{},t in this._events!=0)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},o.mixin=function(t){for(var e=["on","off","trigger"],n=0;n<e.length;n++)t.prototype[e[n]]=o.prototype[e[n]]};var r,a,s=/Mac/.test(navigator.userAgent),l=s?91:17,u=s?18:17,c=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,d=function(t){return void 0!==t},h=function(t){return void 0===t||null===t?null:"boolean"==typeof t?t?"1":"0":t+""},f=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},p={before:function(t,e,n){var i=t[e];t[e]=function(){return n.apply(t,arguments),i.apply(t,arguments)}},after:function(t,e,n){var i=t[e];t[e]=function(){var e=i.apply(t,arguments);return n.apply(t,arguments),e}}},g=function(t,e,n){var i,o=t.trigger,r={};for(i in t.trigger=function(){var n=arguments[0];if(-1===e.indexOf(n))return o.apply(t,arguments);r[n]=arguments},n.apply(t,[]),t.trigger=o,r)r.hasOwnProperty(i)&&o.apply(t,r[i])},m=function(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-t.value.length),e.start=n.text.length-i,e.length=i}return e},v=function(n,i){var o,r,a,s;(s=n[0]).selectize=this;var l,u,c,d=window.getComputedStyle&&window.getComputedStyle(s,null);if(a=(a=d?d.getPropertyValue("direction"):s.currentStyle&&s.currentStyle.direction)||n.parents("[dir]:first").attr("dir")||"",t.extend(this,{order:0,settings:i,$input:n,tabIndex:n.attr("tabindex")||"",tagType:"select"===s.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(a),eventNS:".selectize"+ ++v.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:n.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===i.loadThrottle?this.onSearchChange:(l=this.onSearchChange,u=i.loadThrottle,function(){var t=this,e=arguments;window.clearTimeout(c),c=window.setTimeout(function(){l.apply(t,e)},u)})}),this.sifter=new e(this.options,{diacritics:i.diacritics}),this.settings.options){for(o=0,r=this.settings.options.length;o<r;o++)this.registerOption(this.settings.options[o]);delete this.settings.options}if(this.settings.optgroups){for(o=0,r=this.settings.optgroups.length;o<r;o++)this.registerOptionGroup(this.settings.optgroups[o]);delete this.settings.optgroups}this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),"boolean"!=typeof this.settings.hideSelected&&(this.settings.hideSelected="multi"===this.settings.mode),this.initializePlugins(this.settings.plugins),this.setupCallbacks(),this.setupTemplates(),this.setup()};return o.mixin(v),void 0!==n?n.mixin(v):(r="Dependency MicroPlugin is missing",(a={explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'})||(a={}),console.error("Selectize: "+r),a.explanation&&(console.group&&console.group(),console.error(a.explanation),console.group&&console.groupEnd())),t.extend(v.prototype,{setup:function(){var e,n,i,o,r,a,d,h,f,p,g,v,_,y,b=this,x=b.settings,w=b.eventNS,S=t(window),T=t(document),C=b.$input;if(d=b.settings.mode,h=C.attr("class")||"",e=t("<div>").addClass(x.wrapperClass).addClass(h).addClass(d),n=t("<div>").addClass(x.inputClass).addClass("items").appendTo(e),i=t('<input type="text" autocomplete="off" />').appendTo(n).attr("tabindex",C.is(":disabled")?"-1":b.tabIndex),a=t(x.dropdownParent||e),o=t("<div>").addClass(x.dropdownClass).addClass(d).hide().appendTo(a),r=t("<div>").addClass(x.dropdownContentClass).appendTo(o),(p=C.attr("id"))&&(i.attr("id",p+"-selectized"),t("label[for='"+p+"']").attr("for",p+"-selectized")),b.settings.copyClassesToDropdown&&o.addClass(h),e.css({width:C[0].style.width}),b.plugins.names.length&&(f="plugin-"+b.plugins.names.join(" plugin-"),e.addClass(f),o.addClass(f)),(null===x.maxItems||x.maxItems>1)&&1===b.tagType&&C.attr("multiple","multiple"),b.settings.placeholder&&i.attr("placeholder",x.placeholder),!b.settings.splitOn&&b.settings.delimiter){var L=b.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");b.settings.splitOn=new RegExp("\\s*"+L+"+\\s*")}C.attr("autocorrect")&&i.attr("autocorrect",C.attr("autocorrect")),C.attr("autocapitalize")&&i.attr("autocapitalize",C.attr("autocapitalize")),b.$wrapper=e,b.$control=n,b.$control_input=i,b.$dropdown=o,b.$dropdown_content=r,o.on("mouseenter","[data-selectable]",function(){return b.onOptionHover.apply(b,arguments)}),o.on("mousedown click","[data-selectable]",function(){return b.onOptionSelect.apply(b,arguments)}),v="mousedown",_="*:not(input)",y=function(){return b.onItemSelect.apply(b,arguments)},(g=n).on(v,_,function(t){for(var e=t.target;e&&e.parentNode!==g[0];)e=e.parentNode;return t.currentTarget=e,y.apply(this,[t])}),function(e){var n=null,i=function(i,o){var r,a,s,l,u,c,d,h;i=i||window.event||{},o=o||{},i.metaKey||i.altKey||(o.force||!1!==e.data("grow"))&&(r=e.val(),i.type&&"keydown"===i.type.toLowerCase()&&(a=i.keyCode,s=a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||32===a,46===a||8===a?(h=m(e[0])).length?r=r.substring(0,h.start)+r.substring(h.start+h.length):8===a&&h.start?r=r.substring(0,h.start-1)+r.substring(h.start+1):46===a&&void 0!==h.start&&(r=r.substring(0,h.start)+r.substring(h.start+1)):s&&(c=i.shiftKey,d=String.fromCharCode(i.keyCode),d=c?d.toUpperCase():d.toLowerCase(),r+=d)),l=e.attr("placeholder"),!r&&l&&(r=l),(u=function(e,n){if(!e)return 0;var i=t("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(e).appendTo("body");!function(t,e,n){var i,o,r={};if(n)for(i=0,o=n.length;i<o;i++)r[n[i]]=t.css(n[i]);else r=t.css();e.css(r)}(n,i,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var o=i.width();return i.remove(),o}(r,e)+4)!==n&&(n=u,e.width(u),e.triggerHandler("resize")))};e.on("keydown keyup update blur",i),i()}(i),n.on({mousedown:function(){return b.onMouseDown.apply(b,arguments)},click:function(){return b.onClick.apply(b,arguments)}}),i.on({mousedown:function(t){t.stopPropagation()},keydown:function(){return b.onKeyDown.apply(b,arguments)},keyup:function(){return b.onKeyUp.apply(b,arguments)},keypress:function(){return b.onKeyPress.apply(b,arguments)},resize:function(){b.positionDropdown.apply(b,[])},blur:function(){return b.onBlur.apply(b,arguments)},focus:function(){return b.ignoreBlur=!1,b.onFocus.apply(b,arguments)},paste:function(){return b.onPaste.apply(b,arguments)}}),T.on("keydown"+w,function(t){b.isCmdDown=t[s?"metaKey":"ctrlKey"],b.isCtrlDown=t[s?"altKey":"ctrlKey"],b.isShiftDown=t.shiftKey}),T.on("keyup"+w,function(t){t.keyCode===u&&(b.isCtrlDown=!1),16===t.keyCode&&(b.isShiftDown=!1),t.keyCode===l&&(b.isCmdDown=!1)}),T.on("mousedown"+w,function(t){if(b.isFocused){if(t.target===b.$dropdown[0]||t.target.parentNode===b.$dropdown[0])return!1;b.$control.has(t.target).length||t.target===b.$control[0]||b.blur(t.target)}}),S.on(["scroll"+w,"resize"+w].join(" "),function(){b.isOpen&&b.positionDropdown.apply(b,arguments)}),S.on("mousemove"+w,function(){b.ignoreHover=!1}),this.revertSettings={$children:C.children().detach(),tabindex:C.attr("tabindex")},C.attr("tabindex",-1).hide().after(b.$wrapper),t.isArray(x.items)&&(b.setValue(x.items),delete x.items),c&&C.on("invalid"+w,function(t){t.preventDefault(),b.isInvalid=!0,b.refreshState()}),b.updateOriginalInput(),b.refreshItems(),b.refreshState(),b.updatePlaceholder(),b.isSetup=!0,C.is(":disabled")&&b.disable(),b.on("change",this.onChange),C.data("selectize",b),C.addClass("selectized"),b.trigger("initialize"),!0===x.preload&&b.onSearchChange("")},setupTemplates:function(){var e=this.settings.labelField,n=this.settings.optgroupLabelField,i={optgroup:function(t){return'<div class="optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[n])+"</div>"},option:function(t,n){return'<div class="option">'+n(t[e])+"</div>"},item:function(t,n){return'<div class="item">'+n(t[e])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"}};this.settings.render=t.extend({},i,this.settings.render)},setupCallbacks:function(){var t,e,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in n)n.hasOwnProperty(t)&&(e=this.settings[n[t]])&&this.on(t,e)},onClick:function(t){this.isFocused||(this.focus(),t.preventDefault())},onMouseDown:function(e){var n=this,i=e.isDefaultPrevented();if(t(e.target),n.isFocused){if(e.target!==n.$control_input[0])return"single"===n.settings.mode?n.isOpen?n.close():n.open():i||n.setActiveItem(null),!1}else i||window.setTimeout(function(){n.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var n=this;n.isFull()||n.isInputHidden||n.isLocked?e.preventDefault():n.settings.splitOn&&setTimeout(function(){var e=n.$control_input.val();if(e.match(n.settings.splitOn))for(var i=t.trim(e).split(n.settings.splitOn),o=0,r=i.length;o<r;o++)n.createItem(i[o])},0)},onKeyPress:function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},onKeyDown:function(t){if(t.target,this.$control_input[0],this.isLocked)9!==t.keyCode&&t.preventDefault();else{switch(t.keyCode){case 65:if(this.isCmdDown)return void this.selectAll();break;case 27:return void(this.isOpen&&(t.preventDefault(),t.stopPropagation(),this.close()));case 78:if(!t.ctrlKey||t.altKey)break;case 40:if(!this.isOpen&&this.hasOptions)this.open();else if(this.$activeOption){this.ignoreHover=!0;var e=this.getAdjacentOption(this.$activeOption,1);e.length&&this.setActiveOption(e,!0,!0)}return void t.preventDefault();case 80:if(!t.ctrlKey||t.altKey)break;case 38:if(this.$activeOption){this.ignoreHover=!0;var n=this.getAdjacentOption(this.$activeOption,-1);n.length&&this.setActiveOption(n,!0,!0)}return void t.preventDefault();case 13:return void(this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),t.preventDefault()));case 37:return void this.advanceSelection(-1,t);case 39:return void this.advanceSelection(1,t);case 9:return this.settings.selectOnTab&&this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),this.isFull()||t.preventDefault()),void(this.settings.create&&this.createItem()&&t.preventDefault());case 8:case 46:return void this.deleteSelection(t)}!this.isFull()&&!this.isInputHidden||(s?t.metaKey:t.ctrlKey)||t.preventDefault()}},onKeyUp:function(t){if(this.isLocked)return t&&t.preventDefault();var e=this.$control_input.val()||"";this.lastValue!==e&&(this.lastValue=e,this.onSearchChange(e),this.refreshOptions(),this.trigger("type",e))},onSearchChange:function(t){var e=this,n=e.settings.load;n&&(e.loadedSearches.hasOwnProperty(t)||(e.loadedSearches[t]=!0,e.load(function(i){n.apply(e,[t,i])})))},onFocus:function(t){var e=this.isFocused;if(this.isDisabled)return this.blur(),t&&t.preventDefault(),!1;this.ignoreFocus||(this.isFocused=!0,"focus"===this.settings.preload&&this.onSearchChange(""),e||this.trigger("focus"),this.$activeItems.length||(this.showInput(),this.setActiveItem(null),this.refreshOptions(!!this.settings.openOnFocus)),this.refreshState())},onBlur:function(t,e){var n=this;if(n.isFocused&&(n.isFocused=!1,!n.ignoreFocus)){if(!n.ignoreBlur&&document.activeElement===n.$dropdown_content[0])return n.ignoreBlur=!0,void n.onFocus(t);var i=function(){n.close(),n.setTextboxValue(""),n.setActiveItem(null),n.setActiveOption(null),n.setCaret(n.items.length),n.refreshState(),e&&e.focus&&e.focus(),n.ignoreFocus=!1,n.trigger("blur")};n.ignoreFocus=!0,n.settings.create&&n.settings.createOnBlur?n.createItem(null,!1,i):i()}},onOptionHover:function(t){this.ignoreHover||this.setActiveOption(t.currentTarget,!1)},onOptionSelect:function(e){var n,i,o=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),(i=t(e.currentTarget)).hasClass("create")?o.createItem(null,function(){o.settings.closeAfterSelect&&o.close()}):void 0!==(n=i.attr("data-value"))&&(o.lastQuery=null,o.setTextboxValue(""),o.addItem(n),o.settings.closeAfterSelect?o.close():!o.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&o.setActiveOption(o.getOption(n)))},onItemSelect:function(t){this.isLocked||"multi"===this.settings.mode&&(t.preventDefault(),this.setActiveItem(t.currentTarget,t))},load:function(t){var e=this,n=e.$wrapper.addClass(e.settings.loadingClass);e.loading++,t.apply(e,[function(t){e.loading=Math.max(e.loading-1,0),t&&t.length&&(e.addOption(t),e.refreshOptions(e.isFocused&&!e.isInputHidden)),e.loading||n.removeClass(e.settings.loadingClass),e.trigger("load",t)}])},setTextboxValue:function(t){var e=this.$control_input;e.val()!==t&&(e.val(t).triggerHandler("update"),this.lastValue=t)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(t,e){g(this,e?[]:["change"],function(){this.clear(e),this.addItems(t,e)})},setActiveItem:function(e,n){var i,o,r,a,s,l,u,c;if("single"!==this.settings.mode){if(!(e=t(e)).length)return t(this.$activeItems).removeClass("active"),this.$activeItems=[],void(this.isFocused&&this.showInput());if("mousedown"===(i=n&&n.type.toLowerCase())&&this.isShiftDown&&this.$activeItems.length){for(c=this.$control.children(".active:last"),(a=Array.prototype.indexOf.apply(this.$control[0].childNodes,[c[0]]))>(s=Array.prototype.indexOf.apply(this.$control[0].childNodes,[e[0]]))&&(u=a,a=s,s=u),o=a;o<=s;o++)l=this.$control[0].childNodes[o],-1===this.$activeItems.indexOf(l)&&(t(l).addClass("active"),this.$activeItems.push(l));n.preventDefault()}else"mousedown"===i&&this.isCtrlDown||"keydown"===i&&this.isShiftDown?e.hasClass("active")?(r=this.$activeItems.indexOf(e[0]),this.$activeItems.splice(r,1),e.removeClass("active")):this.$activeItems.push(e.addClass("active")[0]):(t(this.$activeItems).removeClass("active"),this.$activeItems=[e.addClass("active")[0]]);this.hideInput(),this.isFocused||this.focus()}},setActiveOption:function(e,n,i){var o,r,a,s,l;this.$activeOption&&this.$activeOption.removeClass("active"),this.$activeOption=null,(e=t(e)).length&&(this.$activeOption=e.addClass("active"),!n&&d(n)||(o=this.$dropdown_content.height(),r=this.$activeOption.outerHeight(!0),n=this.$dropdown_content.scrollTop()||0,s=a=this.$activeOption.offset().top-this.$dropdown_content.offset().top+n,l=a-o+r,a+r>o+n?this.$dropdown_content.stop().animate({scrollTop:l},i?this.settings.scrollDuration:0):a<n&&this.$dropdown_content.stop().animate({scrollTop:s},i?this.settings.scrollDuration:0)))},selectAll:function(){"single"!==this.settings.mode&&(this.$activeItems=Array.prototype.slice.apply(this.$control.children(":not(input)").addClass("active")),this.$activeItems.length&&(this.hideInput(),this.close()),this.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0,position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.$control_input[0].focus(),window.setTimeout(function(){t.ignoreFocus=!1,t.onFocus()},0))},blur:function(t){this.$control_input[0].blur(),this.onBlur(null,t)},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var t=this.settings,e=t.sortField;return"string"==typeof e&&(e=[{field:e}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e}},search:function(e){var n,i,o,r=this.settings,a=this.getSearchOptions();if(r.score&&"function"!=typeof(o=this.settings.score.apply(this,[e])))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==this.lastQuery?(this.lastQuery=e,i=this.sifter.search(e,t.extend(a,{score:o})),this.currentResults=i):i=t.extend(!0,{},this.currentResults),r.hideSelected)for(n=i.items.length-1;n>=0;n--)-1!==this.items.indexOf(h(i.items[n].id))&&i.items.splice(n,1);return i},refreshOptions:function(e){var n,o,r,a,s,l,u,c,d,f,p,g,m,v,_,y;void 0===e&&(e=!0);var b,x,w=this,S=t.trim(w.$control_input.val()),T=w.search(S),C=w.$dropdown_content,L=w.$activeOption&&h(w.$activeOption.attr("data-value"));for(a=T.items.length,"number"==typeof w.settings.maxOptions&&(a=Math.min(a,w.settings.maxOptions)),s={},l=[],n=0;n<a;n++)for(u=w.options[T.items[n].id],c=w.render("option",u),d=u[w.settings.optgroupField]||"",o=0,r=(f=t.isArray(d)?d:[d])&&f.length;o<r;o++)d=f[o],w.optgroups.hasOwnProperty(d)||(d=""),s.hasOwnProperty(d)||(s[d]=document.createDocumentFragment(),l.push(d)),s[d].appendChild(c);for(this.settings.lockOptgroupOrder&&l.sort(function(t,e){return(w.optgroups[t].$order||0)-(w.optgroups[e].$order||0)}),p=document.createDocumentFragment(),n=0,a=l.length;n<a;n++)d=l[n],w.optgroups.hasOwnProperty(d)&&s[d].childNodes.length?((g=document.createDocumentFragment()).appendChild(w.render("optgroup_header",w.optgroups[d])),g.appendChild(s[d]),p.appendChild(w.render("optgroup",t.extend({},w.optgroups[d],{html:(b=g,x=void 0,x=document.createElement("div"),x.appendChild(b.cloneNode(!0)),x.innerHTML),dom:g})))):p.appendChild(s[d]);if(C.html(p),w.settings.highlight&&T.query.length&&T.tokens.length)for(C.removeHighlight(),n=0,a=T.tokens.length;n<a;n++)i(C,T.tokens[n].regex);if(!w.settings.hideSelected)for(n=0,a=w.items.length;n<a;n++)w.getOption(w.items[n]).addClass("selected");(m=w.canCreate(S))&&(C.prepend(w.render("option_create",{input:S})),y=t(C[0].childNodes[0])),w.hasOptions=T.items.length>0||m,w.hasOptions?(T.items.length>0?((_=L&&w.getOption(L))&&_.length?v=_:"single"===w.settings.mode&&w.items.length&&(v=w.getOption(w.items[0])),v&&v.length||(v=y&&!w.settings.addPrecedence?w.getAdjacentOption(y,1):C.find("[data-selectable]:first"))):v=y,w.setActiveOption(v),e&&!w.isOpen&&w.open()):(w.setActiveOption(null),e&&w.isOpen&&w.close())},addOption:function(e){var n,i,o;if(t.isArray(e))for(n=0,i=e.length;n<i;n++)this.addOption(e[n]);else(o=this.registerOption(e))&&(this.userOptions[o]=!0,this.lastQuery=null,this.trigger("option_add",o,e))},registerOption:function(t){var e=h(t[this.settings.valueField]);return void 0!==e&&null!==e&&!this.options.hasOwnProperty(e)&&(t.$order=t.$order||++this.order,this.options[e]=t,e)},registerOptionGroup:function(t){var e=h(t[this.settings.optgroupValueField]);return!!e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)},addOptionGroup:function(t,e){e[this.settings.optgroupValueField]=t,(t=this.registerOptionGroup(e))&&this.trigger("optgroup_add",t,e)},removeOptionGroup:function(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.renderCache={},this.trigger("optgroup_remove",t))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,n){var i,o,r,a,s,l,u;if(e=h(e),r=h(n[this.settings.valueField]),null!==e&&this.options.hasOwnProperty(e)){if("string"!=typeof r)throw new Error("Value must be set in option data");u=this.options[e].$order,r!==e&&(delete this.options[e],-1!==(a=this.items.indexOf(e))&&this.items.splice(a,1,r)),n.$order=n.$order||u,this.options[r]=n,s=this.renderCache.item,l=this.renderCache.option,s&&(delete s[e],delete s[r]),l&&(delete l[e],delete l[r]),-1!==this.items.indexOf(r)&&(i=this.getItem(e),o=t(this.render("item",n)),i.hasClass("active")&&o.addClass("active"),i.replaceWith(o)),this.lastQuery=null,this.isOpen&&this.refreshOptions(!1)}},removeOption:function(t,e){t=h(t);var n=this.renderCache.item,i=this.renderCache.option;n&&delete n[t],i&&delete i[t],delete this.userOptions[t],delete this.options[t],this.lastQuery=null,this.trigger("option_remove",t),this.removeItem(t,e)},clearOptions:function(){this.loadedSearches={},this.userOptions={},this.renderCache={},this.options=this.sifter.items={},this.lastQuery=null,this.trigger("option_clear"),this.clear()},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(e,n){var i=this.$dropdown.find("[data-selectable]"),o=i.index(e)+n;return o>=0&&o<i.length?i.eq(o):t()},getElementWithValue:function(e,n){if(void 0!==(e=h(e))&&null!==e)for(var i=0,o=n.length;i<o;i++)if(n[i].getAttribute("data-value")===e)return t(n[i]);return t()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},addItems:function(e,n){for(var i=t.isArray(e)?e:[e],o=0,r=i.length;o<r;o++)this.isPending=o<r-1,this.addItem(i[o],n)},addItem:function(e,n){g(this,n?[]:["change"],function(){var i,o,r,a,s,l=this.settings.mode;e=h(e),-1===this.items.indexOf(e)?this.options.hasOwnProperty(e)&&("single"===l&&this.clear(n),"multi"===l&&this.isFull()||(i=t(this.render("item",this.options[e])),s=this.isFull(),this.items.splice(this.caretPos,0,e),this.insertAtCaret(i),(!this.isPending||!s&&this.isFull())&&this.refreshState(),this.isSetup&&(r=this.$dropdown_content.find("[data-selectable]"),this.isPending||(o=this.getOption(e),a=this.getAdjacentOption(o,1).attr("data-value"),this.refreshOptions(this.isFocused&&"single"!==l),a&&this.setActiveOption(this.getOption(a))),!r.length||this.isFull()?this.close():this.positionDropdown(),this.updatePlaceholder(),this.trigger("item_add",e,i),this.updateOriginalInput({silent:n})))):"single"===l&&this.close()})},removeItem:function(e,n){var i,o,r;i=e instanceof t?e:this.getItem(e),e=h(i.attr("data-value")),-1!==(o=this.items.indexOf(e))&&(i.remove(),i.hasClass("active")&&(r=this.$activeItems.indexOf(i[0]),this.$activeItems.splice(r,1)),this.items.splice(o,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(e)&&this.removeOption(e,n),o<this.caretPos&&this.setCaret(this.caretPos-1),this.refreshState(),this.updatePlaceholder(),this.updateOriginalInput({silent:n}),this.positionDropdown(),this.trigger("item_remove",e,i))},createItem:function(e,n){var i=this,o=i.caretPos;e=e||t.trim(i.$control_input.val()||"");var r=arguments[arguments.length-1];if("function"!=typeof r&&(r=function(){}),"boolean"!=typeof n&&(n=!0),!i.canCreate(e))return r(),!1;i.lock();var a,s,l="function"==typeof i.settings.create?this.settings.create:function(t){var e={};return e[i.settings.labelField]=t,e[i.settings.valueField]=t,e},u=(a=function(t){if(i.unlock(),!t||"object"!=typeof t)return r();var e=h(t[i.settings.valueField]);if("string"!=typeof e)return r();i.setTextboxValue(""),i.addOption(t),i.setCaret(o),i.addItem(e),i.refreshOptions(n&&"single"!==i.settings.mode),r(t)},s=!1,function(){s||(s=!0,a.apply(this,arguments))}),c=l.apply(this,[e,u]);return void 0!==c&&u(c),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var t=!this.items.length;this.isInvalid=t,this.$control_input.prop("required",t),this.$input.prop("required",!t)},refreshClasses:function(){var e=this.isFull(),n=this.isLocked;this.$wrapper.toggleClass("rtl",this.rtl),this.$control.toggleClass("focus",this.isFocused).toggleClass("disabled",this.isDisabled).toggleClass("required",this.isRequired).toggleClass("invalid",this.isInvalid).toggleClass("locked",n).toggleClass("full",e).toggleClass("not-full",!e).toggleClass("input-active",this.isFocused&&!this.isInputHidden).toggleClass("dropdown-active",this.isOpen).toggleClass("has-options",!t.isEmptyObject(this.options)).toggleClass("has-items",this.items.length>0),this.$control_input.data("grow",!e&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(t){var e,n,i,o;if(t=t||{},1===this.tagType){for(i=[],e=0,n=this.items.length;e<n;e++)o=this.options[this.items[e]][this.settings.labelField]||"",i.push('<option value="'+f(this.items[e])+'" selected="selected">'+f(o)+"</option>");i.length||this.$input.attr("multiple")||i.push('<option value="" selected="selected"></option>'),this.$input.html(i.join(""))}else this.$input.val(this.getValue()),this.$input.attr("value",this.$input.val());this.isSetup&&(t.silent||this.trigger("change",this.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var t=this.$control_input;this.items.length?t.removeAttr("placeholder"):t.attr("placeholder",this.settings.placeholder),t.triggerHandler("update",{force:!0})}},open:function(){this.isLocked||this.isOpen||"multi"===this.settings.mode&&this.isFull()||(this.focus(),this.isOpen=!0,this.refreshState(),this.$dropdown.css({visibility:"hidden",display:"block"}),this.positionDropdown(),this.$dropdown.css({visibility:"visible"}),this.trigger("dropdown_open",this.$dropdown))},close:function(){var t=this.isOpen;"single"===this.settings.mode&&this.items.length&&(this.hideInput(),this.$control_input.blur()),this.isOpen=!1,this.$dropdown.hide(),this.setActiveOption(null),this.refreshState(),t&&this.trigger("dropdown_close",this.$dropdown)},positionDropdown:function(){var t=this.$control,e="body"===this.settings.dropdownParent?t.offset():t.position();e.top+=t.outerHeight(!0),this.$dropdown.css({width:t.outerWidth(),top:e.top,left:e.left})},clear:function(t){this.items.length&&(this.$control.children(":not(input)").remove(),this.items=[],this.lastQuery=null,this.setCaret(0),this.setActiveItem(null),this.updatePlaceholder(),this.updateOriginalInput({silent:t}),this.refreshState(),this.showInput(),this.trigger("clear"))},insertAtCaret:function(e){var n=Math.min(this.caretPos,this.items.length);0===n?this.$control.prepend(e):t(this.$control[0].childNodes[n]).before(e),this.setCaret(n+1)},deleteSelection:function(e){var n,i,o,r,a,s,l,u,c;if(o=e&&8===e.keyCode?-1:1,r=m(this.$control_input[0]),this.$activeOption&&!this.settings.hideSelected&&(l=this.getAdjacentOption(this.$activeOption,-1).attr("data-value")),a=[],this.$activeItems.length){for(c=this.$control.children(".active:"+(o>0?"last":"first")),s=this.$control.children(":not(input)").index(c),o>0&&s++,n=0,i=this.$activeItems.length;n<i;n++)a.push(t(this.$activeItems[n]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(this.isFocused||"single"===this.settings.mode)&&this.items.length&&(o<0&&0===r.start&&0===r.length?a.push(this.items[this.caretPos-1]):o>0&&r.start===this.$control_input.val().length&&a.push(this.items[this.caretPos]));if(!a.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete.apply(this,[a]))return!1;for(void 0!==s&&this.setCaret(s);a.length;)this.removeItem(a.pop());return this.showInput(),this.positionDropdown(),this.refreshOptions(!0),l&&(u=this.getOption(l)).length&&this.setActiveOption(u),!0},advanceSelection:function(t,e){var n,i,o,r,a;0!==t&&(this.rtl&&(t*=-1),n=t>0?"last":"first",i=m(this.$control_input[0]),this.isFocused&&!this.isInputHidden?(r=this.$control_input.val().length,(t<0?0===i.start&&0===i.length:i.start===r)&&!r&&this.advanceCaret(t,e)):(a=this.$control.children(".active:"+n)).length&&(o=this.$control.children(":not(input)").index(a),this.setActiveItem(null),this.setCaret(t>0?o+1:o)))},advanceCaret:function(t,e){var n,i;0!==t&&(n=t>0?"next":"prev",this.isShiftDown?(i=this.$control_input[n]()).length&&(this.hideInput(),this.setActiveItem(i),e&&e.preventDefault()):this.setCaret(this.caretPos+t))},setCaret:function(e){var n,i,o,r;if(e="single"===this.settings.mode?this.items.length:Math.max(0,Math.min(this.items.length,e)),!this.isPending)for(n=0,i=(o=this.$control.children(":not(input)")).length;n<i;n++)r=t(o[n]).detach(),n<e?this.$control_input.before(r):this.$control.append(r);this.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.$input.prop("disabled",!0),this.$control_input.prop("disabled",!0).prop("tabindex",-1),this.isDisabled=!0,this.lock()},enable:function(){this.$input.prop("disabled",!1),this.$control_input.prop("disabled",!1).prop("tabindex",this.tabIndex),this.isDisabled=!1,this.unlock()},destroy:function(){var e=this.eventNS,n=this.revertSettings;this.trigger("destroy"),this.off(),this.$wrapper.remove(),this.$dropdown.remove(),this.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),this.$control_input.removeData("grow"),this.$input.removeData("selectize"),t(window).off(e),t(document).off(e),t(document.body).off(e),delete this.$input[0].selectize},render:function(e,n){var i,o,r="",a=!1;return"option"!==e&&"item"!==e||(a=!!(i=h(n[this.settings.valueField]))),a&&(d(this.renderCache[e])||(this.renderCache[e]={}),this.renderCache[e].hasOwnProperty(i))?this.renderCache[e][i]:(r=t(this.settings.render[e].apply(this,[n,f])),"option"===e||"option_create"===e?r.attr("data-selectable",""):"optgroup"===e&&(o=n[this.settings.optgroupValueField]||"",r.attr("data-group",o)),"option"!==e&&"item"!==e||r.attr("data-value",i||""),a&&(this.renderCache[e][i]=r[0]),r[0])},clearCache:function(t){void 0===t?this.renderCache={}:delete this.renderCache[t]},canCreate:function(t){if(!this.settings.create)return!1;var e=this.settings.createFilter;return t.length&&("function"!=typeof e||e.apply(this,[t]))&&("string"!=typeof e||new RegExp(e).test(t))&&(!(e instanceof RegExp)||e.test(t))}}),v.count=0,v.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},t.fn.selectize=function(e){var n=t.fn.selectize.defaults,i=t.extend({},n,e),o=i.dataAttr,r=i.labelField,a=i.valueField,s=i.optgroupField,l=i.optgroupLabelField,u=i.optgroupValueField;return this.each(function(){if(!this.selectize){var c=t(this),d=this.tagName.toLowerCase(),f=c.attr("placeholder")||c.attr("data-placeholder");f||i.allowEmptyOption||(f=c.children('option[value=""]').text());var p={placeholder:f,options:[],optgroups:[],items:[]};"select"===d?function(e,n){var c,d,f,p,g=n.options,m={},v=function(t){var e=o&&t.attr(o);return"string"==typeof e&&e.length?JSON.parse(e):null},_=function(e,o){e=t(e);var l=h(e.val());if(l||i.allowEmptyOption)if(m.hasOwnProperty(l)){if(o){var u=m[l][s];u?t.isArray(u)?u.push(o):m[l][s]=[u,o]:m[l][s]=o}}else{var c=v(e)||{};c[r]=c[r]||e.text(),c[a]=c[a]||l,c[s]=c[s]||o,m[l]=c,g.push(c),e.is(":selected")&&n.items.push(l)}},y=function(e){var i,o,r,a,s;for((r=(e=t(e)).attr("label"))&&((a=v(e)||{})[l]=r,a[u]=r,n.optgroups.push(a)),i=0,o=(s=t("option",e)).length;i<o;i++)_(s[i],r)};for(n.maxItems=e.attr("multiple")?null:1,c=0,d=(p=e.children()).length;c<d;c++)"optgroup"===(f=p[c].tagName.toLowerCase())?y(p[c]):"option"===f&&_(p[c])}(c,p):function(e,n){var s,l,u,c,d=e.attr(o);if(d)for(n.options=JSON.parse(d),s=0,l=n.options.length;s<l;s++)n.items.push(n.options[s][a]);else{var h=t.trim(e.val()||"");if(!i.allowEmptyOption&&!h.length)return;for(s=0,l=(u=h.split(i.delimiter)).length;s<l;s++)(c={})[r]=u[s],c[a]=u[s],n.options.push(c);n.items=u}}(c,p),new v(c,t.extend(!0,{},n,p,e))}})},t.fn.selectize.defaults=v.defaults,t.fn.selectize.support={validity:c},v.define("drag_drop",function(e){if(!t.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var n,i=this;i.lock=(n=i.lock,function(){var t=i.$control.data("sortable");return t&&t.disable(),n.apply(i,arguments)}),i.unlock=function(){var t=i.unlock;return function(){var e=i.$control.data("sortable");return e&&e.enable(),t.apply(i,arguments)}}(),i.setup=function(){var e=i.setup;return function(){e.apply(this,arguments);var n=i.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:i.isLocked,start:function(t,e){e.placeholder.css("width",e.helper.css("width")),n.css({overflow:"visible"})},stop:function(){n.css({overflow:"hidden"});var e=i.$activeItems?i.$activeItems.slice():null,o=[];n.children("[data-value]").each(function(){o.push(t(this).attr("data-value"))}),i.setValue(o),i.setActiveItem(e)}})}}()}}),v.define("dropdown_header",function(e){var n,i=this;e=t.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(t){return'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a href="javascript:void(0)" class="'+t.closeClass+'">&times;</a></div></div>'}},e),i.setup=(n=i.setup,function(){n.apply(i,arguments),i.$dropdown_header=t(e.html(e)),i.$dropdown.prepend(i.$dropdown_header)})}),v.define("optgroup_columns",function(e){var n,i=this;e=t.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(e,n){var i=e.closest("[data-group]").find("[data-selectable]"),o=i.index(e)+n;return o>=0&&o<i.length?i.eq(o):t()},this.onKeyDown=(n=i.onKeyDown,function(t){var e,o,r,a;return!this.isOpen||37!==t.keyCode&&39!==t.keyCode?n.apply(this,arguments):(i.ignoreHover=!0,e=(a=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void((o=(r=(a=37===t.keyCode?a.prev("[data-group]"):a.next("[data-group]")).find("[data-selectable]")).eq(Math.min(r.length-1,e))).length&&this.setActiveOption(o)))});var o=function(){var t,e=o.width,n=document;return void 0===e&&((t=n.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',t=t.firstChild,n.body.appendChild(t),e=o.width=t.offsetWidth-t.clientWidth,n.body.removeChild(t)),e},r=function(){var n,r,a,s,l,u,c;if((r=(c=t("[data-group]",i.$dropdown_content)).length)&&i.$dropdown_content.width()){if(e.equalizeHeight){for(a=0,n=0;n<r;n++)a=Math.max(a,c.eq(n).height());c.css({height:a})}e.equalizeWidth&&(u=i.$dropdown_content.innerWidth()-o(),s=Math.round(u/r),c.css({width:s}),r>1&&(l=u-s*(r-1),c.eq(r-1).css({width:l})))}};(e.equalizeHeight||e.equalizeWidth)&&(p.after(this,"positionDropdown",r),p.after(this,"refreshOptions",r))}),v.define("remove_button",function(e){e=t.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e),"single"!==this.settings.mode?function(e,n){var i,o=e,r='<a href="javascript:void(0)" class="'+n.className+'" tabindex="-1" title="'+f(n.title)+'">'+n.label+"</a>";e.setup=(i=o.setup,function(){if(n.append){var a=o.settings.render.item;o.settings.render.item=function(t){return n=a.apply(e,arguments),i=r,o=n.search(/(<\/[^>]+>\s*)$/),n.substring(0,o)+i+n.substring(o);var n,i,o}}i.apply(e,arguments),e.$control.on("click","."+n.className,function(e){if(e.preventDefault(),!o.isLocked){var n=t(e.currentTarget).parent();o.setActiveItem(n),o.deleteSelection()&&o.setCaret(o.items.length)}})})}(this,e):function(e,n){n.className="remove-single";var i,o=e,r='<a href="javascript:void(0)" class="'+n.className+'" tabindex="-1" title="'+f(n.title)+'">'+n.label+"</a>";e.setup=(i=o.setup,function(){if(n.append){var a=t(o.$input.context).attr("id"),s=(t("#"+a),o.settings.render.item);o.settings.render.item=function(t){return s.apply(e,arguments)+r}}i.apply(e,arguments),e.$control.on("click","."+n.className,function(t){t.preventDefault(),o.isLocked||o.clear()})})}(this,e)}),v.define("restore_on_backspace",function(t){var e,n=this;t.text=t.text||function(t){return t[this.settings.labelField]},this.onKeyDown=(e=n.onKeyDown,function(n){var i,o;return 8===n.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&(i=this.caretPos-1)>=0&&i<this.items.length?(o=this.options[this.items[i]],this.deleteSelection(n)&&(this.setTextboxValue(t.text.apply(this,[o])),this.refreshOptions(!0)),void n.preventDefault()):e.apply(this,arguments)})}),v})?c.apply(e,d):c)||(t.exports=h)}).call(this,n(0))},function(t,e){Array.prototype.reduce||(Array.prototype.reduce=function(t){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,n=Object(this),i=n.length>>>0,o=0;if(2==arguments.length)e=arguments[1];else{for(;o<i&&!o in n;)o++;if(o>=i)throw new TypeError("Reduce of empty array with no initial value");e=n[o++]}for(;o<i;o++)o in n&&(e=t(e,n[o],o,n));return e}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,i,o;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),a=r.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),i=new Array(a),o=0;o<a;){var s,l;o in r&&(s=r[o],l=t.call(n,s,o,r),i[o]=l),o++}return i}),Array.prototype.some||(Array.prototype.some=function(t){"use strict";if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof t)throw new TypeError;for(var e=Object(this),n=e.length>>>0,i=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)if(o in e&&t.call(i,e[o],o,e))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=[],o=arguments.length>=2?arguments[1]:void 0,r=0;r<n;r++)if(r in e){var a=e[r];t.call(o,a,r,e)&&i.push(a)}return i}),Array.prototype.every||(Array.prototype.every=function(t,e){"use strict";var n,i;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),r=o.length>>>0;if("function"!=typeof t)throw new TypeError;for(arguments.length>1&&(n=e),i=0;i<r;){var a;if(i in o)if(a=o[i],!t.call(n,a,i,o))return!1;i++}return!0}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),r=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),i=0;i<r;){var a;i in o&&(a=o[i],t.call(n,a,i,o)),i++}}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e,n,i=Object(this),o=i.length>>>0;if(0===o)return-1;for(e=o-1,arguments.length>1&&((e=Number(arguments[1]))!=e?e=0:0!=e&&e!=1/0&&e!=-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e)))),n=e>=0?Math.min(e,o-1):o-Math.abs(e);n>=0;n--)if(n in i&&i[n]===t)return n;return-1}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),o=i.length>>>0;if(0===o)return-1;var r=+e||0;if(Math.abs(r)===1/0&&(r=0),r>=o)return-1;for(n=Math.max(r>=0?r:o-Math.abs(r),0);n<o;){if(n in i&&i[n]===t)return n;n++}return-1})},function(t,e,n){(function(t){TDAR.leaflet=function(t,e,n,i){"use strict";i.drawLocal.draw.toolbar.buttons.rectangle="Create bounding box",i.drawLocal.edit.toolbar.buttons.edit="Edit",i.drawLocal.edit.toolbar.buttons.editDisabled="No box to edit",i.drawLocal.edit.toolbar.buttons.remove="Delete",i.drawLocal.edit.toolbar.buttons.removeDisabled="No boxes to delete",i.Icon.Default.imagePath=TDAR.assetsUri("/components/leaflet/dist/images/");e("body");var o={osm:{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'},mapbox:{url:"https://{s}.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={apiKey}",attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery  <a href="http://mapbox.com">Mapbox</a>'}},r={isGeoLocationToBeUsed:!1,center:{lat:0,lng:0},zoomLevel:4,leafletTileProvider:"mapbox",minZoom:2,maxZoom:17,id:"abrin.n9j4f56m",sleep:!0,sleepOpacity:1,sleepTime:750,wakeTime:750,sleepNote:!1,hoverToWake:!0},a={fitToBounds:!0};var s=-1;function l(n){var a=e(n),l=a.data(),u=e("body").data(),c={leafletApiKey:u.leafletApiKey,leafletTileProvider:u.leafletTileProvider};u.centerlat&&u.centerlong&&(c.center={lat:u.centerlat,lng:u.centerlong});var h=e.extend({},r,c,l),f=e.Deferred(),p=new i.map(n,h);a.data("map",p);var g=o[h.leafletTileProvider],m=i.tileLayer(g.url,{maxZoom:h.maxZoom,minZoom:h.minZoom,attribution:g.attribution,id:h.id,apiKey:h.leafletApiKey});if(m.once("load",function(){t.log("map loaded"),f.resolve(p)}),m.addTo(p),p.setView([h.center.lat,h.center.lng],h.zoomLevel),p.setMaxBounds(h.maxBounds),s=0,void 0!=h.geojson){var v=e(h.geojson);if(v.length>0){var _=JSON.parse(v.html());t.log("parsed");var y=i.geoJson(_);t.log("loaded"),y.addTo(p),t.log("added"),d(p,y)}}return h.search&&i.Control.geocoder({}).addTo(p),f.promise()}function u(n,i,o){var r=o;r||(r=0),t.log(i+" --\x3e "+r),e.ajax({dataType:"json",url:i+"&startRecord="+r,success:function(o){t.log(o),c(n.data("map"),n.data("markers"),o,r,n.is("[data-fit-bounds]",0===r));var a=o.properties.startRecord+o.properties.recordsPerPage,s=e("#mapLoading");o.properties&&a<o.properties.totalRecords?(u(n,i,a),s.show(),e("#mapResetBounds").show()):s.hide()}}).error(function(e){t.log("error loading json: ",e)})}function c(t,n,o,r,a){var s=o.features.filter(function(t){return t.geometry.hasOwnProperty("type")}).map(function(t){var n=t.properties.title,o=t.geometry.coordinates,r=i.marker(new i.LatLng(o[1],o[0]),{title:e.trim(n)});return r.bindPopup(n+"<br><a href='"+t.properties.detailUrl+"'>view</a>"),r});0===r&&n.clearLayers(),n.addLayers(s),a&&s.length&&t.fitBounds(n.getBounds())}function d(t,e){t.fitBounds(e.getBounds()),t.zoomOut(1)}function h(e,n,i){t.log("$el is ",e),f(n,parseFloat(e.data("minx")),parseFloat(e.data("miny")),parseFloat(e.data("maxx")),parseFloat(e.data("maxy")),i)}function f(e,n,o,r,a,l){if(!(void 0==n||void 0==o||void 0==r||void 0==a||isNaN(n)||isNaN(o)||isNaN(a)||isNaN(r))){parseFloat(r)<parseFloat(n)&&(r=parseFloat(r)+360);var u=[[a,n],[o,r]];t.log(u);var c=i.rectangle(u,l).addTo(e);return t.log("fitToBounds:",l.fitToBounds),t.log("fitToBounds (rec):",c.getBounds()),t.log("fitToBounds (map):",e.getBounds()),l.fitToBounds&&e.fitBounds(c.getBounds()),s=2,c}void 0==n&&void 0==o&&void 0==r&&void 0==a||(s=-2)}function p(t,n,i,o){var r=parseFloat(e(".minx",t).val()),s=parseFloat(e(".miny",t).val()),l=parseFloat(e(".maxx",t).val()),u=parseFloat(e(".maxy",t).val()),c=i.getLayers();c.length>0&&i.removeLayer(c[0]);var d=f(n,r,s,l,u,a);if(void 0===d){g();for(var h=0;h>i.getLayers().length;h++)i.removeLayer(i.getLayer(h))}else m(o),i.addLayer(d);return d}function g(t){e(".leaflet-draw-draw-rectangle",t).fadeTo(1,1),e(".disable-draw-rect",t).remove()}function m(t){e(".leaflet-draw-draw-rectangle",t).fadeTo(1,.5);var n=document.createElement("div");n.setAttribute("style","z-index:1000000"),n.setAttribute("class","disable-draw-rect");var i=e(n),o=e(".leaflet-draw-draw-rectangle",t);i.width(o.width()),i.height(o.height()),t.append(i),i.offset(o.offset())}function v(n,o){var r=o;Math.abs(o.getWest()-o.getEast())>360&&(r=i.latLngBounds(i.latLng(o.getSouth(),-179.999999),i.latLng(o.getNorth(),180))),e(".miny",n).val(r.getSouth()),e(".maxy",n).val(r.getNorth()),e(".d_miny",n).val(r.getSouth()),t.log("west: "+r.getWest()+" east:"+r.getEast());var a=r.getWest();return a=_(a),e(".minx",n).val(a),e(".d_minx",n).val(a),a<-180&&(a=parseFloat(a)+360,e(".d_minx",n).val(a),e(".minx",n).val(a)),a=_(a=r.getEast()),e(".maxx",n).val(a),e(".d_maxx",n).val(a),a>180&&(a=parseFloat(a)-360,e(".d_maxx",n).val(a),e(".maxx",n).val(a)),t.log("west(set): "+e(".d_minx").val()+" east(set):"+e(".d_maxx").val()),e(".d_maxy",n).val(r.getNorth()),r}function _(e){for(var n=e;n>180;)n-=360;for(;n<-180;)n+=360;return n!=e&&t.log("   "+e+" --\x3e "+n),n}return{initLeafletMaps:function(){return e(".leaflet-map").map(function(){var n=e(this);return l(this).done(function(e){t.log("_initLeafletMaps"),h(n,e,a)})})},initEditableLeafletMaps:function(){return e(".leaflet-map-editable").map(function(){var n=e(this),o=n.find("div.mapdiv")[0];o.setAttribute("style",n.attr("style")),n.attr("style","");var r=e(o);return e.extend(r.data(),n.data()),0==r.height()&&r.height(400),l(o).done(function(a){t.log("_initEditableMaps");var s=new i.FeatureGroup,l=e(".d_maxx",n),u=e(".d_minx",n),c=e(".d_maxy",n),d=e(".d_miny",n);l.change(function(){e(".maxx",n).val(Geo.parseDMS(l.val()))}),c.change(function(){e(".maxy",n).val(Geo.parseDMS(c.val()))}),u.change(function(){e(".minx",n).val(Geo.parseDMS(u.val()))}),d.change(function(){e(".miny",n).val(Geo.parseDMS(d.val()))});var h={position:"topleft",draw:{polyline:!1,polygon:!1,circle:!1,rectangle:{shapeOptions:{clickable:!0},repeatMode:!1},marker:!1},edit:{featureGroup:s,remove:!0}},f=new i.Control.Draw(h);a.addControl(f),e(o).data("drawControl",f),p(n,a,s,r),a.addLayer(s),a.on("draw:created",function(t){t.layerType;var e=t.layer;s.addLayer(e);var i=e.getBounds(),o=v(n,i);e.setBounds(o),a.addLayer(e),m(r)}),a.on("draw:edited",function(t){t.layers.eachLayer(function(t){var e=t.getBounds(),i=v(n,e);t.setBounds(i)})}),a.on("draw:deleted",function(i){t.log("deleted fired");var o=1;i.layers.eachLayer(function(t){s.removeLayer(t),o--,e(".minx",n).val(""),e(".miny",n).val(""),e(".maxx",n).val(""),e(".maxy",n).val(""),e(".d_minx",n).val(""),e(".d_miny",n).val(""),e(".d_maxx",n).val(""),e(".d_maxy",n).val("")}),0==o&&g(r)}),a.on("draw:created draw:edited draw:deleted",function(t){r.closest("form").FormNavigate("dirty")}),e(".locateCoordsButton",n).click(function(){p(n,a,s,r)})})})},initResultsMaps:function(){return e(".leaflet-map-results").map(function(){var n=e(this);return l(this).done(function(o){t.log("_initResultsMaps");var r=new i.MarkerClusterGroup({maxClusterRadius:150,removeOutsideVisibleBounds:!0,chunkedLoading:!0});n.data("markers",r),o.markers=r;var s=e.extend(a,{fillOpacity:.08,fitToBounds:!0});h(n,o,s);var l=!1,c=new Array,f=n.data("infinite-url");if(f){u(n,f,0);var p=i.control({position:"topright"});p.onAdd=function(t){var n=i.DomUtil.create("div","topright"),o=i.DomUtil.create("div","mapLoading");o.id="mapLoading",e(o).append("<i class='icon-refresh'></i> Loading");var r=i.DomUtil.create("div","mapResetBounds");r.id="mapResetBounds";var a=e(r);return a.append("<i class='icon-map-marker'></i> Fit map to all results"),a.hide(),a.click(function(){t.fitBounds(t.markers.getBounds()),a.hide()}),n.appendChild(r),n.appendChild(o),n},p.addTo(o)}else e(".resource-list.MAP .listItem").each(function(){var t=e(this),n=e(".resourceLink",t),o=t.data("lat"),r=t.data("long");if(!isNaN(o)&&!isNaN(r)){l=!0;var a=i.marker(new i.LatLng(o,r),{title:n.text().trim()});a.bindPopup(n.html()+"<br><a href='"+n.attr("href")+"'>view</a>"),c.push(a)}}),r.clearLayers(),r.addLayers(c),l&&d(o,r);o.addLayer(r)})})},initialized:function(){return s},defaults:r,dynamicUpdateMap:u,getMaps:function(){return e(".leaflet-container").map(function(t,n){return e(n).data().map})},update:c,main:function(){TDAR.leaflet.initLeafletMaps(),TDAR.leaflet.initEditableLeafletMaps(),TDAR.leaflet.initResultsMaps()}}}(console,t,window,L)}).call(this,n(0))},function(t,e,n){(function(t){var e;(e=t).fn.bindWithDelay=function(t,n,i,o,r){var a=null,s=this;return e.isFunction(n)&&(r=o,o=i,i=n,n=void 0),this.bind(t,n,function(){var t=e.extend(!0,{},arguments[0]);r||clearTimeout(a),r&&a||(a=setTimeout(function(){a=null,i.apply(s,[t])},o))})}}).call(this,n(0))},function(t,e,n){(function(t){var e;(e=t).validator.addMethod("formatUS",function(t,e){return this.optional(e)||t.match(/^(0[1-9]|1[012]|[1-9])\/(0[1-9]|[12][0-9]|3[01]|[1-9])\/(19|20)\d\d$/)},"The date format mm/dd/yyyy is expected"),e.validator.addMethod("latLong",function(t,e){return t.match(/^(((\-?)(\d+)(\.?)(\d*))|)$/)},"a valid lat/long in the format DEG.Min/Sec (eg. -67.892068) required"),e.validator.addMethod("reasonableDate",function(t,e){var n=parseInt(t);return n==t&&(-1==n||3e3==n||n>1e3&&n<2050)},"a date in the last millenia is expected"),e.validator.addMethod("currentyearorlater",function(t,e){var n=parseInt(t);return n==t&&n>=1900+(new Date).getYear()&&n<2050},"a date in the last millenia is expected"),e.validator.addMethod("month",function(t,e){var n=parseInt(t);return n==t&&n>0&&n<13},"please enter a valid month"),e.validator.addMethod("isbn",function(t,n){return!!e(n).is(":hidden")||t.match(/^|((978[\-- ])?[0-9][0-9\-- ]{10}[\-- ][0-9xX])|((978)?[0-9]{9}[0-9Xx])$/)},"you must include a valid 10/13 Digit ISBN"),e.validator.addMethod("issn",function(t,n){return!!e(n).is(":hidden")||t.match(/^(((\d{4})-?(\d{3})|(\d{7}))(\d|X|x)|)$/)},"you must include a valid 8 Digit ISSN"),e.validator.addMethod("couponFilesOrSpace",function(t,n){return!(parseInt(e("#create-code_numberOfMb").val())>0)&&parseInt(e("#create-code_numberOfFiles").val())>0}),e.validator.addMethod("doi",function(t,n){var i=e(n);return!(!i.is(":hidden")&&""!=i.val())||t.match(/^\b(10[.][0-9]{4,}(?:[.][0-9]+)*\/(?:(?!["&\'<>])\S)+)\b/)},"you must include a valid DOI e.g.: 10.1000/182"),e.validator.addMethod("phoneUS",function(t,e){return t=t.replace(/\s+/g,""),this.optional(e)||t.length>9&&t.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})(\s?-?)+[2-9]\d{2}(-?\s?)+\d{4}$/)},"Please specify a valid phone number"),e.validator.addMethod("ccverify",function(t,e){return t=t.replace(/\s+/g,""),this.optional(e)||t.match(/^\d{3,4}$/)},"Please specify a valid verification number"),e.validator.addMethod("descriptiveTitle",function(t,e){return!t.match(/^(\s*)(dataset|collection|project|document|image|coding sheet|ontology|video|scan)(\s*)$/i)},"Please use a more descriptive title"),e.validator.addMethod("float",function(t,e){return t.match(/^(((\-?)(\d+)(\.?)(\d*))|)$/)},"a valid lat/long in the format DEG.Min/Sec (eg. -67.892068) required"),e.validator.addMethod("notValidIfIdEmpty",function(t,n){if(""===e.trim(t))return!0;var i=e(e(n).attr("autocompleteIdElement"));return parseInt(i.val())>-1},"Please select a value from the autocomplete menu"),e.validator.addMethod("lessThanEqual",function(t,n,i){return!!this.optional(n)||parseInt(t)<=parseInt(e(i[0]).val())},"A {1} value must be less than the {2} value"),e.validator.addMethod("greaterThanEqual",function(t,n,i){return!!this.optional(n)||parseInt(t)>=parseInt(e(i[0]).val())},"A {1} value must be greater than the {2} value"),e.validator.addMethod("blankCoverageDate",function(t,n,i){return 0===(""+e(i.start).val()+e(i.end).val()).length},"Choose a valid coverage date type:  'Calendar' or 'Radiocarbon'"),e.validator.addMethod("asyncFilesRequired",function(t,n){return e("tr","#files").not(".noFiles").size()>0},"At least one file upload is required."),e.validator.addMethod("number",function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},e.validator.messages.number),e.validator.addMethod("integer",function(t,e){return this.optional(e)||/^-?(?:\d+)$/.test(t)},e.validator.messages.number),e.validator.addMethod("required-visible",function(t,n){var i=e(n);return!!i.is(":hidden")||""!=i.val()},"this element is required"),e.validator.addMethod("columnEncoding",function(t,n){console.log("validating:"+n.id+"\t value:"+t);var i=e(n),o=e("#"+n.id).parents(".datatablecolumn").first(),r="'"+o.find("h3 > .displayName").text()+"'",a=o.find("input[type=radio]:checked").first();if(TDAR.datasetMetadata.registerCheckboxInfo.call(n,"tdar.formValidateExtensions.js"),a.is(":disabled")){var s=a.val().toLowerCase().replace("_"," ");return n.title="The selection '"+s+"' is no longer valid for column "+r,!1}var l=i.closest(".datatablecolumn").find(".columnSquare.invalid");return void 0==l||0==l.length||(n.title="Column "+r+" contains errors or invalid selections",!1)}),e.validator.addMethod("confidential-contact-required",function(t,n){if("PUBLIC"===t)return!0;var i=e("#creditTable"),o=i.find(".creatorInstitution").not(".hidden").toArray(),r=i.find(".creatorPerson").not(".hidden").toArray(),a=function(t){var n=e.grep(t,function(t,n){return"CONTACT"===e(t).find(".creator-role-select").val()});return e.grep(n,function(t,n){return e(t).hasClass("creatorPerson")?2==e(t).find("[name $= 'lastName'],[name $= 'firstName']").filter(function(){return""!=e(this).val()}).length:""!=e(t).find("[name $= 'institution.name']").val()})};return a(o).length+a(r).length>0},"You must have at least one person/institution listed as a 'contact' under <b>Individual and Institutional Roles</b> when marking a file 'confidential'"),e.validator.addMethod("equalToIgnoreCase",function(t,n,i){return this.optional(n)||t.toLowerCase()==e(i).val().toLowerCase()},"Please enter the same value again. Not case-sensitive.")}).call(this,n(0))},function(t,e,n){(function(t){TDAR.menu=function(t,e,n){"use strict";function i(){e("#welcome-menu a").click(function(){return e(".welcome-drop").toggle(),!1}),e(".searchbox").click(function(t){var n=e(t.target),i=e(t.target).offset().left+n.width()-60;t.pageX>i&&""!=n.val()&&n.parents("form").submit()}),e(document).click(function(){e(".welcome-drop").hide()}),TDAR.common.applyWatermarks(e("form.searchheader, form[name=searchheader]"))}return{init:i,main:i}}(console,t,window)}).call(this,n(0))},function(t,e,n){(function(t){TDAR.contexthelp=function(){"use strict";return{initializeTooltipContent:function(e){void 0!==e&&t(e).on("mouseenter focusin","[data-tooltipcontent]",function(){!function(e){var n,i,o=t(e),r=o.offset();o.data("tooltipcontent")?(i=o.data("tooltipcontent"),(n=o.data("tiplabel")||"")&&(n="<h2>"+n+"</h2>"),"#"===i[0]&&(i=t(i).html())):console.error("unable to bind tooltip - no tooltip element or tooltipcontent found");var a=t("#notice:visible");if(a.length>0){var s=a.offset();a.offset({left:s.left,top:r.top}),a.html(n+"<div id='noticecontent'>"+i+"</div>"),a.prepend(t("#noticecontent h2").first().remove()),o.popover("destroy")}else o.popover({placement:"top",trigger:"hover",html:!0,title:n,content:i})}(this)})}}}()}).call(this,n(0))},function(t,e,n){(function(t){!function(t,e){"use strict";var n=function(t){var e=t.replace(",","");return e=Math.ceil(e),e=isNaN(e)?0:e},i=function(){e(".transactionType[type=radio]").click(function(){t.common.switchType(this,"#MetadataForm")}),t.common.switchType(e(".transactionType[type=radio]:checked",e("#MetadataForm")),"#MetadataForm")},o=function(){var n=e("#polling-status").data("invoiceid");if(void 0===n)throw"invoiceid not specified";var i="/api/cart/"+n+"/polling-check";e.ajax({url:t.uri(i),dataType:"json",type:"POST",xhrFields:{withCredentials:!0},success:function(n){"PENDING_TRANSACTION"==n.transactionStatus?(e("#polling-status").html("checking status ..."),setTimeout(o,1500)):(e("#polling-status").html("done: "+n.transactionStatus),"TRANSACTION_SUCCESSFUL"==n.transactionStatus&&(window.document.location=t.uri("/dashboard"))),void 0!=n.errors&&""!=n.errors&&e("#asyncErrors").html("<div class='action-errors ui-corner-all'>"+n.errors+"</div>")},error:function(t,e,n){console.error("error: %s, %s",e,n)}}),console.log("registered ajax callback")};t.pricing={initPricing:function(o,r){var a=e(o);e("#small-option").click(function(){e("#MetadataForm_invoice_numberOfFiles").val(1),e("#MetadataForm_invoice_numberOfMb").val(""),a.data("formNavigate",!0),a.submit()}),e("#medium-option").click(function(){e("#MetadataForm_invoice_numberOfFiles").val(10),e("#MetadataForm_invoice_numberOfMb").val(""),a.data("formNavigate",!0),a.submit()}),e("#large-option").click(function(){e("#MetadataForm_invoice_numberOfFiles").val(100),e("#MetadataForm_invoice_numberOfMb").val(""),a.data("formNavigate",!0),a.submit()}),a.submit(function(t){return n(e("#MetadataForm_invoice_numberOfFiles").val()),n(e("#MetadataForm_invoice_numberOfMb").val()),e("#MetadataForm_invoice_numberOfFiles, #MetadataForm_invoice_numberOfMb").each(function(){this.value.length&&(this.value=n(this.value).toFixed(0))}),!0}),a.change(function(){var i=n(e("#MetadataForm_invoice_numberOfFiles").val()),o=n(e("#MetadataForm_invoice_numberOfMb").val());isNaN(o)&&(o=0),isNaN(i)&&(i=0),o>512&&e("#convert").html(t.common.humanFileSize(1024*o*1024));var a=e("#estimated");a.val("");var s=r+"?lookupMBCount="+o+"&lookupFileCount="+i;e.ajax({url:s,dataType:"jsonp",crossDomain:!0,type:"POST",xhrFields:{withCredentials:!0},success:function(n){a.html("");for(var i=1e17,o={},r=0;r<n.length;r++)n[r].model,n[r].model,i>n[r].subtotal&&(o=n[r],i=n[r].subtotal);var s=e("#price");if(1e17==i){s.html("0.00");var l=t.common.sprintf("<tr><td colspan=4>{0}</td></tr>","Please enter a number of files and MB above.");a.append(l)}else if(o.items&&o.items.length>0)for(var u=0;u<o.items.length;u++){var c=o.items[u];c.name=0===c.activity.numberOfFiles?"Extra Space":"Files",l=t.common.sprintf("{0}  ( {1} Files / {2} )",t.common.formatNumber(o.subtotal),t.common.formatNumber(c.activity.numberOfFiles*c.quantity),t.common.humanFileSize(c.activity.numberOfMb*c.quantity*1024*1024,"")),c.activity.numberOfFiles,c.quantity,c.activity.numberOfMb,c.quantity,s.html(l)}},error:function(t,e,n){console.error("error: %s, %s",e,n)}})}),e(o).change(),i();e(o).validate({rules:{"invoice.otherReason":{required:"#MetadataForm_invoice_paymentMethodMANUAL:checked"},"invoice.invoiceNumber":{required:"#MetadataForm_invoice_paymentMethodINVOICE:checked"},"invoice.paymentMethod":{required:!0},"invoice.numberOfFiles":{min:1,require_from_group:[1,".orderinfo"]},"invoice.numberOfMb":{min:1,require_from_group:[1,".orderinfo"]}},messages:{"invoice.invoiceNumber":"Specify the customer invoice/work-order number.","invoice.otherReason":"For manual invoices, describe why you are creating this invoice."},errorClass:"text-error",errorPlacement:function(t,e){e.after(t)}})},updateProgress:o,initPolling:function(){o()},initBillingChoice:function(){e(document).ready(function(){var t=e("#select-existing-account");t.change(function(){var n=e(".add-new");-1==t.val()?n.removeClass("hidden"):n.addClass("hidden")}),-1==t.val()&&e(".add-new").removeClass("hidden")})}}}(TDAR,t)}).call(this,n(0))},function(t,e,n){(function(t){!function(t,e){"use strict";var n=function(e,n){t.common.registerDownload(e,n)};t.download={setup:function(){var t=e("[data-auto-download]").first();if(0!==t.length){var i=t[0].href,o=t.data("versionId"),r=setTimeout(function(){!function(t,e){n(t,e),document.location=t}(i,o)},4e3);t.click(function(){return clearTimeout(r),n(i,o),!0})}}}}(TDAR,t)}).call(this,n(0))},function(t,e,n){(function(t){TDAR.inheritance=function(){"use strict";var e=["investigationTypeIds","approvedSiteTypeKeywordIds","approvedMaterialKeywordIds","approvedCultureKeywordIds"],n="PERSON",i="INSTITUTION",o=!1;function r(n,i){t(n).populate(i,{resetForm:!1,phpNaming:!1,phpIndices:!0,strutsNaming:!0,noIndicesFor:e}),t(n).trigger("heightchange")}function a(e){var n={title:e.title,id:e.id,resourceType:e.resourceType,investigationInformation:{investigationTypeIds:t.map(e.activeInvestigationTypes,function(t){return t.id})||[]},siteInformation:{siteNameKeywords:t.map(e.activeSiteNameKeywords,function(t){return t.label}),approvedSiteTypeKeywordIds:t.map(e.approvedSiteTypeKeywords,function(t){return t.id})||[],uncontrolledSiteTypeKeywords:t.map(e.uncontrolledSiteTypeKeywords,function(t){return t.label})},materialInformation:{approvedMaterialKeywordIds:t.map(e.approvedMaterialKeywords,function(t){return t.id})||[],uncontrolledMaterialKeywords:t.map(e.uncontrolledMaterialKeywords,function(t){return t.label})},culturalInformation:{approvedCultureKeywordIds:t.map(e.approvedCultureKeywords,function(t){return t.id})||[],uncontrolledCultureKeywords:t.map(e.uncontrolledCultureKeywords,function(t){return t.label})},spatialInformation:{geographicKeywords:t.map(e.activeGeographicKeywords,function(t){return t.label})},temporalInformation:{temporalKeywords:t.map(e.activeTemporalKeywords,function(t){return t.label}),coverageDates:e.activeCoverageDates},resourceAnnotations:e.activeResourceAnnotations,noteInformation:{resourceNotes:e.activeResourceNotes},collectionInformation:{sourceCollections:e.activeSourceCollections,relatedComparativeCollections:e.activeRelatedComparativeCollections},otherInformation:{otherKeywords:t.map(e.activeOtherKeywords,function(t){return t.label})},creditProxies:t.map(e.activeIndividualAndInstitutionalCredit,s)};if(void 0!=e.activeLatitudeLongitudeBoxes&&e.activeLatitudeLongitudeBoxes.length>0){var i=e.activeLatitudeLongitudeBoxes[0];n.spatialInformation.minx=i.obfuscatedWest,n.spatialInformation.maxx=i.obfuscatedEast,n.spatialInformation.miny=i.obfuscatedSouth,n.spatialInformation.maxy=i.obfuscatedNorth}else n.spatialInformation.minx="",n.spatialInformation.maxx="",n.spatialInformation.miny="",n.spatialInformation.maxy="";return n}function s(t){var e=t.creator.hasOwnProperty("lastName"),o={id:t.creator.id,role:t.role,type:e?n:i,person:{},institution:{}};return e?(o.person={id:t.creator.id,lastName:t.creator.lastName,firstName:t.creator.firstName,email:t.creator.email,institution:{name:"",id:""}},t.creator.institution&&(o.person.institution.name=t.creator.institution.name,o.person.institution.id=t.creator.institution.id)):o.institution={id:t.creator.id,name:t.creator.name},o}function l(e){t(":input",e).not(".alwaysEnabled").prop("disabled",!0),t("label",e).not(".alwaysEnabled").addClass("disabled"),t(".addAnother, .minus",e).hide(),e.next(".add-another-control").find("button").prop("disabled",!0)}function u(e){t(":input",e).prop("disabled",!1),t("label",e).removeClass("disabled"),t(".addAnother, .minus",e).show(),e.next(".add-another-control").find("button").prop("disabled",!1)}function c(e){e.find("input:text, input:password, input:file, textarea").val(""),t(":input",e).prop("checked",!1).prop("selected",!1)}function d(e,n){var i=t.map(t("input[type=text]",e),function(e,n){if(t(e).val())return t(e).val()});if(o){var r=t(e);r.length>0&&(i=r.val())}return void 0==i&&(i=new Array),0===i.length||t.compareArray(i,n)}function h(e,n){var i=t.map(t(":checkbox:checked",e),function(e,n){return t(e).val()});return 0===i.length||t.compareArray(i,n)}function f(e,n,i,o){if(c(t(i)),void 0!==o){TDAR.inheritance.resetRepeatable("#uncontrolled"+o+"Repeatable",n["uncontrolled"+o].length),TDAR.inheritance.resetRepeatable("#approved"+o+"Repeatable",n["approved"+o].length);var a=o;a=a[0].toLowerCase()+a.substr(1),TDAR.inheritance.resetRepeatable("#"+a+"Repeatable",n[a].length)}r(e,n),l(t(i))}function p(e,n){if(o){var i=t(".keyword-autocomplete",e);i.empty(),t.each(n,function(e,n){i.append(t("<option>",{value:n,text:n}))}),i.val(n).trigger("change")}}function g(e,n){console.log("inherit spatial information(%s, %s)",e,n);var i=t("#divSpatialInformation");c(i),TDAR.inheritance.resetRepeatable("#geographicKeywordsRepeatable",n.spatialInformation.geographicKeywords.length),r(e,n.spatialInformation),p(i,n.spatialInformation.geographicKeywords),l(i),t("#d_minx").val(Geo.toLon(t("#minx").val())),t("#d_miny").val(Geo.toLat(t("#miny").val())),t("#d_maxx").val(Geo.toLon(t("#maxx").val())),t("#d_maxy").val(Geo.toLat(t("#maxy").val()));var o=n.spatialInformation;null!=o.miny&&null!=o.minx&&null!=o.maxy&&null!=o.maxx&&t(".locateCoordsButton",i).click(),t("#divSpatialInformation").addClass("disable-map")}function m(e){TDAR.inheritance.project=e,TDAR.inheritance.project.id&&-1!=TDAR.inheritance.project.id||(TDAR.inheritance.project={approvedCultureKeywords:[],approvedSiteTypeKeywords:[],activeCultureKeywords:[],dateCreated:{},description:null,firstLatitudeLongitudeBox:null,activeGeographicKeywords:[],id:null,activeInvestigationTypes:[],approvedMaterialKeywords:[],activeOtherKeywords:[],resourceType:null,activeSiteNameKeywords:[],activeSiteTypeKeywords:[],submitter:null,activeTemporalKeywords:[],activeCoverageDates:[],title:null,activeResourceNotes:[],activeSourceCollections:[],activeRelatedComparativeCollections:[],activeResourceAnnotations:[],uncontrolledCultureKeywords:[],uncontrolledMaterialKeywords:[],uncontrolledSiteTypeKeywords:[],activeIndividualAndInstitutionalCredit:[]}),TDAR.inheritance.json=a(TDAR.inheritance.project),y(t("#projectId").closest("form").attr("id"),TDAR.inheritance.json)}function v(){var e=t("#creditTable > .repeat-row"),n=t.map(TDAR.inheritance.json.creditProxies,function(t){return t.id}),i=t.map(e.toArray(),function(e){var n=t(e).find("[name$='person.id']").first(),i=parseInt(n.val()),o=t(e).find("[name$='institution.id']").first(),r=parseInt(o.val()),a=i;if((-1===i||isNaN(i))&&(-1===r||isNaN(r)||(a=r)),-1!==a&&!isNaN(a))return a});return console.log("comparing ar1:",n),console.log("comparing ar2:",i),0===i.length||t.compareArray(n,i)}function _(){t("#projectId").val()<=0?(t(".divInheritSection").find("label").addClass("disabled"),t(".divInheritSection").find(":checkbox").prop("disabled",!0),t(".divInheritSection").find(":checkbox").prop("checked",!1),u(t("#divInvestigationInformation")),u(t("#divSiteInformation")),u(t("#divMaterialInformation")),u(t("#divCulturalInformation")),u(t("#divSpatialInformation")),S(),u(t("#divTemporalInformation")),u(t("#divOtherInformation")),u(t("#divIdentifiers")),u(t("#relatedCollectionsSection")),u(t("#resourceNoteSection")),u(t("#creditTable"))):(t(".divInheritSection").find("label").removeClass("disabled"),t(".divInheritSection").find(":checkbox").prop("disabled",!1))}function y(e,n){var i=n.id;TDAR.inheritance.id=null,delete TDAR.inheritance.id;var o="Inherit values from parent project",r="Select a project above to enable inheritance";i>0&&(o='Inherit values from parent project "'+TDAR.ellipsify(n.title,60)+'"',r="Inherit metadata from "+n.title),t(".divInheritSection").find("label.checkbox .labeltext").text(o),t("#spanCurrentlySelectedProjectText").text(r);var a=t("#"+e).data("inheritOptionsList");void 0!=a&&t.each(a,function(e,n){t(n.cbSelector).prop("checked")&&n.inheritSectionCallback()})}function b(){var e,n,i,o,r=t("#cbSelectAllInheritance");try{r.data("isUpdatingSections",!0);var a=r.prop("checked"),s=t(".divInheritSection input[type=checkbox]");a?(e=s.not(":checked"),n=[],i=t.map(e,function(e,i){var o=t(e).data("inheritOptions");return o.isSafeCallback()||n.push(o),o}),o=function(){e.prop("checked",!0),t.each(i,function(t,e){e.inheritSectionCallback()})},n.length?function(e,n,i){var o=t("#inheritOverwriteAlert"),r=t("<ul></ul>");t.each(e,function(e,n){r.append("<li>"+t(n.sectionNameSelector).text()+"</li>")}),o.find(".list-container").empty().append(r),o.one("hidden",i),t("#btnInheritOverwriteOkay").one("click",function(){o.unbind("hidden",i),o.one("hidden",n),o.modal("hide")}),o.modal()}(n,o,function(){t("#cbSelectAllInheritance").prop("checked",!1)}):o()):s.filter(":checked").each(function(){t(this).click()})}finally{r.data("isUpdatingSections",!1)}}function x(){var e=t("#cbSelectAllInheritance");t("#projectId").val()>0?u(t("#divInheritFromProject")):(e.removeAttr("checked"),l(t("#divInheritFromProject")))}function w(){var e=t("#cbSelectAllInheritance");if(!e.data("isUpdatingSections")){var n=t(".divInheritSection input[type=checkbox]").not(":checked");e.prop("checked",0===n.length)}}function S(){var e=t("#divSpatialInformation");console.log("enable-map"),e.removeClass("disable-map")}var T=function(e,n){if(!t(e).is(".select2-hidden-accessible")){t(e).find(".repeat-row:not(:first)").remove();var i,o,r=t(".repeat-row",e);o=/^(.+[_|\[])([0-9]+)([_|\]].*$)/,t(i=r).add("tr, :input",i).each(function(e,n){var i=t(n).attr("id"),r=t(n).attr("name");if(i){var a=i.replace(o,"$10$3");t(n).attr("id",a)}if(r){var s=r.replace(o,"$10$3");t(n).attr("name",s)}});for(var a=0;a<n-1;a++)TDAR.repeatrow.cloneSection(t(".repeat-row:last",e)[0])}};function C(e){var n=t(e);n.find(":checkbox").each(function(e){t(this).prop("checked",this.defaultChecked)}),n.find(".repeat-row").each(function(){TDAR.repeatrow.deleteRow(this)})}return{resetRepeatable:T,resetKeywords:function(e,n){t(n);T(n,e.length)},registerInheritSection:function(e){var n=t(e.cbSelector);if(0!==n.length){var i=n.closest("form"),o=i.attr("id"),r={sectionNameSelector:"",isSafeCallback:function(){return!0},inheritSectionCallback:function(){f(o,TDAR.inheritance.json[r.mappedData])},enableSectionCallback:u};t.extend(r,e),i.data("inheritOptionsList").push(r),n.data("inheritOptions",r),t(r.cbSelector).change(function(e){var n,i,o,a=t(this);a.prop("checked")?r.isSafeCallback()?r.inheritSectionCallback():(n="Inheriting from '"+TDAR.common.htmlEncode(TDAR.inheritance.project.title)+"' will overwrite existing values. Continue?",i=function(){r.inheritSectionCallback()},o=function(){a.prop("checked",!1),r.enableSectionCallback(t(r.divSelector)),w()},confirm(n)?i():o()):(r.enableSectionCallback(t(r.divSelector)),w(),t(r.divSelector).find("input[type=hidden].dont-inherit").val(""))})}},applyInheritance:function(e){t(e).data("inheritOptionsList",[]);var i=t(e).attr("id");void 0==TDAR.inheritance.project&&(TDAR.inheritance.project={approvedCultureKeywords:[],approvedSiteTypeKeywords:[],activeCultureKeywords:[],dateCreated:{},description:null,firstLatitudeLongitudeBox:null,activeGeographicKeywords:[],id:null,activeInvestigationTypes:[],approvedMaterialKeywords:[],activeOtherKeywords:[],resourceType:null,activeSiteNameKeywords:[],activeSiteTypeKeywords:[],submitter:null,activeTemporalKeywords:[],activeCoverageDates:[],title:null,activeResourceNotes:[],activeSourceCollections:[],activeRelatedComparativeCollections:[],activeResourceAnnotations:[],uncontrolledCultureKeywords:[],uncontrolledMaterialKeywords:[],uncontrolledSiteTypeKeywords:[],activeIndividualAndInstitutionalCredit:[]}),TDAR.inheritance.json=a(TDAR.inheritance.project),console.log("applying inheritance to:"+e);var o,s=t("#projectId",e),w=s.val();void 0!=w&&w>-1&&(TDAR.inheritance.json=a(TDAR.inheritance.project),console.log(TDAR.inheritance.json),y(i,TDAR.inheritance.json)),s.change(function(e){var n=t(this);""!==n.val()&&n.val()>0?t.ajax({url:TDAR.uri()+"project/json/"+n.val(),dataType:"jsonp",success:m,error:function(t){console.error("error")},waitMessage:"Loading project information"}):(TDAR.inheritance.project={approvedCultureKeywords:[],approvedSiteTypeKeywords:[],activeCultureKeywords:[],dateCreated:{},description:null,firstLatitudeLongitudeBox:null,activeGeographicKeywords:[],id:null,activeInvestigationTypes:[],approvedMaterialKeywords:[],activeOtherKeywords:[],resourceType:null,activeSiteNameKeywords:[],activeSiteTypeKeywords:[],submitter:null,activeTemporalKeywords:[],activeCoverageDates:[],title:null,activeResourceNotes:[],activeSourceCollections:[],activeRelatedComparativeCollections:[],activeResourceAnnotations:[],uncontrolledCultureKeywords:[],uncontrolledMaterialKeywords:[],uncontrolledSiteTypeKeywords:[],activeIndividualAndInstitutionalCredit:[]},TDAR.inheritance.json=a(TDAR.inheritance.project),y(i,TDAR.inheritance.json)),x(),_()}),_(),x(),o=[{sectionNameSelector:"#siteInfoSectionLabel",cbSelector:"#cbInheritingSiteInformation",divSelector:"#siteSection",mappedData:"siteInformation",isSafeCallback:function(){return TDAR.inheritance.json.siteInformation.siteNameKeywords.concat(TDAR.inheritance.json.siteInformation.uncontrolledSiteTypeKeywords),h("#divSiteInformation",TDAR.inheritance.json.siteInformation.approvedSiteTypeKeywordIds)&&d("#siteNameKeywordsRepeatable",TDAR.inheritance.json.siteInformation.siteNameKeywords)&&d("#uncontrolledSiteTypeKeywordsRepeatable",TDAR.inheritance.json.siteInformation.uncontrolledSiteTypeKeywords)},inheritSectionCallback:function(){var e,n,i;e="#siteSection",n=TDAR.inheritance.json,c(i=t("#divSiteInformation")),TDAR.inheritance.resetRepeatable("#siteNameKeywordsRepeatable",n.siteInformation.siteNameKeywords.length),TDAR.inheritance.resetRepeatable("#uncontrolledSiteTypeKeywordsRepeatable",n.siteInformation.uncontrolledSiteTypeKeywords.length),r(e,n.siteInformation),p(t("#siteNameKeywordsRepeatable").parent(),n.siteInformation.siteNameKeywords),p(t("#uncontrolledSiteTypeKeywordsRepeatable").parent(),n.siteInformation.uncontrolledSiteTypeKeywords),l(i)}},{sectionNameSelector:"#temporalInfoSectionLabel",cbSelector:"#cbInheritingTemporalInformation",divSelector:"#temporalSection",mappedData:"temporalInformation",isSafeCallback:function(){return d("#temporalKeywordsRepeatable",TDAR.inheritance.json.temporalInformation.temporalKeywords)&&function(e,n){if(""===t("input:text","#coverageDateRepeatable").map(function(){return t(this).val()}).toArray().join(""))return!0;var i=t(".repeat-row","#coverageDateRepeatable");return n.coverageDates.length===i.length&&t.map(n.coverageDates,function(t,e){return""+t.startDate+t.endDate+t.description}).join("")===t.map(i,function(e,n){var i=t(".coverageStartYear",e).val();return i+=t(".coverageEndYear",e).val(),i+=t(".coverageDescription",e).val()}).join("")}(0,TDAR.inheritance.json.temporalInformation)},inheritSectionCallback:function(){var e,n,i;e="#temporalSection",n=TDAR.inheritance.json,c(i=t("#divTemporalInformation")),TDAR.inheritance.resetRepeatable("#temporalKeywordsRepeatable",n.temporalInformation.temporalKeywords.length),TDAR.inheritance.resetRepeatable("#coverageDateRepeatable",n.temporalInformation.coverageDates.length),r(e,n.temporalInformation),p(i,n.temporalInformation.temporalKeywords),l(i)},enableSectionCallback:function(){var e=t("#temporalSection");u(e),e.find(".coverageTypeSelect").each(function(t,e){TDAR.validate.prepareDateFields(e)})}},{sectionNameSelector:"#materialInfoSectionLabel",cbSelector:"#cbInheritingMaterialInformation",divSelector:"#allMaterialInformation",mappedData:"materialInformation",isSafeCallback:function(){return h("#allMaterialInformation",TDAR.inheritance.json.materialInformation.approvedMaterialKeywordIds)&&d("#uncontrolledMaterialKeywordsRepeatable",TDAR.inheritance.json.materialInformation.uncontrolledMaterialKeywords)},inheritSectionCallback:function(){var e,n,i;e="#allMaterialInformation",n=TDAR.inheritance.json,c(i=t("#allMaterialInformation")),TDAR.inheritance.resetRepeatable("#uncontrolledMaterialKeywordsRepeatable",n.materialInformation.uncontrolledMaterialKeywords.length),r(e,n.materialInformation),p(i,n.materialInformation.uncontrolledMaterialKeywords),l(i)}},{sectionNameSelector:"#culturalInfoSectionLabel",cbSelector:"#cbInheritingCulturalInformation",divSelector:"#divCulturalInformation",mappedData:"culturalInformation",isSafeCallback:function(){return h("#divCulturalInformation",TDAR.inheritance.json.culturalInformation.approvedCultureKeywordIds)&&d("#uncontrolledCultureKeywordsRepeatable",TDAR.inheritance.json.culturalInformation.uncontrolledCultureKeywords)},inheritSectionCallback:function(){var e,n,i;e="#divCulturalInformation",n=TDAR.inheritance.json,c(i=t("#divCulturalInformation")),TDAR.inheritance.resetRepeatable("#uncontrolledCultureKeywordsRepeatable",n.culturalInformation.uncontrolledCultureKeywords.length),r(e,n.culturalInformation),p(i,n.culturalInformation.uncontrolledCultureKeywords),l(i)}},{sectionNameSelector:"#generalInfoSectionLabel",cbSelector:"#cbInheritingOtherInformation",divSelector:"#divOtherInformation",mappedData:"otherInformation",isSafeCallback:function(){return d("#otherKeywordsRepeatable",TDAR.inheritance.json.otherInformation.otherKeywords)},inheritSectionCallback:function(){var e,n,i,o;e="#divOtherInformation",n=TDAR.inheritance.json,c(o=t(i="#divOtherInformation")),TDAR.inheritance.resetRepeatable("#otherKeywordsRepeatable",n.otherInformation.otherKeywords.length),r(e,n.otherInformation),p(o,n.otherInformation.otherKeywords),l(t(i))}},{sectionNameSelector:"#investigationInfoSectionLabel",cbSelector:"#cbInheritingInvestigationInformation",divSelector:"#divInvestigationInformation",mappedData:"investigationInformation",isSafeCallback:function(){return h("#divInvestigationInformation",TDAR.inheritance.json.investigationInformation.investigationTypeIds)},inheritSectionCallback:function(){f("#divInvestigationInformation",TDAR.inheritance.json.investigationInformation,"#divInvestigationInformation")}},{sectionNameSelector:"#notesInfoSectionLabel",cbSelector:"#cbInheritingNoteInformation",divSelector:"#resourceNoteSection",mappedData:"noteInformation",isSafeCallback:function(){var e=t("#resourceNoteSection"),n=TDAR.inheritance.json.noteInformation.resourceNotes,i=e.find("textarea");if(1===i.length&&0===t.trim(i.first().val()).length)return!0;var o=[],r=[];return r=(r=r.concat(t.map(n,function(t){return t.type}))).concat(t.map(n,function(t){return t.note})),e.find("select").each(function(){o.push(t(this).val())}),e.find("textarea").each(function(){o.push(t.trim(t(this).val()))}),t.compareArray(r,o,!0)},inheritSectionCallback:function(){var e,n,i;e="#resourceNoteSection",n=TDAR.inheritance.json,c(i=t("#resourceNoteSection")),TDAR.inheritance.resetRepeatable("#resourceNoteSection",n.noteInformation.resourceNotes.length),r(e,n.noteInformation),l(i)}},{sectionNameSelector:"#relatedCollectionInfoSectionLabel",cbSelector:"#cbInheritingCollectionInformation",divSelector:"#relatedCollectionsSection",mappedData:"collectionInformation",isSafeCallback:function(){var e=t("#relatedCollectionsSection").find("textarea");if(2===e.length&&0===t.trim(e[0].value).length&&0===t.trim(e[1].value).length)return!0;var n=[],i=[];return e.each(function(){n.push(t.trim(this.value))}),i=(i=i.concat(t.map(TDAR.inheritance.json.collectionInformation.sourceCollections,function(t){return t.text}))).concat(t.map(TDAR.inheritance.json.collectionInformation.relatedComparativeCollections,function(t){return t.text})),t.compareArray(n,i,!0)},inheritSectionCallback:function(){var e,n,i;e="#relatedCollectionsSection",n=TDAR.inheritance.json,c(i=t("#relatedCollectionsSection")),TDAR.inheritance.resetRepeatable("#divSourceCollectionControl",n.collectionInformation.sourceCollections.length),TDAR.inheritance.resetRepeatable("#divRelatedComparativeCitationControl",n.collectionInformation.sourceCollections.length),r(e,n.collectionInformation),l(i)}},{sectionNameSelector:"#identifierInfoSectionLabel",cbSelector:"#cbInheritingIdentifierInformation",divSelector:"#divIdentifiers",mappedData:"resourceAnnotations",isSafeCallback:function(){var e=[];return t.each(TDAR.inheritance.json.resourceAnnotations,function(t,n){e.push(n.resourceAnnotationKey.key),e.push(n.value)}),d("#divIdentifiers",e)},inheritSectionCallback:function(){var e,n,i;e="#divIdentifiers",n=TDAR.inheritance.json,c(i=t("#divIdentifiers")),TDAR.inheritance.resetRepeatable("#resourceAnnotationsTable",n.resourceAnnotations.length),r(e,n),l(i)}},{sectionNameSelector:"#spatialInfoSectionLabel",cbSelector:"#cbInheritingSpatialInformation",divSelector:"#divSpatialInformation",mappedData:"collectionInformation",isSafeCallback:function(){return e=TDAR.inheritance.json.spatialInformation,i=[(n=e).minx,n.miny,n.maxx,n.maxy],(!(o=t.map([t("#minx").val(),t("#miny").val(),t("#maxx").val(),t("#maxy").val()],function(t){if(""!==t)return parseFloat(t)})).length||t.compareArray(i,o,!1))&&d("#geographicKeywordsRepeatable",TDAR.inheritance.json.spatialInformation.geographicKeywords);var e,n,i,o},inheritSectionCallback:function(){g("#divSpatialInformation",TDAR.inheritance.json)},enableSectionCallback:function(){u(t("#divSpatialInformation")),S()}},{sectionNameSelector:"#creditInfoSectionLabel",cbSelector:"#cbInheritingCreditRoles",divSelector:"#creditSection",mappedData:"creditProxies",isSafeCallback:v,inheritSectionCallback:function(){var e,i,o;e="#creditTable",i=TDAR.inheritance.json.creditProxies,c(o=t(e)),TDAR.inheritance.resetRepeatable(e,i.length),i.length>0&&(r(e,{creditProxies:i}),t(e).find(".repeat-row").each(function(e,o){var r=t(o),a=r.find(".creatorPerson"),s=r.find(".creatorInstitution"),l=r.find(".personButton"),u=r.find(".institutionButton");r.find(".resourceCreatorId").val(""),i[e].type===n?(a.removeClass("hidden"),s.addClass("hidden"),l.addClass("active"),u.removeClass("active")):(a.addClass("hidden"),s.removeClass("hidden"),l.removeClass("active"),u.addClass("active"))})),l(o)}}],t.each(o,function(t,e){console.log("register inheritance:"+e.divSelector),TDAR.inheritance.registerInheritSection(e)});var T=t("#cbSelectAllInheritance");T.data("isUpdatingSections",!1),T.click(b),m(TDAR.inheritance.project)},clearSection:C,registerClearSectionButtons:function(e){t(e||"#metadataForm").find(".btn.clear-section").each(function(){var e=this,n=e.getAttribute("data-clear-target");t(e).click(function(){C(t(n)[0])});var i=t(e).closest(".divInheritSection").find("label.checkbox :checkbox"),o=function(){t(e).prop("disabled",i.prop("checked"))};i.change(o),o()})}}}()}).call(this,n(0))},function(t,e,n){(function(t){!function(t,e){"use strict";var n=function(t){var n=t?"show":"hide";e("#contributorReasonTextArea").collapse(n),e("#contributorReasonId").attr("disabled",!t)};t.auth={initLogin:function(){e("#loginForm").validate({messages:{loginUsername:{required:"Please enter your username."},loginPassword:{required:"Please enter your password."}},errorClass:"help-inline",highlight:function(t){e(t).closest(".control-group").addClass("error")},success:function(t){t.closest(".control-group").removeClass("error").addClass("success")}}),e("#loginUsername").focus()},initRegister:function(t){setTimeout(function(){alert("Your session has timed out, please reload the page.")},t),e("#contributor-id").click(function(){n(e(this).is(":checked"))});var i=e("#contributor-id").is(":checked");n(i),e("#firstName").focus()}}}(TDAR,t)}).call(this,n(0))},function(t,e,n){(function(t){TDAR.advancedSearch={},TDAR.advancedSearch=function(){"use strict";function e(t){t.attr("disabled",!0),t.parent().addClass("disabled")}function n(t){t.removeAttr("disabled"),t.parent().removeClass("disabled")}function i(e){TDAR.common.applyWatermarks(e),t(".tdar-treeview",e).treeview({collapsed:!0});var n=t(".nameAutoComplete",e);n.length&&TDAR.autocomplete.applyPersonAutoComplete(n,!1,!1);var i=t(".institutionAutoComplete",e);i.length&&TDAR.autocomplete.applyInstitutionAutocomplete(i,!1),t(".datepicker",e).datepicker().on("changeDate",function(e){t(e.target).datepicker("hide")}),TDAR.autocomplete.applyResourceAutocomplete(t(".projectcombo",e),"PROJECT"),TDAR.autocomplete.applyCollectionAutocomplete(t(".collectioncombo",e),{minLength:0},{}),t("#searchGroups").find(".searchgroup").each(function(){r(t(this))})}function o(e,n,i){var o={"{groupid}":n,"{termid}":i};t.each(e.find("*"),function(e,n){t.each(["id","name","for","autocompleteIdElement","autocompleteParentElement"],function(e,i){!function(t,e,n){if(void 0!==t.attr(e)){var i=t.attr(e);for(var o in n)i=i.split(o).join(n[o]);t.attr(e,i)}}(t(n),i,o)})})}function r(e){var n=t(".grouptable .repeat-row:visible",e),i=e.find(".groupingSelectDiv");n.length>1?(i.find("select").show(),i.addClass("in")):(i.removeClass("in"),i.find("select").hide())}function a(e,n){e.each(function(e,i){var o=t(i);o.prop(n)?o.attr(n,n):o.removeAttr(n)})}return{serializeFormState:function(){t("#searchGroups").submit(function(){var e=t(this);a(t("option",this),"selected"),a(t("input[type=checkbox]",this),"checked"),t("input[type=text],input[type=hidden]",this).each(function(e,n){t(n).attr("value",n.value)}),t("#large-google-map").removeData(),t("#large-google-map").empty("div"),t("#autosave").val(e.html()),t("#queryField").val("")})},initAdvancedSearch:function(){TDAR.repeatrow.registerRepeatable(".repeatLastRow"),t("#sortField .resource").removeAttr("disabled");var a=t("#searchGroups");a.on("searchchange",function(i){var o=t("#includedResourceTypesINTEGRATION"),r=t("#includedResourceTypesSHARED_COLLECTION");t("#searchGroups .term").not(".multiIndex").length>0?(e(o),e(r),t("#sortField .resource").removeAttr("disabled")):(n(o),n(r),t("#sortField .resource").attr("disabled","disabled"))}),t(".searchType",a).trigger("searchchange"),a.on("change",".searchType",function(e){var n=t(this),r=n.val(),a=n.parent(),s=t("div."+r,"#template").clone(),l=t(this).closest(".grouptable").data("groupnum"),u=t(".searchType",a),c=u.attr("name");c=c.replace(/groups\[(\d+)\](.+)/,"groups["+l+"]$2"),u.attr("name",c);var d=t(this).closest(".grouptable").children(".termrow:visible").index(t(this).closest(".termrow"));o(t(s),l,d);var h=a.find("div.term-container"),f=t(".term",h),p="";f.hasClass("retain")&&(p=t(":text:first",f).val()),f.remove(),h.empty().append(s),t(s).hasClass("retain")&&t(":text:first",s).val(p),i(s),t(this).trigger("searchchange")}),t(".grouptable").on("repeatrowadded",function(e,n,i,r){var a=t(i),s=t(this),l=a.find(".searchType");l.val(l.find("option:first").val()).trigger("change"),l.removeAttr("readonly"),o(a,s.data("groupnum"),r)}),t("#searchGroups").on("repeatrowadded",".grouptable",function(e){r(t(this).closest(".searchgroup"))}),t("#searchGroups").on("repeatrowdeleted",".grouptable",function(e){r(t(this).closest(".searchgroup")),t(this).trigger("searchchange")}),t("#searchGroups").on("click",".down-arrow",function(){t(this).siblings(".projectcombo, .collectioncombo").focus().autocomplete("search","")}),t("#searchButton").prop("disabled",!1),i(t("#searchGroups")[0])},initializeResultsPage:function(){if(t("#recordsPerPage").change(function(){var e=window.location.search.replace(/([?&]+)recordsPerPage=([^&]+)/g,""),n="";0!=e.indexOf("?")&&(n="?"),e=n+e+"&recordsPerPage="+t("#recordsPerPage").val(),TDAR.windowLocation(e)}),t(".objectTypes li").size()>0){var e=0;t("#objectTypesSHARED_COLLECTION").size()>0&&e++,t("#objectTypesINTEGRATION").size()>0&&e++;var n=t(".objectTypes li").size()-e;(n>0&&e>0||0==n&&e>0)&&t("#sortField .resource").attr("disabled","disabled")}t("#sortField").change(function(){var e=window.location.search.replace(/([?&]+)sortField=([^&]+)/g,""),n="";0!=e.indexOf("?")&&(n="?"),e=n+e+"&sortField="+t("#sortField").val(),TDAR.windowLocation(e)})}}}()}).call(this,n(0))},function(t,e,n){(function(t){!function(t,e){"use strict";t.notifications={init:function(){e("[data-dismiss-id]").each(function(){var n=e(this),i=n.data("dismiss-id");n.click(function(){t.notifications.dismiss(i)})})},dismiss:function(n){var i=t.uri("/api/notification/dismiss");e.ajax({type:"POST",url:i,data:{id:n},success:function(t){console.log("success, dismissed notification:"+n)},error:function(t){var n=t.responseJSON;e("body").append(JSON.stringify(t)),console.log(JSON.stringify(t)),alert(n)}})}}}(TDAR,t)}).call(this,n(0))},function(t,e,n){(function(t){!function(t,e){"use strict";t.sensoryData={initEdit:function(){e("#registeredDatasetDiv, #polygonalMeshDatasetDiv, #divScanInfo").each(function(t,n){(function(t){var n=!1;return e(t).find("input[type=text],textarea").each(function(t,i){if(e.trim(i.value).length>0)return n=!0,!1}),n})(n)&&(e(n).show(),e(".scannerTechnology").each(function(t,n){var i=n;e(i).change(function(){!function(t){console.debug("showing scanner tech fields for:"),console.debug(t);var n=e(t).parents(".scantech-fields");n.find(".scantech-field").addClass("hide");var i=e(t).val();if(i){var o={TIME_OF_FLIGHT:".scantech-fields-tof",PHASE_BASED:".scantech-fields-phase",TRIANGULATION:".scantech-fields-tri"}[i];console.log("showing all elements of class: "+o),n.find(o).removeClass("hide")}}(i)})}))}),e("#sensoryDataScans").bind("repeatrowadded",function(t,n,i){e(".scannerTechnology",i)}),e("#divScannerTechnologyOptions").click(function(){var t=e("#divScannerTechnologyOptions input[type=radio]:checked").val();if(t){e("#scantypeFileReminder").show();var n=e("#ulTemplateList"),i="."+t.toLowerCase();n.find("span").removeClass("highlighted").addClass("muted"),n.find(i).find("span").removeClass("muted").addClass("highlighted")}else e("#scantypeFileReminder").hide();!function(t){var n=e(".conditional-scantype").hide();if(t){var i="."+t.toLowerCase();n.filter(i).show()}}(t)}).click()}}}(TDAR,t)}).call(this,n(0))},function(t,e,n){(function(t,e){TDAR.namespace("datatable"),TDAR.datatable=function(){"use strict";function n(e){p();var n=function(){},o={vueModel:null,tableSelector:"#dataTable",requestCallback:n,selectableRows:!1,isAdmin:!1,rowSelectionCallback:n,sAjaxSource:TDAR.uri("api/lookup/resource"),sAjaxDataProp:"resources",bJQueryUI:!1,sScrollY:"350px",sScrollX:"100%",fnDrawCallback:function(e){var n=t("#cbCheckAllToggle");0==t(":checkbox:not(:checked)",r).length?n.prop("checked",!0):n.prop("checked",!1);var i=t("#fltrTxt"),o=t("#parentCollectionsIncluded");this.fnSettings()._iRecordsTotal<1&&void 0!=o&&o.is(":checked")?i.show():i.hide(),this.trigger("data",[this.fnSettings().aoData])}};t.extend(o,e);var r=t(o.tableSelector);r.data("toAdd",[]),r.data("toRemove",[]),r.data("toAddManaged",[]),r.data("toAddUnmanaged",[]),r.data("toRemoveManaged",[]),r.data("toRemoveUnmanaged",[]),r.data("selectedRows",{});var a={bScrollCollapse:!0,bProcessing:!0,bServerSide:!0,fnServerData:function(e,n,i){t.ajax({traditional:!0,dataType:"jsonp",url:e,xhrFields:{withCredentials:!0},data:function(e,n,i,o){var r={};t.each(e,function(){r[this.name]=this.value});var a=n[r.iSortCol_0].tdarSortOption;({desc:"true"})[r.sSortDir_0]&&(a+="_REVERSE");var s={startRecord:r.iDisplayStart,recordsPerPage:r.iDisplayLength,sortField:a};return t.extend(s,i(r.sSearch)),s}(n,o.aoColumns,o.requestCallback),success:function(e){var n=r.data("toAdd"),a=r.data("toRemove"),s=(r.data("managedResults"),r.data("unmanagedResults"),n.concat(a)),l={iTotalDisplayRecords:e.totalRecords,iTotalRecords:e.totalRecords};void 0===e.totalRecords&&(l={iTotalDisplayRecords:e.status.totalRecords,iTotalRecords:e.status.totalRecords}),t.extend(e,l),r.data("selectedResults",e.selectedResults),r.data("managedResults",e.unmanagedResourceResults),r.data("unmanagedResults",e.managedResourceResults);var u=r.data("toAddManaged"),c=r.data("toAddUnmanaged"),d=r.data("toRemoveManaged"),h=r.data("toRemoveUnmanaged");e.toAddManaged=u,e.toAddUnmanaged=c,e.toRemoveManaged=d,e.toRemoveUnmanaged=h,(o.selectableRows||o.clickableRows)&&e.resources&&(e.selectedResults||(e.selectedResults=[]),e.unmanagedResourceResults||(e.unmanagedResourceResults=[]),e.managedResourceResults||(e.managedResourceResults=[]),t.each(e.resources,function(t,n){n.isSelectedResult=e.selectedResults.indexOf(n.id)>-1,n.isToggled=s.indexOf(n.id)>-1,n.isCurrentlySelected=n.isSelectedResult!==n.isToggled,n.isManagedResult=e.managedResourceResults.indexOf(n.id)>-1,n.isUnmanagedResult=e.unmanagedResourceResults.indexOf(n.id)>-1})),i(e)},error:function(t,e,n){console.error("ajax query failed:"+n)}})}};return o.selectableRows&&(o.aoColumns[0].fnRender=i,o.aoColumns[0].bUseRendered=!1,a.fnRowCallback=function(e,n,i,o){var r=t(e).find("input[type=checkbox]"),a=r.val();return t(e).attr("id","row-"+a),r.prop("checked",n.isCurrentlySelected),e},r.on("change","input[type=checkbox]",function(){var e=t(this),n=e.val(),i=r.fnGetData(e.parents("tr")[0]);e.prop("checked")?(r.data("selectedRows")[n]=i,o.rowSelectionCallback(n,i,!0)):(delete r.data("selectedRows")[n],o.rowSelectionCallback(n,i,!1))})),o.clickableRows&&(a.fnRowCallback=function(e,n,i,o){var r=parseInt(n.id);return t(e).attr("id","row-"+r),e},r.on("click","button",function(){console.log("Binding add/remove button event handlers");var e=t(this),n=e.prop("id"),i=(n.substring(0,n.lastIndexOf("_")),parseInt(n.substring(n.lastIndexOf("_")+1))),a=r.fnGetData(e.parents("tr")[0]);switch(e.val()){case"addUnmanaged":m(r.data("toAddUnmanaged"),i),o.rowSelectionCallback(i,a,!0,!1),e.attr("disabled","disabled");break;case"addManaged":m(r.data("toAddManaged"),i),o.rowSelectionCallback(i,a,!0,!0),e.attr("disabled","disabled");break;case"addBoth":m(r.data("toAddManaged"),i),m(r.data("toAddUnmanaged"),i),o.rowSelectionCallback(i,a,!0,!0),o.rowSelectionCallback(i,a,!0,!1),e.attr("disabled","disabled");break;case"removeUnmanaged":m(r.data("toRemoveUnmanaged"),i),o.rowSelectionCallback(i,a,!1,!1),e.attr("disabled","disabled");break;case"removeManaged":m(r.data("toRemoveManaged"),i),o.rowSelectionCallback(i,a,!1,!0),e.attr("disabled","disabled");break;case"removeBoth":m(r.data("toRemoveManaged"),i),m(r.data("toRemoveUnmanaged"),i),o.rowSelectionCallback(i,a,!1,!1),o.rowSelectionCallback(i,a,!1,!0),e.attr("disabled","disabled")}})),t.extend(o,a),r.dataTable(o),f(),r}function i(t){var e=t.aData.id,n="cbEntityId_"+e,i=t.aData.resourceType;return i&&(i=i.toLowerCase()),'<label class="datatable-cell-unstyled"><input type="checkbox" class="datatable-checkbox '+i+'" id="'+n+'" value="'+e+'" >'+e+"</label>"}function o(e){var n=e.aData.id,i="btnRemoveManagedId_"+n,o="btnRemoveUnmanagedId_"+n,r=t("#existing_resources_datatable"),a=r.data("toAddManaged"),s=r.data("toAddUnmanaged"),l=r.data("toRemoveManaged"),u=r.data("toRemoveUnmanaged"),c=(a.indexOf(n),u.indexOf(n)>-1),d=l.indexOf(n)>-1,h=(s.indexOf(n),1==e.aData.isManagedResult),f=1==e.aData.isUnmanagedResult,p='<div class="btn-group">',g="",m="";if(h){if(f&&(m=" Managed"),d)var v=' disabled="disabled" ';else v="";p+='<button type="button" id="'+i+'"'+v+'value="removeManaged" class="btn">Remove'+m+"</button>"}if(f){if(m="",h&&(p+='<button type="button" class="btn dropdown-toggle" data-toggle="dropdown">   <span class="caret"></span></button>',p+='<ul class="dropdown-menu" role="menu"><li>',g="</li></ul>",m=" Unmanaged"),d||!f)v=' disabled="disabled" ';else if(f)v="";p+='<button type="button" id="'+o+'"'+v+'value="removeUnmanaged"  class="btn">Remove'+m+"</button>"}if(h&&f)if(d&&c)v=' disabled="disabled" ';else v="";return p+=g+"</div>"}function r(e){e.oSettings;var n=e.aData,i=n.id,o="btnAddManagedId_"+i,r="btnAddUnmanagedId_"+i,a=t("#resource_datatable"),s=a.data("toAddManaged"),l=a.data("toAddUnmanaged"),u=(a.data("toRemoveManaged"),a.data("toRemoveUnmanaged"),s.indexOf(i)>-1),c=l.indexOf(i)>-1,d=1==n.isManagedResult,h=1==n.isUnmanagedResult,f='<div class="btn-group">';if(!d){if(u)var p=' disabled="disabled" ';else p="";f+='<button type="button" id="'+o+'"'+p+'value="addManaged" class="btn">Add Managed</button>',h||(f+='<button type="button" class="btn dropdown-toggle" data-toggle="dropdown">   <span class="caret"></span></button>',f+='<ul class="dropdown-menu" role="menu">')}if(!h){if(c)p=' disabled="disabled" ';else p="";f+='<li><button type="button" id="'+r+'"'+p+'value="addUnmanaged" class="btn">Add Unmanaged</button></li></ul>'}return f+="</div>"}function a(e){e.oSettings;var n=e.aData,i=n.id,o="btnAddManagedId_"+i,r=t("#resource_datatable"),a=r.data("toAddManaged"),s=r.data("toAddUnmanaged"),l=(r.data("toRemoveManaged"),r.data("toRemoveUnmanaged"),a.indexOf(i)>-1),u=(s.indexOf(i),1==n.isManagedResult),c=(n.isUnmanagedResult,'<div class="btn-group">');if(!u){if(l)var d=' disabled="disabled" ';else d="";c+='<button type="button" id="'+o+'"'+d+'value="addManaged" class="btn">Add</button>'}return c+="</div>"}function s(t){t.aData.id;var e=1==t.aData.isManagedResult,n=1==t.aData.isUnmanagedResult;return(e?"Managed ":"")+(n?" Unmanaged":"")}function l(t){var e=t.aData,n='<a href="'+TDAR.uri(e.urlNamespace+"/"+e.id)+"\" class='title'>"+TDAR.common.htmlEncode(e.title)+"</a>";return n+=" (ID: "+e.id,"ACTIVE"!=e.status&&(n+=" "+e.status),n+=")"}function u(t){var e=t.aData;return l(t)+"<br /> <p>"+TDAR.common.htmlEncode(TDAR.ellipsify(e.description,80))+"</p>"}function c(e,n,i,o,r){m(e.data(r),o.id);var a=t("<tr><td>"+o.id+'<input type="hidden" name="'+r+'" value="'+o.id+'" id="hrid'+o.id+'"></td><td>'+o.title+"</td></tr>");a.attr("id",i),n.append(a)}function d(t,e,n){v(e.data("toRemove"),t.id),n&&!t.isManagedResult?(console.log("Adding managed resource to the vue model"),vm.managedAdditions.push(t)):n||t.isUnmanagedResult||(console.log("Adding umanaged resource to the vue model"),vm.unmanagedAdditions.push(t))}function h(t,e,n){n&&t.isManagedResult?(console.log("Removing managed resource "+t.id+" from the vue model"),vm.managedRemovals.push(t)):!n&&t.isUnmanagedResult&&(console.log("Removing umanaged resource "+t.id+" from the vue model"),vm.unmanagedRemovals.push(t))}function f(){t(".dataTables_paginate a").click(function(){return t(".dataTables_scrollBody").animate({scrollTop:0}),!0})}function p(){var t=/[^$0123456789.,-]/,n=/[^-\d.]/g;e.fn.dataTableExt.aTypes.unshift(function(e){return"string"!=typeof e||t.test(e)?null:"tdar-currency"}),e.fn.dataTableExt.oSort["tdar-currency-pre"]=function(t){return t="-"===t?0:t.replace(n,""),parseFloat(t)},e.fn.dataTableExt.oSort["tdar-currency-asc"]=function(t,e){return t-e},e.fn.dataTableExt.oSort["tdar-currency-desc"]=function(t,e){return e-t}}function g(n,i,o,r,a){e.fn.dataTableExt.oPagination.iFullNumbersShowPages=3,t.extend(t.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper form-inline"});var s=0,l={sAjaxDataProp:"results",sDom:"<'row'<'span6'l><'span3'>r>t<'row'<'span4'i><'span5'p>>",bProcessing:!0,bServerSide:!0,bScrollInfinite:!1,bScrollCollapse:!0,tableSelector:"#dataTable",sPaginationType:"bootstrap",sScrollX:"100%",sScrollY:"",aoColumns:[],sAjaxSource:TDAR.uri("datatable/browse?id="+a)};i&&(l.aoColumns.push({bSortable:!1,sName:"id_row_tdar",sTitle:'<i class="icon-eye-open  icon-white"></i>',fnRender:function(t){return'<a href="'+TDAR.uri(r+"/row/"+o+"/"+a+"/"+t.aData[0])+'" title="View row as page..."><i class="icon-list-alt"></i></a></li>'}}),s++);var u=0;for(var c in n)n.hasOwnProperty(c)&&(u++,l.aoColumns.push({bSortable:!1,sName:n[c].simpleName,sTitle:n[c].displayName,tdarIdx:u+s-1,fnRender:function(t){var e=t.aData[this.tdarIdx];return TDAR.common.htmlEncode(e)}}));if(u>0)return TDAR.datatable.registerLookupDataTable(l)}function m(t,e){-1===t.indexOf(e)&&t.push(e)}function v(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}return{extendSorting:p,registerLookupDataTable:n,initUserDataTable:function(){var e={tableSelector:"#dataTable",sAjaxSource:TDAR.uri()+"api/lookup/person",sDom:"<'row'<'span6'l><'span6'f>r>t<'row'<'span4'i><'span5'p>>",sPaginationType:"bootstrap",bLengthChange:!0,bFilter:!0,sAjaxDataProp:"people",selectableRows:!1,clickableRows:!1,aoColumns:[{sTitle:"id",bUseRendered:!1,mDataProp:"id",tdarSortOption:"ID",bSortable:!1,fnRender:TDAR.datatable.renderPersonId},{sTitle:"First",mDataProp:"firstName",tdarSortOption:"FIRST_NAME",bSortable:!1},{sTitle:"Last",mDataProp:"lastName",tdarSortOption:"LAST_NAME",bSortable:!1},{sTitle:"Email",mDataProp:"email",tdarSortOption:"CREATOR_EMAIL",bSortable:!1}],requestCallback:function(){return{minLookupLength:0,registered:"true",term:t("#dataTable_filter input").val()}}};return TDAR.datatable.registerLookupDataTable(e)},setupDashboardDataTable:function(i){console.log("Settign up Dashboard Datatable");var o=t.extend({},i);p(),e.fn.dataTableExt.oPagination.iFullNumbersShowPages=3,t.extend(t.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper form-inline"});var g=[{mDataProp:"title",fnRender:o.showDescription?u:l,bUseRendered:!1,bSortable:!1},{mDataProp:"resourceTypeLabel",bSortable:!1}];o.isClickable&&g.unshift({mDataProp:"id",tdarSortOption:"ID",sWidth:"5em",bSortable:!1}),o.enableUnmanagedCollections&&(console.log("Enabling Unmanaged Collections. Adding column for status"),console.log("If a rendering error occurs, it may be because the column is not being rendered in freemarker"),g.push({mData:null,fnRender:s,bSortable:!1})),o.isClickable&&(console.log("Clickable is enabled. Adding a column for action"),console.log("If a rendering error occurs, it may be because the column is not being rendered in freemarker"),g.push({mData:null,fnRender:o.enableUnmanagedCollections?r:a,bSortable:!1}));var m=t("#resource_datatable");n({tableSelector:"#resource_datatable",sAjaxSource:TDAR.uri("api/lookup/resource"),bLengthChange:!0,bFilter:!1,aoColumns:g,sDom:"<'row'<'span6'l><'pull-right span3'r>>t<'row'<'span4'i><'span5'p>>",sAjaxDataProp:"resources",oLanguage:{sZeroRecords:"No records found. <span id='fltrTxt'>Consider <a id='lnkResetFilters' href='javascript:void(0)'>expanding your search</a></span>"},requestCallback:function(e){var n={title:e,resourceTypes:void 0==t("#resourceTypes").val()?"":t("#resourceTypes").val(),includedStatuses:void 0==t("#statuses").val()?"":t("#statuses").val(),sortField:t("#sortBy").val(),term:t("#query").val(),projectId:t("#project-selector").val(),collectionId:t("#collection-selector").val(),selectResourcesFromCollectionid:i.selectResourcesFromCollectionid};return o.isAdministrator||1!=o.limitContext?n.useSubmitterContext=!1:n.useSubmitterContext=!0,t("#parentCollectionsIncluded").length&&(n.parentCollectionsIncluded=(!t("#parentCollectionsIncluded").prop("checked")).toString()),n},selectableRows:o.isSelectable,clickableRows:!0,rowSelectionCallback:function(e,n,i,r){o.isClickable?i?d(n,m,r):h(n,0,r):o.isSelectable&&(i?function(e,n){var i=t("#tblToAdd");t("#tblToRemove"),v(n.data("toRemove"),e.id),t("#trmod_"+e.id).remove(),e.isSelectedResult||c(n,i,"trmod_"+e.id,e,"toAdd")}(n,m):function(e,n){t("#tblToAdd");var i=t("#tblToRemove");v(n.data("toAdd"),e.id),t("#trmod_"+e.id).remove(),e.isSelectedResult&&c(n,i,"trmod_"+e.id,e,"toRemove")}(n,m))}});var _=t("#collection-selector"),y=t("#project-selector"),b=t("#resource_datatable");b.on("click","#lnkResetFilters",function(){var e;(e=t(".div-search-filters")).find("input[type=checkbox]").prop("checked",!1),e.find("select").prop("selectedIndex",0).last().change()}),y.change(function(){t(this).val(),b.dataTable().fnDraw()}),_.change(function(){t(this).val(),b.dataTable().fnDraw()}),t("#resourceTypes").change(function(){b.dataTable().fnDraw()}),t("#statuses").change(function(){b.dataTable().fnDraw()}),t("#sortBy").change(function(){b.dataTable().fnDraw()}),t("#query").change(function(){b.dataTable().fnDraw()}),t("#query").bindWithDelay("keyup",function(){b.dataTable().fnDraw()},500),t("#parentCollectionsIncluded").change(function(){var e=t(this),n=t("#metadataForm_id").val();e.prop("checked")?_.val(n):_.val(""),b.dataTable().fnDraw()}),f()},setupCollectionResourcesDataTable:function(i){var r=t.extend({},i);p(),e.fn.dataTableExt.oPagination.iFullNumbersShowPages=3,t.extend(t.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper form-inline"}),r.showDescription;var a=[{mDataProp:"id",tdarSortOption:"ID",sWidth:"5em",bSortable:!1},{mDataProp:"title",bSortable:!1},{mDataProp:"resourceTypeLabel",bSortable:!1}];console.log("the options are ",r),r.enableUnmanagedCollections&&a.push({mData:null,fnRender:s,bSortable:!1}),a.push({mData:null,fnRender:o,bSortable:!1});var l="#existing_resources_datatable",u=t(l);n({tableSelector:l,sAjaxSource:TDAR.uri("api/lookup/resource"),bLengthChange:!0,bFilter:!1,aoColumns:a,sDom:"<'row'<'span6'l><'pull-right span3'r>>t<'row'<'span4'i><'span5'p>>",sAjaxDataProp:"resources",oLanguage:{sZeroRecords:"No records found. <span id='fltrTxt'>Consider <a id='lnkResetFilters' href='javascript:void(0)'>expanding your search</a></span>"},requestCallback:function(e){var n={title:e,resourceTypes:"",includedStatuses:"",sortField:"",term:t("#existing_res_query").val(),projectId:"",collectionId:t("#metadataForm_id").val(),selectResourcesFromCollectionid:i.selectResourcesFromCollectionid,parentCollectionsIncluded:!0};return r.isAdministrator||1!=r.limitContext?n.useSubmitterContext=!1:n.useSubmitterContext=!0,n},selectableRows:!1,clickableRows:!0,fnRowCallback:function(t,e,n,i){},rowSelectionCallback:function(t,e,n,i){n?d(e,u,i):h(e,0,i)}});var c=t("#existing_resources_datatable");t("#existing_res_query").change(function(){c.dataTable().fnDraw()}),t("#existing_res_query").bindWithDelay("keyup",function(){c.dataTable().fnDraw()},500),f()},registerResourceCollectionDataTable:function(e,n){var i=t(e),o=t(n),r={};t.each(t("input","#divSelectedResources"),function(){r[this.value]={id:this.value,title:"n/a",description:"n/a"}}),i.data("selectedRows",r),1==o.find("tr").length&&o.hide()},renderPersonId:function(t){var e=t.aData;return'<a href="'+TDAR.uri("browse/creators/"+e.id)+"\" class='title'>"+e.id+"</a>"},checkAllToggle:function(){var e=t("#resource_datatable td input[type=checkbox]:unchecked"),n=t("#resource_datatable td input[type=checkbox]:checked");e.length>0?t(e).click():t(n).click()},registerChild:function(e,n){var i=null;try{window.opener&&(i=window.opener.TDAR.common.adhocTarget)}catch(t){}i&&(window.opener.TDAR.common.populateTarget({id:e,title:n}),t("#datatable-child").dialog({resizable:!1,modal:!0,buttons:{"Return to original page":function(){window.opener.focus(),window.close()},"Stay on this page":function(){window.opener.adhocTarget=null,t(this).dialog("close")}}}))},initalizeResourceDatasetDataTable:g,registerAddRemoveSection:function(e){var n=t("#resource_datatable"),i=t("#divNoticeContainer");n.on("change",".datatable-checkbox.project",function(){i.is(":visible")||t(this).is(":checked")&&i.show()})},initDataTableBrowser:function(){var e=t("#dataTable").data();if(e){var n=t(e.dataTableSelector),i=t("#dataTable"),o=null,r=function(n,r){(function(e,n){var i={id:n,startRecord:0,recordsPerPage:1};return t.get(e,i,"jsonp")})("/datatable/browse",n).done(function(t){var a=t.fields.map(function(t){return{simpleName:t.name,displayName:t.displayName}});o&&(o.fnDestroy(),i.empty()),o=g(a,!0,e.resourceId,r,n)})};n.length?n.change(function(){r(n.val(),t("#browseTable").data("namespace"))}).change():r(e.defaultDataTableId,t("#browseTable").data("namespace"))}},removePendingChange:function(e,n,i,o){var r="",a="";n?i?(r="toAddManaged",a="btnAddManagedId_"):(r="toRemoveManaged",a="btnRemoveManagedId_"):i?(r="toAddUnmanaged",a="btnAddUnmanagedId_"):(r="toRemoveUnmanaged",a="btnRemoveUnmanagedId_");console.log("Removing pending change from data"),v(o.data(r),parseInt(e)),console.debug(o);var s="#"+a+e;console.log("Reenabling button "+s),t(s).removeAttr("disabled"),o.dataTable().fnDraw()}}}()}).call(this,n(0),n(0))},function(t,e,n){(function(t,e){TDAR.d3tree=function(t,e,n,o){"use strict";var r,a,s,l,u=750,c=[];function d(t){t.children&&(t._children=t.children,t._children.forEach(d),t.children=null)}function h(t){t.children?(t._children=t.children,t.children=null):(t.children=t._children,t._children=null),g(t)}function f(t){var e=t.parent;e._children&&(e.children=e._children,e.class="found",e._children=null,f(e))}function p(t){return"found"===t.class?"found":t._children&&t._children.length>0?"children":""}function g(t){var e=a.nodes(r).reverse(),n=a.links(e);e.forEach(function(t){t.y=180*t.depth});var o=s.selectAll("g.node").data(e,function(t){return t.id||(t.id=++i)}),c=o.enter().append("g").attr("class","node").attr("transform",function(e){return"translate("+t.y0+","+t.x0+")"}).on("click",h);c.append("circle").attr("r",1e-6).attr("class",p),c.append("text").attr("x",function(t){return t.children||t._children?-10:10}).attr("dy",".35em").attr("text-anchor",function(t){return t.children||t._children?"end":"start"}).text(function(t){return t.displayName}).attr("class",function(t){return"found"===t.class?"found":""}).style("fill-opacity",1e-6).on("click",function(t){if(void 0==t.iri)return!1;var e=window.location.href;"/"==e.substring(e.length-1)&&(e=e.substring(0,e.length-2)),e=e.substring(0,e.lastIndexOf("/")),window.location=e+"/node/"+t.slug});var d=o.transition().duration(u).attr("transform",function(t){return"translate("+t.y+","+t.x+")"});d.select("circle").attr("r",4.5).attr("class",p),d.select("text").attr("class",function(t){return"found"===t.class?"found":""}).style("fill-opacity",1);var f=o.exit().transition().duration(u).attr("transform",function(e){return"translate("+t.y+","+t.x+")"}).remove();f.select("circle").attr("r",1e-6),f.select("text").style("fill-opacity",1e-6);var g=s.selectAll("path.link").data(n,function(t){return t.target.id});g.enter().insert("path","g").attr("d",function(e){var n={x:t.x0,y:t.y0};return l({source:n,target:n})}).attr("class",function(t){return"found"===t.target.class?"foundLink":"link"}),g.transition().duration(u).attr("d",l).attr("class",function(t){return"found"===t.target.class?"foundLink":"link"}),g.exit().transition().duration(u).attr("d",function(e){var n={x:t.x,y:t.y};return l({source:n,target:n})}).attr("class",function(t){return"found"===t.target.class?"foundLink":"link"}).remove(),e.forEach(function(t){t.x0=t.x,t.y0=t.y})}function m(){e("path[class='foundLink']").attr("class","link"),o.selectAll("circle[class='found']").classed("found",!1),c.forEach(function(t){t.class=""})}var v=o.behavior.zoom().scaleExtent([1.3,1.3]).on("zoom",function(){s.attr("transform","translate("+o.event.translate+")")});return{init:function(){if(l=o.svg.diagonal().projection(function(t){return[t.y,t.x]}),e("#searchclear").click(function(){e("#search").val(""),m(),e("#searchclear").hide()}),e("#searchclear").hide(),(r=JSON.parse(e("#ontId").text()))&&r.children){o.select("#d3").append("div").attr("class","tooltip").style("opacity",0);var n=20,i=120,u=20,h=120,p=e("#d3").width()-i-h,_=e("#d3").height()-n-u;a=o.layout.tree().size([_,p]),s=o.select("#d3").append("svg").attr("width",p+i+h).attr("height",_+n+u).attr("class","overlay").call(v).append("g").attr("transform","translate("+h+","+n+")"),r.x0=_/2,r.y0=0,function t(e){c.push(e),e.children&&e.children.forEach(function(n){n.parent=e,t(n)})}(r),r.children.forEach(d),g(r),e("#search").on("keyup",function(n){n.which;var i,o,a=(i=n.target.value.toLowerCase(),(o=e.trim(i))?o.replace(/([\n|\r])/g,""):"");return void 0==a||""==a?(e("#searchclear").hide(),!1):(e("#searchclear").show(),t.log(a),m(),""!=a&&(a.length>2&&function(t){m(),r.children.forEach(d),g(r);var e=function(t,e,n){var i=[];return c.forEach(function(t){t.displayName.toLowerCase().indexOf(e)>-1&&i.push(t)}),i}(0,t);void 0!==e&&function(t){for(var e=0;e<t.length;e++){var n=t[e];n.parent&&(n.class="found",n.parent&&f(n),g(n))}}(e)}(a),!0))})}},clearSearch:m,allNodes:c}}(console,t,window,e)}).call(this,n(0),n(10))},function(t,e,n){(function(t){t.extend(t.validator.messages,{extension:t.validator.format("Please upload a file with one of the following extensions:{0}.")})}).call(this,n(0))},function(t,e,n){(function(t){TDAR.validate=function(t,e){"use strict";var n={errorLabelContainer:t("#error ul"),wrapper:"li",highlight:function(e,n,i){t(e).addClass("error"),t(e).closest("div.control-group").addClass("error")},unhighlight:function(e,n,i){t(e).trigger("unhighlight",[n,i]),t(e).removeClass("error");var o=t(e).closest("div.control-group");0===o.find(".error:visible").length&&o.removeClass("error")},showErrors:function(t,e){this.defaultShowErrors()},invalidHandler:function(e,n){var i=e.target,o=t(i),r=n.errorList,a=o.data("submitCount")||0,s=o.data("totalErrors")||0;a++,s+=r.length,o.data("submitCount",a).data("totalErrors",s),r=r.slice(0-TDAR.common.maxJavascriptValidationMessages),o.find("#divClientValidationInfo").remove();var l=t('<div id="divClientValidationInfo"></div>'),u=t.validator.format('<input type="hidden" name="clientValidationInfo[\'{0}\']" value="{1}">');t.each(r,function(e,n){var i="error_"+e,o=TDAR.common.htmlEncode(n.element.id+": "+n.message),r=t(u(i,o));r.val(o),l.append(r)}),l.append(t(u("totalErrors",s))),l.append(t(u("submitCount",a))),o.append(l)}},i=function(e){var i=t(e);console.log(i.attr("id"));var r,a=i.data("validate-method");if(console.log(a),void 0!=a){var s=window[a];if(t.isFunction(window.TDAR.validate[a])&&(s=window.TDAR.validate[a]),t.isFunction(window[a])&&(s=window[a]),void 0!=s){var u=s(i),c=t.extend({},n,u);r=i.validate(c),console.log("validate: "+a),i.data("tdar-validate-status","valid-custom"),"initBasicForm"==a&&o(i,r),"initRightsForm"==a&&l(i,r)}else console.log("validate method specified, but not a function"),i.data("tdar-validate-status","failed-invalid-method")}c=t.extend({},n);return r=i.validate(c),i.data("tdar-validate-status","valid-default"),r},o=function(e,n){t(".coverageTypeSelect","#coverageDateRepeatable",e).each(function(t,e){u(e)}),t("#coverageDateRepeatable",e).delegate(".coverageTypeSelect","change",function(){u(this)});var i,o=t("_uploadedFiles",e);if(o.length>0){var a=function(){o.val().length>0&&t("#reminder").hide()};o.change(a),a()}if(e.data("valid-extensions")){var s=e.data("valid-extensions");console.log(s);var l="Please enter a valid file ("+s.replace("|",", ")+")";t(".validateFileType",e).each(function(e,n){t(n).rules("add",{extension:s,messages:{extension:l}})})}if(e.data("multiple-upload")){(i=new TDAR.fileupload.FileuploadValidator(e)).addRule("nodupes");var c=window.location.pathname;c.length&&c.match(/(document|dataset|image).add$/)&&i.addRule("noreplacements"),TDAR.fileupload.validator=i}if(e.data("datatable")&&(i?TDAR.fileupload.addDataTableValidation(TDAR.fileupload.validator):console.error("no file validator defined")),"GEOSPATIAL"==e.data("type")&&TDAR.fileupload.addGisValidation(i),!e.data("multiple-upload")&&(0==e.data("total-files")||e.data("total-files")>0)){var d=e.data("resource-type"),h=t("#fileInputTextArea",e),f=t("#fileUploadField",e);h.length>0&&f.length>0&&(h.rules("add",{required:{depends:r},messages:{required:"No "+d+" data entered. Please enter "+d+" manually or upload a file."}}),f.rules("add",{required:{depends:r},messages:{required:"No "+d+" file selected. Please select a file or enter "+d+" data manually."}}))}},r=function(e){return!(t(e.form).data("total-files")>0||t("#fileInputTextArea").val().length>0||t("#fileUploadField").val().length>0)&&t(e).is(":visible")},a=function(e){return{onkeyup:function(){},onclick:function(){},onfocusout:function(t){},showErrors:function(e,n){this.defaultShowErrors(),void 0!==n&&n.length>0&&(t("#validationErrorModal .modal-body p").empty().append(t("<ul></ul>").append(t("#error ul").html())),t("#validationErrorModal").modal()),t("#error").show()},submitHandler:function(e){s(),t(e).find(".creatorPerson.hidden, .creatorInstitution.hidden").find(":input").prop("disabled",!0),t("#error").hide(),t(e).FormNavigate("clean"),e.submit()}}},s=function(){var e=t("#editFormActions, #fakeSubmitDiv");e.find(".submittableButtons").prop("disabled",!0),e.find(".waitingSpinner").show()},l=function(e){t("#firstName").rules("add",{required:function(){return""!=t("#lastName").val().trim()||""!=t("#email").val().trim()}}),t("#lastName").rules("add",{required:function(){return""!=t("#firstName").val().trim()||""!=t("#email").val().trim()}}),t("#email").rules("add",{email:!0,required:function(){return""!=t("#lastName").val().trim()||""!=t("#firstName").val().trim()}})},u=function(e){var n=t(e).siblings(".coverageStartYear"),i=t(e).siblings(".coverageEndYear");switch(t(n).rules("remove"),t(i).rules("remove"),t(e).val()){case"CALENDAR_DATE":t(n).rules("add",{range:[-99900,2100],lessThanEqual:[i,"Calender Start","Calendar End"],required:function(){return""!=t(i).val()}}),t(i).rules("add",{range:[-99900,2100],required:function(){return""!=t(n).val()}});break;case"RADIOCARBON_DATE":t(n).rules("add",{range:[0,1e5],greaterThanEqual:[i,"Radiocarbon Start","Radiocarbon End"],required:function(){return""!=t(i).val()}}),t(i).rules("add",{range:[0,1e5],required:function(){return""!=t(n).val()}});break;case"NONE":t(n).rules("add",{blankCoverageDate:{start:n,end:i}})}};return{init:function(){t("form.tdarvalidate").each(function(){i(t(this))})},initForm:i,initRegForm:function(e){e.find(".submittableButtons").prop("disabled",!1);return{wrapper:"",showErrors:null,errorClass:"help-block",highlight:function(e){t(e).closest(".control-group").addClass("error")},submitHandler:function(e){var n=t(e).find(".submittableButtons").prop("disabled",!0);n.prop("disabled",!0),setTimeout(function(){n.prop("disabled",!1)},1e4),e.submit()}}},initBasicForm:a,initRightsForm:function(t){return a()},prepareDateFields:u,main:function(){TDAR.validate.init()}}}(t,window)}).call(this,n(0))},function(t,e,n){(function(t,e){TDAR.c3graph={},TDAR.c3graph=function(t,e,n,i){"use strict";var o=function(){var t=e("#c3colors"),n=void 0;return t.length>0&&(n=JSON.parse(t.html())),n},r=function(n,i){n.data("x")&&(i.data.x=n.data("x"));var r="#"+n.attr("id");i.bindto=r;var s=o();s&&(i.color={},i.color.pattern=s);var l=n.data("click");if(e.isFunction(window[l])&&(t.log(window[l]),i.data.onclick=window[l]),e.isFunction(TDAR.c3graphsupport[l])&&(i.data.onclick=TDAR.c3graphsupport[l]),void 0!=n.data("legend-position")&&(void 0==i.legend&&(i.legend={}),i.legend.position=n.data("legend-position")),n.data("source")){var u=JSON.parse(e(n.data("source")).html());i.data.json=u,i.data.keys={},i.data.keys.x=n.data("x"),n.data("values")&&(i.data.keys.value=n.data("values").split(","))}if(n.data("legend")&&("true"===n.data("legend")?i.legend.hide=!0:i.legend.hide=!1),n.data("xtype")&&(i.axis.x.type=n.data("xtype")),n.data("columns")){u=JSON.parse(e(n.data("columns")).html());i.data.columns=u}if(n.data("yaxis")&&"log"===n.data("yaxis")){void 0==i.axis&&(i.axis={}),void 0==i.axis.y&&(i.axis.y={}),i.axis.y.tick={format:function(t){return Math.pow(10,t).toFixed(2)}};var c=n.data("values");i.data.json&&c&&i.data.json.forEach(function(t){t[c]=Math.log(t[c])/Math.LN10}),void 0==i.data.labels&&(i.data.labels={}),void 0==i.data.labels.format&&(i.data.labels.format={}),i.data.labels.format[n.data("values")]=a,t.log(i.data.labels)}},a=function(t,e){return Math.pow(10,t).toFixed(0)};return{initPieChart:function(){e(".pieChart").each(function(){var t=e(this),n={data:{type:"pie"},tooltip:{format:{value:function(t,e,n,i){return TDAR.common.formatNumber(t)+" ("+(100*e).toFixed(2)+"%)"}}}},o=new Array,a=e(t.data("table"));if(a){for(var s=e("tr",a),l=t.data("val"),u=-1,c=t.data("label"),d=-1,h=0;h<s.length;h++){var f=e("td, th",s[h]);if(0!=h){v=e(f[u]).text().trim();var p=e(f[d]).text().trim(),g=new Array;g[0]=p,void 0!=v&&(v=v.replace(/\,/g,"")),g[1]=parseInt(v),o.push(g)}else for(var m=0;m<f.length;m++){var v=e(f[m]).text().trim();-1==u&&v.valueOf()==l.valueOf()&&(u=m),-1==d&&v.valueOf()==c.valueOf()&&(d=m)}}n.data.columns=o}r(t,n),i.generate(n)})},initLineGraph:function(){e(".lineGraph").each(function(){var t=e(this),n=e(t.data("table")),o={data:{x:"label",type:"line",keys:{x:"label",value:["count"]}},point:{show:!1},legend:{hide:!1},tooltip:{show:!0},axis:{x:{show:!0,type:"timeseries",tick:{format:"%Y-%m-%d",culling:{culling:!0,max:5}}},y:{show:!0}}};if(n){for(var a=new Array,s=0;s<e("th",n).length;s++)a.push(new Array);var l=e("tr",n),u=l.length-1;for(1==e("td",l[u]).length&&u--,s=u;s>=0;s--)for(var c=e("td, th",l[s]),d=0;d<c.length;d++){var h=e(c[d]).text().trim(),f=h.replace(/\,/g,"");0==s?a[d].unshift(h):parseInt(f)&&0!=d?a[d][u-s]=parseInt(f):a[d][u-s]=h}o.data.columns=a,o.data.x="Date"}r(t,o),i.generate(o)})},initBarChart:function(){var t=o();e(".barChart").each(function(){var n=e(this),o=(e(n.data("table")),{data:{x:"label",type:"bar",keys:{x:"label",value:["count"]},tooltip:{show:!1},labels:{show:!0}},legend:{hide:!0},tooltip:{show:!1},axis:{x:{show:!0,type:"category"},y:{show:!1}},bar:{width:{ratio:.8}}});void 0!=n.data("colorcategories")&&void 0!=t&&t.length>0&&(o.data.color=function(e,n){return t[n.index]}),r(n,o),i.generate(o)})},initAreaGraph:function(){e(".areaChart").each(function(){var t=e(this),n=(e(t.data("table")),{data:{x:"label",type:"area",keys:{x:"label",value:["count"]},labels:{show:!0}},legend:{hide:!0},tooltip:{show:!1},axis:{x:{show:!0,type:"category"},y:{show:!1}}});r(t,n),i.generate(n)})},initGaugeChart:function(){e(".gaugeChart").each(function(){var t=e(this),n={pattern:["#a09d5b","#f6d86b","#dc7612","#bd3200"],threshold:{values:[30,60,90,100]}},o={data:{columns:[["Usage",t.data("val")]],type:"gauge"},gauge:{label:{format:function(t,e){return t+"%"},show:!1},units:" %"},tooltip:{format:{value:function(t,e,n,i){return t+"%"}}},color:n,size:{height:t.data("height"),width:t.data("width")}};r(t,o),1==t.data("overridecolors")&&(o.color=n),i.generate(o)})},main:function(){TDAR.c3graph.initPieChart(),TDAR.c3graph.initLineGraph(),TDAR.c3graph.initBarChart(),TDAR.c3graph.initAreaGraph(),TDAR.c3graph.initGaugeChart()}}}(console,t,window,e)}).call(this,n(0),n(8))},function(t,e,n){(function(t){var e,n;TDAR.c3graphsupport={},TDAR.c3graphsupport=(console,e=t,window,{resourceBarGraphClick:function(t,i){var o=e("#resourceBarGraph"),r="/search/results?resourceTypes="+JSON.parse(e(o.data("source")).html())[t.x].key;window.location.href=n(r)},dashboardStatusPieChartClick:function(t,n){var i=e("#statusChart"),o=JSON.parse(e(i.data("columns")).html());window.location.href=TDAR.uri("/search/results?useSubmitterContext=true&types=RESOURCE&status="+o[t.index][2])},dashboardResourcePieChartClick:function(t,n){var i=e("#resourceTypeChart"),o=JSON.parse(e(i.data("columns")).html());window.location.href=TDAR.uri("/search/results?useSubmitterContext=true&types=RESOURCE&resourceTypes="+o[t.index][2])},getClickPath:n=function(t){var n=e("#clickPath[href]");return t=void 0!=n&&n.length>0?n.attr("href")+t:TDAR.uri(t)}})}).call(this,n(0))},function(t,e,n){(function(t){TDAR.repeatrow=function(t,e){"use strict";var n=function(t){e(t).on("click",".repeat-row-delete",function(n){var i=e(this).parents(".repeat-row")[0];e(i).trigger("repeatrowbeforedelete"),a(i),e(t).trigger("repeatrowdeleted")})},i=function(t,n){var i=e(t),a=i.clone(),s=/^(.*?_)(\d+)(_.*)$/i,l=i.attr("id"),u=s.exec(l),c=parseInt(u[2]),d=c+1,h=l.replace(s,"$1"+d+"$3");return a.find(".repeat-row-remove").remove(),a.attr("id",h),a.find("*").not(".repeat-row-skip").each(function(){var t=this;e(["id","autoVal","name","autocompleteIdElement","autocompleteParentElement"]).each(function(e,n){o(t,n,"["+c+"]","["+d+"]"),o(t,n,"_"+c+"_","_"+d+"_")})}),i.after(a),r(a),a.trigger("heightchange"),a},o=function(t,n,i,o){var r=e(t).attr(n);if(r&&-1!==r.indexOf(i)){var a=r.substring(0,r.lastIndexOf(i))+o+r.substring(r.lastIndexOf(i)+i.length,r.length);e(t).attr(n,a)}},r=function(t){t.find(":input").not(".repeatrow-noreset").removeAttr("readonly").removeAttr("disabled").prop("readonly",!1).prop("disabled",!1),t.find("input[type!=button],textarea").not(".repeatrow-noreset").not("input[type=checkbox],input[type=radio]").val(""),t.find("input[type=checkbox],input[type=radio]").not(".repeatrow-noreset").prop("checked",!1),e(t).find("select").not(".repeatrow-noreset").prop("selectedIndex",0)},a=function(t){var n=e(t).closest(".repeat-row"),i=n.siblings(".repeat-row").length>0;return i?n.remove():r(n),i},s=function(t,n){var i=n;return n||(i="btn"+t.replace(" ","").toLowerCase()),e("<div class='control-group add-another-control'><div class='controls'><button class='btn addanother' id='"+i+"' type='button'><i class='icon-plus-sign'></i>"+t+"</button></div></div>")};return{registerRepeatable:function(t,o){var r={rowSelector:"> div.controls, .repeat-row",addAnother:"add another"};e.extend(r,o),e(t).each(function(t,o){e(r.rowSelector,o).addClass("repeat-row");var a=e(o).data("add-another")||r.addAnother,l=s(a,o.id+"AddAnotherButton");e("button",l).click(function(){var t=e(r.rowSelector,o).last(),n=i(t,o),a=e(o).find(".repeat-row").length;e(o).trigger("repeatrowadded",[o,n[0],a,t]),e("input[type=text], textarea, .repeatrow-focus",n).filter(":visible:first").focus()}),e(o).after(l),n(o)})},registerDeleteButtons:n,cloneSection:i,deleteRow:a,clearInputs:r}}(TDAR,t)}).call(this,n(0))},function(t,e,n){(function(t){!function(t,e){"use strict";var n,i=0,o=function(t){e(".progress-bar").attr("aria-valuenow",t),e(".progress-bar").html(t+"%"),e(".progress-bar").css("width",t+"%")},r=function(){i>=100||e.ajax({url:n,dataType:"json",type:"POST",success:function(t){i=t.percentComplete,console.log("percent complete: %s",t.percentComplete),100!=t.percentDone?(o(t.percentComplete),e("#buildStatus").empty().append(t.message),setTimeout(r,500)):(o(100),e("#divUploadComplete").show(),e("#buildStatus").empty().append("Upload complete."),e("#btnDashboard").button()),void 0!=t.errors&&""!=t.errors&&e("#asyncErrors").show().find("#errorDetails").html("<div class=''><ul>"+t.errors+"</ul></div>")},error:function(t,n,o){i=101,console.error("error: %s, %s",n,o),e("#unspecifiedError, #asyncErrors").show()}})};t.bulk={updateProgress:r,init:function(e){return n=e.data("asyncUrl"),i=0,o(0),setTimeout(t.bulk.updateProgress,500),{asyncUrl:n,percentDone:i,timeout:500}}}}(TDAR,t)}).call(this,n(0))},function(t,e,n){(function(t,e){tmpl=n(18),TDAR.ellipsify=function(t,e,n){var i=t.length>e,o=i?t.substr(0,e-1):t;return o=n&&i?o.substr(0,o.lastIndexOf(" ")):o,i?o+"...":o},t.extend({compareArray:function(t,e,n){if(t.length!==e.length)return!1;void 0===n&&(n=!0);var i=t.concat(),o=e.concat();n&&(i.sort(),o.sort());for(var r=0,a=i.length;r<a;r++)if(i[r]!=o[r])return!1;return!0}}),TDAR.common=function(t,n){"use strict";var i={},o=function(){},r=function(){e("#license_section input[type='radio']").each(function(t){var n=e(this),i=n.val(),o=e("#license_details_"+i),r=e("#licenseText");n.is(":checked")?o.removeClass("hidden"):o.addClass("hidden"),r.is(":hidden")?r.removeClass("required"):r.addClass("required")})},a=function(){var t=e(".tdar-treeview");t.treeview({collapsed:!0}),t.find("input:checked").parentsUntil(".treeview","li").find("> .hitarea").trigger("click")},s=function(t){t.find("input,select").keypress(function(t){if(t.keyCode===e.ui.keyCode.ENTER)return t.preventDefault(),!1})},l=function(t){e(t).not(".disableFormNavigate").FormNavigate({message:"Leaving the page will cause any unsaved data to be lost!",customEvents:"repeatrowdeleted fileuploadstarted",cleanOnSubmit:!1})},u=function(t,n,i){var o,r,a,s=0,l=e.extend({},{enabled:!0,selector:"#ajaxIndicator",fadeInDelay:"fast",fadeOutDelay:1e3,timeout:2e4,label:"Loading",waitMessage:"...",doneMessage:"...complete",failMessage:"...failed",timeoutMessage:"request timed out"},t);l.enabled&&(a=(o=e(l.selector)).find("strong"),r=o.find("span"),a.text(l.label),r.text(l.waitMessage),o.fadeIn(l.fadeInDelay),i.done(function(){r.text(l.doneMessage)}),i.fail(function(){r.text(l.failMessage)}),i.always(function(){o.fadeOut(l.fadeOutDelay),clearTimeout(s)}),l.timeout&&(s=setTimeout(function(){o.fadeOut(l.fadeOutDelay)},l.timeout)))},c=function(){e.ajaxPrefilter(u)},d=function(t){return void 0==t||""==t?"":e("<div/>").text(t).html()},h=function(t){return t>1200?"responsive-large-desktop":t>979?"responsive-desktop":t>767?"responsive-tablet":t>500?"responsive-phone":t>1?"responsive-phone-portrait":""},f=function(t){Modernizr.input.placeholder||e("input[placeholder]",t).each(function(){e(this).watermark(e(this).attr("placeholder"))})},p=function(){e(".fileProxyConfidential").filter(function(t){return"PUBLIC"!=e(this).val()}).length>0?e("#divConfidentialAccessReminder").removeClass("hidden"):e("#divConfidentialAccessReminder").addClass("hidden")},g=function(){var n=e(document),i=n.data("sessionTimeout"),o=n.data("currentTime");if(parseInt(o)){o+=60,n.data("currentTime",o);var r=i-o;if(r%300==0&&console.log("remaining time in session:"+r),300==r)e("<div id=timeoutDialog></div>").html("<B>Warning!</B><br/>Your session will timeout in 5 minutes, please save the document you're currently working on").dialog({modal:!0,title:"Session Timeout Warning",closeText:"Ok",buttons:{Ok:function(){e(this).dialog("close")}}});0!=e("#timeoutDialog").length&&r<=0?e("#timeoutDialog").html("<B>WARNING!</B><BR>Your Session has timed out, any pending changes will not be saved"):setTimeout(t.common.sessionTimeoutWarning,6e4)}},m=function(t){var n=e(t).val().toLowerCase(),i=e("#citationInformation");e(".doctypeToggle",i).hide(),e(e("."+n),i).show(),y(e("#publisher-hints"),n),y(e("#publisherLocation-hints"),n),v()},v=function(){e(".doctypeToggle:hidden input").each(function(){e(this);"radio"==e(this).attr("type")?e(this).attr("checked",!1):e(this).val("")})},_=function(){var t="file"==e("#inputMethodId").val();e("#uploadFileDiv").toggle(t),e("#textInputDiv").toggle(!t)};function y(t,n){var i=e(t),o="#"+e(t).attr("id"),r=e(o+"-label"),a=e("label",o);void 0!=r&&0!=r.length||void 0==a||0==a.length||(r=a),void 0!=i.attr(n)&&void 0!=r&&r.text(i.attr(n))}function b(){var t=e(window).width(),n=h(t);e(document.body).removeClass("responsive-large-desktop responsive-desktop responsive-tablet responsive-phone responsive-phone-portrait").addClass(n)}return e.extend(i,{initEditPage:function(n,i){void 0==i&&(i={});var u,d=e(n);d.attr("id");if(i.multipleUpload){var h=e("input[name=id]").val();i.ableToUpload&&i.multipleUpload&&t.fileupload.registerUpload({informationResourceId:h,acceptFileTypes:i.acceptFileTypes,formSelector:i.formSelector,inputSelector:"#fileAsyncUpload",fileuploadSelector:"#divFileUpload"})}(u=e("#editFormActions, #fakeSubmitDiv")).find(".submittableButtons").prop("disabled",!1),u.find(".waitingSpinner").hide(),e("#fakeSubmitButton").click(function(){e("#submitButton").click()}),e("#subnavbar .nav a").click(function(){return e(e(this).attr("href")).animate({backgroundColor:"#ffffee"},200).animate({backgroundColor:"transparent"},400),!0}),t.repeatrow.registerRepeatable(".repeatLastRow"),e(".creatorProxyTable").on("click",".creator-toggle-button",function(t){var n=e(this),i=n.closest(".repeat-row");void 0==i&&(i=n.closest(".control-group"));var o=e(".creator-toggle-button input:hidden",n);e(t.target).hasClass("personButton")?(e(".creatorPerson",i).removeClass("hidden"),e(".creatorInstitution",i).removeClass("hidden").addClass("hidden"),o.val("PERSON")):(e(".creatorPerson",i).removeClass("hidden").addClass("hidden"),e(".creatorInstitution",i).removeClass("hidden"),o.val("INSTITUTION"))}),t.autocomplete.delegateCreator("#authorshipTable",!1,!0),t.autocomplete.delegateCreator("#creditTable",!1,!0),t.autocomplete.delegateCreator("#divAccessRights",!0,!1),t.autocomplete.delegateCreator("#divSubmitter",!0,!1),t.autocomplete.delegateCreator("#copyrightHolderTable",!1,!0),t.autocomplete.delegateAnnotationKey("#resourceAnnotationsTable","annotation","annotationkey"),t.autocomplete.delegateKeyword("#siteNameKeywordsRepeatable","sitename","SiteNameKeyword"),t.autocomplete.delegateKeyword("#uncontrolledSiteTypeKeywordsRepeatable","siteType","SiteTypeKeyword"),t.autocomplete.delegateKeyword("#uncontrolledCultureKeywordsRepeatable","culture","CultureKeyword"),t.autocomplete.delegateKeyword("#uncontrolledMaterialKeywordsRepeatable","material","MaterialKeyword"),t.autocomplete.delegateKeyword("#temporalKeywordsRepeatable","temporal","TemporalKeyword"),t.autocomplete.delegateKeyword("#otherKeywordsRepeatable","other","OtherKeyword"),t.autocomplete.delegateKeyword("#geographicKeywordsRepeatable","geographic","GeographicKeyword"),t.autocomplete.applyInstitutionAutocomplete(e("#txtResourceProviderInstitution"),!0),t.autocomplete.applyInstitutionAutocomplete(e("#publisher"),!0),e("#resourceCollectionTable").on("focus",".collectionAutoComplete",function(){t.autocomplete.applyCollectionAutocomplete(e(this),{showCreate:!0,showCreatePhrase:"Create a new collection"},{permission:"ADD_TO_COLLECTION"})}),e("#sharesTable").on("focus",".collectionAutoComplete",function(){console.debug("Applying collection autocomplete to ",e(this)),t.autocomplete.applyCollectionAutocomplete(e(this),{showCreate:!0,showCreatePhrase:"Create a new collection"},{permission:"ADD_TO_COLLECTION"})}),s(d),e(".alphasort").click(o),e(".licenseRadio",e("#license_section")).change(r),e('[data-spy="scroll"]').each(function(){var t=e(this);e(document).bind("repeatrowadded repeatrowdeleted heightchange",function(){t.scrollspy("refresh")})}),t.contexthelp.initializeTooltipContent(n),f(n),d.on("keypress","input,select",function(t){return 13!=t.keyCode||e(this).closest(".leaflet-control-geocoder").length>0}),d.submit(function(t){try{e.each(e(".date, .number, .trim, .keywordAutocomplete"),function(t,n){void 0!==e(n).val()&&e(n).val(e.trim(e(n).val()))})}catch(t){console.error("unable to trim:"+t)}return e("input[type=submit]",t).siblings(".waitingSpinner").show(),e("#jserror").val(""),!0}),Modernizr.addTest("cssresize",Modernizr.testAllProps("resize")),Modernizr.cssresize||e("textarea.resizable:not(.processed)").TextAreaResizer(),p(),e(".fileProxyConfidential").change(p),e("#explicitCoordinatesDiv").length>0&&e("#explicitCoordinatesDiv").toggle(e("#viewCoordinatesCheckbox")[0].checked),e(".latLong").each(function(t,n){e(this).hide();var i=e(this).attr("id");e("#d_"+i).val(e("#"+i).val())}),e("#jserror").val("SAVE"),e("#copyrightHolderTable").on("click",".row-clear",function(n){var i=e(this).parents(".repeat-row")[0];t.repeatrow.deleteRow(i)}),a(),e("#projectId").change(function(){var n=e(this),i=n.closest(".controls-row");if(e(".view-project",i).remove(),n.val().length>0&&"-1"!==n.val()){var o='<a class="view-project btn btn-small" target="_project" href="'+t.uri("project/"+n.val())+'">View project in new window</a>';i.append(o)}}).change(),c(),i.includeInheritance&&t.inheritance.applyInheritance(i.formSelector),e("#fileUploadField").each(function(){var t=e(this),n=function(){t.val().length&&e("#reminder").hide()};t.change(n),n()}),t.inheritance.registerClearSectionButtons(n),l(n)},initRightsPage:function(){e("#sharesTable").on("focus",".collectionAutoComplete",function(){console.debug("Applying collection autocomplete to ",e(this)),t.autocomplete.applyCollectionAutocomplete(e(this),{showCreate:!0,showCreatePhrase:"Create a new collection"},{permission:"ADD_TO_SHARE"})})},applyTreeviews:a,initializeView:function(){var t=e("#divSearchContext");1===t.length&&e(".searchbox").focus(function(){t.addClass("active")}).blur(function(){})},determineResponsiveClass:h,populateTarget:function(n){var i=e("body"),o=i.data("adhocTarget");void 0!==o&&(e("input[type=hidden]",o).val(n.id),e("input[type=text]",o).val(n.title),i.removeData("adhocTarget"),t.common.adhocTarget=null)},setAdhocTarget:function(n,i){var o=i;o||(i="div");var r=e(n).closest(o);e("body").data("adhocTarget",r),t.common.adhocTarget=r},changeSubcategory:function(n,i){var o=e(n),r=e(i);r.empty(),o.siblings(".waitingSpinner").show(),e.get(t.uri()+"api/resource/column-metadata-subcategories",{categoryVariableId:o.val()},function(t,e){for(var n="",i=0;i<t.length;i++)parseInt(t[i].id)>-1&&(n+='<option value="'+t[i].id+'">'+t[i].label+"</option>\n");o.siblings(".waitingSpinner").hide(),r.html(n)})},registerDownload:function(t,e){e?ga("send","event","download","download",t,e):ga("send","event","download","download",t)},registerShare:function(t,e,n){n?ga("send","event",t,"shared",e,n):ga("send","event",t,"shared",e)},outboundLink:function(t){ga("send","event","outboundLink","clicked",t.href)},setupSupportingResourceForm:function(t,e){_()},switchType:function(t,n){console.debug("Called _switchType");var i=e(t).val(),o=void 0!==i?i.toLowerCase():"SWITCHTYPEDEFAULT";o="."+o;var r=e(n);r.find(".typeToggle").hide(),r.find(o).show()},setupDocumentEditForm:function(){e(".doctype input[type=radio]").click(function(){m(this)}),m(e(".doctype input[type=radio]:checked"))},sessionTimeoutWarning:g,sprintf:function(){for(var t=arguments[0],e=0;e<arguments.length-1;e++){var n=new RegExp("\\{"+e+"\\}","gm");t=t.replace(n,arguments[e+1])}return t},htmlDecode:function(t){return void 0==t||""==t?"":e("<div/>").html(t).text()},htmlEncode:d,htmlDoubleEncode:function(t){return d(d(t))},applyWatermarks:f,coordinatesCheckboxClicked:function(t){e("#explicitCoordinatesDiv").toggle(t.checked)},refreshInputDisplay:_,maxJavascriptValidationMessages:25,tmpl:tmpl,collectionTreeview:function(){e(".collection-treeview").find(".hidden").removeClass("hidden").end().treeview({collapsed:!0})},humanFileSize:function(t){if(t<1e3)return t+" B";var e=-1;do{t/=1e3,++e}while(t>=1e3);return t.toFixed(1)+" "+["kB","MB","GB","TB","PB","EB","ZB","YB"][e]},initImageGallery:function(){e(".image-carousel").each(function(t,n){e(n).find(".thumbnailLink[data-src]").each(function(t,n){n.src=e(n).data("src")})}),e(".thumbnailLink").click(function(){var t=e(this);e("#bigImage").attr("src",t.data("url"));var n="";t.data("access-rights")&&(n="This file is <em>"+t.data("access-rights")+"</em> but you have rights to it"),e("#confidentialLabel").html(n),e("#downloadText").html(t.attr("alt")),e(".thumbnail-border-selected").removeClass("thumbnail-border-selected"),t.parent().addClass("thumbnail-border-selected")})},formatNumber:function(t){var e=Math.floor(t).toString().split("."),n=t%1,i=e[0].split("").reverse().join("").replace(/(\d{3})\B/g,"$1,").split("").reverse().join("");return i+=e[1]?"."+e[1]:"",n>0&&(i+="."+n.toFixed(2).replace("0.","")),i},registerAjaxStatusContainer:c,suppressKeypressFormSubmissions:s,initFormNavigate:l,main:function(){e(function(){e(window).resize(b).resize(),g()})}}),i}(TDAR,TDAR.fileupload)}).call(this,n(0),n(0))},function(t,e,n){(function(t){TDAR.fileupload=function(t,e){"use strict";var n=0,i=!0,o={formSelector:"#metadataForm",inputSelector:"#fileAsyncUpload",fileuploadSelector:"#divFileUpload",dropZone:"#divFileUpload",pasteZone:"#divFileUpload input[type=file]"},r=function(t){console.log("updateFileAction(%s)",t);var n=e(t).closest("tr").find(".fileAction");"NONE"===n.val()&&n.val("MODIFY_METADATA")},a=function(n){return e.map(n,function(n,i){var o=e.extend({name:n.filename,url:t.uri("filestore/"+n.originalFileVersionId),thumbnail_url:null,delete_url:null,delete_type:"DELETE",description:n.description,fileCreatedDate:""},n);if(n.fileCreatedDate){var r=new Date(n.fileCreatedDate),a=r.getYear()-100,s=r.getMonth()+1,l=r.getDate();o.fileCreatedDate=s+"/"+l+"/"+a}return o})},s=function(t,n){var i=n.context,o=parseInt(i.find(".fileId").val())<=0,r=e("button.delete-button",n.context),a=e(".fileAction",n.context);"DELETE"===r.data("type")?(a.data("prev",a.val()),a.val(o?"NONE":"DELETE"),e(n.context).addClass("deleted-file"),r.data("type","UNDELETE"),c(i)):(a.val(a.data("prev")),e(n.context).removeClass("deleted-file"),r.data("type","DELETE"),u(i)),e("span",r).html({DELETE:"Delete",UNDELETE:"Undelete"}[r.data("type")])},l=function(t,n){e(n.context).closest("tbody.files").length>0?e("#reminder").hide():e("#reminder").show()},u=function(t){e("button:not(.delete-button), select",t).prop("disabled",!1),e(".delete-button",t).removeClass("btn-warning").addClass("btn-danger")},c=function(t){e("button:not(.delete-button), select",t).prop("disabled",!0),e(".delete-button",t).addClass("btn-warning").removeClass("btn-danger")},d=function(t){e(t).on("change",".replace-file",function(n){console.debug("triggering file upload");var o=e(this);i=!1;var r=e(this).closest(".existing-file");r.addClass("replace-target"),e(t).fileupload("send",{files:n.target.files||[{name:this.value}],fileInput:e(this),$replaceTarget:r,ticketId:e("#ticketId").val()}),r.removeClass("replace-target"),n.target.files&&o.prop("disabled",!0)}),e(t).bind("fileuploadcompleted",function(t,n){if(n.$replaceTarget){n.files[0];!function(t,e){var n=e.find("input.fileReplaceName").val(),i=t.find("input.fileReplaceName").val();t.find(".replacement-text").text("Will be replaced by "+n+" upon clicking 'Save'"),t.find(".fileReplaceName").val(n),t.find(".fileReplaceName").data("original-filename",i);var o=t.find(".fileAction");o.data("original-fileAction",o.val()),o.val("REPLACE"),e.detach(),t.data("$targetRow",e),t.find(".replace-file-button, .undo-replace-button").toggle()}(n.$replaceTarget,e(n.context))}}),e(t).bind("fileuploadfinished",function(){i=!0,e(t).find(".replace-file").prop("disabled",!1)}),e(t).on("click",".undo-replace-button",function(t){console.log("undo replace click"),function(t){var n=t.find(".fileReplaceName"),i=t.find(".fileAction"),o=t.find(".replacement-text");n.val(n.data("original-filename")),i.val(i.data("original-fileAction")),o.text("");var r=t.data("$targetRow");r.find(".fileAction").val("NONE"),e("#cancelledProxies").append(r),t.find(".replace-file-button, .undo-replace-button").toggle()}(e(this).closest(".existing-file"))})},h=function(e){t.datepicker.apply(e)};return{registerUpload:function(n){10==(i=navigator.userAgent.match(/MSIE\s?(\d+)(?:\.(\d+))?/i),null!=i?{major:i[1],minor:i[2]}:{major:"-1",minor:"-1"}).major&&e("html").addClass("ie10");var i;var u=e.extend(o,n),c=e(u.fileuploadSelector).fileupload(e.extend({formData:function(){return e("#ticketId").val()?[{name:"ticketId",value:e("#ticketId").val()}]:[{name:"ticketRequested",value:"true"}]},singleFileUploads:!1,url:t.uri("upload/upload"),autoUpload:!0,maxNumberOfFiles:e(document).data("maxUploadFiles"),getNumberOfFiles:function(){return this.filesContainer.children().not(".deleted-file, .hidden, .replace-target").length},destroy:s},u)),f=c.fileupload("option","filesContainer");c.bind("fileuploadpaste",function(t,n){if(0==n.files.length)return console.log("interpreting text paste instead of file"),!0;e.each(n.files,function(t,e){console.log("Pasted file type: "+e.type)})}),c.bind("fileuploadcompleted",l);c.bind("fileuploadcompleted fileuploadfailed",function(t,n){e("tbody.files").find("tr").not(".replace-target,.deleted-file").each(function(t,n){e(".fileSequenceNumber",n).val(t+1)})});var p=e.extend({},u,{context:c[0],updateFileAction:r,validFiles:function(){var n=f.find("tr.template-download").not(".replace-target, .deleted-file, .hidden, .fileupload-error").map(function(){var t={};return e(this).find('[type="hidden"]').each(function(){t[e(this).attr("class")]=e(this).val()}),t.context=e(this),t}).get();return t.datepicker.applyHidden(e(".new-file input.datepicker")),e(".new-file").on("datechanged",function(t){console.log(this),console.log(t.target),r(t.target)}),n=e.map(n,function(t){var e=t.fileReplaceName.substring(t.fileReplaceName.indexOf(".")+1).toLowerCase();return{id:parseInt(t.fileId),action:t.fileAction,filename:t.fileReplaceName,sequence:parseInt(t.fileSequenceNumber),ext:e,base:t.fileReplaceName.substr(0,t.fileReplaceName.length-e.length-1),context:t.context}})}});if(e(u.formSelector).add(u.fileuploadSelector).data("fileuploadHelper",p),d(u.fileuploadSelector),f.on("change","select,textarea,input[type=text],.datepicker",function(t){console.log("update file action fired"),r(this)}),f.on("datechanged",function(t){console.log(this),console.log(t.target),r(t.target)}),t.datepicker.bind(e("input.datepicker",f)),e(u.fileuploadSelector).bind("fileuploadcompleted",function(t,n){var i=e(n.context).find(".date");h(i),e(this).trigger("heightchange")}),e(u.fileuploadSelector).bind("fileuploaddone",function(t,n){if(n.result&&n.result.ticket)if(n.result.ticket.id){var i=n.result.ticket;console.log("ticket received: %s",JSON.stringify(i)),e("#ticketId").val(i.id)}else console.log("no ticket in results")}),c.bind("fileuploadfailed",function(t,n){var i=n.context;i.find("input, select, button").prop("disabled",!0).addClass("disabled"),setTimeout(function(){i.fadeOut("slow",function(){i.remove()})},5e3),e(this).find("input[type=file]").val("").val(null)}),t.filesJson){var g=a(t.filesJson);g.length&&e("#fileProxyUploadBody").empty(),c.fileupload("option","done").call(c[0],null,{result:{files:g}}),f.find("select.fileProxyConfidential").each(function(){var t=e(this).attr("datarestriction");t&&e(this).val(t)})}return c.bind("fileuploadsent",function(){console.log("disabling stuff"),e(".submitButton, #fileAsyncUpload").prop("disabled",!0),e(".fileinput-button").addClass("disabled")}).bind("fileuploadfinished",function(){e(".submitButton, #fileAsyncUpload").prop("disabled",!1),e(".fileinput-button").removeClass("disabled"),console.log("enabling stuff")}),p},updateFileAction:r,getRowId:function(){return n++},getRowVisibility:function(){return i}}}(TDAR,t)}).call(this,n(0))},function(t,e,n){(function(t){!function(t,e){"use strict";t.moreInfo={init:function(){e(".moreInfo").each(function(){var t=e(this);if("collection"==t.data("type")){var n=t.data("description"),i=t.data("size"),o=t.data("submitter"),r=(t.data("submitterLink"),t.data("hidden")),a="<p><b>Description:</b> "+n+"<br>";a+="<b># of Resources:</b> "+i+"<br>",r&&(a+="<b>Hidden:</b> "+r+"<br>"),a+="<b>Submitter:</b> "+o+"</p>",t.popover({html:!0,content:a,trigger:"hover"})}})},main:function(){t.moreInfo.init()}}}(TDAR,t)}).call(this,n(0))},function(t,e,n){(function(t){!function(t,e){"use strict";var n={dateFormat:"mm/dd/yyyy"},i=function(t){e(t).datepicker({autoclose:!0,dateFormat:"mm/dd/yyyy"}).on("changeDate",o)},o=function(t){var n=e(t.target);""!=n.val()&&n.attr("placeholder",""),n.datepicker("hide"),n.trigger("datechanged")};t.datepicker={init:function(){e("input.datepicker").each(function(t,e){i(e)})},bind:i,apply:function(t){t.datepicker(n).on("changeDate",o)},applyHidden:function(t){t.datepicker(n).on("changeDate",o).datepicker("hide")},defaults:n,main:function(){t.datepicker.init()}}}(TDAR,t)}).call(this,n(0))},function(t,e,n){var i,o,r;
/*!
 * jQuery Validation Plugin v1.17.0
 *
 * https://jqueryvalidation.org/
 *
 * Copyright (c) 2017 Jrn Zaefferer
 * Released under the MIT license
 */o=[n(0),n(17)],void 0===(r="function"==typeof(i=function(t){return function(){function e(t){return t.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'\"_+=\/\-]*/g,"")}t.validator.addMethod("maxWords",function(t,n,i){return this.optional(n)||e(t).match(/\b\w+\b/g).length<=i},t.validator.format("Please enter {0} words or less.")),t.validator.addMethod("minWords",function(t,n,i){return this.optional(n)||e(t).match(/\b\w+\b/g).length>=i},t.validator.format("Please enter at least {0} words.")),t.validator.addMethod("rangeWords",function(t,n,i){var o=e(t),r=/\b\w+\b/g;return this.optional(n)||o.match(r).length>=i[0]&&o.match(r).length<=i[1]},t.validator.format("Please enter between {0} and {1} words."))}(),t.validator.addMethod("accept",function(e,n,i){var o,r,a="string"==typeof i?i.replace(/\s/g,""):"image/*",s=this.optional(n);if(s)return s;if("file"===t(n).attr("type")&&(a=a.replace(/[\-\[\]\/\{\}\(\)\+\?\.\\\^\$\|]/g,"\\$&").replace(/,/g,"|").replace(/\/\*/g,"/.*"),n.files&&n.files.length))for(r=new RegExp(".?("+a+")$","i"),o=0;o<n.files.length;o++)if(!n.files[o].type.match(r))return!1;return!0},t.validator.format("Please enter a value with a valid mimetype.")),t.validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^\w+$/i.test(t)},"Letters, numbers, and underscores only please"),t.validator.addMethod("bankaccountNL",function(t,e){if(this.optional(e))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(t))return!1;var n,i=t.replace(/ /g,""),o=0,r=i.length;for(n=0;n<r;n++)o+=(r-n)*i.substring(n,n+1);return o%11==0},"Please specify a valid bank account number"),t.validator.addMethod("bankorgiroaccountNL",function(e,n){return this.optional(n)||t.validator.methods.bankaccountNL.call(this,e,n)||t.validator.methods.giroaccountNL.call(this,e,n)},"Please specify a valid bank or giro account number"),t.validator.addMethod("bic",function(t,e){return this.optional(e)||/^([A-Z]{6}[A-Z2-9][A-NP-Z1-9])(X{3}|[A-WY-Z0-9][A-Z0-9]{2})?$/.test(t.toUpperCase())},"Please specify a valid BIC code"),t.validator.addMethod("cifES",function(t,e){"use strict";if(this.optional(e))return!0;var n,i,o,r,a=new RegExp(/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/gi),s=t.substring(0,1),l=t.substring(1,8),u=t.substring(8,9),c=0,d=0;function h(t){return t%2==0}if(9!==t.length||!a.test(t))return!1;for(n=0;n<l.length;n++)i=parseInt(l[n],10),h(n)?d+=(i*=2)<10?i:i-9:c+=i;return o=(10-(c+d).toString().substr(-1)).toString(),o=parseInt(o,10)>9?"0":o,r="JABCDEFGHI".substr(o,1).toString(),s.match(/[ABEH]/)?u===o:s.match(/[KPQS]/)?u===r:u===o||u===r},"Please specify a valid CIF number."),t.validator.addMethod("cpfBR",function(t){if(11!==(t=t.replace(/([~!@#$%^&*()_+=`{}\[\]\-|\\:;'<>,.\/? ])+/g,"")).length)return!1;var e,n,i,o,r=0;if(e=parseInt(t.substring(9,10),10),n=parseInt(t.substring(10,11),10),i=function(t,e){var n=10*t%11;return 10!==n&&11!==n||(n=0),n===e},""===t||"00000000000"===t||"11111111111"===t||"22222222222"===t||"33333333333"===t||"44444444444"===t||"55555555555"===t||"66666666666"===t||"77777777777"===t||"88888888888"===t||"99999999999"===t)return!1;for(o=1;o<=9;o++)r+=parseInt(t.substring(o-1,o),10)*(11-o);if(i(r,e)){for(r=0,o=1;o<=10;o++)r+=parseInt(t.substring(o-1,o),10)*(12-o);return i(r,n)}return!1},"Please specify a valid CPF number"),t.validator.addMethod("creditcard",function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var n,i,o=0,r=0,a=!1;if((t=t.replace(/\D/g,"")).length<13||t.length>19)return!1;for(n=t.length-1;n>=0;n--)i=t.charAt(n),r=parseInt(i,10),a&&(r*=2)>9&&(r-=9),o+=r,a=!a;return o%10==0},"Please enter a valid credit card number."),t.validator.addMethod("creditcardtypes",function(t,e,n){if(/[^0-9\-]+/.test(t))return!1;t=t.replace(/\D/g,"");var i=0;return n.mastercard&&(i|=1),n.visa&&(i|=2),n.amex&&(i|=4),n.dinersclub&&(i|=8),n.enroute&&(i|=16),n.discover&&(i|=32),n.jcb&&(i|=64),n.unknown&&(i|=128),n.all&&(i=255),1&i&&/^(5[12345])/.test(t)?16===t.length:2&i&&/^(4)/.test(t)?16===t.length:4&i&&/^(3[47])/.test(t)?15===t.length:8&i&&/^(3(0[012345]|[68]))/.test(t)?14===t.length:16&i&&/^(2(014|149))/.test(t)?15===t.length:32&i&&/^(6011)/.test(t)?16===t.length:64&i&&/^(3)/.test(t)?16===t.length:64&i&&/^(2131|1800)/.test(t)?15===t.length:!!(128&i)},"Please enter a valid credit card number."),t.validator.addMethod("currency",function(t,e,n){var i,o="string"==typeof n,r=o?n:n[0],a=!!o||n[1];return r=r.replace(/,/g,""),i="^["+(r=a?r+"]":r+"]?")+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$",i=new RegExp(i),this.optional(e)||i.test(t)},"Please specify a valid currency"),t.validator.addMethod("dateFA",function(t,e){return this.optional(e)||/^[1-4]\d{3}\/((0?[1-6]\/((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))\/(30|([1-2][0-9])|(0?[1-9]))))$/.test(t)},t.validator.messages.date),t.validator.addMethod("dateITA",function(t,e){var n,i,o,r,a,s=!1;return/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(t)?(n=t.split("/"),i=parseInt(n[0],10),o=parseInt(n[1],10),r=parseInt(n[2],10),s=(a=new Date(Date.UTC(r,o-1,i,12,0,0,0))).getUTCFullYear()===r&&a.getUTCMonth()===o-1&&a.getUTCDate()===i):s=!1,this.optional(e)||s},t.validator.messages.date),t.validator.addMethod("dateNL",function(t,e){return this.optional(e)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(t)},t.validator.messages.date),t.validator.addMethod("extension",function(t,e,n){return n="string"==typeof n?n.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(e)||t.match(new RegExp("\\.("+n+")$","i"))},t.validator.format("Please enter a value with a valid extension.")),t.validator.addMethod("giroaccountNL",function(t,e){return this.optional(e)||/^[0-9]{1,7}$/.test(t)},"Please specify a valid giro account number"),t.validator.addMethod("iban",function(t,e){if(this.optional(e))return!0;var n,i,o,r,a,s=t.replace(/ /g,"").toUpperCase(),l="",u=!0,c="";if(s.length<5)return!1;if(void 0!==(o={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"}[s.substring(0,2)])&&!new RegExp("^[A-Z]{2}\\d{2}"+o+"$","").test(s))return!1;for(n=s.substring(4,s.length)+s.substring(0,4),r=0;r<n.length;r++)"0"!==(i=n.charAt(r))&&(u=!1),u||(l+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(i));for(a=0;a<l.length;a++)c=(""+c+l.charAt(a))%97;return 1===c},"Please specify a valid IBAN"),t.validator.addMethod("integer",function(t,e){return this.optional(e)||/^-?\d+$/.test(t)},"A positive or negative non-decimal number please"),t.validator.addMethod("ipv4",function(t,e){return this.optional(e)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(t)},"Please enter a valid IP v4 address."),t.validator.addMethod("ipv6",function(t,e){return this.optional(e)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(t)},"Please enter a valid IP v6 address."),t.validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},"Letters only please"),t.validator.addMethod("letterswithbasicpunc",function(t,e){return this.optional(e)||/^[a-z\-.,()'"\s]+$/i.test(t)},"Letters or punctuation only please"),t.validator.addMethod("mobileNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid mobile number"),t.validator.addMethod("mobileUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[1345789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number"),t.validator.addMethod("netmask",function(t,e){return this.optional(e)||/^(254|252|248|240|224|192|128)\.0\.0\.0|255\.(254|252|248|240|224|192|128|0)\.0\.0|255\.255\.(254|252|248|240|224|192|128|0)\.0|255\.255\.255\.(254|252|248|240|224|192|128|0)/i.test(t)},"Please enter a valid netmask."),t.validator.addMethod("nieES",function(t,e){"use strict";if(this.optional(e))return!0;var n,i=new RegExp(/^[MXYZ]{1}[0-9]{7,8}[TRWAGMYFPDXBNJZSQVHLCKET]{1}$/gi),o=t.substr(t.length-1).toUpperCase();return!((t=t.toString().toUpperCase()).length>10||t.length<9||!i.test(t))&&(n=9===(t=t.replace(/^[X]/,"0").replace(/^[Y]/,"1").replace(/^[Z]/,"2")).length?t.substr(0,8):t.substr(0,9),"TRWAGMYFPDXBNJZSQVHLCKET".charAt(parseInt(n,10)%23)===o)},"Please specify a valid NIE number."),t.validator.addMethod("nifES",function(t,e){"use strict";return!!this.optional(e)||!!(t=t.toUpperCase()).match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")&&(/^[0-9]{8}[A-Z]{1}$/.test(t)?"TRWAGMYFPDXBNJZSQVHLCKE".charAt(t.substring(8,0)%23)===t.charAt(8):!!/^[KLM]{1}/.test(t)&&t[8]==="TRWAGMYFPDXBNJZSQVHLCKE".charAt(t.substring(8,1)%23))},"Please specify a valid NIF number."),t.validator.addMethod("nipPL",function(t){"use strict";if(10!==(t=t.replace(/[^0-9]/g,"")).length)return!1;for(var e=[6,5,7,2,3,4,5,6,7],n=0,i=0;i<9;i++)n+=e[i]*t[i];var o=n%11;return(10===o?0:o)===parseInt(t[9],10)},"Please specify a valid NIP number."),t.validator.addMethod("notEqualTo",function(e,n,i){return this.optional(n)||!t.validator.methods.equalTo.call(this,e,n,i)},"Please enter a different value, values must not be the same."),t.validator.addMethod("nowhitespace",function(t,e){return this.optional(e)||/^\S+$/i.test(t)},"No white space please"),t.validator.addMethod("pattern",function(t,e,n){return!!this.optional(e)||("string"==typeof n&&(n=new RegExp("^(?:"+n+")$")),n.test(t))},"Invalid format."),t.validator.addMethod("phoneNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid phone number."),t.validator.addMethod("phonesUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number"),t.validator.addMethod("phoneUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number"),t.validator.addMethod("phoneUS",function(t,e){return t=t.replace(/\s+/g,""),this.optional(e)||t.length>9&&t.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/)},"Please specify a valid phone number"),t.validator.addMethod("postalcodeBR",function(t,e){return this.optional(e)||/^\d{2}.\d{3}-\d{3}?$|^\d{5}-?\d{3}?$/.test(t)},"Informe um CEP vlido."),t.validator.addMethod("postalCodeCA",function(t,e){return this.optional(e)||/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ] *\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i.test(t)},"Please specify a valid postal code"),t.validator.addMethod("postalcodeIT",function(t,e){return this.optional(e)||/^\d{5}$/.test(t)},"Please specify a valid postal code"),t.validator.addMethod("postalcodeNL",function(t,e){return this.optional(e)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(t)},"Please specify a valid postal code"),t.validator.addMethod("postcodeUK",function(t,e){return this.optional(e)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(t)},"Please specify a valid UK postcode"),t.validator.addMethod("require_from_group",function(e,n,i){var o=t(i[1],n.form),r=o.eq(0),a=r.data("valid_req_grp")?r.data("valid_req_grp"):t.extend({},this),s=o.filter(function(){return a.elementValue(this)}).length>=i[0];return r.data("valid_req_grp",a),t(n).data("being_validated")||(o.data("being_validated",!0),o.each(function(){a.element(this)}),o.data("being_validated",!1)),s},t.validator.format("Please fill at least {0} of these fields.")),t.validator.addMethod("skip_or_fill_minimum",function(e,n,i){var o=t(i[1],n.form),r=o.eq(0),a=r.data("valid_skip")?r.data("valid_skip"):t.extend({},this),s=o.filter(function(){return a.elementValue(this)}).length,l=0===s||s>=i[0];return r.data("valid_skip",a),t(n).data("being_validated")||(o.data("being_validated",!0),o.each(function(){a.element(this)}),o.data("being_validated",!1)),l},t.validator.format("Please either skip these fields or fill at least {0} of them.")),t.validator.addMethod("stateUS",function(t,e,n){var i,o=void 0===n,r=!o&&void 0!==n.caseSensitive&&n.caseSensitive,a=!o&&void 0!==n.includeTerritories&&n.includeTerritories,s=!o&&void 0!==n.includeMilitary&&n.includeMilitary;return i=a||s?a&&s?"^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":a?"^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":"^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$":"^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$",i=r?new RegExp(i):new RegExp(i,"i"),this.optional(e)||i.test(t)},"Please specify a valid state"),t.validator.addMethod("strippedminlength",function(e,n,i){return t(e).text().length>=i},t.validator.format("Please enter at least {0} characters")),t.validator.addMethod("time",function(t,e){return this.optional(e)||/^([01]\d|2[0-3]|[0-9])(:[0-5]\d){1,2}$/.test(t)},"Please enter a valid time, between 00:00 and 23:59"),t.validator.addMethod("time12h",function(t,e){return this.optional(e)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(t)},"Please enter a valid time in 12-hour am/pm format"),t.validator.addMethod("url2",function(t,e){return this.optional(e)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},t.validator.messages.url),t.validator.addMethod("vinUS",function(t){if(17!==t.length)return!1;var e,n,i,o,r,a,s=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],l=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],u=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],c=0;for(e=0;e<17;e++){if(o=u[e],i=t.slice(e,e+1),8===e&&(a=i),isNaN(i)){for(n=0;n<s.length;n++)if(i.toUpperCase()===s[n]){i=l[n],i*=o,isNaN(a)&&8===n&&(a=s[n]);break}}else i*=o;c+=i}return 10==(r=c%11)&&(r="X"),r===a},"The specified vehicle identification number (VIN) is invalid."),t.validator.addMethod("zipcodeUS",function(t,e){return this.optional(e)||/^\d{5}(-\d{4})?$/.test(t)},"The specified US ZIP Code is invalid"),t.validator.addMethod("ziprange",function(t,e){return this.optional(e)||/^90[2-5]\d\{2\}-\d{4}$/.test(t)},"Your ZIP-code must be in the range 902xx-xxxx to 905xx-xxxx"),t})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){(function(e){var n;t.exports=function t(e,i,o){function r(s,l){if(!i[s]){if(!e[s]){var u="function"==typeof n&&n;if(!l&&u)return n(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return r(n||t)},d,d.exports,t,e,i,o)}return i[s].exports}for(var a="function"==typeof n&&n,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,n,i){(function(e){var i="undefined"!=typeof window?window.L:void 0!==e?e.L:null,o=t("./geocoders/nominatim").class;n.exports={class:i.Control.extend({options:{showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0},includes:i.Evented.prototype||i.Mixin.Events,initialize:function(t){i.Util.setOptions(this,t),this.options.geocoder||(this.options.geocoder=new o),this._requestCount=0},onAdd:function(t){var e,n="leaflet-control-geocoder",o=i.DomUtil.create("div",n+" leaflet-bar"),r=i.DomUtil.create("button",n+"-icon",o),a=this._form=i.DomUtil.create("div",n+"-form",o);return this._map=t,this._container=o,r.innerHTML="&nbsp;",r.type="button",(e=this._input=i.DomUtil.create("input","",a)).type="text",e.placeholder=this.options.placeholder,this._errorElement=i.DomUtil.create("div",n+"-form-no-error",o),this._errorElement.innerHTML=this.options.errorMessage,this._alts=i.DomUtil.create("ul",n+"-alternatives leaflet-control-geocoder-alternatives-minimized",o),i.DomEvent.disableClickPropagation(this._alts),i.DomEvent.addListener(e,"keydown",this._keydown,this),this.options.geocoder.suggest&&i.DomEvent.addListener(e,"input",this._change,this),i.DomEvent.addListener(e,"blur",function(){this.options.collapsed&&!this._preventBlurCollapse&&this._collapse(),this._preventBlurCollapse=!1},this),this.options.collapsed?"click"===this.options.expand?i.DomEvent.addListener(o,"click",function(t){0===t.button&&2!==t.detail&&this._toggle()},this):i.Browser.touch&&"touch"===this.options.expand?i.DomEvent.addListener(o,"touchstart mousedown",function(t){this._toggle(),t.preventDefault(),t.stopPropagation()},this):(i.DomEvent.addListener(o,"mouseover",this._expand,this),i.DomEvent.addListener(o,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),i.Browser.touch?i.DomEvent.addListener(o,"touchstart",function(t){this._geocode(t)},this):i.DomEvent.addListener(o,"click",function(t){this._geocode(t)},this)),this.options.defaultMarkGeocode&&this.on("markgeocode",this.markGeocode,this),this.on("startgeocode",function(){i.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber")},this),this.on("finishgeocode",function(){i.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber")},this),i.DomEvent.disableClickPropagation(o),o},_geocodeResult:function(t,e){if(e||1!==t.length)if(t.length>0){this._alts.innerHTML="",this._results=t,i.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");for(var n=0;n<t.length;n++)this._alts.appendChild(this._createAlt(t[n],n))}else i.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error");else this._geocodeResultSelected(t[0])},markGeocode:function(t){return t=t.geocode||t,this._map.fitBounds(t.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new i.Marker(t.center).bindPopup(t.html||t.name).addTo(this._map).openPopup(),this},_geocode:function(t){var e=++this._requestCount,n=t?"suggest":"geocode",i={input:this._input.value};this._lastGeocode=this._input.value,t||this._clearResults(),this.fire("start"+n,i),this.options.geocoder[n](this._input.value,function(o){e===this._requestCount&&(i.results=o,this.fire("finish"+n,i),this._geocodeResult(o,t))},this)},_geocodeResultSelected:function(t){this.fire("markgeocode",{geocode:t})},_toggle:function(){i.DomUtil.hasClass(this._container,"leaflet-control-geocoder-expanded")?this._collapse():this._expand()},_expand:function(){i.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded"),this._input.select(),this.fire("expand")},_collapse:function(){i.DomUtil.removeClass(this._container,"leaflet-control-geocoder-expanded"),i.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),i.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),this._input.blur(),this.fire("collapse")},_clearResults:function(){i.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),this._selection=null,i.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error")},_createAlt:function(t,e){var n=i.DomUtil.create("li",""),o=i.DomUtil.create("a","",n),r=this.options.showResultIcons&&t.icon?i.DomUtil.create("img","",o):null,a=t.html?void 0:document.createTextNode(t.name);return r&&(r.src=t.icon),n.setAttribute("data-result-index",e),t.html?o.innerHTML=o.innerHTML+t.html:o.appendChild(a),i.DomEvent.addListener(n,"mousedown touchstart",function(e){this._preventBlurCollapse=!0,i.DomEvent.stop(e),this._geocodeResultSelected(t),i.DomEvent.on(n,"click",function(){this.options.collapsed?this._collapse():this._clearResults()},this)},this),n},_keydown:function(t){var e=this,n=function(t){e._selection&&(i.DomUtil.removeClass(e._selection,"leaflet-control-geocoder-selected"),e._selection=e._selection[t>0?"nextSibling":"previousSibling"]),e._selection||(e._selection=e._alts[t>0?"firstChild":"lastChild"]),e._selection&&i.DomUtil.addClass(e._selection,"leaflet-control-geocoder-selected")};switch(t.keyCode){case 27:this.options.collapsed&&this._collapse();break;case 38:n(-1);break;case 40:n(1);break;case 13:if(this._selection){var o=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[o]),this._clearResults()}else this._geocode()}},_change:function(t){var e=this._input.value;e!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),e.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(i.bind(function(){this._geocode(!0)},this),this.options.suggestTimeout):this._clearResults())}}),factory:function(t){return new i.Control.Geocoder(t)}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./geocoders/nominatim":9}],2:[function(t,n,i){(function(e){var i="undefined"!=typeof window?window.L:void 0!==e?e.L:null,o=t("../util");n.exports={class:i.Class.extend({options:{service_url:"http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"},initialize:function(t,e){i.setOptions(this,e),this._accessToken=t},geocode:function(t,e,n){var r={SingleLine:t,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"};this._key&&this._key.length&&(r.token=this._key),o.getJSON(this.options.service_url+"/findAddressCandidates",r,function(t){var o,r,a,s=[];if(t.candidates&&t.candidates.length)for(var l=0;l<=t.candidates.length-1;l++)o=t.candidates[l],r=i.latLng(o.location.y,o.location.x),a=i.latLngBounds(i.latLng(o.extent.ymax,o.extent.xmax),i.latLng(o.extent.ymin,o.extent.xmin)),s[l]={name:o.address,bbox:a,center:r};e.call(n,s)})},suggest:function(t,e,n){return this.geocode(t,e,n)},reverse:function(t,e,n,r){var a={location:encodeURIComponent(t.lng)+","+encodeURIComponent(t.lat),distance:100,f:"json"};o.getJSON(this.options.service_url+"/reverseGeocode",a,function(t){var e,o=[];t&&!t.error&&(e=i.latLng(t.location.y,t.location.x),o.push({name:t.address.Match_addr,center:e,bounds:i.latLngBounds(e,e)})),n.call(r,o)})}}),factory:function(t,e){return new i.Control.Geocoder.ArcGis(t,e)}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],3:[function(t,n,i){(function(e){var i="undefined"!=typeof window?window.L:void 0!==e?e.L:null,o=t("../util");n.exports={class:i.Class.extend({initialize:function(t){this.key=t},geocode:function(t,e,n){o.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{query:t,key:this.key},function(t){var o=[];if(t.resourceSets.length>0)for(var r=t.resourceSets[0].resources.length-1;r>=0;r--){var a=t.resourceSets[0].resources[r],s=a.bbox;o[r]={name:a.name,bbox:i.latLngBounds([s[0],s[1]],[s[2],s[3]]),center:i.latLng(a.point.coordinates)}}e.call(n,o)},this,"jsonp")},reverse:function(t,e,n,r){o.jsonp("//dev.virtualearth.net/REST/v1/Locations/"+t.lat+","+t.lng,{key:this.key},function(t){for(var e=[],o=t.resourceSets[0].resources.length-1;o>=0;o--){var a=t.resourceSets[0].resources[o],s=a.bbox;e[o]={name:a.name,bbox:i.latLngBounds([s[0],s[1]],[s[2],s[3]]),center:i.latLng(a.point.coordinates)}}n.call(r,e)},this,"jsonp")}}),factory:function(t){return new i.Control.Geocoder.Bing(t)}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],4:[function(t,n,i){(function(e){var i="undefined"!=typeof window?window.L:void 0!==e?e.L:null,o=t("../util");n.exports={class:i.Class.extend({options:{serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(t,e){this._key=t,i.setOptions(this,e),this.options.serviceUrl=this.options.service_url||this.options.serviceUrl},geocode:function(t,e,n){var r={address:t};this._key&&this._key.length&&(r.key=this._key),r=i.Util.extend(r,this.options.geocodingQueryParams),o.getJSON(this.options.serviceUrl,r,function(t){var o,r,a,s=[];if(t.results&&t.results.length)for(var l=0;l<=t.results.length-1;l++)o=t.results[l],r=i.latLng(o.geometry.location),a=i.latLngBounds(i.latLng(o.geometry.viewport.northeast),i.latLng(o.geometry.viewport.southwest)),s[l]={name:o.formatted_address,bbox:a,center:r,properties:o.address_components};e.call(n,s)})},reverse:function(t,e,n,r){var a={latlng:encodeURIComponent(t.lat)+","+encodeURIComponent(t.lng)};a=i.Util.extend(a,this.options.reverseQueryParams),this._key&&this._key.length&&(a.key=this._key),o.getJSON(this.options.serviceUrl,a,function(t){var e,o,a,s=[];if(t.results&&t.results.length)for(var l=0;l<=t.results.length-1;l++)e=t.results[l],o=i.latLng(e.geometry.location),a=i.latLngBounds(i.latLng(e.geometry.viewport.northeast),i.latLng(e.geometry.viewport.southwest)),s[l]={name:e.formatted_address,bbox:a,center:o,properties:e.address_components};n.call(r,s)})}}),factory:function(t,e){return new i.Control.Geocoder.Google(t,e)}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],5:[function(t,n,i){(function(e){var i="undefined"!=typeof window?window.L:void 0!==e?e.L:null,o=t("../util");n.exports={class:i.Class.extend({options:{geocodeUrl:"http://geocoder.api.here.com/6.2/geocode.json",reverseGeocodeUrl:"http://reverse.geocoder.api.here.com/6.2/reversegeocode.json",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(t){i.setOptions(this,t)},geocode:function(t,e,n){var o={searchtext:t,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1};o=i.Util.extend(o,this.options.geocodingQueryParams),this.getJSON(this.options.geocodeUrl,o,e,n)},reverse:function(t,e,n,o){var r={prox:encodeURIComponent(t.lat)+","+encodeURIComponent(t.lng),mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1};r=i.Util.extend(r,this.options.reverseQueryParams),this.getJSON(this.options.reverseGeocodeUrl,r,n,o)},getJSON:function(t,e,n,r){o.getJSON(t,e,function(t){var e,o,a,s=[];if(t.response.view&&t.response.view.length)for(var l=0;l<=t.response.view[0].result.length-1;l++)e=t.response.view[0].result[l].location,o=i.latLng(e.displayPosition.latitude,e.displayPosition.longitude),a=i.latLngBounds(i.latLng(e.mapView.topLeft.latitude,e.mapView.topLeft.longitude),i.latLng(e.mapView.bottomRight.latitude,e.mapView.bottomRight.longitude)),s[l]={name:e.address.label,bbox:a,center:o};n.call(r,s)})}}),factory:function(t){return new i.Control.Geocoder.HERE(t)}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],6:[function(t,n,i){(function(e){var i="undefined"!=typeof window?window.L:void 0!==e?e.L:null,o=t("../util");n.exports={class:i.Class.extend({options:{serviceUrl:"https://api.tiles.mapbox.com/v4/geocode/mapbox.places-v1/",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(t,e){i.setOptions(this,e),this.options.geocodingQueryParams.access_token=t,this.options.reverseQueryParams.access_token=t},geocode:function(t,e,n){var r=this.options.geocodingQueryParams;void 0!==r.proximity&&r.proximity.hasOwnProperty("lat")&&r.proximity.hasOwnProperty("lng")&&(r.proximity=r.proximity.lng+","+r.proximity.lat),o.getJSON(this.options.serviceUrl+encodeURIComponent(t)+".json",r,function(t){var o,r,a,s=[];if(t.features&&t.features.length)for(var l=0;l<=t.features.length-1;l++)o=t.features[l],r=i.latLng(o.center.reverse()),a=o.hasOwnProperty("bbox")?i.latLngBounds(i.latLng(o.bbox.slice(0,2).reverse()),i.latLng(o.bbox.slice(2,4).reverse())):i.latLngBounds(r,r),s[l]={name:o.place_name,bbox:a,center:r};e.call(n,s)})},suggest:function(t,e,n){return this.geocode(t,e,n)},reverse:function(t,e,n,r){o.getJSON(this.options.serviceUrl+encodeURIComponent(t.lng)+","+encodeURIComponent(t.lat)+".json",this.options.reverseQueryParams,function(t){var e,o,a,s=[];if(t.features&&t.features.length)for(var l=0;l<=t.features.length-1;l++)e=t.features[l],o=i.latLng(e.center.reverse()),a=e.hasOwnProperty("bbox")?i.latLngBounds(i.latLng(e.bbox.slice(0,2).reverse()),i.latLng(e.bbox.slice(2,4).reverse())):i.latLngBounds(o,o),s[l]={name:e.place_name,bbox:a,center:o};n.call(r,s)})}}),factory:function(t,e){return new i.Control.Geocoder.Mapbox(t,e)}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],7:[function(t,n,i){(function(e){var i="undefined"!=typeof window?window.L:void 0!==e?e.L:null,o=t("../util");n.exports={class:i.Class.extend({options:{serviceUrl:"https://www.mapquestapi.com/geocoding/v1"},initialize:function(t,e){this._key=decodeURIComponent(t),i.Util.setOptions(this,e)},_formatName:function(){var t,e=[];for(t=0;t<arguments.length;t++)arguments[t]&&e.push(arguments[t]);return e.join(", ")},geocode:function(t,e,n){o.jsonp(this.options.serviceUrl+"/address",{key:this._key,location:t,limit:5,outFormat:"json"},function(t){var o,r,a=[];if(t.results&&t.results[0].locations)for(var s=t.results[0].locations.length-1;s>=0;s--)o=t.results[0].locations[s],r=i.latLng(o.latLng),a[s]={name:this._formatName(o.street,o.adminArea4,o.adminArea3,o.adminArea1),bbox:i.latLngBounds(r,r),center:r};e.call(n,a)},this)},reverse:function(t,e,n,r){o.jsonp(this.options.serviceUrl+"/reverse",{key:this._key,location:t.lat+","+t.lng,outputFormat:"json"},function(t){var e,o,a=[];if(t.results&&t.results[0].locations)for(var s=t.results[0].locations.length-1;s>=0;s--)e=t.results[0].locations[s],o=i.latLng(e.latLng),a[s]={name:this._formatName(e.street,e.adminArea4,e.adminArea3,e.adminArea1),bbox:i.latLngBounds(o,o),center:o};n.call(r,a)},this)}}),factory:function(t,e){return new i.Control.Geocoder.MapQuest(t,e)}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],8:[function(t,n,i){(function(e){var i="undefined"!=typeof window?window.L:void 0!==e?e.L:null,o=t("../util");n.exports={class:i.Class.extend({options:{serviceUrl:"https://search.mapzen.com/v1",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(t,e){i.Util.setOptions(this,e),this._apiKey=t,this._lastSuggest=0},geocode:function(t,e,n){var r=this;o.getJSON(this.options.serviceUrl+"/search",i.extend({api_key:this._apiKey,text:t},this.options.geocodingQueryParams),function(t){e.call(n,r._parseResults(t,"bbox"))})},suggest:function(t,e,n){var r=this;o.getJSON(this.options.serviceUrl+"/autocomplete",i.extend({api_key:this._apiKey,text:t},this.options.geocodingQueryParams),i.bind(function(t){t.geocoding.timestamp>this._lastSuggest&&(this._lastSuggest=t.geocoding.timestamp,e.call(n,r._parseResults(t,"bbox")))},this))},reverse:function(t,e,n,r){var a=this;o.getJSON(this.options.serviceUrl+"/reverse",i.extend({api_key:this._apiKey,"point.lat":t.lat,"point.lon":t.lng},this.options.reverseQueryParams),function(t){n.call(r,a._parseResults(t,"bounds"))})},_parseResults:function(t,e){var n=[];return i.geoJson(t,{pointToLayer:function(t,e){return i.circleMarker(e)},onEachFeature:function(t,o){var r,a,s={};o.getBounds?(r=o.getBounds(),a=r.getCenter()):(a=o.getLatLng(),r=i.latLngBounds(a,a)),s.name=o.feature.properties.label,s.center=a,s[e]=r,s.properties=o.feature.properties,n.push(s)}}),n}}),factory:function(t,e){return new i.Control.Geocoder.Mapzen(t,e)}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],9:[function(t,n,i){(function(e){var i="undefined"!=typeof window?window.L:void 0!==e?e.L:null,o=t("../util");n.exports={class:i.Class.extend({options:{serviceUrl:"https://nominatim.openstreetmap.org/",geocodingQueryParams:{},reverseQueryParams:{},htmlTemplate:function(t){var e=t.address,n=[];return(e.road||e.building)&&n.push("{building} {road} {house_number}"),(e.city||e.town||e.village||e.hamlet)&&n.push('<span class="'+(n.length>0?"leaflet-control-geocoder-address-detail":"")+'">{postcode} {city} {town} {village} {hamlet}</span>'),(e.state||e.country)&&n.push('<span class="'+(n.length>0?"leaflet-control-geocoder-address-context":"")+'">{state} {country}</span>'),o.template(n.join("<br/>"),e,!0)}},initialize:function(t){i.Util.setOptions(this,t)},geocode:function(t,e,n){o.jsonp(this.options.serviceUrl+"search",i.extend({q:t,limit:5,format:"json",addressdetails:1},this.options.geocodingQueryParams),function(t){for(var o=[],r=t.length-1;r>=0;r--){for(var a=t[r].boundingbox,s=0;s<4;s++)a[s]=parseFloat(a[s]);o[r]={icon:t[r].icon,name:t[r].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(t[r]):void 0,bbox:i.latLngBounds([a[0],a[2]],[a[1],a[3]]),center:i.latLng(t[r].lat,t[r].lon),properties:t[r]}}e.call(n,o)},this,"json_callback")},reverse:function(t,e,n,r){o.jsonp(this.options.serviceUrl+"reverse",i.extend({lat:t.lat,lon:t.lng,zoom:Math.round(Math.log(e/256)/Math.log(2)),addressdetails:1,format:"json"},this.options.reverseQueryParams),function(t){var e,o=[];t&&t.lat&&t.lon&&(e=i.latLng(t.lat,t.lon),o.push({name:t.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(t):void 0,center:e,bounds:i.latLngBounds(e,e),properties:t})),n.call(r,o)},this,"json_callback")}}),factory:function(t){return new i.Control.Geocoder.Nominatim(t)}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],10:[function(t,n,i){(function(e){var i="undefined"!=typeof window?window.L:void 0!==e?e.L:null,o=t("../util");n.exports={class:i.Class.extend({options:{serviceUrl:"https://photon.komoot.de/api/",reverseUrl:"https://photon.komoot.de/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]},initialize:function(t){i.setOptions(this,t)},geocode:function(t,e,n){var r=i.extend({q:t},this.options.geocodingQueryParams);o.getJSON(this.options.serviceUrl,r,i.bind(function(t){e.call(n,this._decodeFeatures(t))},this))},suggest:function(t,e,n){return this.geocode(t,e,n)},reverse:function(t,e,n,r){var a=i.extend({lat:t.lat,lon:t.lng},this.options.geocodingQueryParams);o.getJSON(this.options.reverseUrl,a,i.bind(function(t){n.call(r,this._decodeFeatures(t))},this))},_decodeFeatures:function(t){var e,n,o,r,a,s,l=[];if(t&&t.features)for(e=0;e<t.features.length;e++)n=t.features[e],o=n.geometry.coordinates,r=i.latLng(o[1],o[0]),a=n.properties.extent,s=a?i.latLngBounds([a[1],a[0]],[a[3],a[2]]):i.latLngBounds(r,r),l.push({name:this._deocodeFeatureName(n),html:this.options.htmlTemplate?this.options.htmlTemplate(n):void 0,center:r,bbox:s,properties:n.properties});return l},_deocodeFeatureName:function(t){var e,n;for(e=0;!n&&e<this.options.nameProperties.length;e++)n=t.properties[this.options.nameProperties[e]];return n}}),factory:function(t){return new i.Control.Geocoder.Photon(t)}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],11:[function(t,n,i){(function(e){var i="undefined"!=typeof window?window.L:void 0!==e?e.L:null,o=t("../util");n.exports={class:i.Class.extend({options:{serviceUrl:"https://api.what3words.com/v2/"},initialize:function(t){this._accessToken=t},geocode:function(t,e,n){o.getJSON(this.options.serviceUrl+"forward",{key:this._accessToken,addr:t.split(/\s+/).join(".")},function(t){var o,r,a=[];t.hasOwnProperty("geometry")&&(o=i.latLng(t.geometry.lat,t.geometry.lng),r=i.latLngBounds(o,o),a[0]={name:t.words,bbox:r,center:o}),e.call(n,a)})},suggest:function(t,e,n){return this.geocode(t,e,n)},reverse:function(t,e,n,r){o.getJSON(this.options.serviceUrl+"reverse",{key:this._accessToken,coords:[t.lat,t.lng].join(",")},function(t){var e,o,a=[];200==t.status.status&&(e=i.latLng(t.geometry.lat,t.geometry.lng),o=i.latLngBounds(e,e),a[0]={name:t.words,bbox:o,center:e}),n.call(r,a)})}}),factory:function(t){return new i.Control.Geocoder.What3Words(t)}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],12:[function(t,n,i){(function(e){var i="undefined"!=typeof window?window.L:void 0!==e?e.L:null,o=t("./control"),r=t("./geocoders/nominatim"),a=t("./geocoders/bing"),s=t("./geocoders/mapquest"),l=t("./geocoders/mapbox"),u=t("./geocoders/what3words"),c=t("./geocoders/google"),d=t("./geocoders/photon"),h=t("./geocoders/mapzen"),f=t("./geocoders/arcgis"),p=t("./geocoders/here");n.exports=i.Util.extend(o.class,{Nominatim:r.class,nominatim:r.factory,Bing:a.class,bing:a.factory,MapQuest:s.class,mapQuest:s.factory,Mapbox:l.class,mapbox:l.factory,What3Words:u.class,what3words:u.factory,Google:c.class,google:c.factory,Photon:d.class,photon:d.factory,Mapzen:h.class,mapzen:h.factory,ArcGis:f.class,arcgis:f.factory,HERE:p.class,here:p.factory}),i.Util.extend(i.Control,{Geocoder:n.exports,geocoder:o.factory})}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./control":1,"./geocoders/arcgis":2,"./geocoders/bing":3,"./geocoders/google":4,"./geocoders/here":5,"./geocoders/mapbox":6,"./geocoders/mapquest":7,"./geocoders/mapzen":8,"./geocoders/nominatim":9,"./geocoders/photon":10,"./geocoders/what3words":11}],13:[function(t,n,i){(function(t){var e="undefined"!=typeof window?window.L:void 0!==t?t.L:null,i=0,o=function(){var t=/[&<>"'`]/g,e=/[&<>"'`]/,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function i(t){return n[t]}return function(n){return null==n?"":n?(n=""+n,e.test(n)?n.replace(t,i):n):n+""}}();n.exports={jsonp:function(t,n,o,r,a){var s="_l_geocoder_"+i++;n[a||"callback"]=s,window[s]=e.Util.bind(o,r);var l=document.createElement("script");l.type="text/javascript",l.src=t+e.Util.getParamString(n),l.id=s,document.getElementsByTagName("head")[0].appendChild(l)},getJSON:function(t,n,i){var o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(200===o.status||304===o.status?i(JSON.parse(o.response)):i(""))},o.open("GET",t+e.Util.getParamString(n),!0),o.setRequestHeader("Accept","application/json"),o.send(null)},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,n){var i=e[n];return void 0===i?i="":"function"==typeof i&&(i=i(e)),o(i)})},htmlEscape:o}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[12])(12)}).call(this,n(5))},function(t,e){var n,i;window,n=document,L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[];var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this;if(!this._map)return this._needsClustering.push(t),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,n=this._zoom;if(t.__parent)for(;e.__parent._zoom>=n;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off("move",this._childMarkerMoved,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push(t),this):(this._nonPointGroup.removeLayer(t),this)},addLayers:function(t){if(!L.Util.isArray(t))return this.addLayer(t);var e,n=this._featureGroup,i=this._nonPointGroup,o=this.options.chunkedLoading,r=this.options.chunkInterval,a=this.options.chunkProgress,s=t.length,l=0,u=!0;if(this._map){var c=(new Date).getTime(),d=L.bind(function(){for(var h=(new Date).getTime();s>l&&!(o&&0==l%200&&(new Date).getTime()-h>r);l++)if((e=t[l])instanceof L.LayerGroup)u&&(t=t.slice(),u=!1),this._extractNonGroupLayers(e,t),s=t.length;else if(e.getLatLng){if(!this.hasLayer(e)&&(this._addLayer(e,this._maxZoom),e.__parent&&2===e.__parent.getChildCount())){var f=e.__parent.getAllChildMarkers(),p=f[0]===e?f[1]:f[0];n.removeLayer(p)}}else i.addLayer(e);a&&a(l,s,(new Date).getTime()-c),l===s?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(d,this.options.chunkDelay)},this);d()}else for(var h=this._needsClustering;s>l;l++)(e=t[l])instanceof L.LayerGroup?(u&&(t=t.slice(),u=!1),this._extractNonGroupLayers(e,t),s=t.length):e.getLatLng?this.hasLayer(e)||h.push(e):i.addLayer(e);return this},removeLayers:function(t){var e,n,i=t.length,o=this._featureGroup,r=this._nonPointGroup,a=!0;if(!this._map){for(e=0;i>e;e++)(n=t[e])instanceof L.LayerGroup?(a&&(t=t.slice(),a=!1),this._extractNonGroupLayers(n,t),i=t.length):(this._arraySplice(this._needsClustering,n),r.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push(n));return this}if(this._unspiderfy){this._unspiderfy();var s=t.slice(),l=i;for(e=0;l>e;e++)(n=s[e])instanceof L.LayerGroup?(this._extractNonGroupLayers(n,s),l=s.length):this._unspiderfyLayer(n)}for(e=0;i>e;e++)(n=t[e])instanceof L.LayerGroup?(a&&(t=t.slice(),a=!1),this._extractNonGroupLayers(n,t),i=t.length):n.__parent?(this._removeLayer(n,!0,!0),o.hasLayer(n)&&(o.removeLayer(n),n.clusterShow&&n.clusterShow())):r.removeLayer(n);return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){t.off("move",this._childMarkerMoved,this),delete t.__parent}),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var n,i=this._needsClustering.slice(),o=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(i),n=i.length-1;n>=0;n--)-1===o.indexOf(i[n])&&t.call(e,i[n]);this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var e=null;return t=parseInt(t,10),this.eachLayer(function(n){L.stamp(n)===t&&(e=n)}),e},hasLayer:function(t){if(!t)return!1;var e,n=this._needsClustering;for(e=n.length-1;e>=0;e--)if(n[e]===t)return!0;for(e=(n=this._needsRemoving).length-1;e>=0;e--)if(n[e]===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){"function"!=typeof e&&(e=function(){});var n=function(){!t._icon&&!t.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",n,this),this.off("animationend",n,this),t._icon?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};if(t._icon&&this._map.getBounds().contains(t.getLatLng()))e();else if(t.__parent._zoom<Math.round(this._map._zoom))this._map.on("moveend",n,this),this._map.panTo(t.getLatLng());else{var i=function(){this._map.off("movestart",i,this),i=null};this._map.on("movestart",i,this),this._map.on("moveend",n,this),this.on("animationend",n,this),t.__parent.zoomToBounds(),i&&n.call(this)}},onAdd:function(t){var e,n,i;if(this._map=t,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,n=this._needsRemoving.length;n>e;e++)i=this._needsRemoving[e],this._removeLayer(i,!0);this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return t.splice(n,1),!0},_removeFromGridUnclustered:function(t,e){for(var n=this._map,i=this._gridUnclustered;e>=0&&i[e].removeObject(t,n.project(t.getLatLng(),e));e--);},_childMarkerMoved:function(t){this._ignoreMove||(t.target._latlng=t.oldLatLng,this.removeLayer(t.target),t.target._latlng=t.latlng,this.addLayer(t.target))},_removeLayer:function(t,e,n){var i=this._gridClusters,o=this._gridUnclustered,r=this._featureGroup,a=this._map;e&&this._removeFromGridUnclustered(t,this._maxZoom);var s,l=t.__parent,u=l._markers;for(this._arraySplice(u,t);l&&(l._childCount--,l._boundsNeedUpdate=!0,!(l._zoom<0));)e&&l._childCount<=1?(s=l._markers[0]===t?l._markers[1]:l._markers[0],i[l._zoom].removeObject(l,a.project(l._cLatLng,l._zoom)),o[l._zoom].addObject(s,a.project(s.getLatLng(),l._zoom)),this._arraySplice(l.__parent._childClusters,l),l.__parent._markers.push(s),s.__parent=l.__parent,l._icon&&(r.removeLayer(l),n||r.addLayer(s))):l._iconNeedsUpdate=!0,l=l.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,n){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,n)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),n=" marker-cluster-";return n+=10>e?"small":100>e?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick;(e||i)&&this.on("clusterclick",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){for(var e=t.layer,n=e;1===n._childClusters.length;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,i=this._map;(t||n)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),i.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=this._map.getMaxZoom(),e=this.options.maxClusterRadius,n=e;"function"!=typeof e&&(n=function(){return e}),this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var i=t;i>=0;i--)this._gridClusters[i]=new L.DistanceGrid(n(i)),this._gridUnclustered[i]=new L.DistanceGrid(n(i));this._topClusterLevel=new this._markerCluster(this,-1)},_addLayer:function(t,e){var n,i,o=this._gridClusters,r=this._gridUnclustered;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on("move",this._childMarkerMoved,this);e>=0;e--){n=this._map.project(t.getLatLng(),e);var a=o[e].getNearObject(n);if(a)return a._addChild(t),void(t.__parent=a);if(a=r[e].getNearObject(n)){var s=a.__parent;s&&this._removeLayer(a,!1);var l=new this._markerCluster(this,e,a,t);o[e].addObject(l,this._map.project(l._cLatLng,e)),a.__parent=l,t.__parent=l;var u=l;for(i=e-1;i>s._zoom;i--)u=new this._markerCluster(this,i,u),o[i].addObject(u,this._map.project(a.getLatLng(),i));return s._addChild(u),void this._removeFromGridUnclustered(a,e)}r[e].addObject(t,n)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(t){var e=this._maxLat;return e!==i&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var n=e.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else e._updateIcon()},_extractNonGroupLayers:function(t,e){var n,i=t.getLayers(),o=0;for(e=e||[];o<i.length;o++)(n=i[o])instanceof L.LayerGroup?this._extractNonGroupLayers(n,e):e.push(n);return e},_overrideMarkerIcon:function(t){return t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}})}}),L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,e){var n,i=this._getExpandedVisibleBounds(),o=this._featureGroup;this._ignoreMove=!0,this._topClusterLevel._recursively(i,t,0,function(r){var a,s=r._latlng,l=r._markers;for(i.contains(s)||(s=null),r._isSingleParent()&&t+1===e?(o.removeLayer(r),r._recursivelyAddChildrenToMap(null,e,i)):(r.clusterHide(),r._recursivelyAddChildrenToMap(s,e,i)),n=l.length-1;n>=0;n--)a=l[n],i.contains(a._latlng)||o.removeLayer(a)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,e),o.eachLayer(function(t){t instanceof L.MarkerCluster||!t._icon||t.clusterShow()}),this._topClusterLevel._recursively(i,t,e,function(t){t._recursivelyRestoreChildPositions(e)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(i,t,0,function(t){o.removeLayer(t),t.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var n=this,i=this._featureGroup;i.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue(function(){i.removeLayer(t),t.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,e,n){var i=this._getExpandedVisibleBounds();t._recursivelyAnimateChildrenInAndAddSelfToMap(i,e+1,n);var o=this;this._forceLayout(),t._recursivelyBecomeVisible(i,n),this._enqueue(function(){if(1===t._childCount){var r=t._markers[0];this._ignoreMove=!0,r.setLatLng(r.getLatLng()),this._ignoreMove=!1,r.clusterShow&&r.clusterShow()}else t._recursively(i,n,0,function(t){t._recursivelyRemoveChildrenFromMap(i,e+1)});o._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(n.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)},L.MarkerCluster=L.Marker.extend({initialize:function(t,e,n,i){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),i&&this._addChild(i)},getAllChildMarkers:function(t){t=t||[];for(var e=this._childClusters.length-1;e>=0;e--)this._childClusters[e].getAllChildMarkers(t);for(var n=this._markers.length-1;n>=0;n--)t.push(this._markers[n]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var t,e=this._childClusters.slice(),n=this._group._map,i=n.getBoundsZoom(this._bounds),o=this._zoom+1,r=n.getZoom();e.length>0&&i>o;){o++;var a=[];for(t=0;t<e.length;t++)a=a.concat(e[t]._childClusters);e=a}i>o?this._group._map.setView(this._latlng,o):r>=i?this._group._map.setView(this._latlng,r+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t,e,n,i,o=this._markers,r=this._childClusters,a=0,s=0,l=this._childCount;if(0!==l){for(this._resetBounds(),t=0;t<o.length;t++)n=o[t]._latlng,this._bounds.extend(n),a+=n.lat,s+=n.lng;for(t=0;t<r.length;t++)(e=r[t])._boundsNeedUpdate&&e._recalculateBounds(),this._bounds.extend(e._bounds),n=e._wLatLng,i=e._childCount,a+=n.lat*i,s+=n.lng*i;this._latlng=this._wLatLng=new L.LatLng(a/l,s/l),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,n){this._recursively(t,0,n-1,function(t){var n,i,o=t._markers;for(n=o.length-1;n>=0;n--)(i=o[n])._icon&&(i._setPos(e),i.clusterHide())},function(t){var n,i,o=t._childClusters;for(n=o.length-1;n>=0;n--)(i=o[n])._icon&&(i._setPos(e),i.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,n){this._recursively(t,n,0,function(i){i._recursivelyAnimateChildrenIn(t,i._group._map.latLngToLayerPoint(i.getLatLng()).round(),e),i._isSingleParent()&&e-1===n?(i.clusterShow(),i._recursivelyRemoveChildrenFromMap(t,e)):i.clusterHide(),i._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,0,e,null,function(t){t.clusterShow()})},_recursivelyAddChildrenToMap:function(t,e,n){this._recursively(n,-1,e,function(i){if(e!==i._zoom)for(var o=i._markers.length-1;o>=0;o--){var r=i._markers[o];n.contains(r._latlng)&&(t&&(r._backupLatlng=r.getLatLng(),r.setLatLng(t),r.clusterHide&&r.clusterHide()),i._group._featureGroup.addLayer(r))}},function(e){e._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var n=this._markers[e];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(t-1===this._zoom)for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i]._restorePosition();else for(var o=this._childClusters.length-1;o>=0;o--)this._childClusters[o]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,n){var i,o;this._recursively(t,-1,e-1,function(t){for(o=t._markers.length-1;o>=0;o--)i=t._markers[o],n&&n.contains(i._latlng)||(t._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())},function(t){for(o=t._childClusters.length-1;o>=0;o--)i=t._childClusters[o],n&&n.contains(i._latlng)||(t._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())})},_recursively:function(t,e,n,i,o){var r,a,s=this._childClusters,l=this._zoom;if(l>=e&&(i&&i(this),o&&l===n&&o(this)),e>l||n>l)for(r=s.length-1;r>=0;r--)a=s[r],t.intersects(a._bounds)&&a._recursively(t,e,n,i,o)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var t=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,t}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var n=this._getCoord(e.x),i=this._getCoord(e.y),o=this._grid,r=o[i]=o[i]||{},a=r[n]=r[n]||[],s=L.Util.stamp(t);this._objectPoint[s]=e,a.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var n,i,o=this._getCoord(e.x),r=this._getCoord(e.y),a=this._grid,s=a[r]=a[r]||{},l=s[o]=s[o]||[];for(delete this._objectPoint[L.Util.stamp(t)],n=0,i=l.length;i>n;n++)if(l[n]===t)return l.splice(n,1),1===i&&delete s[o],!0},eachObject:function(t,e){var n,i,o,r,a,s,l=this._grid;for(n in l)for(i in a=l[n])for(o=0,r=(s=a[i]).length;r>o;o++)t.call(e,s[o])&&(o--,r--)},getNearObject:function(t){var e,n,i,o,r,a,s,l,u=this._getCoord(t.x),c=this._getCoord(t.y),d=this._objectPoint,h=this._sqCellSize,f=null;for(e=c-1;c+1>=e;e++)if(o=this._grid[e])for(n=u-1;u+1>=n;n++)if(r=o[n])for(i=0,a=r.length;a>i;i++)s=r[i],h>(l=this._sqDist(d[L.Util.stamp(s)],t))&&(h=l,f=s);return f},_getCoord:function(t){return Math.floor(t/this._cellSize)},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}},L.QuickHull={getDistant:function(t,e){var n=e[1].lat-e[0].lat;return(e[0].lng-e[1].lng)*(t.lat-e[0].lat)+n*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var n,i,o,r=0,a=null,s=[];for(n=e.length-1;n>=0;n--)i=e[n],(o=this.getDistant(i,t))>0&&(s.push(i),o>r&&(r=o,a=i));return{maxPoint:a,newPoints:s}},buildConvexHull:function(t,e){var n=[],i=this.findMostDistantPointFromBaseLine(t,e);return i.maxPoint?n=(n=n.concat(this.buildConvexHull([t[0],i.maxPoint],i.newPoints))).concat(this.buildConvexHull([i.maxPoint,t[1]],i.newPoints)):[t[0]]},getConvexHull:function(t){var e,n=!1,i=!1,o=!1,r=!1,a=null,s=null,l=null,u=null,c=null,d=null;for(e=t.length-1;e>=0;e--){var h=t[e];(!1===n||h.lat>n)&&(a=h,n=h.lat),(!1===i||h.lat<i)&&(s=h,i=h.lat),(!1===o||h.lng>o)&&(l=h,o=h.lng),(!1===r||h.lng<r)&&(u=h,r=h.lng)}return i!==n?(d=s,c=a):(d=u,c=l),[].concat(this.buildConvexHull([d,c],t),this.buildConvexHull([c,d],t))}},L.MarkerCluster.include({getConvexHull:function(){var t,e,n=this.getAllChildMarkers(),i=[];for(e=n.length-1;e>=0;e--)t=n[e].getLatLng(),i.push(t);return L.QuickHull.getConvexHull(i)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(),n=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,n):(n.y+=10,t=this._generatePointsCircle(e.length,n)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var n,i,o=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t)/this._2PI,r=this._2PI/t,a=[];for(a.length=t,n=t-1;n>=0;n--)i=this._circleStartAngle+n*r,a[n]=new L.Point(e.x+o*Math.cos(i),e.y+o*Math.sin(i))._round();return a},_generatePointsSpiral:function(t,e){var n,i=this._group.options.spiderfyDistanceMultiplier,o=i*this._spiralLengthStart,r=i*this._spiralFootSeparation,a=i*this._spiralLengthFactor*this._2PI,s=0,l=[];for(l.length=t,n=t-1;n>=0;n--)s+=r/o+5e-4*n,l[n]=new L.Point(e.x+o*Math.cos(s),e.y+o*Math.sin(s))._round(),o+=a/s;return l},_noanimationUnspiderfy:function(){var t,e,n=this._group,i=n._map,o=n._featureGroup,r=this.getAllChildMarkers();for(n._ignoreMove=!0,this.setOpacity(1),e=r.length-1;e>=0;e--)t=r[e],o.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(i.removeLayer(t._spiderLeg),delete t._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:r}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var n,i,o,r,a=this._group,s=a._map,l=a._featureGroup,u=this._group.options.spiderLegPolylineOptions;for(a._ignoreMove=!0,n=0;n<t.length;n++)r=s.layerPointToLatLng(e[n]),i=t[n],o=new L.Polyline([this._latlng,r],u),s.addLayer(o),i._spiderLeg=o,i._preSpiderfyLatlng=i._latlng,i.setLatLng(r),i.setZIndexOffset&&i.setZIndexOffset(1e6),l.addLayer(i);this.setOpacity(.3),a._ignoreMove=!1,a.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var n,o,r,a,s,l,u=this,c=this._group,d=c._map,h=c._featureGroup,f=this._latlng,p=d.latLngToLayerPoint(f),g=L.Path.SVG,m=L.extend({},this._group.options.spiderLegPolylineOptions),v=m.opacity;for(v===i&&(v=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),g?(m.opacity=0,m.className=(m.className||"")+" leaflet-cluster-spider-leg"):m.opacity=v,c._ignoreMove=!0,n=0;n<t.length;n++)o=t[n],l=d.layerPointToLatLng(e[n]),r=new L.Polyline([f,l],m),d.addLayer(r),o._spiderLeg=r,g&&(s=(a=r._path).getTotalLength()+.1,a.style.strokeDasharray=s,a.style.strokeDashoffset=s),o.setZIndexOffset&&o.setZIndexOffset(1e6),o.clusterHide&&o.clusterHide(),h.addLayer(o),o._setPos&&o._setPos(p);for(c._forceLayout(),c._animationStart(),n=t.length-1;n>=0;n--)l=d.layerPointToLatLng(e[n]),(o=t[n])._preSpiderfyLatlng=o._latlng,o.setLatLng(l),o.clusterShow&&o.clusterShow(),g&&((a=(r=o._spiderLeg)._path).style.strokeDashoffset=0,r.setStyle({opacity:v}));this.setOpacity(.3),c._ignoreMove=!1,setTimeout(function(){c._animationEnd(),c.fire("spiderfied",{cluster:u,markers:t})},200)},_animationUnspiderfy:function(t){var e,n,i,o,r,a,s=this,l=this._group,u=l._map,c=l._featureGroup,d=t?u._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):u.latLngToLayerPoint(this._latlng),h=this.getAllChildMarkers(),f=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),n=h.length-1;n>=0;n--)(e=h[n])._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,a=!0,e._setPos&&(e._setPos(d),a=!1),e.clusterHide&&(e.clusterHide(),a=!1),a&&c.removeLayer(e),f&&(r=(o=(i=e._spiderLeg)._path).getTotalLength()+.1,o.style.strokeDashoffset=r,i.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout(function(){var t=0;for(n=h.length-1;n>=0;n--)(e=h[n])._spiderLeg&&t++;for(n=h.length-1;n>=0;n--)(e=h[n])._spiderLeg&&(e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),t>1&&c.removeLayer(e),u.removeLayer(e._spiderLeg),delete e._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:s,markers:h})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,n;for(e in t)for(n=t[e].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,n;for(e in t)n=t[e],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(t,e){var n=this.options.icon;return L.setOptions(n,t),this.setIcon(n),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}})},function(t,e){var n,i;n=window,i=document,L.drawVersion="0.4.9",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers.",editDisabled:"No layers to edit.",remove:"Delete layers.",removeDisabled:"No layers to delete."}},handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire(L.Draw.Event.CREATED,{layer:t,layerType:this.type})},_cancelDrawing:function(t){this._map.fire("draw:canceled",{layerType:this.type}),27===t.keyCode&&this.disable()}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3},initialize:function(t,e){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,n=e.getLatLngs(),i=n.splice(-1,1)[0];this._poly.setLatLngs(n),this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(i,!1)}},addVertex:function(t){return this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?void this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),void this._vertexChanged(t,!0))},completeShape:function(){this._markers.length<=1||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var t=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e=this._poly.newLatLngIntersects(t[t.length-1]);return!this.options.allowIntersection&&e||!this._shapeIsValid()?void this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),void(this.options.repeatMode&&this.enable()))},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),n=this._map.layerPointToLatLng(e);this._currentLatLng=n,this._updateTooltip(n),this._updateGuide(e),this._mouseMarker.setLatLng(n),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(t),this._clickHandled=!0,this._disableNewMarkers();var e=t.originalEvent,n=e.clientX,i=e.clientY;this._startPoint.call(this,n,i)}},_startPoint:function(t,e){this._mouseDownOrigin=L.point(t,e)},_onMouseUp:function(t){var e=t.originalEvent,n=e.clientX,i=e.clientY;this._endPoint.call(this,n,i,t),this._clickHandled=null},_endPoint:function(t,e,i){if(this._mouseDownOrigin){var o=L.point(t,e).distanceTo(this._mouseDownOrigin);this._calculateFinishDistance(i.latlng)<10&&L.Browser.touch?this._finishShape():Math.abs(o)<9*(n.devicePixelRatio||1)&&this.addVertex(i.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t){var e,n,i=t.originalEvent;!i.touches||!i.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(e=i.touches[0].clientX,n=i.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,e,n),this._endPoint.call(this,e,n,t),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(t){var e;if(this._markers.length>0){var n;if(this.type===L.Draw.Polyline.TYPE)n=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;n=this._markers[0]}var i=this._map.latLngToContainerPoint(n.getLatLng()),o=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),r=this._map.latLngToContainerPoint(o.getLatLng());e=i.distanceTo(r)}else e=1/0;return e},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers?this._markers.length:0;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var n,i,o,r=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),a=this.options.guidelineDistance,s=this.options.maxGuideLineLength,l=r>s?r-s:a;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));l<r;l+=this.options.guidelineDistance)n=l/r,i={x:Math.floor(t.x*(1-n)+n*e.x),y:Math.floor(t.y*(1-n)+n*e.y)},(o=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(o,i)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,n=this._guidesContainer.childNodes.length;e<n;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,n=this.options.showLength;return L.Browser.touch&&(n=!1),0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=n?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var n,i,o=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(n=o-(e?2:1),i=t.distanceTo(this._markers[n].getLatLng()),this._measurementRunningTotal+=i*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,n=this._markers[this._markers.length-1].getLatLng();return t=this._measurementRunningTotal+e.distanceTo(n),L.GeometryUtil.readableDistance(t,this.options.metric,this.options.feet,this.options.nautic)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?t=L.drawLocal.draw.handlers.polygon.tooltip.cont:(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area;return t?L.GeometryUtil.readableArea(t,this.options.metric):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t,e){var n;!this.options.allowIntersection&&this.options.showArea&&(n=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(n)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(i,"mouseup",this._onMouseUp,this),L.DomEvent.off(i,"touchend",this._onMouseUp,this),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(i,"mouseup",this._onMouseUp,this).on(i,"touchend",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,showArea:!0,clickable:!0},metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,n,i=L.Draw.SimpleShape.prototype._getTooltipText.call(this),o=this._shape,r=this.options.showArea;return o&&(t=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),n=r?L.GeometryUtil.readableArea(e,this.options.metric):""),{text:i.text,subtext:n}}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(t)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,n=t.latlng,i=this.options.showRadius,o=this.options.metric;if(this._tooltip.updatePosition(n),this._isDrawing){this._drawShape(n),e=this._shape.getRadius().toFixed(1);var r="";i&&(r=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,o,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:r})}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).off("click",this._onTouch,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=new L.Marker(e,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(t){this._onMouseMove(t),this._onClick()},_fireCreatedEvent:function(){var t=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_toggleMarkerHighlight:function(){var t=this._marker._icon;t&&(t.style.display="none",L.DomUtil.hasClass(t,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,4)),t.style.display="")},_offsetMarker:function(t,e){var n=parseInt(t.style.marginTop,10)-e,i=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=n+"px",t.style.marginLeft=i+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{},initialize:function(t,e){this.latlngs=[t._latlngs],t._holes&&(this.latlngs=this.latlngs.concat(t._holes)),this._poly=t,L.setOptions(this,e),this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(t){for(var e=0;e<this._verticesHandlers.length;e++)t(this._verticesHandlers[e])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(t){t.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(t){t.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(t){t.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var t=0;t<this.latlngs.length;t++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t],this.options))},_updateLatLngs:function(t){this.latlngs=[t.layer._latlngs],t.layer._holes&&(this.latlngs=this.latlngs.concat(t.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(t,e,n){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=t,n&&n.drawError&&(n.drawError=L.Util.extend({},this.options.drawError,n.drawError)),this._latlngs=e,L.setOptions(this,n)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var t=this._poly;t instanceof L.Polygon||(t.options.fill=!1,t.options.editing&&(t.options.editing.fill=!1)),t.setStyle(t.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly;t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,n,i,o,r,a=this._defaultShape();for(t=0,n=a.length;t<n;t++)(i=this._createMarker(a[t],t)).on("click",this._onMarkerClick,this),this._markers.push(i);for(t=0,e=n-1;t<n;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(o=this._markers[e],r=this._markers[t],this._createMiddleMarker(o,r),this._updatePrevNext(o,r))},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:this.options.icon});return n._origLatLng=t,n._index=e,n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(n),n},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._poly._convertLatLngs(t,!0),this._poly.redraw(),e},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(t){var e=t.target,n=this._poly;if(L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),n.options.poly){var i=n._map._editTooltip;if(!n.options.poly.allowIntersection&&n.intersects()){var o=n.options.color;n.setStyle({color:this.options.drawError.color}),0!==L.version.indexOf("0.7")&&e.dragging._draggable._onUp(t),this._onMarkerClick(t),i&&i.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){n.setStyle({color:o}),i&&i.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,n=t.target;this._defaultShape().length<e||(this._removeMarker(n),this._updatePrevNext(n._prev,n._next),n._middleLeft&&this._markerGroup.removeLayer(n._middleLeft),n._middleRight&&this._markerGroup.removeLayer(n._middleRight),n._prev&&n._next?this._createMiddleMarker(n._prev,n._next):n._prev?n._next||(n._prev._middleRight=null):n._next._middleLeft=null,this._fireEdit())},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e),i=t.target;L.extend(i._origLatLng,n),i._middleLeft&&i._middleLeft.setLatLng(this._getMiddleLatLng(i._prev,i)),i._middleRight&&i._middleRight.setLatLng(this._getMiddleLatLng(i,i._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(n){n._index>t&&(n._index+=e)})},_createMiddleMarker:function(t,e){var n,i,o,r=this._getMiddleLatLng(t,e),a=this._createMarker(r);a.setOpacity(.6),t._middleRight=e._middleLeft=a,i=function(){a.off("touchmove",i,this);var o=e._index;a._index=o,a.off("click",n,this).on("click",this._onMarkerClick,this),r.lat=a.getLatLng().lat,r.lng=a.getLatLng().lng,this._spliceLatLngs(o,0,r),this._markers.splice(o,0,a),a.setOpacity(1),this._updateIndexes(o,1),e._index++,this._updatePrevNext(t,a),this._updatePrevNext(a,e),this._poly.fire("editstart")},o=function(){a.off("dragstart",i,this),a.off("dragend",o,this),a.off("touchmove",i,this),this._createMiddleMarker(t,a),this._createMiddleMarker(a,e)},n=function(){i.call(this),o.call(this),this._fireEdit()},a.on("click",n,this).on("dragstart",i,this).on("dragend",o,this).on("touchmove",i,this),this._markerGroup.addLayer(a)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var n=this._poly._map,i=n.project(t.getLatLng()),o=n.project(e.getLatLng());return n.unproject(i._add(o)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this,this.options.poly),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(t,e){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;this._shape._map&&(this._map=this._shape._map,t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(n),this._markerGroup.addLayer(n),n},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(t){t.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,n=e.getLatLng();e===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(t){t.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(t){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t),"function"==typeof this._getCorners){var e=this._getCorners(),n=t.target,i=n._cornerIndex;n.setOpacity(0),this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)}this._shape.fire("editstart")},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e);return t.target===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),!1},_onTouchEnd:function(t){t.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,n=t.length;e<n;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),n=t.target._cornerIndex;this._oppositeCorner=e[(n+2)%4],this._toggleCornerMarkers(0,n)},_onMarkerDragEnd:function(t){var e,n=t.target;n===this._moveMarker&&(e=this._shape.getBounds().getCenter(),n.setLatLng(e)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),i=this._shape.getBounds().getCenter(),o=[],r=0,a=n.length;r<a;r++)e=[n[r].lat-i.lat,n[r].lng-i.lng],o.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(o),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var t=this._shape.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_toggleCornerMarkers:function(t){for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),n=this._map.project(t);return this._map.unproject([n.x+e,n.y-e])},_move:function(t){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e),this._shape.setLatLng(t),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t){var e=this._moveMarker.getLatLng().distanceTo(t);this._shape.setRadius(e),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart),L.DomEvent.off(this._container,"touchend",this._onTouchEnd),L.DomEvent.off(this._container,"touchmove",this._onTouchMove),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(t,e){var n={};if(void 0!==t.touches){if(!t.touches.length)return;n=t.touches[0]}else{if("touch"!==t.pointerType)return;if(n=t,!this._filterClick(t))return}var i=this._map.mouseEventToContainerPoint(n),o=this._map.mouseEventToLayerPoint(n),r=this._map.layerPointToLatLng(o);this._map.fire(e,{latlng:r,layerPoint:o,containerPoint:i,pageX:n.pageX,pageY:n.pageY,originalEvent:t})},_filterClick:function(t){var e=t.timeStamp||t.originalEvent.timeStamp,n=L.DomEvent._lastClick&&e-L.DomEvent._lastClick;return n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?(L.DomEvent.stop(t),!1):(L.DomEvent._lastClick=e,!0)},_onTouchStart:function(t){this._map._loaded&&this._touchEvent(t,"touchstart")},_onTouchEnd:function(t){this._map._loaded&&this._touchEvent(t,"touchend")},_onTouchCancel:function(t){if(this._map._loaded){var e="touchcancel";this._detectIE()&&(e="pointercancel"),this._touchEvent(t,e)}},_onTouchLeave:function(t){this._map._loaded&&this._touchEvent(t,"touchleave")},_onTouchMove:function(t){this._map._loaded&&this._touchEvent(t,"touchmove")},_detectIE:function(){var t=n.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var o=t.indexOf("Edge/");return o>0&&parseInt(t.substring(o+5,t.indexOf(".",o)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?e.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):e.concat(["touchcancel"]),L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this),L.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)L.DomEvent.on(t,e[n],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var t=n.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var o=t.indexOf("Edge/");return o>0&&parseInt(t.substring(o+5,t.indexOf(".",o)),10)}}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],n=0,i=t.length;n<i;n++)Array.isArray(t[n])?e.push(L.LatLngUtil.cloneLatLngs(t[n])):e.push(this.cloneLatLng(t[n]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,n,i=t.length,o=0,r=Math.PI/180;if(i>2){for(var a=0;a<i;a++)e=t[a],o+=((n=t[(a+1)%i]).lng-e.lng)*r*(2+Math.sin(e.lat*r)+Math.sin(n.lat*r));o=6378137*o*6378137/2}return Math.abs(o)},readableArea:function(t,e){return e?t>=1e4?(1e-4*t).toFixed(2)+" ha":t.toFixed(2)+" m&sup2;":(t/=.836127)>=3097600?(t/3097600).toFixed(2)+" mi&sup2;":t>=4840?(t/4840).toFixed(2)+" acres":Math.ceil(t)+" yd&sup2;"},readableDistance:function(t,e,n,i){var o;switch("string"==typeof e?e:n?"feet":i?"nauticalMile":e?"metric":"yards"){case"metric":o=t>1e3?(t/1e3).toFixed(2)+" km":Math.ceil(t)+" m";break;case"feet":t*=3.28083,o=Math.ceil(t)+" ft";break;case"nauticalMile":o=((t*=.53996)/1e3).toFixed(2)+" nm";break;case"yards":default:o=(t*=1.09361)>1760?(t/1760).toFixed(2)+" miles":Math.ceil(t)+" yd"}return o}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,n,i){return this._checkCounterclockwise(t,n,i)!==this._checkCounterclockwise(e,n,i)&&this._checkCounterclockwise(t,e,n)!==this._checkCounterclockwise(t,e,i)},_checkCounterclockwise:function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,n,i=this._getProjectedPoints(),o=i?i.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=o-1;t>=3;t--)if(e=i[t-1],n=i[t],this._lineSegmentsIntersectsRange(e,n,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var n=this._getProjectedPoints(),i=n?n.length:0,o=n?n[i-1]:null,r=i-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(o,t,r,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._getProjectedPoints(),n=e?e.length:0;return!e||(n+=t||0)<=3},_lineSegmentsIntersectsRange:function(t,e,n,i){var o,r,a=this._getProjectedPoints();i=i||0;for(var s=n;s>i;s--)if(o=a[s-1],r=a[s],L.LineUtil.segmentsIntersect(t,e,o,r))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var t=[],e=this._defaultShape(),n=0;n<e.length;n++)t.push(this._map.latLngToLayerPoint(e[n]));return t}}),L.Polygon.include({intersects:function(){var t,e,n,i,o=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(t=o.length,e=o[0],n=o[t-1],i=t-2,this._lineSegmentsIntersectsRange(n,e,i,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var e;L.Control.prototype.initialize.call(this,t),this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(t){var e,n=L.DomUtil.create("div","leaflet-draw"),i=!1,o="leaflet-draw-toolbar-top";for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&(e=this._toolbars[r].addToolbar(t))&&(i||(L.DomUtil.hasClass(e,o)||L.DomUtil.addClass(e.childNodes[0],o),i=!0),n.appendChild(e));return n},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var n in this._toolbars)this._toolbars[n]!==e&&this._toolbars[n].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,n=L.DomUtil.create("div","leaflet-draw-section"),i=0,o=this._toolbarClass||"",r=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;e<r.length;e++)r[e].enabled&&this._initModeHandler(r[e].handler,this._toolbarContainer,i++,o,r[e].title);if(i)return this._lastButtonIndex=--i,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),n.appendChild(this._toolbarContainer),n.appendChild(this._actionsContainer),n},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,n=this._actionButtons.length;e<n;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,n,i,o){var r=t.type;this._modes[r]={},this._modes[r].handler=t,this._modes[r].button=this._createButton({type:r,title:o,className:i+"-"+r,container:e,callback:this._modes[r].handler.enable,context:this._modes[r].handler}),this._modes[r].buttonIndex=n,this._modes[r].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container),n=L.DomUtil.create("span","sr-only",t.container);return e.href="#",e.appendChild(n),t.title&&(e.title=t.title,n.innerHTML=t.title),t.text&&(e.innerHTML=t.text,n.innerHTML=t.text),L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"touchstart",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,"click",t.callback,t.context),e},_disposeButton:function(t,e){L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"touchstart",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,"click",e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var e,n,i,o,r=this._actionsContainer,a=this.getActions(t),s=a.length;for(n=0,i=this._actionButtons.length;n<i;n++)this._disposeButton(this._actionButtons[n].button,this._actionButtons[n].callback);for(this._actionButtons=[];r.firstChild;)r.removeChild(r.firstChild);for(var l=0;l<s;l++)"enabled"in a[l]&&!a[l].enabled||(e=L.DomUtil.create("li","",r),o=this._createButton({title:a[l].title,text:a[l].text,container:e,callback:a[l].callback,context:a[l].context}),this._actionButtons.push({button:o,callback:a[l].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,n=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=n+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",this):this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),n=this._container;return this._container&&(n.style.visibility="inherit",L.DomUtil.setPosition(n,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker}]},getActions:function(t){return[{enabled:t.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t.completeShape,context:t},{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){for(var e in L.setOptions(this,t),this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t){t.edit&&(void 0===t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),t.poly&&(t.poly=L.extend({},this.options.poly,t.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(){return[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),t._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:t instanceof L.Marker&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):t instanceof L.Marker&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,n,i=t.layer||t.target||t;this._backupLayer(i),this.options.poly&&(n=L.Util.extend({},this.options.poly),i.options.poly=n),this.options.selectedPathOptions&&((e=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(e.color=i.options.color,e.fillColor=i.options.fillColor),i.options.original=L.extend({},i.options),i.options.editing=e),i instanceof L.Marker?(i.editing&&i.editing.enable(),i.dragging.enable(),i.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):i.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing&&e.editing.disable(),delete e.options.editing,delete e.options.original,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):e.editing.disable()},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_onTouchMove:function(t){var e=t.originalEvent.changedTouches[0],n=this._map.mouseEventToLayerPoint(e),i=this._map.layerPointToLatLng(n);t.target.setLatLng(i)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t),t.fire("revert-deleted",{layer:t})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},_enableLayerDelete:function(t){(t.layer||t.target||t).on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})},function(t,e){L.Map.mergeOptions({sleep:!0,sleepTime:750,wakeTime:750,sleepNote:!0,hoverToWake:!0,sleepOpacity:.7}),L.Map.Sleep=L.Handler.extend({addHooks:function(){this.sleepNote=L.DomUtil.create("p","sleep-note",this._map._container),this._sleepMap(),this._enterTimeout=null,this._exitTimeout=null;var t=this._map.getContainer().style;t.WebkitTransition+="opacity .5s",t.MozTransition+="opacity .5s";var e=this._map.options.wakeMessage||"Click "+(this._map.options.hoverToWake?"or Hover ":"")+"to Wake",n=this.sleepNote.style;this._map.options.sleepNote&&(this.sleepNote.appendChild(document.createTextNode(e)),n.pointerEvents="none",n.maxWidth="150px",n.transitionDuration=".2s",n.zIndex=5e3,n.opacity=".6",n.margin="auto",n.textAlign="center",n.borderRadius="4px",n.top="50%",n.position="relative",n.padding="5px",n.border="solid 2px black",n.background="white")},removeHooks:function(){this._map.scrollWheelZoom.enabled()||this._map.scrollWheelZoom.enable(),L.DomUtil.setOpacity(this._map._container,1),L.DomUtil.setOpacity(this.sleepNote,0),this._removeSleepingListeners(),this._removeAwakeListeners()},_wakeMap:function(){this._stopWaiting(),this._map.scrollWheelZoom.enable(),L.DomUtil.setOpacity(this._map._container,1),this.sleepNote.style.opacity=0,this._addAwakeListeners()},_sleepMap:function(){this._stopWaiting(),this._map.scrollWheelZoom.disable(),L.DomUtil.setOpacity(this._map._container,this._map.options.sleepOpacity),this.sleepNote.style.opacity=.4,this._addSleepingListeners()},_wakePending:function(){if(this._map.once("mousedown",this._wakeMap,this),this._map.options.hoverToWake){var t=this;this._map.once("mouseout",this._sleepMap,this),t._enterTimeout=setTimeout(function(){t._map.off("mouseout",t._sleepMap,t),t._wakeMap()},t._map.options.wakeTime)}},_sleepPending:function(){var t=this;t._map.once("mouseover",t._wakeMap,t),t._exitTimeout=setTimeout(function(){t._map.off("mouseover",t._wakeMap,t),t._sleepMap()},t._map.options.sleepTime)},_addSleepingListeners:function(){this._map.once("mouseover",this._wakePending,this)},_addAwakeListeners:function(){this._map.once("mouseout",this._sleepPending,this)},_removeSleepingListeners:function(){this._map.options.hoverToWake&&this._map.off("mouseover",this._wakePending,this),this._map.off("mousedown",this._wakeMap,this)},_removeAwakeListeners:function(){this._map.off("mouseout",this._sleepPending,this)},_stopWaiting:function(){this._removeSleepingListeners(),this._removeAwakeListeners();this._enterTimeout&&clearTimeout(this._enterTimeout),this._exitTimeout&&clearTimeout(this._exitTimeout),this._enterTimeout=null,this._exitTimeout=null}}),L.Map.addInitHook("addHandler","sleep",L.Map.Sleep)},function(t,e,n){var i;t.exports=function t(e,n,o){function r(s,l){if(!n[s]){if(!e[s]){var u="function"==typeof i&&i;if(!l&&u)return i(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return r(n||t)},d,d.exports,t,e,n,o)}return n[s].exports}for(var a="function"==typeof i&&i,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e,n){"use strict";var i=String.prototype.replace,o=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(t){return i.call(t,o,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},{}],2:[function(t,e,n){"use strict";var i=t("./stringify"),o=t("./parse"),r=t("./formats");e.exports={formats:r,parse:o,stringify:i}},{"./formats":1,"./parse":3,"./stringify":4}],3:[function(t,e,n){"use strict";var i=t("./utils"),o=Object.prototype.hasOwnProperty,r={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:i.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(t,e,n){if(t){var i=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,r=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(i),s=a?i.slice(0,a.index):i,l=[];if(s){if(!n.plainObjects&&o.call(Object.prototype,s)&&!n.allowPrototypes)return;l.push(s)}for(var u=0;null!==(a=r.exec(i))&&u<n.depth;){if(u+=1,!n.plainObjects&&o.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(a[1])}return a&&l.push("["+i.slice(a.index)+"]"),function(t,e,n){for(var i=e,o=t.length-1;o>=0;--o){var r,a=t[o];if("[]"===a)r=(r=[]).concat(i);else{r=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,l=parseInt(s,10);!isNaN(l)&&a!==s&&String(l)===s&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(r=[])[l]=i:r[s]=i}i=r}return i}(l,e,n)}};e.exports=function(t,e){var n=e?i.assign({},e):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||i.isRegExp(n.delimiter)?n.delimiter:r.delimiter,n.depth="number"==typeof n.depth?n.depth:r.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:r.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:r.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:r.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:r.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:r.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:r.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:r.strictNullHandling,""===t||null===t||void 0===t)return n.plainObjects?Object.create(null):{};for(var s="string"==typeof t?function(t,e){for(var n={},i=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=e.parameterLimit===1/0?void 0:e.parameterLimit,s=i.split(e.delimiter,a),l=0;l<s.length;++l){var u,c,d=s[l],h=d.indexOf("]="),f=-1===h?d.indexOf("="):h+1;-1===f?(u=e.decoder(d,r.decoder),c=e.strictNullHandling?null:""):(u=e.decoder(d.slice(0,f),r.decoder),c=e.decoder(d.slice(f+1),r.decoder)),o.call(n,u)?n[u]=[].concat(n[u]).concat(c):n[u]=c}return n}(t,n):t,l=n.plainObjects?Object.create(null):{},u=Object.keys(s),c=0;c<u.length;++c){var d=u[c],h=a(d,s[d],n);l=i.merge(l,h,n)}return i.compact(l)}},{"./utils":5}],4:[function(t,e,n){"use strict";var i=t("./utils"),o=t("./formats"),r={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},a=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,serializeDate:function(t){return a.call(t)},skipNulls:!1,strictNullHandling:!1},l=function t(e,n,o,r,a,l,u,c,d,h,f,p){var g=e;if("function"==typeof u)g=u(n,g);else if(g instanceof Date)g=h(g);else if(null===g){if(r)return l&&!p?l(n,s.encoder):n;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||i.isBuffer(g)){if(l){var m=p?n:l(n,s.encoder);return[f(m)+"="+f(l(g,s.encoder))]}return[f(n)+"="+f(String(g))]}var v,_=[];if(void 0===g)return _;if(Array.isArray(u))v=u;else{var y=Object.keys(g);v=c?y.sort(c):y}for(var b=0;b<v.length;++b){var x=v[b];a&&null===g[x]||(_=Array.isArray(g)?_.concat(t(g[x],o(n,x),o,r,a,l,u,c,d,h,f,p)):_.concat(t(g[x],n+(d?"."+x:"["+x+"]"),o,r,a,l,u,c,d,h,f,p)))}return _};e.exports=function(t,e){var n=t,a=e?i.assign({},e):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw new TypeError("Encoder has to be a function.");var u=void 0===a.delimiter?s.delimiter:a.delimiter,c="boolean"==typeof a.strictNullHandling?a.strictNullHandling:s.strictNullHandling,d="boolean"==typeof a.skipNulls?a.skipNulls:s.skipNulls,h="boolean"==typeof a.encode?a.encode:s.encode,f="function"==typeof a.encoder?a.encoder:s.encoder,p="function"==typeof a.sort?a.sort:null,g=void 0!==a.allowDots&&a.allowDots,m="function"==typeof a.serializeDate?a.serializeDate:s.serializeDate,v="boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:s.encodeValuesOnly;if(void 0===a.format)a.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,a.format))throw new TypeError("Unknown format option provided.");var _,y,b=o.formatters[a.format];"function"==typeof a.filter?(y=a.filter,n=y("",n)):Array.isArray(a.filter)&&(y=a.filter,_=y);var x,w=[];if("object"!=typeof n||null===n)return"";x=a.arrayFormat in r?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var S=r[x];_||(_=Object.keys(n)),p&&_.sort(p);for(var T=0;T<_.length;++T){var C=_[T];d&&null===n[C]||(w=w.concat(l(n[C],C,S,c,d,h?f:null,y,p,g,m,b,v)))}var L=w.join(u),A=!0===a.addQueryPrefix?"?":"";return L.length>0?A+L:""}},{"./formats":1,"./utils":5}],5:[function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();n.arrayToObject=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},i=0;i<t.length;++i)void 0!==t[i]&&(n[i]=t[i]);return n},n.merge=function(t,e,o){if(!e)return t;if("object"!=typeof e){if(Array.isArray(t))t.push(e);else{if("object"!=typeof t)return[t,e];(o.plainObjects||o.allowPrototypes||!i.call(Object.prototype,e))&&(t[e]=!0)}return t}if("object"!=typeof t)return[t].concat(e);var r=t;return Array.isArray(t)&&!Array.isArray(e)&&(r=n.arrayToObject(t,o)),Array.isArray(t)&&Array.isArray(e)?(e.forEach(function(e,r){i.call(t,r)?t[r]&&"object"==typeof t[r]?t[r]=n.merge(t[r],e,o):t.push(e):t[r]=e}),t):Object.keys(e).reduce(function(t,r){var a=e[r];return i.call(t,r)?t[r]=n.merge(t[r],a,o):t[r]=a,t},r)},n.assign=function(t,e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},t)},n.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},n.encode=function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",i=0;i<e.length;++i){var r=e.charCodeAt(i);45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122?n+=e.charAt(i):r<128?n+=o[r]:r<2048?n+=o[192|r>>6]+o[128|63&r]:r<55296||r>=57344?n+=o[224|r>>12]+o[128|r>>6&63]+o[128|63&r]:(i+=1,r=65536+((1023&r)<<10|1023&e.charCodeAt(i)),n+=o[240|r>>18]+o[128|r>>12&63]+o[128|r>>6&63]+o[128|63&r])}return n},n.compact=function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],i=0;i<e.length;++i)for(var o=e[i],r=o.obj[o.prop],a=Object.keys(r),s=0;s<a.length;++s){var l=a[s],u=r[l];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(e.push({obj:r,prop:l}),n.push(u))}return function(t){for(var e;t.length;){var n=t.pop();if(e=n.obj[n.prop],Array.isArray(e)){for(var i=[],o=0;o<e.length;++o)void 0!==e[o]&&i.push(e[o]);n.obj[n.prop]=i}}return e}(e)},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n.isBuffer=function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},{}]},{},[2])(2)},function(t,e,n){(function(e){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function i(t){var e=new a(t),n=r(a.prototype.request,e);return o.extend(n,a.prototype,e),o.extend(n,e),n}var o=n(2),r=n(3),a=n(5),s=n(6),l=i(s);l.Axios=a,l.create=function(t){return i(o.merge(s,t))},l.Cancel=n(23),l.CancelToken=n(24),l.isCancel=n(20),l.all=function(t){return Promise.all(t)},l.spread=n(25),t.exports=l,t.exports.default=l},function(t,e,n){"use strict";function i(t){return"[object Array]"===u.call(t)}function o(t){return null!==t&&"object"==typeof t}function r(t){return"[object Function]"===u.call(t)}function a(t,e){if(null!==t&&void 0!==t)if("object"==typeof t||i(t)||(t=[t]),i(t))for(var n=0,o=t.length;n<o;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}var s=n(3),l=n(4),u=Object.prototype.toString;t.exports={isArray:i,isArrayBuffer:function(t){return"[object ArrayBuffer]"===u.call(t)},isBuffer:l,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:o,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===u.call(t)},isFile:function(t){return"[object File]"===u.call(t)},isBlob:function(t){return"[object Blob]"===u.call(t)},isFunction:r,isStream:function(t){return o(t)&&r(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:a,merge:function t(){function e(e,i){"object"==typeof n[i]&&"object"==typeof e?n[i]=t(n[i],e):n[i]=e}for(var n={},i=0,o=arguments.length;i<o;i++)a(arguments[i],e);return n},extend:function(t,e,n){return a(e,function(e,i){t[i]=n&&"function"==typeof e?s(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
	 * Determine if an object is a Buffer
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){"use strict";function i(t){this.defaults=t,this.interceptors={request:new a,response:new a}}var o=n(6),r=n(2),a=n(17),s=n(18);i.prototype.request=function(t){"string"==typeof t&&(t=r.merge({url:arguments[0]},arguments[1])),(t=r.merge(o,this.defaults,{method:"get"},t)).method=t.method.toLowerCase();var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},r.forEach(["delete","get","head","options"],function(t){i.prototype[t]=function(e,n){return this.request(r.merge(n||{},{method:t,url:e}))}}),r.forEach(["post","put","patch"],function(t){i.prototype[t]=function(e,n,i){return this.request(r.merge(i||{},{method:t,url:e,data:n}))}}),t.exports=i},function(t,n,i){"use strict";function o(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var r=i(2),a=i(7),s={"Content-Type":"application/x-www-form-urlencoded"},l={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=i(8):void 0!==e&&(t=i(8)),t}(),transformRequest:[function(t,e){return a(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(t){l.headers[t]={}}),r.forEach(["post","put","patch"],function(t){l.headers[t]=r.merge(s)}),t.exports=l},function(t,e,n){"use strict";var i=n(2);t.exports=function(t,e){i.forEach(t,function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])})}},function(t,e,n){"use strict";var i=n(2),o=n(9),r=n(12),a=n(13),s=n(14),l=n(10),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(15);t.exports=function(t){return new Promise(function(e,c){var d=t.data,h=t.headers;i.isFormData(d)&&delete h["Content-Type"];var f=new XMLHttpRequest,p="onreadystatechange",g=!1;if(window.XMLHttpRequest||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in f||s(t.url)||(f=new window.XDomainRequest,p="onload",g=!0,f.onprogress=function(){},f.ontimeout=function(){}),t.auth){var m=t.auth.username||"",v=t.auth.password||"";h.Authorization="Basic "+u(m+":"+v)}if(f.open(t.method.toUpperCase(),r(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f[p]=function(){if(f&&(4===f.readyState||g)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,i=t.responseType&&"text"!==t.responseType?f.response:f.responseText,r={data:i,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:n,config:t,request:f};o(e,c,r),f=null}},f.onerror=function(){c(l("Network Error",t,null,f)),f=null},f.ontimeout=function(){c(l("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},i.isStandardBrowserEnv()){var _=n(16),y=(t.withCredentials||s(t.url))&&t.xsrfCookieName?_.read(t.xsrfCookieName):void 0;y&&(h[t.xsrfHeaderName]=y)}if("setRequestHeader"in f&&i.forEach(h,function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete h[e]:f.setRequestHeader(e,t)}),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),c(t),f=null)}),void 0===d&&(d=null),f.send(d)})}},function(t,e,n){"use strict";var i=n(10);t.exports=function(t,e,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";var i=n(11);t.exports=function(t,e,n,o,r){var a=new Error(t);return i(a,e,n,o,r)}},function(t,e){"use strict";t.exports=function(t,e,n,i,o){return t.config=e,n&&(t.code=n),t.request=i,t.response=o,t}},function(t,e,n){"use strict";function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(2);t.exports=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(o.isURLSearchParams(e))r=e.toString();else{var a=[];o.forEach(e,function(t,e){null!==t&&void 0!==t&&(o.isArray(t)&&(e+="[]"),o.isArray(t)||(t=[t]),o.forEach(t,function(t){o.isDate(t)?t=t.toISOString():o.isObject(t)&&(t=JSON.stringify(t)),a.push(i(e)+"="+i(t))}))}),r=a.join("&")}return r&&(t+=(-1===t.indexOf("?")?"?":"&")+r),t}},function(t,e,n){"use strict";var i=n(2),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,r,a={};return t?(i.forEach(t.split("\n"),function(t){if(r=t.indexOf(":"),e=i.trim(t.substr(0,r)).toLowerCase(),n=i.trim(t.substr(r+1)),e){if(a[e]&&o.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}}),a):a}},function(t,e,n){"use strict";var i=n(2);t.exports=i.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(o.setAttribute("href",e),e=o.href),o.setAttribute("href",e),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return e=t(window.location.href),function(n){var o=i.isString(n)?t(n):n;return o.protocol===e.protocol&&o.host===e.host}}():function(){return!0}},function(t,e){"use strict";function n(){this.message="String contains an invalid character"}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,o,r=String(t),a="",s=0,l=i;r.charAt(0|s)||(l="=",s%1);a+=l.charAt(63&e>>8-s%1*8)){if((o=r.charCodeAt(s+=.75))>255)throw new n;e=e<<8|o}return a}},function(t,e,n){"use strict";var i=n(2);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,n,o,r,a){var s=[];s.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),i.isString(o)&&s.push("path="+o),i.isString(r)&&s.push("domain="+r),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";function i(){this.handlers=[]}var o=n(2);i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){o.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},function(t,e,n){"use strict";function i(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var o=n(2),r=n(19),a=n(20),s=n(6),l=n(21),u=n(22);t.exports=function(t){i(t),t.baseURL&&!l(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]});var e=t.adapter||s.adapter;return e(t).then(function(e){return i(t),e.data=r(e.data,e.headers,t.transformResponse),e},function(e){return a(e)||(i(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var i=n(2);t.exports=function(t,e,n){return i.forEach(n,function(n){t=n(t,e)}),t}},function(t,e){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,n){"use strict";function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new o(t),e(n.reason))})}var o=n(23);i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t,e=new i(function(e){t=e});return{token:e,cancel:t}},t.exports=i},function(t,e){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}}])}).call(this,n(6))},function(t,e){!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i=n(31),o=n(12),r={defaults:n(26),extend:n(27)};i.choropleth=t.exports=function(t,e){r.defaults(e,{valueProperty:"value",scale:["white","red"],steps:5,mode:"q"});var n=e.style,a=t.features.map(function(t){return t.properties[e.valueProperty]}),s=o.limits(a,e.mode,e.steps-1),l=e.colors||o.scale(e.scale).colors(e.steps);return i.geoJson(t,r.extend(e,{style:function(t){var i={};if(!isNaN(t.properties[e.valueProperty]))for(var o=0;o<s.length;o++)if(t.properties[e.valueProperty]<=s[o]){i.fillColor=l[o];break}switch(typeof n){case"function":return r.extend(n(),i);case"object":return r.extend(n,i);default:return i}},limits:s,colors:l}))}},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&n>=t}},function(t,e){t.exports=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}},function(t,e,n){var i=n(21),o=n(1);t.exports=function(t){return null!=t&&o(i(t))}},function(t,e){var n=/^\d+$/,i=9007199254740991;t.exports=function(t,e){return t="number"==typeof t||n.test(t)?+t:-1,e=null==e?i:e,t>-1&&t%1==0&&e>t}},function(t,e){t.exports=function(t){return!!t&&"object"==typeof t}},function(t,e){var n="Expected a function",i=Math.max;t.exports=function(t,e){if("function"!=typeof t)throw new TypeError(n);return e=i(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,o=-1,r=i(n.length-e,0),a=Array(r);++o<r;)a[o]=n[e+o];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var s=Array(e+1);for(o=-1;++o<e;)s[o]=n[o];return s[e]=a,t.apply(this,s)}}},function(t,e,n){var i=n(25);t.exports=function(t,e){var n=null==t?void 0:t[e];return i(n)?n:void 0}},function(t,e,n){var i=n(3),o=n(5),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable;t.exports=function(t){return o(t)&&i(t)&&a.call(t,"callee")&&!s.call(t,"callee")}},function(t,e,n){var i=n(7),o=n(1),r=n(5),a=Object.prototype.toString,s=i(Array,"isArray")||function(t){return r(t)&&o(t.length)&&"[object Array]"==a.call(t)};t.exports=s},function(t,e,n){var i=n(14),o=n(15),r=n(19)(function(t,e,n){return n?i(t,e,n):o(t,e)});t.exports=r},function(t,e,n){var i=n(7),o=n(3),r=n(2),a=n(23),s=i(Object,"keys"),l=s?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?a(t):r(t)?s(t):[]}:a;t.exports=l},function(t,e,n){var i;(function(t){
/**
	 * @license
	 *
	 * chroma.js - JavaScript library for color conversions
	 * 
	 * Copyright (c) 2011-2015, Gregor Aisch
	 * All rights reserved.
	 * 
	 * Redistribution and use in source and binary forms, with or without
	 * modification, are permitted provided that the following conditions are met:
	 * 
	 * 1. Redistributions of source code must retain the above copyright notice, this
	 *    list of conditions and the following disclaimer.
	 * 
	 * 2. Redistributions in binary form must reproduce the above copyright notice,
	 *    this list of conditions and the following disclaimer in the documentation
	 *    and/or other materials provided with the distribution.
	 * 
	 * 3. The name Gregor Aisch may not be used to endorse or promote products
	 *    derived from this software without specific prior written permission.
	 * 
	 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
	 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
	 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
	 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
	 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
	 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
	 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
	 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
	 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
	 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	 *
	 */
(function(){var n,o,r,a,s,l,u,c,d,h,f,p,g,m,v,_,y,b,x,w,S,T,C,L,A,D,k,P,E,M,I,O,R,N,F,$,j,B,U,z,G,H,V,q,W,X,Z,Y,K,J,Q,tt,et,nt,it,ot,rt,at,st,lt,ut,ct,dt,ht,ft,pt,gt,mt,vt,_t,yt,bt,xt,wt,St,Tt=[].slice;yt=function(){var t,e,n,i,o;for(t={},i=0,e=(o="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;e>i;i++)n=o[i],t["[object "+n+"]"]=n.toLowerCase();return function(e){var n;return n=Object.prototype.toString.call(e),t[n]||"object"}}(),V=function(t,e,n){return null==e&&(e=0),null==n&&(n=1),e>t&&(t=e),t>n&&(t=n),t},bt=function(t){return t.length>=3?[].slice.call(t):t[0]},x=function(t){var e;for(e in t)3>e?(t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t},a=Math.PI,pt=Math.round,S=Math.cos,D=Math.floor,Q=Math.pow,q=Math.log,mt=Math.sin,vt=Math.sqrt,g=Math.atan2,Z=Math.max,p=Math.abs,u=2*a,s=a/3,o=a/180,l=180/a,b=function(){return arguments[0]instanceof n?arguments[0]:function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(n,arguments,function(){})},f=[],void 0!==t&&null!==t&&null!=t.exports&&(t.exports=b),void 0!==(i=function(){return b}.apply(e,[]))&&(t.exports=i),b.version="1.1.1",h={},c=[],d=!1,n=function(){function t(){var t,e,n,i,o,r,a,s,l;for(r=this,e=[],s=0,i=arguments.length;i>s;s++)null!=(t=arguments[s])&&e.push(t);if(a=e[e.length-1],null!=h[a])r._rgb=x(h[a](bt(e.slice(0,-1))));else{for(d||(c=c.sort(function(t,e){return e.p-t.p}),d=!0),l=0,o=c.length;o>l&&!(a=(n=c[l]).test.apply(n,e));l++);a&&(r._rgb=x(h[a].apply(h,e)))}null==r._rgb&&console.warn("unknown format: "+e),null==r._rgb&&(r._rgb=[0,0,0]),3===r._rgb.length&&r._rgb.push(1)}return t.prototype.alpha=function(t){return arguments.length?(this._rgb[3]=t,this):this._rgb[3]},t.prototype.toString=function(){return this.name()},t}(),b._input=h,b.brewer={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},b.colors=xt={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6",rebeccapurple:"#663399"},B=function(){var t,e,n,i,o,a,s,l,u;return o=(e=bt(arguments))[0],t=e[1],n=e[2],l=(o+16)/116,s=isNaN(t)?l:l+t/500,u=isNaN(n)?l:l-n/200,l=r.Yn*U(l),s=r.Xn*U(s),u=r.Zn*U(u),a=St(3.2404542*s-1.5371385*l-.4985314*u),i=St(-.969266*s+1.8760108*l+.041556*u),n=St(.0556434*s-.2040259*l+1.0572252*u),[a=V(a,0,255),i=V(i,0,255),n=V(n,0,255),e.length>3?e[3]:1]},St=function(t){return pt(255*(.00304>=t?12.92*t:1.055*Q(t,1/2.4)-.055))},U=function(t){return t>r.t1?t*t*t:r.t2*(t-r.t0)},r={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},at=function(){var t,e,n,i,o,r,a;return n=(i=bt(arguments))[0],e=i[1],t=i[2],r=(o=dt(n,e,t))[0],[116*(a=o[1])-16,500*(r-a),200*(a-o[2])]},ht=function(t){return(t/=255)<=.04045?t/12.92:Q((t+.055)/1.055,2.4)},wt=function(t){return t>r.t3?Q(t,1/3):t/r.t2+r.t0},dt=function(){var t,e,n,i;return n=(i=bt(arguments))[0],e=i[1],t=i[2],n=ht(n),e=ht(e),t=ht(t),[wt((.4124564*n+.3575761*e+.1804375*t)/r.Xn),wt((.2126729*n+.7151522*e+.072175*t)/r.Yn),wt((.0193339*n+.119192*e+.9503041*t)/r.Zn)]},b.lab=function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(n,Tt.call(arguments).concat(["lab"]),function(){})},h.lab=B,n.prototype.lab=function(){return at(this._rgb)},m=function(t){var e,n,i,o,r,a,s,l,u,c,d;return 2===(t=function(){var e,n,i;for(i=[],n=0,e=t.length;e>n;n++)o=t[n],i.push(b(o));return i}()).length?(u=function(){var e,n,i;for(i=[],n=0,e=t.length;e>n;n++)o=t[n],i.push(o.lab());return i}(),r=u[0],a=u[1],e=function(t){var e,n;return n=function(){var n,i;for(i=[],e=n=0;2>=n;e=++n)i.push(r[e]+t*(a[e]-r[e]));return i}(),b.lab.apply(b,n)}):3===t.length?(c=function(){var e,n,i;for(i=[],n=0,e=t.length;e>n;n++)o=t[n],i.push(o.lab());return i}(),r=c[0],a=c[1],s=c[2],e=function(t){var e,n;return n=function(){var n,i;for(i=[],e=n=0;2>=n;e=++n)i.push((1-t)*(1-t)*r[e]+2*(1-t)*t*a[e]+t*t*s[e]);return i}(),b.lab.apply(b,n)}):4===t.length?(d=function(){var e,n,i;for(i=[],n=0,e=t.length;e>n;n++)o=t[n],i.push(o.lab());return i}(),r=d[0],a=d[1],s=d[2],l=d[3],e=function(t){var e,n;return n=function(){var n,i;for(i=[],e=n=0;2>=n;e=++n)i.push((1-t)*(1-t)*(1-t)*r[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*s[e]+t*t*t*l[e]);return i}(),b.lab.apply(b,n)}):5===t.length&&(n=m(t.slice(0,3)),i=m(t.slice(2,5)),e=function(t){return.5>t?n(2*t):i(2*(t-.5))}),e},b.bezier=function(t){var e;return(e=m(t)).scale=function(){return b.scale(e)},e},b.cubehelix=function(t,e,n,i,o){var r,a,s;return null==t&&(t=300),null==e&&(e=-1.5),null==n&&(n=1),null==i&&(i=1),null==o&&(o=[0,1]),a=o[1]-o[0],r=0,(s=function(s){var l,c,d,h,f;return l=u*((t+120)/360+e*s),h=Q(o[0]+a*s,i),c=(0!==r?n[0]+s*r:n)*h*(1-h)/2,d=S(l),f=mt(l),b(x([255*(h+c*(-.14861*d+1.78277*f)),255*(h+c*(-.29227*d-.90649*f)),255*(h+c*(1.97294*d))]))}).start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?i:(i=t,s)},s.hue=function(t){return null==t?n:("array"===yt(n=t)?0===(r=n[1]-n[0])&&(n=n[1]):r=0,s)},s.lightness=function(t){return null==t?o:("array"===yt(o=t)?0===(a=o[1]-o[0])&&(o=o[1]):a=0,s)},s.scale=function(){return b.scale(s)},s.hue(n),s},b.random=function(){var t,e,i;for(e="0123456789abcdef",t="#",i=0;6>i;++i)t+=e.charAt(D(16*Math.random()));return new n(t)},h.rgb=function(){var t,e,n,i;for(t in n=[],e=bt(arguments))i=e[t],n.push(i);return n},b.rgb=function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(n,Tt.call(arguments).concat(["rgb"]),function(){})},n.prototype.rgb=function(){return this._rgb.slice(0,3)},n.prototype.rgba=function(){return this._rgb},c.push({p:15,test:function(t){var e;return e=bt(arguments),"array"===yt(e)&&3===e.length?"rgb":4===e.length&&"number"===yt(e[3])&&e[3]>=0&&e[3]<=1?"rgb":void 0}}),k=function(t){var e,n;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(4===t.length||7===t.length)&&(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[(n=parseInt(t,16))>>16,n>>8&255,255&n,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),[(n=parseInt(t,16))>>24&255,n>>16&255,n>>8&255,pt((255&n)/255*100)/100];if(null!=h.css&&(e=h.css(t)))return e;throw"unknown color: "+t},nt=function(t,e){var n,i,o,r,a,s;return null==e&&(e="rgb"),a=t[0],o=t[1],i=t[2],n=t[3],s=(s="000000"+(a<<16|o<<8|i).toString(16)).substr(s.length-6),r=(r="0"+pt(255*n).toString(16)).substr(r.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return s+r;case"argb":return r+s;default:return s}}()},h.hex=function(t){return k(t)},b.hex=function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(n,Tt.call(arguments).concat(["hex"]),function(){})},n.prototype.hex=function(t){return null==t&&(t="rgb"),nt(this._rgb,t)},c.push({p:10,test:function(t){return 1===arguments.length&&"string"===yt(t)?"hex":void 0}}),M=function(){var t,e,n,i,o,r,a,s,l,u,c,d,h,f;if(o=(t=bt(arguments))[0],c=t[1],a=t[2],0===c)l=i=e=255*a;else{for(f=[0,0,0],n=[0,0,0],d=2*a-(h=.5>a?a*(1+c):a+c-a*c),o/=360,f[0]=o+1/3,f[1]=o,f[2]=o-1/3,r=s=0;2>=s;r=++s)f[r]<0&&(f[r]+=1),f[r]>1&&(f[r]-=1),6*f[r]<1?n[r]=d+6*(h-d)*f[r]:2*f[r]<1?n[r]=h:3*f[r]<2?n[r]=d+(h-d)*(2/3-f[r])*6:n[r]=d;l=(u=[pt(255*n[0]),pt(255*n[1]),pt(255*n[2])])[0],i=u[1],e=u[2]}return t.length>3?[l,i,e,t[3]]:[l,i,e]},ot=function(t,e,n){var i,o,r,a,s;return void 0!==t&&t.length>=3&&(t=(a=t)[0],e=a[1],n=a[2]),t/=255,e/=255,n/=255,r=Math.min(t,e,n),o=((Z=Math.max(t,e,n))+r)/2,Z===r?(s=0,i=Number.NaN):s=.5>o?(Z-r)/(Z+r):(Z-r)/(2-Z-r),t===Z?i=(e-n)/(Z-r):e===Z?i=2+(n-t)/(Z-r):n===Z&&(i=4+(t-e)/(Z-r)),0>(i*=60)&&(i+=360),[i,s,o]},b.hsl=function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(n,Tt.call(arguments).concat(["hsl"]),function(){})},h.hsl=M,n.prototype.hsl=function(){return ot(this._rgb)},I=function(){var t,e,n,i,o,r,a,s,l,u,c,d,h,f,p,g,m,v;if(o=(t=bt(arguments))[0],g=t[1],v=t[2],v*=255,0===g)l=i=e=v;else switch(360===o&&(o=0),o>360&&(o-=360),0>o&&(o+=360),o/=60,r=D(o),n=o-r,a=v*(1-g),s=v*(1-g*n),m=v*(1-g*(1-n)),r){case 0:l=(u=[v,m,a])[0],i=u[1],e=u[2];break;case 1:l=(c=[s,v,a])[0],i=c[1],e=c[2];break;case 2:l=(d=[a,v,m])[0],i=d[1],e=d[2];break;case 3:l=(h=[a,s,v])[0],i=h[1],e=h[2];break;case 4:l=(f=[m,a,v])[0],i=f[1],e=f[2];break;case 5:l=(p=[v,a,s])[0],i=p[1],e=p[2]}return[l=pt(l),i=pt(i),e=pt(e),t.length>3?t[3]:1]},rt=function(){var t,e,n,i,o,r,a,s,l;return r=(a=bt(arguments))[0],n=a[1],t=a[2],o=Math.min(r,n,t),e=(Z=Math.max(r,n,t))-o,l=Z/255,0===Z?(i=Number.NaN,s=0):(s=e/Z,r===Z&&(i=(n-t)/e),n===Z&&(i=2+(t-r)/e),t===Z&&(i=4+(r-n)/e),0>(i*=60)&&(i+=360)),[i,s,l]},b.hsv=function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(n,Tt.call(arguments).concat(["hsv"]),function(){})},h.hsv=I,n.prototype.hsv=function(){return rt(this._rgb)},K=function(t){return"number"===yt(t)&&t>=0&&16777215>=t?[t>>16,t>>8&255,255&t,1]:(console.warn("unknown num color: "+t),[0,0,0,1])},ut=function(){var t;return((t=bt(arguments))[0]<<16)+(t[1]<<8)+t[2]},b.num=function(t){return new n(t,"num")},n.prototype.num=function(t){return null==t&&(t="rgb"),ut(this._rgb,t)},h.num=K,c.push({p:10,test:function(t){return 1===arguments.length&&"number"===yt(t)&&t>=0&&16777215>=t?"num":void 0}}),T=function(t){var e,n,i,o,r,a,s,l;if(t=t.toLowerCase(),null!=b.colors&&b.colors[t])return k(b.colors[t]);if(r=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=r.slice(1,4),o=a=0;2>=a;o=++a)s[o]=+s[o];s[3]=1}else if(r=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=r.slice(1,5),o=l=0;3>=l;o=++l)s[o]=+s[o];else if(r=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=r.slice(1,4),o=e=0;2>=e;o=++e)s[o]=pt(2.55*s[o]);s[3]=1}else if(r=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=r.slice(1,5),o=n=0;2>=n;o=++n)s[o]=pt(2.55*s[o]);s[3]=+s[3]}else(r=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((i=r.slice(1,4))[1]*=.01,i[2]*=.01,(s=M(i))[3]=1):(r=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((i=r.slice(1,4))[1]*=.01,i[2]*=.01,(s=M(i))[3]=+r[4]);return s},et=function(t){var e;return"rgb"===(e=t[3]<1?"rgba":"rgb")?e+"("+t.slice(0,3).map(pt).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(pt).join(",")+","+t[3]+")":void 0},ft=function(t){return pt(100*t)/100},E=function(t,e){var n;return n=1>e?"hsla":"hsl",t[0]=ft(t[0]||0),t[1]=ft(100*t[1])+"%",t[2]=ft(100*t[2])+"%","hsla"===n&&(t[3]=e),n+"("+t.join(",")+")"},h.css=function(t){return T(t)},b.css=function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(n,Tt.call(arguments).concat(["css"]),function(){})},n.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?et(this._rgb):"hsl"===t.slice(0,3)?E(this.hsl(),this.alpha()):void 0},h.named=function(t){return k(xt[t])},c.push({p:20,test:function(t){return 1===arguments.length&&null!=xt[t]?"named":void 0}}),n.prototype.name=function(t){var e,n;for(n in arguments.length&&(xt[t]&&(this._rgb=k(xt[t])),this._rgb[3]=1),e=this.hex(),xt)if(e===xt[n])return n;return e},z=function(){var t,e,n,i;return n=(i=bt(arguments))[0],t=i[1],e=i[2],[n,S(e*=o)*t,mt(e)*t]},G=function(){var t,e,n,i,o,r,a,s,l,u,c;return s=(n=bt(arguments))[0],o=n[1],a=n[2],t=(u=z(s,o,a))[0],e=u[1],i=u[2],l=(c=B(t,e,i))[0],r=c[1],i=c[2],[V(l,0,255),V(r,0,255),V(i,0,255),n.length>3?n[3]:1]},j=function(){var t,e,n,i,o,r;return o=(r=bt(arguments))[0],t=r[1],e=r[2],n=vt(t*t+e*e),i=(g(e,t)*l+360)%360,0===pt(1e4*n)&&(i=Number.NaN),[o,n,i]},st=function(){var t,e,n,i,o,r,a;return o=(r=bt(arguments))[0],n=r[1],e=r[2],i=(a=at(o,n,e))[0],t=a[1],e=a[2],j(i,t,e)},b.lch=function(){var t;return t=bt(arguments),new n(t,"lch")},b.hcl=function(){var t;return t=bt(arguments),new n(t,"hcl")},h.lch=G,h.hcl=function(){var t,e,n,i;return e=(i=bt(arguments))[0],t=i[1],n=i[2],G([n,t,e])},n.prototype.lch=function(){return st(this._rgb)},n.prototype.hcl=function(){return st(this._rgb).reverse()},tt=function(t){var e,n,i,o,r,a;return null==t&&(t="rgb"),r=(a=bt(arguments))[0],i=a[1],e=a[2],i/=255,e/=255,[(1-(r/=255)-(o=1-Math.max(r,Math.max(i,e))))*(n=1>o?1/(1-o):0),(1-i-o)*n,(1-e-o)*n,o]},w=function(){var t,e,n,i,o,r;return n=(e=bt(arguments))[0],o=e[1],r=e[2],i=e[3],t=e.length>4?e[4]:1,1===i?[0,0,0,t]:[n>=1?0:pt(255*(1-n)*(1-i)),o>=1?0:pt(255*(1-o)*(1-i)),r>=1?0:pt(255*(1-r)*(1-i)),t]},h.cmyk=function(){return w(bt(arguments))},b.cmyk=function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(n,Tt.call(arguments).concat(["cmyk"]),function(){})},n.prototype.cmyk=function(){return tt(this._rgb)},h.gl=function(){var t,e,n,i,o;for(i=function(){var t,n;for(e in n=[],t=bt(arguments))o=t[e],n.push(o);return n}.apply(this,arguments),t=n=0;2>=n;t=++n)i[t]*=255;return i},b.gl=function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(n,Tt.call(arguments).concat(["gl"]),function(){})},n.prototype.gl=function(){var t;return[(t=this._rgb)[0]/255,t[1]/255,t[2]/255,t[3]]},lt=function(t,e,n){var i;return t=(i=bt(arguments))[0],e=i[1],n=i[2],.2126*(t=W(t))+.7152*(e=W(e))+.0722*(n=W(n))},W=function(t){return.03928>=(t/=255)?t/12.92:Q((t+.055)/1.055,2.4)},f=[],b.interpolate=O=function(t,e,n,i){var o,r,a,s;for(null==n&&(n=.5),null==i&&(i="rgb"),"object"!==yt(t)&&(t=b(t)),"object"!==yt(e)&&(e=b(e)),a=0,r=f.length;r>a;a++)if(i===(o=f[a])[0]){s=o[1](t,e,n,i);break}if(null==s)throw"color mode "+i+" is not supported";return s.alpha(t.alpha()+n*(e.alpha()-t.alpha())),s},n.prototype.interpolate=function(t,e,n){return O(this,t,e,n)},b.mix=O,n.prototype.mix=n.prototype.interpolate,$=function(t,e,i,o){var r,a;return r=t._rgb,a=e._rgb,new n(r[0]+i*(a[0]-r[0]),r[1]+i*(a[1]-r[1]),r[2]+i*(a[2]-r[2]),o)},f.push(["rgb",$]),n.prototype.luminance=function(t,e){var n,i,o,r;return null==e&&(e="rgb"),arguments.length?(0===t?this._rgb=[0,0,0,this._rgb[3]]:1===t?this._rgb=[255,255,255,this._rgb[3]]:(i=1e-7,o=20,r=function(n,a){var s,l;return s=(l=n.interpolate(a,.5,e)).luminance(),Math.abs(t-s)<i||!o--?l:s>t?r(n,l):r(l,a)},n=lt(this._rgb),this._rgb=(n>t?r(b("black"),this):r(this,b("white"))).rgba()),this):lt(this._rgb)},_t=function(t){var e,n,i,o;return 66>(o=t/100)?(i=255,n=-155.25485562709179-.44596950469579133*(n=o-2)+104.49216199393888*q(n),e=20>o?0:.8274096064007395*(e=o-10)-254.76935184120902+115.67994401066147*q(e)):(i=351.97690566805693+.114206453784165*(i=o-55)-40.25366309332127*q(i),n=325.4494125711974+.07943456536662342*(n=o-50)-28.0852963507957*q(n),e=255),x([i,n,e])},ct=function(){var t,e,n,i,o,r,a;for(i=(o=bt(arguments))[0],o[1],t=o[2],n=1e3,e=4e4,.4;e-n>.4;)(r=_t(a=.5*(e+n)))[2]/r[0]>=t/i?e=a:n=a;return pt(a)},b.temperature=b.kelvin=function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(n,Tt.call(arguments).concat(["temperature"]),function(){})},h.temperature=h.kelvin=h.K=_t,n.prototype.temperature=function(){return ct(this._rgb)},n.prototype.kelvin=n.prototype.temperature,b.contrast=function(t,e){var i,o,r,a;return("string"===(r=yt(t))||"number"===r)&&(t=new n(t)),("string"===(a=yt(e))||"number"===a)&&(e=new n(e)),(i=t.luminance())>(o=e.luminance())?(i+.05)/(o+.05):(o+.05)/(i+.05)},n.prototype.get=function(t){var e,n,i,o,r;return this,i=(o=t.split("."))[0],e=o[1],r=this[i](),e?(n=i.indexOf(e))>-1?r[n]:console.warn("unknown channel "+e+" in mode "+i):r},n.prototype.set=function(t,e){var n,i,o,r,a,s;if(o=this,r=(a=t.split("."))[0],n=a[1])if(s=o[r](),(i=r.indexOf(n))>-1)if("string"===yt(e))switch(e.charAt(0)){case"+":case"-":s[i]+=+e;break;case"*":s[i]*=+e.substr(1);break;case"/":s[i]/=+e.substr(1);break;default:s[i]=+e}else s[i]=e;else console.warn("unknown channel "+n+" in mode "+r);else s=e;return o._rgb=b(s,r).alpha(o.alpha())._rgb,o},n.prototype.darken=function(t){var e,n;return null==t&&(t=1),(e=(n=this).lab())[0]-=r.Kn*t,b.lab(e).alpha(n.alpha())},n.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},n.prototype.darker=n.prototype.darken,n.prototype.brighter=n.prototype.brighten,n.prototype.saturate=function(t){var e,n;return null==t&&(t=1),(e=(n=this).lch())[1]+=t*r.Kn,e[1]<0&&(e[1]=0),b.lch(e).alpha(n.alpha())},n.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},n.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),b(e[0]*t,e[1]*t,e[2]*t,t)},Y=function(t,e){return t*e/255},C=function(t,e){return t>e?e:t},H=function(t,e){return t>e?t:e},gt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},J=function(t,e){return 128>e?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},y=function(t,e){return 255*(1-(1-e/255)/(t/255))},L=function(t,e){return 255===t?255:(t=e/255*255/(1-t/255))>255?255:t},(v=function(t,e,n){if(!v[n])throw"unknown blend mode "+n;return v[n](t,e)}).normal=(_=function(t){return function(e,n){var i,o;return i=b(n).rgb(),o=b(e).rgb(),b(t(i,o),"rgb")}})((A=function(t){return function(e,n){var i,o,r;for(r=[],i=o=0;3>=o;i=++o)r[i]=t(e[i],n[i]);return r}})(function(t,e){return t})),v.multiply=_(A(Y)),v.screen=_(A(gt)),v.overlay=_(A(J)),v.darken=_(A(C)),v.lighten=_(A(H)),v.dodge=_(A(L)),v.burn=_(A(y)),b.blend=v,b.analyze=function(t){var e,n,i,o;for(i={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},n=0,e=t.length;e>n;n++)null==(o=t[n])||isNaN(o)||(i.values.push(o),i.sum+=o,o<i.min&&(i.min=o),o>i.max&&(i.max=o),i.count+=1);return i.domain=[i.min,i.max],i.limits=function(t,e){return b.limits(i,t,e)},i},b.scale=function(t,e){var n,i,o,r,a,s,l,u,c,d,h,f,p,g,m,v,_,y,x;return u="rgb",c=b("#ccc"),p=0,!1,a=[0,1],f=[],h=[0,0],n=!1,o=[],d=!1,l=0,s=1,r=!1,i={},y=function(t){var e,n,i,r,a,s,l;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===yt(t)&&null!=(null!=(r=b.brewer)?r[t]:void 0)&&(t=b.brewer[t]),"array"===yt(t)){for(e=i=0,a=(t=t.slice(0)).length-1;a>=0?a>=i:i>=a;e=a>=0?++i:--i)n=t[e],"string"===yt(n)&&(t[e]=b(n));for(f.length=0,e=l=0,s=t.length-1;s>=0?s>=l:l>=s;e=s>=0?++l:--l)f.push(e/(t.length-1))}return _(),o=t},m=function(t){var e,i;if(null!=n){for(i=n.length-1,e=0;i>e&&t>=n[e];)e++;return e-1}return 0},x=function(t){return t},function(t){var e,i,o,r,a;return a=t,n.length>2&&(r=n.length-1,e=m(t),o=n[0]+(n[1]-n[0])*(0+.5*p),i=n[r-1]+(n[r]-n[r-1])*(1-.5*p),a=l+(n[e]+.5*(n[e+1]-n[e])-o)/(i-o)*(s-l)),a},v=function(t,e){var r,a,d,p,g,v,_;if(null==e&&(e=!1),isNaN(t))return c;if(e?_=t:n&&n.length>2?(_=m(t)/(n.length-2),_=h[0]+_*(1-h[0]-h[1])):s!==l?(_=(t-l)/(s-l),_=h[0]+_*(1-h[0]-h[1]),_=Math.min(1,Math.max(0,_))):_=1,e||(_=x(_)),d=Math.floor(1e4*_),i[d])r=i[d];else{if("array"===yt(o))for(a=p=0,v=f.length-1;v>=0?v>=p:p>=v;a=v>=0?++p:--p){if((g=f[a])>=_){r=o[a];break}if(_>=g&&a===f.length-1){r=o[a];break}if(_>g&&_<f[a+1]){_=(_-g)/(f[a+1]-g),r=b.interpolate(o[a],o[a+1],_,u);break}}else"function"===yt(o)&&(r=o(_));i[d]=r}return r},_=function(){return i={}},y(t),(g=function(t){var e;return e=b(v(t)),d&&e[d]?e[d]():e}).classes=function(t){var e;return null!=t?("array"===yt(t)?(n=t,a=[t[0],t[t.length-1]]):(e=b.analyze(a),n=0===t?[e.min,e.max]:b.limits(e,"e",t)),g):n},g.domain=function(t){var e,n,i,r,u,c,d;if(!arguments.length)return a;if(l=t[0],s=t[t.length-1],f=[],i=o.length,t.length===i&&l!==s)for(u=0,r=t.length;r>u;u++)n=t[u],f.push((n-l)/(s-l));else for(e=d=0,c=i-1;c>=0?c>=d:d>=c;e=c>=0?++d:--d)f.push(e/(i-1));return a=[l,s],g},g.mode=function(t){return arguments.length?(u=t,_(),g):u},g.range=function(t,e){return y(t),g},g.out=function(t){return d=t,g},g.spread=function(t){return arguments.length?(p=t,g):p},g.correctLightness=function(t){return null==t&&(t=!0),r=t,_(),x=r?function(t){var e,n,i,o,r,a,s,l,u;for(e=v(0,!0).lab()[0],n=v(1,!0).lab()[0],s=e>n,i=v(t,!0).lab()[0],o=i-(r=e+(n-e)*t),l=0,u=1,a=20;Math.abs(o)>.01&&a-- >0;)s&&(o*=-1),0>o?(l=t,t+=.5*(u-t)):(u=t,t+=.5*(l-t)),i=v(t,!0).lab()[0],o=i-r;return t}:function(t){return t},g},g.padding=function(t){return null!=t?("number"===yt(t)&&(t=[t,t]),h=t,g):h},g.colors=function(){var e,i,o,r,s,l,u,c,d;if(r=0,s="hex",1===arguments.length&&("string"===yt(arguments[0])?s=arguments[0]:r=arguments[0]),2===arguments.length&&(r=arguments[0],s=arguments[1]),r)return i=a[0],e=a[1]-i,function(){u=[];for(var t=0;r>=0?r>t:t>r;r>=0?t++:t--)u.push(t);return u}.apply(this).map(function(t){return g(i+t/(r-1)*e)[s]()});if(t=[],c=[],n&&n.length>2)for(o=d=1,l=n.length;l>=1?l>d:d>l;o=l>=1?++d:--d)c.push(.5*(n[o-1]+n[o]));else c=a;return c.map(function(t){return g(t)[s]()})},g},null==b.scales&&(b.scales={}),b.scales.cool=function(){return b.scale([b.hsl(180,1,.9),b.hsl(250,.7,.4)])},b.scales.hot=function(){return b.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},b.analyze=function(t,e,n){var i,o,r,a,s,l;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),i=function(t){null==t||isNaN(t)||(s.values.push(t),s.sum+=t,t<s.min&&(s.min=t),t>s.max&&(s.max=t),s.count+=1)},l=function(t,o){return n(t,o)?i(null!=e&&"function"===yt(e)?e(t):null!=e&&"string"===yt(e)||"number"===yt(e)?t[e]:t):void 0},"array"===yt(t))for(a=0,r=t.length;r>a;a++)l(t[a]);else for(o in t)l(t[o],o);return s.domain=[s.min,s.max],s.limits=function(t,e){return b.limits(s,t,e)},s},b.limits=function(t,e,n){var i,o,r,a,s,l,u,c,d,h,f,g,m,v,_,y,x,w,S,T,C,L,A,k,P,E,M,I,O,R,N,F,$,j,B,U,z,G,H,V,W,X,Y,K,J,tt,et,nt,it,ot,rt,at,st,lt;if(null==e&&(e="equal"),null==n&&(n=7),"array"===yt(t)&&(t=b.analyze(t)),P=t.min,Z=t.max,t.sum,st=t.values.sort(function(t,e){return t-e}),A=[],"c"===e.substr(0,1)&&(A.push(P),A.push(Z)),"e"===e.substr(0,1)){for(A.push(P),T=N=1,B=n-1;B>=1?B>=N:N>=B;T=B>=1?++N:--N)A.push(P+T/n*(Z-P));A.push(Z)}else if("l"===e.substr(0,1)){if(0>=P)throw"Logarithmic scales are only possible for values > 0";for(E=Math.LOG10E*q(P),k=Math.LOG10E*q(Z),A.push(P),T=lt=1,U=n-1;U>=1?U>=lt:lt>=U;T=U>=1?++lt:--lt)A.push(Q(10,E+T/n*(k-E)));A.push(Z)}else if("q"===e.substr(0,1)){for(A.push(P),T=i=1,X=n-1;X>=1?X>=i:i>=X;T=X>=1?++i:--i)F=st.length*T/n,($=D(F))===F?A.push(st[$]):(j=F-$,A.push(st[$]*j+st[$+1]*(1-j)));A.push(Z)}else if("k"===e.substr(0,1)){for(I=st.length,v=new Array(I),w=new Array(n),ot=!0,O=0,y=null,(y=[]).push(P),T=o=1,Y=n-1;Y>=1?Y>=o:o>=Y;T=Y>=1?++o:--o)y.push(P+T/n*(Z-P));for(y.push(Z);ot;){for(C=r=0,K=n-1;K>=0?K>=r:r>=K;C=K>=0?++r:--r)w[C]=0;for(T=a=0,J=I-1;J>=0?J>=a:a>=J;T=J>=0?++a:--a){for(at=st[T],M=Number.MAX_VALUE,C=s=0,tt=n-1;tt>=0?tt>=s:s>=tt;C=tt>=0?++s:--s)M>(S=p(y[C]-at))&&(M=S,_=C);w[_]++,v[T]=_}for(R=new Array(n),C=l=0,et=n-1;et>=0?et>=l:l>=et;C=et>=0?++l:--l)R[C]=null;for(T=u=0,nt=I-1;nt>=0?nt>=u:u>=nt;T=nt>=0?++u:--u)null===R[x=v[T]]?R[x]=st[T]:R[x]+=st[T];for(C=c=0,it=n-1;it>=0?it>=c:c>=it;C=it>=0?++c:--c)R[C]*=1/w[C];for(ot=!1,C=d=0,z=n-1;z>=0?z>=d:d>=z;C=z>=0?++d:--d)if(R[C]!==y[T]){ot=!0;break}y=R,++O>200&&(ot=!1)}for(L={},C=h=0,G=n-1;G>=0?G>=h:h>=G;C=G>=0?++h:--h)L[C]=[];for(T=f=0,H=I-1;H>=0?H>=f:f>=H;T=H>=0?++f:--f)L[x=v[T]].push(st[T]);for(rt=[],C=g=0,V=n-1;V>=0?V>=g:g>=V;C=V>=0?++g:--g)rt.push(L[C][0]),rt.push(L[C][L[C].length-1]);for(rt=rt.sort(function(t,e){return t-e}),A.push(rt[0]),T=m=1,W=rt.length-1;W>=m;T=m+=2)isNaN(rt[T])||A.push(rt[T])}return A},P=function(t,e,n){var i,o,r,a;return t=(i=bt(arguments))[0],e=i[1],n=i[2],1/3>(t/=360)?r=1-((o=(1-e)/3)+(a=(1+e*S(u*t)/S(s-u*t))/3)):2/3>t?o=1-((a=(1-e)/3)+(r=(1+e*S(u*(t-=1/3))/S(s-u*t))/3)):a=1-((r=(1-e)/3)+(o=(1+e*S(u*(t-=2/3))/S(s-u*t))/3)),[255*(a=V(n*a*3)),255*(r=V(n*r*3)),255*(o=V(n*o*3)),i.length>3?i[3]:1]},it=function(){var t,e,n,i,o,r,a;return o=(r=bt(arguments))[0],e=r[1],t=r[2],u=2*Math.PI,o/=255,e/=255,t/=255,0===(a=1-Math.min(o,e,t)/(i=(o+e+t)/3))?n=0:(n=(o-e+(o-t))/2,n/=Math.sqrt((o-e)*(o-e)+(o-t)*(e-t)),n=Math.acos(n),t>e&&(n=u-n),n/=u),[360*n,a,i]},b.hsi=function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(n,Tt.call(arguments).concat(["hsi"]),function(){})},h.hsi=P,n.prototype.hsi=function(){return it(this._rgb)},R=function(t,e,n,i){var o,r,a,s,l,u,c,d,h,f;return"hsl"===i?(h=t.hsl(),f=e.hsl()):"hsv"===i?(h=t.hsv(),f=e.hsv()):"hsi"===i?(h=t.hsi(),f=e.hsi()):("lch"===i||"hcl"===i)&&(i="hcl",h=t.hcl(),f=e.hcl()),"h"===i.substr(0,1)&&(r=h[0],c=h[1],s=h[2],a=f[0],d=f[1],l=f[2]),isNaN(r)||isNaN(a)?isNaN(r)?isNaN(a)?o=Number.NaN:(o=a,1!==s&&0!==s||"hsv"===i||(u=d)):(o=r,1!==l&&0!==l||"hsv"===i||(u=c)):o=r+n*(a>r&&a-r>180?a-(r+360):r>a&&r-a>180?a+360-r:a-r),null==u&&(u=c+n*(d-c)),b[i](o,u,s+n*(l-s))},F=function(t,e,n,i){var o,r;return o=t.num(),r=e.num(),b.num(o+(r-o)*n,"num")},(f=f.concat(function(){var t,e,n,i;for(i=[],e=0,t=(n=["hsv","hsl","hsi","hcl","lch"]).length;t>e;e++)X=n[e],i.push([X,R]);return i}())).push(["num",F]),N=function(t,e,i,o){var r,a;return r=t.lab(),a=e.lab(),new n(r[0]+i*(a[0]-r[0]),r[1]+i*(a[1]-r[1]),r[2]+i*(a[2]-r[2]),o)},f.push(["lab",N])}).call(this)}).call(e,n(30)(t))},function(t,e){t.exports=function(t,e){return void 0===t?e:t}},function(t,e,n){var i=n(11);t.exports=function(t,e,n){for(var o=-1,r=i(e),a=r.length;++o<a;){var s=r[o],l=t[s],u=n(l,e[s],s,t,e);(u==u?u===l:l!=l)&&(void 0!==l||s in t)||(t[s]=u)}return t}},function(t,e,n){var i=n(16),o=n(11);t.exports=function(t,e){return null==e?t:i(e,o(e),t)}},function(t,e){t.exports=function(t,e,n){n||(n={});for(var i=-1,o=e.length;++i<o;){var r=e[i];n[r]=t[r]}return n}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var i=n(29);t.exports=function(t,e,n){if("function"!=typeof t)return i;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,r){return t.call(e,n,i,o,r)};case 5:return function(n,i,o,r,a){return t.call(e,n,i,o,r,a)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(18),o=n(22),r=n(6);t.exports=function(t){return r(function(e,n){var r=-1,a=null==e?0:n.length,s=a>2?n[a-2]:void 0,l=a>2?n[2]:void 0,u=a>1?n[a-1]:void 0;for("function"==typeof s?(s=i(s,u,5),a-=2):a-=(s="function"==typeof u?u:void 0)?1:0,l&&o(n[0],n[1],l)&&(s=3>a?void 0:s,a=1);++r<a;){var c=n[r];c&&t(e,c,s)}return e})}},function(t,e,n){var i=n(6);t.exports=function(t,e){return i(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(void 0,n))})}},function(t,e,n){var i=n(17)("length");t.exports=i},function(t,e,n){var i=n(3),o=n(4),r=n(2);t.exports=function(t,e,n){if(!r(n))return!1;var a=typeof e;if("number"==a?i(n)&&o(e,n.length):"string"==a&&e in n){var s=n[e];return t==t?t===s:s!=s}return!1}},function(t,e,n){var i=n(8),o=n(9),r=n(4),a=n(1),s=n(28),l=Object.prototype.hasOwnProperty;t.exports=function(t){for(var e=s(t),n=e.length,u=n&&t.length,c=!!u&&a(u)&&(o(t)||i(t)),d=-1,h=[];++d<n;){var f=e[d];(c&&r(f,u)||l.call(t,f))&&h.push(f)}return h}},function(t,e,n){var i=n(2),o="[object Function]",r=Object.prototype.toString;t.exports=function(t){return i(t)&&r.call(t)==o}},function(t,e,n){var i=n(24),o=n(5),r=/^\[object .+?Constructor\]$/,a=Object.prototype,s=Function.prototype.toString,l=a.hasOwnProperty,u=RegExp("^"+s.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return null!=t&&(i(t)?u.test(s.call(t)):o(t)&&r.test(t))}},function(t,e,n){var i=n(10),o=n(13),r=n(20)(i,o);t.exports=r},function(t,e,n){t.exports=n(10)},function(t,e,n){var i=n(8),o=n(9),r=n(4),a=n(1),s=n(2),l=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return[];s(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(o(t)||i(t))&&e||0;for(var n=t.constructor,u=-1,c="function"==typeof n&&n.prototype===t,d=Array(e),h=e>0;++u<e;)d[u]=u+"";for(var f in t)h&&r(f,e)||"constructor"==f&&(c||!l.call(t,f))||d.push(f);return d}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){t.exports=L}])},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){var i,o;!function(r,a,s){var l={version:"1.0.3"};"object"==typeof t&&"object"==typeof t.exports?t.exports=l:n(80)&&void 0!==(o="function"==typeof(i=l)?i.call(e,n,e,t):i)&&(t.exports=o),void 0!==r&&function(){var t=r.L;l.noConflict=function(){return r.L=t,this},r.L=l}(),l.Util={extend:function(t){var e,n,i,o;for(n=1,i=arguments.length;n<i;n++)for(e in o=arguments[n])t[e]=o[e];return t},create:Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),bind:function(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++l.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,e,n){var i,o,r,a;return a=function(){i=!1,o&&(r.apply(n,o),o=!1)},r=function(){i?o=arguments:(t.apply(n,arguments),setTimeout(a,e),i=!0)}},wrapNum:function(t,e,n){var i=e[1],o=e[0],r=i-o;return t===i&&n?t:((t-o)%r+r)%r+o},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return l.Util.trim(t).split(/\s+/)},setOptions:function(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?l.Util.create(t.options):{}),e)t.options[n]=e[n];return t.options},getParamString:function(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},template:function(t,e){return t.replace(l.Util.templateRe,function(t,n){var i=e[n];if(i===s)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){return r["webkit"+t]||r["moz"+t]||r["ms"+t]}function e(t){var e=+new Date,i=Math.max(0,16-(e-n));return n=e+i,r.setTimeout(t,i)}var n=0,i=r.requestAnimationFrame||t("RequestAnimationFrame")||e,o=r.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){r.clearTimeout(t)};l.Util.requestAnimFrame=function(t,n,o){return o&&i===e?void t.call(n):i.call(r,l.bind(t,n))},l.Util.cancelAnimFrame=function(t){t&&o.call(r,t)}}(),l.extend=l.Util.extend,l.bind=l.Util.bind,l.stamp=l.Util.stamp,l.setOptions=l.Util.setOptions,l.Class=function(){},l.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,i=l.Util.create(n);for(var o in i.constructor=e,e.prototype=i,this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);return t.statics&&(l.extend(e,t.statics),delete t.statics),t.includes&&(l.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),i.options&&(t.options=l.Util.extend(l.Util.create(i.options),t.options)),l.extend(i,t),i._initHooks=[],i.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;t<e;t++)i._initHooks[t].call(this)}},e},l.Class.include=function(t){return l.extend(this.prototype,t),this},l.Class.mergeOptions=function(t){return l.extend(this.prototype.options,t),this},l.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this},l.Evented=l.Class.extend({on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var o=0,r=(t=l.Util.splitWords(t)).length;o<r;o++)this._on(t[o],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var o=0,r=(t=l.Util.splitWords(t)).length;o<r;o++)this._off(t[o],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=s);for(var o={fn:e,ctx:n},r=i,a=0,l=r.length;a<l;a++)if(r[a].fn===e&&r[a].ctx===n)return;r.push(o)},_off:function(t,e,n){var i,o,r;if(this._events&&(i=this._events[t])){if(!e){for(o=0,r=i.length;o<r;o++)i[o].fn=l.Util.falseFn;return void delete this._events[t]}if(n===this&&(n=s),i)for(o=0,r=i.length;o<r;o++){var a=i[o];if(a.ctx===n&&a.fn===e)return a.fn=l.Util.falseFn,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(o,1)}}},fire:function(t,e,n){if(!this.listens(t,n))return this;var i=l.Util.extend({},e,{type:t,target:this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var r=0,a=o.length;r<a;r++){var s=o[r];s.fn.call(s.ctx||this,i)}this._firingCount--}}return n&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var o=l.bind(function(){this.off(t,e,n).off(t,o,n)},this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[l.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[l.stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,l.extend({layer:t.target},t),!0)}});var u=l.Evented.prototype;u.addEventListener=u.on,u.removeEventListener=u.clearAllEventListeners=u.off,u.addOneTimeEventListener=u.once,u.fireEvent=u.fire,u.hasEventListeners=u.listens,l.Mixin={Events:u},function(){var t=navigator.userAgent.toLowerCase(),e=a.documentElement,n="ActiveXObject"in r,i=-1!==t.indexOf("webkit"),o=-1!==t.indexOf("phantom"),s=-1!==t.search("android [23]"),u=-1!==t.indexOf("chrome"),c=-1!==t.indexOf("gecko")&&!i&&!r.opera&&!n,d=0===navigator.platform.indexOf("Win"),h="undefined"!=typeof orientation||-1!==t.indexOf("mobile"),f=!r.PointerEvent&&r.MSPointerEvent,p=r.PointerEvent||f,g=n&&"transition"in e.style,m="WebKitCSSMatrix"in r&&"m11"in new r.WebKitCSSMatrix&&!s,v="MozPerspective"in e.style,_="OTransition"in e.style,y=!r.L_NO_TOUCH&&(p||"ontouchstart"in r||r.DocumentTouch&&a instanceof r.DocumentTouch);l.Browser={ie:n,ielt9:n&&!a.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in a),webkit:i,gecko:c,android:-1!==t.indexOf("android"),android23:s,chrome:u,safari:!u&&-1!==t.indexOf("safari"),win:d,ie3d:g,webkit3d:m,gecko3d:v,opera12:_,any3d:!r.L_DISABLE_3D&&(g||m||v)&&!_&&!o,mobile:h,mobileWebkit:h&&i,mobileWebkit3d:h&&m,mobileOpera:h&&r.opera,mobileGecko:h&&c,touch:!!y,msPointer:!!f,pointer:!!p,retina:(r.devicePixelRatio||r.screen.deviceXDPI/r.screen.logicalXDPI)>1}}(),l.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},l.Point.prototype={clone:function(){return new l.Point(this.x,this.y)},add:function(t){return this.clone()._add(l.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(l.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new l.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new l.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){var e=(t=l.point(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=l.point(t)).x===this.x&&t.y===this.y},contains:function(t){return t=l.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+l.Util.formatNum(this.x)+", "+l.Util.formatNum(this.y)+")"}},l.point=function(t,e,n){return t instanceof l.Point?t:l.Util.isArray(t)?new l.Point(t[0],t[1]):t===s||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new l.Point(t.x,t.y):new l.Point(t,e,n)},l.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},l.Bounds.prototype={extend:function(t){return t=l.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new l.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new l.Point(this.min.x,this.max.y)},getTopRight:function(){return new l.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof l.Point?l.point(t):l.bounds(t))instanceof l.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=l.bounds(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>=e.x&&i.x<=n.x,a=o.y>=e.y&&i.y<=n.y;return r&&a},overlaps:function(t){t=l.bounds(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>e.x&&i.x<n.x,a=o.y>e.y&&i.y<n.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},l.bounds=function(t,e){return!t||t instanceof l.Bounds?t:new l.Bounds(t,e)},l.Transformation=function(t,e,n,i){this._a=t,this._b=e,this._c=n,this._d=i},l.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new l.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},l.DomUtil={get:function(t){return"string"==typeof t?a.getElementById(t):t},getStyle:function(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&a.defaultView){var i=a.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n},create:function(t,e,n){var i=a.createElement(t);return i.className=e||"",n&&n.appendChild(i),i},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(t.classList!==s)return t.classList.contains(e);var n=l.DomUtil.getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==s)for(var n=l.Util.splitWords(e),i=0,o=n.length;i<o;i++)t.classList.add(n[i]);else if(!l.DomUtil.hasClass(t,e)){var r=l.DomUtil.getClass(t);l.DomUtil.setClass(t,(r?r+" ":"")+e)}},removeClass:function(t,e){t.classList!==s?t.classList.remove(e):l.DomUtil.setClass(t,l.Util.trim((" "+l.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){t.className.baseVal===s?t.className=e:t.className.baseVal=e},getClass:function(t){return t.className.baseVal===s?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&l.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"},testProp:function(t){for(var e=a.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},setTransform:function(t,e,n){var i=e||new l.Point(0,0);t.style[l.DomUtil.TRANSFORM]=(l.Browser.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")},setPosition:function(t,e){t._leaflet_pos=e,l.Browser.any3d?l.DomUtil.setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos||new l.Point(0,0)}},function(){l.DomUtil.TRANSFORM=l.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var t=l.DomUtil.TRANSITION=l.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(l.DomUtil.TRANSITION_END="webkitTransition"===t||"OTransition"===t?t+"End":"transitionend","onselectstart"in a)l.DomUtil.disableTextSelection=function(){l.DomEvent.on(r,"selectstart",l.DomEvent.preventDefault)},l.DomUtil.enableTextSelection=function(){l.DomEvent.off(r,"selectstart",l.DomEvent.preventDefault)};else{var e=l.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);l.DomUtil.disableTextSelection=function(){if(e){var t=a.documentElement.style;this._userSelect=t[e],t[e]="none"}},l.DomUtil.enableTextSelection=function(){e&&(a.documentElement.style[e]=this._userSelect,delete this._userSelect)}}l.DomUtil.disableImageDrag=function(){l.DomEvent.on(r,"dragstart",l.DomEvent.preventDefault)},l.DomUtil.enableImageDrag=function(){l.DomEvent.off(r,"dragstart",l.DomEvent.preventDefault)},l.DomUtil.preventOutline=function(t){for(;-1===t.tabIndex;)t=t.parentNode;t&&t.style&&(l.DomUtil.restoreOutline(),this._outlineElement=t,this._outlineStyle=t.style.outline,t.style.outline="none",l.DomEvent.on(r,"keydown",l.DomUtil.restoreOutline,this))},l.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,l.DomEvent.off(r,"keydown",l.DomUtil.restoreOutline,this))}}(),l.LatLng=function(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==s&&(this.alt=+n)},l.LatLng.prototype={equals:function(t,e){return!!t&&(t=l.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(e===s?1e-9:e))},toString:function(t){return"LatLng("+l.Util.formatNum(this.lat,t)+", "+l.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return l.CRS.Earth.distance(this,l.latLng(t))},wrap:function(){return l.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return l.latLngBounds([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new l.LatLng(this.lat,this.lng,this.alt)}},l.latLng=function(t,e,n){return t instanceof l.LatLng?t:l.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?new l.LatLng(t[0],t[1],t[2]):2===t.length?new l.LatLng(t[0],t[1]):null:t===s||null===t?t:"object"==typeof t&&"lat"in t?new l.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===s?null:new l.LatLng(t,e,n)},l.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},l.LatLngBounds.prototype={extend:function(t){var e,n,i=this._southWest,o=this._northEast;if(t instanceof l.LatLng)e=t,n=t;else{if(!(t instanceof l.LatLngBounds))return t?this.extend(l.latLng(t)||l.latLngBounds(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||o?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new l.LatLng(e.lat,e.lng),this._northEast=new l.LatLng(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new l.LatLngBounds(new l.LatLng(e.lat-i,e.lng-o),new l.LatLng(n.lat+i,n.lng+o))},getCenter:function(){return new l.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new l.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new l.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof l.LatLng||"lat"in t?l.latLng(t):l.latLngBounds(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof l.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=l.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&i.lat<=n.lat,a=o.lng>=e.lng&&i.lng<=n.lng;return r&&a},overlaps:function(t){t=l.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&i.lat<n.lat,a=o.lng>e.lng&&i.lng<n.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=l.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},l.latLngBounds=function(t,e){return t instanceof l.LatLngBounds?t:new l.LatLngBounds(t,e)},l.Projection={},l.Projection.LonLat={project:function(t){return new l.Point(t.lng,t.lat)},unproject:function(t){return new l.LatLng(t.y,t.x)},bounds:l.bounds([-180,-90],[180,90])},l.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=Math.sin(i*e);return new l.Point(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new l.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return l.bounds([-t,-t],[t,t])}()},l.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),i=this.transformation.transform(e.min,n),o=this.transformation.transform(e.max,n);return l.bounds(i,o)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?l.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,i=t.alt;return l.latLng(n,e,i)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,o=e.lng-n.lng;if(0===i&&0===o)return t;var r=t.getSouthWest(),a=t.getNorthEast(),s=l.latLng({lat:r.lat-i,lng:r.lng-o}),u=l.latLng({lat:a.lat-i,lng:a.lng-o});return new l.LatLngBounds(s,u)}},l.CRS.Simple=l.extend({},l.CRS,{projection:l.Projection.LonLat,transformation:new l.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0}),l.CRS.Earth=l.extend({},l.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,o=e.lat*n,r=Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos((e.lng-t.lng)*n);return this.R*Math.acos(Math.min(r,1))}}),l.CRS.EPSG3857=l.extend({},l.CRS.Earth,{code:"EPSG:3857",projection:l.Projection.SphericalMercator,transformation:function(){var t=.5/(Math.PI*l.Projection.SphericalMercator.R);return new l.Transformation(t,.5,-t,.5)}()}),l.CRS.EPSG900913=l.extend({},l.CRS.EPSG3857,{code:"EPSG:900913"}),l.CRS.EPSG4326=l.extend({},l.CRS.Earth,{code:"EPSG:4326",projection:l.Projection.LonLat,transformation:new l.Transformation(1/180,1,-1/180,.5)}),l.Map=l.Evented.extend({options:{crs:l.CRS.EPSG3857,center:s,zoom:s,minZoom:s,maxZoom:s,layers:[],maxBounds:s,renderer:s,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=l.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=l.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==s&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==s&&this.setView(l.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=l.DomUtil.TRANSITION&&l.Browser.any3d&&!l.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),l.DomEvent.on(this._proxy,l.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if((e=e===s?this._zoom:this._limitZoom(e),t=this._limitCenter(l.latLng(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n)&&(n.animate!==s&&(n.zoom=l.extend({animate:n.animate},n.zoom),n.pan=l.extend({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(l.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(l.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),r=(t instanceof l.Point?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/i),a=this.containerPointToLatLng(o.add(r));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():l.latLngBounds(t);var n=l.point(e.paddingTopLeft||e.padding||[0,0]),i=l.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o;var r=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),o),s=this.project(t.getNorthEast(),o);return{center:this.unproject(a.add(s).divideBy(2).add(r),o),zoom:o}},fitBounds:function(t,e){if(!(t=l.latLngBounds(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=l.point(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new l.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){l.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){function i(t){var e=(p*p-f*f+(t?-1:1)*v*v*g*g)/(2*(t?p:f)*v*g),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function r(t){return(Math.exp(t)+Math.exp(-t))/2}function a(t){return f*(r(_)*function(t){return o(t)/r(t)}(_+m*t)-o(_))/v}if(!1===(n=n||{}).animate||!l.Browser.any3d)return this.setView(t,e,n);this._stop();var u=this.project(this.getCenter()),c=this.project(t),d=this.getSize(),h=this._zoom;t=l.latLng(t),e=e===s?h:e;var f=Math.max(d.x,d.y),p=f*this.getZoomScale(h,e),g=c.distanceTo(u)||1,m=1.42,v=m*m,_=i(0),y=Date.now(),b=(i(1)-_)/m,x=n.duration?1e3*n.duration:1e3*b*.8;return this._moveStart(!0),function n(){var i=(Date.now()-y)/x,o=function(t){return 1-Math.pow(1-t,1.5)}(i)*b;i<=1?(this._flyToFrame=l.Util.requestAnimFrame(n,this),this._move(this.unproject(u.add(c.subtract(u).multiplyBy(a(o)/g)),h),this.getScaleZoom(f/function(t){return f*(r(_)/r(_+m*t))}(o),h),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=l.latLngBounds(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,l.latLngBounds(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=l.extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),i=e.divideBy(2).round(),o=n.divideBy(2).round(),r=i.subtract(o);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=l.extend({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=l.bind(this._handleGeolocationResponse,this),n=l.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new l.LatLng(e,n),o=i.toBounds(t.coords.accuracy),r=this._locateOptions;if(r.setView){var a=this.getBoundsZoom(o);this.setView(i,r.maxZoom?Math.min(a,r.maxZoom):a)}var s={latlng:i,bounds:o,timestamp:t.timestamp};for(var u in t.coords)"number"==typeof t.coords[u]&&(s[u]=t.coords[u]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=s,this._containerId=s}for(var t in l.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();return this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),i=l.DomUtil.create("div",n,e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new l.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===s?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===s?this._layersMaxZoom===s?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=l.latLngBounds(t),n=l.point(n||[0,0]);var i=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),c=l.bounds(this.project(s,i),this.project(a,i)).getSize(),d=l.Browser.any3d?this.options.zoomSnap:1,h=Math.min(u.x/c.x,u.y/c.y);return i=this.getScaleZoom(h,i),d&&(i=Math.round(i/(d/100))*(d/100),i=e?Math.ceil(i/d)*d:Math.floor(i/d)*d),Math.max(o,Math.min(r,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new l.Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new l.Bounds(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===s?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===s?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===s?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=e===s?this._zoom:e,this.options.crs.latLngToPoint(l.latLng(t),e)},unproject:function(t,e){return e=e===s?this._zoom:e,this.options.crs.pointToLatLng(l.point(t),e)},layerPointToLatLng:function(t){var e=l.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(l.latLng(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(l.latLng(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(l.latLngBounds(t))},distance:function(t,e){return this.options.crs.distance(l.latLng(t),l.latLng(e))},containerPointToLayerPoint:function(t){return l.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return l.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(l.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(l.latLng(t)))},mouseEventToContainerPoint:function(t){return l.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=l.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");l.DomEvent.addListener(e,"scroll",this._onScroll,this),this._containerId=l.Util.stamp(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&l.Browser.any3d,l.DomUtil.addClass(t,"leaflet-container"+(l.Browser.touch?" leaflet-touch":"")+(l.Browser.retina?" leaflet-retina":"")+(l.Browser.ielt9?" leaflet-oldie":"")+(l.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=l.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),l.DomUtil.setPosition(this._mapPane,new l.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(l.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),l.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){l.DomUtil.setPosition(this._mapPane,new l.Point(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,n){e===s&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return l.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){l.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(l.DomEvent){this._targets={},this._targets[l.stamp(this._container)]=this;var e=t?"off":"on";l.DomEvent[e](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&l.DomEvent[e](r,"resize",this._onResize,this),l.Browser.any3d&&this.options.transform3DLimit&&this[e]("moveend",this._onMoveEnd)}},_onResize:function(){l.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=l.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],o="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,a=!1;r;){if((n=this._targets[l.stamp(r)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(o&&!l.DomEvent._isExternalTarget(r,t))break;if(i.push(n),o)break}if(r===this._container)break;r=r.parentNode}return i.length||a||o||!l.DomEvent._isExternalTarget(r,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!l.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&l.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,e,n){if("click"===t.type){var i=l.Util.extend({},t);i.type="preclick",this._fireDOMEvent(i,i.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var o=n[0];"contextmenu"===e&&o.listens(e,!0)&&l.DomEvent.preventDefault(t);var r={originalEvent:t};if("keypress"!==t.type){var a=o instanceof l.Marker;r.containerPoint=a?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?o.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var s=0;s<n.length;s++)if(n[s].fire(e,r,!0),r.originalEvent._stopped||n[s].options.nonBubblingEvents&&-1!==l.Util.indexOf(n[s].options.nonBubblingEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return l.DomUtil.getPosition(this._mapPane)||new l.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&e!==s?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return l.bounds([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),r=new l.Bounds(i.subtract(o),i.add(o)),a=this._getBoundsOffset(r,n,e);return a.round().equals([0,0])?t:this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new l.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=l.bounds(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),o=i.min.subtract(t.min),r=i.max.subtract(t.max),a=this._rebound(o.x,-r.x),s=this._rebound(o.y,-r.y);return new l.Point(a,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=l.Browser.any3d?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){l.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=l.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=l.DomUtil.TRANSFORM,i=t.style[n];l.DomUtil.setTransform(t,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),i===t.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),n=this.getZoom();l.DomUtil.setTransform(t,this.project(e,n),this.getZoomScale(n,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(o)||(l.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,i){n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,l.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(l.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(l.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),l.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),l.map=function(t,e){return new l.Map(t,e)},l.Layer=l.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[l.stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[l.stamp(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}}),l.Map.include({addLayer:function(t){var e=l.stamp(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=l.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&l.stamp(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?l.Util.isArray(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[l.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=l.stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var o=this._zoomBoundLayers[i].options;t=o.minZoom===s?t:Math.min(t,o.minZoom),e=o.maxZoom===s?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?s:e,this._layersMinZoom=t===1/0?s:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===s&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===s&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var c="_leaflet_events";l.DomEvent={on:function(t,e,n,i){if("object"==typeof e)for(var o in e)this._on(t,o,e[o],n);else for(var r=0,a=(e=l.Util.splitWords(e)).length;r<a;r++)this._on(t,e[r],n,i);return this},off:function(t,e,n,i){if("object"==typeof e)for(var o in e)this._off(t,o,e[o],n);else for(var r=0,a=(e=l.Util.splitWords(e)).length;r<a;r++)this._off(t,e[r],n,i);return this},_on:function(t,e,n,i){var o=e+l.stamp(n)+(i?"_"+l.stamp(i):"");if(t[c]&&t[c][o])return this;var a=function(e){return n.call(i||t,e||r.event)},s=a;return l.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,a,o):!l.Browser.touch||"dblclick"!==e||!this.addDoubleTapListener||l.Browser.pointer&&l.Browser.chrome?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):"mouseenter"===e||"mouseleave"===e?(a=function(e){e=e||r.event,l.DomEvent._isExternalTarget(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1)):("click"===e&&l.Browser.android&&(a=function(t){return l.DomEvent._filterClick(t,s)}),t.addEventListener(e,a,!1)):"attachEvent"in t&&t.attachEvent("on"+e,a):this.addDoubleTapListener(t,a,o),t[c]=t[c]||{},t[c][o]=a,this},_off:function(t,e,n,i){var o=e+l.stamp(n)+(i?"_"+l.stamp(i):""),r=t[c]&&t[c][o];return r?(l.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,o):l.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,o):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[c][o]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,l.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return l.DomEvent.on(t,"mousewheel",l.DomEvent.stopPropagation)},disableClickPropagation:function(t){var e=l.DomEvent.stopPropagation;return l.DomEvent.on(t,l.Draggable.START.join(" "),e),l.DomEvent.on(t,{click:l.DomEvent._fakeStop,dblclick:e})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return l.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new l.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new l.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},_wheelPxFactor:l.Browser.win&&l.Browser.chrome?2:l.Browser.gecko?r.devicePixelRatio:1,getWheelDelta:function(t){return l.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/l.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){l.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=l.DomEvent._lastClick&&n-l.DomEvent._lastClick;return i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?void l.DomEvent.stop(t):(l.DomEvent._lastClick=n,void e(t))}},l.DomEvent.addListener=l.DomEvent.on,l.DomEvent.removeListener=l.DomEvent.off,l.PosAnimation=l.Evented.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=l.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=l.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),l.DomUtil.setPosition(this._el,n),this.fire("step")},_complete:function(){l.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),l.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:l.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),a=r*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),r/2);return i=-n*Math.log(Math.max(s,1e-10)),new l.Point(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),a=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(a),u=0,c=.1;u<15&&Math.abs(c)>1e-7;u++)e=r*Math.sin(s),e=Math.pow((1-e)/(1+e),r/2),s+=c=Math.PI/2-2*Math.atan(a*e)-s;return new l.LatLng(s*n,t.x*n/i)}},l.CRS.EPSG3395=l.extend({},l.CRS.Earth,{code:"EPSG:3395",projection:l.Projection.Mercator,transformation:function(){var t=.5/(Math.PI*l.Projection.Mercator.R);return new l.Transformation(t,.5,-t,.5)}()}),l.GridLayer=l.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:l.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:s,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){l.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),l.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(l.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(l.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return a.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof l.Point?t:new l.Point(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==s&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),o=0,r=n.length;o<r;o++)e=n[o].style.zIndex,n[o]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!l.Browser.ielt9){l.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var o=this._tiles[i];if(o.current&&o.loaded){var r=Math.min(1,(t-o.loaded)/200);l.DomUtil.setOpacity(o.el,r),r<1?e=!0:(o.active&&(n=!0),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(l.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=l.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=l.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===s)return s;for(var n in this._levels)this._levels[n].el.children.length||n===t?this._levels[n].el.style.zIndex=e-Math.abs(t-n):(l.DomUtil.remove(this._levels[n].el),this._removeTilesAtZoom(n),delete this._levels[n]);var i=this._levels[t],o=this._map;return i||((i=this._levels[t]={}).el=l.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,o.getCenter(),o.getZoom()),l.Util.falseFn(i.el.offsetWidth)),this._level=i,i},_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)l.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,n,i){var o=Math.floor(t/2),r=Math.floor(e/2),a=n-1,s=new l.Point(+o,+r);s.z=+a;var u=this._tileCoordsToKey(s),c=this._tiles[u];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>i&&this._retainParent(o,r,a,i))},_retainChildren:function(t,e,n,i){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var a=new l.Point(o,r);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(o,r,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,e,n,i){var o=Math.round(e);(this.options.maxZoom!==s&&o>this.options.maxZoom||this.options.minZoom!==s&&o<this.options.minZoom)&&(o=s);var r=this.options.updateWhenZooming&&o!==this._tileZoom;i&&!r||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),o!==s&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),o=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();l.Browser.any3d?l.DomUtil.setTransform(t.el,o,i):l.DomUtil.setPosition(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),o=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*i);return new l.Bounds(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var n=e.getZoom();if(t===s&&(t=e.getCenter()),this._tileZoom!==s){var i=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(i),r=o.getCenter(),u=[],c=this.options.keepBuffer,d=new l.Bounds(o.getBottomLeft().subtract([c,-c]),o.getTopRight().add([c,-c]));for(var h in this._tiles){var f=this._tiles[h].coords;f.z===this._tileZoom&&d.contains(l.point(f.x,f.y))||(this._tiles[h].current=!1)}if(Math.abs(n-this._tileZoom)>1)return void this._setView(t,n);for(var p=o.min.y;p<=o.max.y;p++)for(var g=o.min.x;g<=o.max.x;g++){var m=new l.Point(g,p);if(m.z=this._tileZoom,this._isValidTile(m)){var v=this._tiles[this._tileCoordsToKey(m)];v?v.current=!0:u.push(m)}}if(u.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==u.length){this._loading||(this._loading=!0,this.fire("loading"));var _=a.createDocumentFragment();for(g=0;g<u.length;g++)this._addTile(u[g],_);this._level.el.appendChild(_)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return l.latLngBounds(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),o=i.add(n),r=e.unproject(i,t.z),a=e.unproject(o,t.z),s=new l.LatLngBounds(r,a);return this.options.noWrap||e.wrapLatLngBounds(s),s},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new l.Point(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(l.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){l.DomUtil.addClass(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l.Util.falseFn,t.onmousemove=l.Util.falseFn,l.Browser.ielt9&&this.options.opacity<1&&l.DomUtil.setOpacity(t,this.options.opacity),l.Browser.android&&!l.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),l.bind(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&l.Util.requestAnimFrame(l.bind(this._tileReady,this,t,null,o)),l.DomUtil.setPosition(o,n),this._tiles[i]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){if(this._map){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(l.DomUtil.setOpacity(n.el,0),l.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=l.Util.requestAnimFrame(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(l.DomUtil.addClass(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),l.Browser.ielt9||!this._map._fadeAnimated?l.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(l.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new l.Point(this._wrapX?l.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?l.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new l.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),l.gridLayer=function(t){return new l.GridLayer(t)},l.TileLayer=l.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=l.setOptions(this,e)).detectRetina&&l.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),l.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=a.createElement("img");return l.DomEvent.on(n,"load",l.bind(this._tileOnLoad,this,e,n)),l.DomEvent.on(n,"error",l.bind(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:l.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return l.Util.template(this._url,l.extend(e,this.options))},_tileOnLoad:function(t,e){l.Browser.ielt9?setTimeout(l.bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.src!==i&&(e.src=i),t(n,e)},getTileSize:function(){var t=this._map,e=l.GridLayer.prototype.getTileSize.call(this),n=this._tileZoom+this.options.zoomOffset,i=this.options.minNativeZoom,o=this.options.maxNativeZoom;return null!==i&&n<i?e.divideBy(t.getZoomScale(i,n)).round():null!==o&&n>o?e.divideBy(t.getZoomScale(o,n)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,i=this.options.zoomOffset,o=this.options.minNativeZoom,r=this.options.maxNativeZoom;return n&&(t=e-t),t+=i,null!==o&&t<o?o:null!==r&&t>r?r:t},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l.Util.falseFn,e.onerror=l.Util.falseFn,e.complete||(e.src=l.Util.emptyImageUrl,l.DomUtil.remove(e)))}}),l.tileLayer=function(t,e){return new l.TileLayer(t,e)},l.TileLayer.WMS=l.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=l.extend({},this.defaultWmsParams);for(var i in e)i in this.options||(n[i]=e[i]);e=l.setOptions(this,e),n.width=n.height=e.tileSize*(e.detectRetina&&l.Browser.retina?2:1),this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,l.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),i=this._crs.project(e.getSouthEast()),o=(this._wmsVersion>=1.3&&this._crs===l.CRS.EPSG4326?[i.y,n.x,n.y,i.x]:[n.x,i.y,i.x,n.y]).join(","),r=l.TileLayer.prototype.getTileUrl.call(this,t);return r+l.Util.getParamString(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,e){return l.extend(this.wmsParams,t),e||this.redraw(),this}}),l.tileLayer.wms=function(t,e){return new l.TileLayer.WMS(t,e)},l.ImageOverlay=l.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(t,e,n){this._url=t,this._bounds=l.latLngBounds(e),l.setOptions(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(l.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){l.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&l.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&l.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=l.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=l.Util.falseFn,t.onmousemove=l.Util.falseFn,t.onload=l.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;l.DomUtil.setTransform(this._image,n,e)},_reset:function(){var t=this._image,e=new l.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();l.DomUtil.setPosition(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){l.DomUtil.setOpacity(this._image,this.options.opacity)}}),l.imageOverlay=function(t,e,n){return new l.ImageOverlay(t,e,n)},l.Icon=l.Class.extend({initialize:function(t){l.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var o=l.point(i),r=l.point("shadow"===e&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||a.createElement("img")).src=t,e},_getIconUrl:function(t){return l.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),l.icon=function(t){return new l.Icon(t)},l.Icon.Default=l.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return l.Icon.Default.imagePath||(l.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||l.Icon.Default.imagePath)+l.Icon.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=l.DomUtil.create("div","leaflet-default-icon-path",a.body),e=l.DomUtil.getStyle(t,"background-image")||l.DomUtil.getStyle(t,"backgroundImage");return a.body.removeChild(t),0===e.indexOf("url")?e.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),l.Marker=l.Layer.extend({options:{icon:new l.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,e){l.setOptions(this,e),this._latlng=l.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=l.latLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),t.alt&&(n.alt=t.alt)),l.DomUtil.addClass(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(l.DomUtil.addClass(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),l.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&l.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){l.DomUtil.setPosition(this._icon,t),this._shadow&&l.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(l.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),l.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new l.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;l.DomUtil.setOpacity(this._icon,t),this._shadow&&l.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),l.marker=function(t,e){return new l.Marker(t,e)},l.DivIcon=l.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:a.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=l.point(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),l.divIcon=function(t){return new l.DivIcon(t)},l.DivOverlay=l.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){l.setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&l.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&l.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(l.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(l.bind(l.DomUtil.remove,l.DomUtil,this._container),200)):l.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=l.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&l.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&l.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=l.point(this.options.offset),n=this._getAnchor();this._zoomAnimated?l.DomUtil.setPosition(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),l.Popup=l.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){l.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof l.Path||this._source.on("preclick",l.DomEvent.stopPropagation))},onRemove:function(t){l.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof l.Path||this._source.off("preclick",l.DomEvent.stopPropagation))},getEvents:function(){var t=l.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=l.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var n=this._closeButton=l.DomUtil.create("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",l.DomEvent.on(n,"click",this._onCloseButtonClick,this)}var i=this._wrapper=l.DomUtil.create("div",t+"-content-wrapper",e);this._contentNode=l.DomUtil.create("div",t+"-content",i),l.DomEvent.disableClickPropagation(i).disableScrollPropagation(this._contentNode).on(i,"contextmenu",l.DomEvent.stopPropagation),this._tipContainer=l.DomUtil.create("div",t+"-tip-container",e),this._tip=l.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";o&&i>o?(e.height=o+"px",l.DomUtil.addClass(t,r)):l.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();l.DomUtil.setPosition(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(l.DomUtil.getStyle(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,o=new l.Point(this._containerLeft,-n-this._containerBottom);o._add(l.DomUtil.getPosition(this._container));var r=t.layerPointToContainerPoint(o),a=l.point(this.options.autoPanPadding),s=l.point(this.options.autoPanPaddingTopLeft||a),u=l.point(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),d=0,h=0;r.x+i+u.x>c.x&&(d=r.x+i-c.x+u.x),r.x-d-s.x<0&&(d=r.x-s.x),r.y+n+u.y>c.y&&(h=r.y+n-c.y+u.y),r.y-h-s.y<0&&(h=r.y-s.y),(d||h)&&t.fire("autopanstart").panBy([d,h])}},_onCloseButtonClick:function(t){this._close(),l.DomEvent.stop(t)},_getAnchor:function(){return l.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),l.popup=function(t,e){return new l.Popup(t,e)},l.Map.mergeOptions({closePopupOnClick:!0}),l.Map.include({openPopup:function(t,e,n){return t instanceof l.Popup||(t=new l.Popup(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),l.Layer.include({bindPopup:function(t,e){return t instanceof l.Popup?(l.setOptions(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new l.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof l.Layer||(e=t,t=this),t instanceof l.FeatureGroup)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map)return l.DomEvent.stop(t),e instanceof l.Path?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),l.Tooltip=l.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){l.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){l.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=l.DivOverlay.prototype.getEvents.call(this);return l.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=l.DomUtil.create("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),r=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,u=l.point(this.options.offset),c=this._getAnchor();"top"===r?t=t.add(l.point(-a/2+u.x,-s+u.y+c.y,!0)):"bottom"===r?t=t.subtract(l.point(a/2-u.x,-u.y,!0)):"center"===r?t=t.subtract(l.point(a/2+u.x,s/2-c.y+u.y,!0)):"right"===r||"auto"===r&&o.x<i.x?(r="right",t=t.add(l.point(u.x+c.x,c.y-s/2+u.y,!0))):(r="left",t=t.subtract(l.point(a+c.x-u.x,s/2-c.y-u.y,!0))),l.DomUtil.removeClass(n,"leaflet-tooltip-right"),l.DomUtil.removeClass(n,"leaflet-tooltip-left"),l.DomUtil.removeClass(n,"leaflet-tooltip-top"),l.DomUtil.removeClass(n,"leaflet-tooltip-bottom"),l.DomUtil.addClass(n,"leaflet-tooltip-"+r),l.DomUtil.setPosition(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&l.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return l.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),l.tooltip=function(t,e){return new l.Tooltip(t,e)},l.Map.include({openTooltip:function(t,e,n){return t instanceof l.Tooltip||(t=new l.Tooltip(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),l.Layer.include({bindTooltip:function(t,e){return t instanceof l.Tooltip?(l.setOptions(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=l.tooltip(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),l.Browser.touch&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof l.Layer||(e=t,t=this),t instanceof l.FeatureGroup)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(l.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(l.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:s)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}}),l.LayerGroup=l.Layer.extend({initialize:function(t){var e,n;if(this._layers={},t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return l.stamp(t)}}),l.layerGroup=function(t){return new l.LayerGroup(t)},l.FeatureGroup=l.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),l.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),l.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new l.LatLngBounds;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),l.featureGroup=function(t){return new l.FeatureGroup(t)},l.Renderer=l.Layer.extend({options:{padding:.1},initialize:function(t){l.setOptions(this,t),l.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&l.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){l.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=l.DomUtil.getPosition(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=this._map.project(t,e).subtract(r),s=o.multiplyBy(-n).add(i).add(o).subtract(a);l.Browser.any3d?l.DomUtil.setTransform(this._container,s,n):l.DomUtil.setPosition(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new l.Bounds(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),l.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&l.canvas()||l.svg()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||t===s)return!1;var e=this._paneRenderers[t];return e===s&&(e=l.SVG&&l.svg({pane:t})||l.Canvas&&l.canvas({pane:t}),this._paneRenderers[t]=e),e}}),l.Path=l.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return l.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(l.Browser.touch?10:0)}}),l.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,i=new(typeof Uint8Array!=s+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,this._simplifyDPStep(t,i,e,0,n-1);var o,r=[];for(o=0;o<n;o++)i[o]&&r.push(t[o]);return r},_simplifyDPStep:function(t,e,n,i,o){var r,a,s,l=0;for(a=i+1;a<=o-1;a++)(s=this._sqClosestPointOnSegment(t[a],t[i],t[o],!0))>l&&(r=a,l=s);l>n&&(e[r]=1,this._simplifyDPStep(t,e,n,i,r),this._simplifyDPStep(t,e,n,r,o))},_reducePoints:function(t,e){for(var n=[t[0]],i=1,o=0,r=t.length;i<r;i++)this._sqDist(t[i],t[o])>e&&(n.push(t[i]),o=i);return o<r-1&&n.push(t[r-1]),n},clipSegment:function(t,e,n,i,o){var r,a,s,l=i?this._lastCode:this._getBitCode(t,n),u=this._getBitCode(e,n);for(this._lastCode=u;;){if(!(l|u))return[t,e];if(l&u)return!1;r=l||u,a=this._getEdgeIntersection(t,e,r,n,o),s=this._getBitCode(a,n),r===l?(t=a,l=s):(e=a,u=s)}},_getEdgeIntersection:function(t,e,n,i,o){var r,a,s=e.x-t.x,u=e.y-t.y,c=i.min,d=i.max;return 8&n?(r=t.x+s*(d.y-t.y)/u,a=d.y):4&n?(r=t.x+s*(c.y-t.y)/u,a=c.y):2&n?(r=d.x,a=t.y+u*(d.x-t.x)/s):1&n&&(r=c.x,a=t.y+u*(c.x-t.x)/s),new l.Point(r,a,o)},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},_sqClosestPointOnSegment:function(t,e,n,i){var o,r=e.x,a=e.y,s=n.x-r,u=n.y-a,c=s*s+u*u;return c>0&&((o=((t.x-r)*s+(t.y-a)*u)/c)>1?(r=n.x,a=n.y):o>0&&(r+=s*o,a+=u*o)),s=t.x-r,u=t.y-a,i?s*s+u*u:new l.Point(r,a)}},l.Polyline=l.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){l.setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,o=null,r=l.LineUtil._sqClosestPointOnSegment,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],c=1,d=u.length;c<d;c++){var h=r(t,e=u[c-1],n=u[c],!0);h<i&&(i=h,o=r(t,e,n))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,i=0;t<l-1;t++)if(o=s[t],r=s[t+1],(i+=n=o.distanceTo(r))>e)return a=(i-e)/n,this._map.layerPointToLatLng([r.x-a*(r.x-o.x),r.y-a*(r.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=l.latLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new l.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return l.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=l.Polyline._flat(t),i=0,o=t.length;i<o;i++)n?(e[i]=l.latLng(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new l.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new l.Point(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var i,o,r=t[0]instanceof l.LatLng,a=t.length;if(r){for(o=[],i=0;i<a;i++)o[i]=this._map.latLngToLayerPoint(t[i]),n.extend(o[i]);e.push(o)}else for(i=0;i<a;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,n,i,o,r,a,s,u=this._parts;for(e=0,i=0,o=this._rings.length;e<o;e++)for(n=0,r=(s=this._rings[e]).length;n<r-1;n++)(a=l.LineUtil.clipSegment(s[n],s[n+1],t,n,!0))&&(u[i]=u[i]||[],u[i].push(a[0]),a[1]===s[n+1]&&n!==r-2||(u[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=l.LineUtil.simplify(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),l.polyline=function(t,e){return new l.Polyline(t,e)},l.Polyline._flat=function(t){return!l.Util.isArray(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]},l.PolyUtil={},l.PolyUtil.clipPolygon=function(t,e,n){var i,o,r,a,s,u,c,d,h,f=[1,4,2,8],p=l.LineUtil;for(o=0,c=t.length;o<c;o++)t[o]._code=p._getBitCode(t[o],e);for(a=0;a<4;a++){for(d=f[a],i=[],o=0,r=(c=t.length)-1;o<c;r=o++)s=t[o],u=t[r],s._code&d?u._code&d||((h=p._getEdgeIntersection(u,s,d,e,n))._code=p._getBitCode(h,e),i.push(h)):(u._code&d&&((h=p._getEdgeIntersection(u,s,d,e,n))._code=p._getBitCode(h,e),i.push(h)),i.push(s));t=i}return t},l.Polygon=l.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,a,s,l,u=this._rings[0],c=u.length;if(!c)return null;for(r=a=s=0,t=0,e=c-1;t<c;e=t++)n=u[t],i=u[e],o=n.y*i.x-i.y*n.x,a+=(n.x+i.x)*o,s+=(n.y+i.y)*o,r+=3*o;return l=0===r?u[0]:[a/r,s/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=l.Polyline.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof l.LatLng&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){l.Polyline.prototype._setLatLngs.call(this,t),l.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return l.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new l.Point(e,e);if(t=new l.Bounds(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var i,o=0,r=this._rings.length;o<r;o++)(i=l.PolyUtil.clipPolygon(this._rings[o],t,!0)).length&&this._parts.push(i)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),l.polygon=function(t,e){return new l.Polygon(t,e)},l.Rectangle=l.Polygon.extend({initialize:function(t,e){l.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=l.latLngBounds(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),l.rectangle=function(t,e){return new l.Rectangle(t,e)},l.CircleMarker=l.Path.extend({options:{fill:!0,radius:10},initialize:function(t,e){l.setOptions(this,e),this._latlng=l.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=l.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return l.Path.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new l.Bounds(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),l.circleMarker=function(t,e){return new l.CircleMarker(t,e)},l.Circle=l.CircleMarker.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=l.extend({},n,{radius:e})),l.setOptions(this,e),this._latlng=l.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new l.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:l.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===l.CRS.Earth.distance){var o=Math.PI/180,r=this._mRadius/l.CRS.Earth.R/o,a=n.project([e+r,t]),s=n.project([e-r,t]),u=a.add(s).divideBy(2),c=n.unproject(u).lat,d=Math.acos((Math.cos(r*o)-Math.sin(e*o)*Math.sin(c*o))/(Math.cos(e*o)*Math.cos(c*o)))/o;(isNaN(d)||0===d)&&(d=r/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(d)?0:Math.max(Math.round(u.x-n.project([c,t-d]).x),1),this._radiusY=Math.max(Math.round(u.y-a.y),1)}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),l.circle=function(t,e,n){return new l.Circle(t,e,n)},l.SVG=l.Renderer.extend({getEvents:function(){var t=l.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=l.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=l.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){l.Renderer.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),l.DomUtil.setPosition(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=l.SVG.create("path");t.options.className&&l.DomUtil.addClass(e,t.options.className),t.options.interactive&&l.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t),this._layers[l.stamp(t)]=t},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){l.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path),delete this._layers[l.stamp(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,l.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,n=t._radius,i="a"+n+","+(t._radiusY||n)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){l.DomUtil.toFront(t._path)},_bringToBack:function(t){l.DomUtil.toBack(t._path)}}),l.extend(l.SVG,{create:function(t){return a.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,e){var n,i,o,r,a,s,u="";for(n=0,o=t.length;n<o;n++){for(i=0,r=(a=t[n]).length;i<r;i++)s=a[i],u+=(i?"L":"M")+s.x+" "+s.y;u+=e?l.Browser.svg?"z":"x":""}return u||"M0 0"}}),l.Browser.svg=!(!a.createElementNS||!l.SVG.create("svg").createSVGRect),l.svg=function(t){return l.Browser.svg||l.Browser.vml?new l.SVG(t):null},l.Browser.vml=!l.Browser.svg&&function(){try{var t=a.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),l.SVG.include(l.Browser.vml?{_initContainer:function(){this._container=l.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(l.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=l.SVG.create("shape");l.DomUtil.addClass(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=l.SVG.create("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[l.stamp(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;l.DomUtil.remove(e),t.removeInteractiveTarget(e),delete this._layers[l.stamp(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,o=t._container;o.stroked=!!i.stroke,o.filled=!!i.fill,i.stroke?(e||(e=t._stroke=l.SVG.create("stroke")),o.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=l.Util.isArray(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(o.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=l.SVG.create("fill")),o.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(o.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){l.DomUtil.toFront(t._container)},_bringToBack:function(t){l.DomUtil.toBack(t._container)}}:{}),l.Browser.vml&&(l.SVG.create=function(){try{return a.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return a.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return a.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),l.Canvas=l.Renderer.extend({getEvents:function(){var t=l.Renderer.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){l.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=a.createElement("canvas");l.DomEvent.on(t,"mousemove",l.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},l.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=l.Browser.retina?2:1;l.DomUtil.setPosition(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",l.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){l.Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[l.stamp(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[l.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),i=[];for(e=0;e<n.length;e++)i.push(Number(n[e]));t.options._dashArray=i}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||l.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(t){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new l.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,o,r,a=t._parts,s=a.length,l=this._ctx;if(s){for(this._drawnLayers[t._leaflet_id]=t,l.beginPath(),l.setLineDash&&l.setLineDash(t.options&&t.options._dashArray||[]),n=0;n<s;n++){for(i=0,o=a[n].length;i<o;i++)r=a[n][i],l[i?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=t._radius,o=(t._radiusY||i)/i;this._drawnLayers[t._leaflet_id]=t,1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(e.x,e.y/o,i,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(l.DomEvent._fakeStop(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(l.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,i,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(l.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),l.Browser.canvas=!!a.createElement("canvas").getContext,l.canvas=function(t){return l.Browser.canvas?new l.Canvas(t):null},l.Polyline.prototype._containsPoint=function(t,e){var n,i,o,r,a,s,u=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(n=0,r=this._parts.length;n<r;n++)for(i=0,o=(a=(s=this._parts[n]).length)-1;i<a;o=i++)if((e||0!==i)&&l.LineUtil.pointToSegmentDistance(t,s[o],s[i])<=u)return!0;return!1},l.Polygon.prototype._containsPoint=function(t){var e,n,i,o,r,a,s,u,c=!1;if(!this._pxBounds.contains(t))return!1;for(o=0,s=this._parts.length;o<s;o++)for(r=0,a=(u=(e=this._parts[o]).length)-1;r<u;a=r++)n=e[r],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c||l.Polyline.prototype._containsPoint.call(this,t,!0)},l.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},l.GeoJSON=l.FeatureGroup.extend({initialize:function(t,e){l.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=l.Util.isArray(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)((i=o[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=l.GeoJSON.geometryToLayer(t,r);return a?(a.feature=l.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=l.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),l.extend(l.GeoJSON,{geometryToLayer:function(t,e){var n,i,o,r,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],c=e&&e.pointToLayer,d=e&&e.coordsToLatLng||this.coordsToLatLng;if(!s&&!a)return null;switch(a.type){case"Point":return n=d(s),c?c(t,n):new l.Marker(n);case"MultiPoint":for(o=0,r=s.length;o<r;o++)n=d(s[o]),u.push(c?c(t,n):new l.Marker(n));return new l.FeatureGroup(u);case"LineString":case"MultiLineString":return i=this.coordsToLatLngs(s,"LineString"===a.type?0:1,d),new l.Polyline(i,e);case"Polygon":case"MultiPolygon":return i=this.coordsToLatLngs(s,"Polygon"===a.type?1:2,d),new l.Polygon(i,e);case"GeometryCollection":for(o=0,r=a.geometries.length;o<r;o++){var h=this.geometryToLayer({geometry:a.geometries[o],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new l.FeatureGroup(u);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new l.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){for(var i,o=[],r=0,a=t.length;r<a;r++)i=e?this.coordsToLatLngs(t[r],e-1,n):(n||this.coordsToLatLng)(t[r]),o.push(i);return o},latLngToCoords:function(t){return t.alt!==s?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,e,n){for(var i=[],o=0,r=t.length;o<r;o++)i.push(e?l.GeoJSON.latLngsToCoords(t[o],e-1,n):l.GeoJSON.latLngToCoords(t[o]));return!e&&n&&i.push(i[0]),i},getFeature:function(t,e){return t.feature?l.extend({},t.feature,{geometry:e}):l.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var d={toGeoJSON:function(){return l.GeoJSON.getFeature(this,{type:"Point",coordinates:l.GeoJSON.latLngToCoords(this.getLatLng())})}};l.Marker.include(d),l.Circle.include(d),l.CircleMarker.include(d),l.Polyline.prototype.toGeoJSON=function(){var t=!l.Polyline._flat(this._latlngs),e=l.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return l.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:e})},l.Polygon.prototype.toGeoJSON=function(){var t=!l.Polyline._flat(this._latlngs),e=t&&!l.Polyline._flat(this._latlngs[0]),n=l.GeoJSON.latLngsToCoords(this._latlngs,e?2:t?1:0,!0);return t||(n=[n]),l.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"Polygon",coordinates:n})},l.LayerGroup.include({toMultiPoint:function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),l.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint();var e="GeometryCollection"===t,n=[];return this.eachLayer(function(t){if(t.toGeoJSON){var i=t.toGeoJSON();n.push(e?i.geometry:l.GeoJSON.asFeature(i))}}),e?l.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}}),l.geoJSON=function(t,e){return new l.GeoJSON(t,e)},l.geoJson=l.geoJSON,l.Draggable=l.Evented.extend({options:{clickTolerance:3},statics:{START:l.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e,n){this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(l.DomEvent.on(this._dragStartTarget,l.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(l.Draggable._dragging===this&&this.finishDrag(),l.DomEvent.off(this._dragStartTarget,l.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!l.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(l.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(l.Draggable._dragging=this,this._preventOutline&&l.DomUtil.preventOutline(this._element),l.DomUtil.disableImageDrag(),l.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new l.Point(e.clientX,e.clientY),l.DomEvent.on(a,l.Draggable.MOVE[t.type],this._onMove,this).on(a,l.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new l.Point(e.clientX,e.clientY).subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(l.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=l.DomUtil.getPosition(this._element).subtract(n),l.DomUtil.addClass(a.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,r.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),l.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,l.Util.cancelAnimFrame(this._animRequest),this._lastEvent=t,this._animRequest=l.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),l.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in l.DomUtil.removeClass(a.body,"leaflet-dragging"),this._lastTarget&&(l.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),l.Draggable.MOVE)l.DomEvent.off(a,l.Draggable.MOVE[t],this._onMove,this).off(a,l.Draggable.END[t],this._onUp,this);l.DomUtil.enableImageDrag(),l.DomUtil.enableTextSelection(),this._moved&&this._moving&&(l.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,l.Draggable._dragging=!1}}),l.Handler=l.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),l.Map.mergeOptions({dragging:!0,inertia:!l.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),l.Map.Drag=l.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new l.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}l.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){l.DomUtil.removeClass(this._map._container,"leaflet-grab"),l.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=l.latLngBounds(this._map.options.maxBounds);this._offsetLimit=l.bounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,r=(i+e+n)%t-e-n,a=Math.abs(o+n)<Math.abs(r+n)?o:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=o.multiplyBy(a/r),u=s.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,u),d=s.multiplyBy(c/u),h=c/(n.inertiaDeceleration*a),f=d.multiplyBy(-h/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),l.Util.requestAnimFrame(function(){e.panBy(f,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),l.Map.addInitHook("addHandler","dragging",l.Map.Drag),l.Map.mergeOptions({doubleClickZoom:!0}),l.Map.DoubleClickZoom=l.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,o=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}}),l.Map.addInitHook("addHandler","doubleClickZoom",l.Map.DoubleClickZoom),l.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),l.Map.ScrollWheelZoom=l.Handler.extend({addHooks:function(){l.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){l.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=l.DomEvent.getWheelDelta(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l.bind(this._performZoom,this),i),l.DomEvent.stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,r=n?Math.ceil(o/n)*n:o,a=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}}),l.Map.addInitHook("addHandler","scrollWheelZoom",l.Map.ScrollWheelZoom),l.extend(l.DomEvent,{_touchstart:l.Browser.msPointer?"MSPointerDown":l.Browser.pointer?"pointerdown":"touchstart",_touchend:l.Browser.msPointer?"MSPointerUp":l.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,n){function i(t){var e;if(l.Browser.pointer){if(!l.Browser.edge||"mouse"===t.pointerType)return;e=l.DomEvent._pointersCount}else e=t.touches.length;if(!(e>1)){var n=Date.now(),i=n-(r||n);a=t.touches?t.touches[0]:t,s=i>0&&i<=u,r=n}}function o(t){if(s&&!a.cancelBubble){if(l.Browser.pointer){if(!l.Browser.edge||"mouse"===t.pointerType)return;var n,i,o={};for(i in a)n=a[i],o[i]=n&&n.bind?n.bind(a):n;a=o}a.type="dblclick",e(a),r=null}}var r,a,s=!1,u=250,c="_leaflet_",d=this._touchstart,h=this._touchend;return t[c+d+n]=i,t[c+h+n]=o,t[c+"dblclick"+n]=e,t.addEventListener(d,i,!1),t.addEventListener(h,o,!1),t.addEventListener("dblclick",e,!1),this},removeDoubleTapListener:function(t,e){var n="_leaflet_",i=t[n+this._touchstart+e],o=t[n+this._touchend+e],r=t[n+"dblclick"+e];return t.removeEventListener(this._touchstart,i,!1),t.removeEventListener(this._touchend,o,!1),l.Browser.edge||t.removeEventListener("dblclick",r,!1),this}}),l.extend(l.DomEvent,{POINTER_DOWN:l.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:l.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:l.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:l.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,e,n,i){return"touchstart"===e?this._addPointerStart(t,n,i):"touchmove"===e?this._addPointerMove(t,n,i):"touchend"===e&&this._addPointerEnd(t,n,i),this},removePointerListener:function(t,e,n){var i=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(this.POINTER_DOWN,i,!1):"touchmove"===e?t.removeEventListener(this.POINTER_MOVE,i,!1):"touchend"===e&&(t.removeEventListener(this.POINTER_UP,i,!1),t.removeEventListener(this.POINTER_CANCEL,i,!1)),this},_addPointerStart:function(t,e,n){var i=l.bind(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;l.DomEvent.preventDefault(t)}this._handlePointer(t,e)},this);if(t["_leaflet_touchstart"+n]=i,t.addEventListener(this.POINTER_DOWN,i,!1),!this._pointerDocListener){var o=l.bind(this._globalPointerUp,this);a.documentElement.addEventListener(this.POINTER_DOWN,l.bind(this._globalPointerDown,this),!0),a.documentElement.addEventListener(this.POINTER_MOVE,l.bind(this._globalPointerMove,this),!0),a.documentElement.addEventListener(this.POINTER_UP,o,!0),a.documentElement.addEventListener(this.POINTER_CANCEL,o,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){for(var n in t.touches=[],this._pointers)t.touches.push(this._pointers[n]);t.changedTouches=[t],e(t)},_addPointerMove:function(t,e,n){var i=l.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,e)},this);t["_leaflet_touchmove"+n]=i,t.addEventListener(this.POINTER_MOVE,i,!1)},_addPointerEnd:function(t,e,n){var i=l.bind(function(t){this._handlePointer(t,e)},this);t["_leaflet_touchend"+n]=i,t.addEventListener(this.POINTER_UP,i,!1),t.addEventListener(this.POINTER_CANCEL,i,!1)}}),l.Map.mergeOptions({touchZoom:l.Browser.touch&&!l.Browser.android23,bounceAtZoomLimits:!0}),l.Map.TouchZoom=l.Handler.extend({addHooks:function(){l.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),l.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){l.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),l.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),l.DomEvent.on(a,"touchmove",this._onTouchMove,this).on(a,"touchend",this._onTouchEnd,this),l.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var r=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),l.Util.cancelAnimFrame(this._animRequest);var a=l.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=l.Util.requestAnimFrame(a,this,!0),l.DomEvent.preventDefault(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,l.Util.cancelAnimFrame(this._animRequest),l.DomEvent.off(a,"touchmove",this._onTouchMove).off(a,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}}),l.Map.addInitHook("addHandler","touchZoom",l.Map.TouchZoom),l.Map.mergeOptions({tap:!0,tapTolerance:15}),l.Map.Tap=l.Handler.extend({addHooks:function(){l.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){l.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(l.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new l.Point(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&l.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(l.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),l.DomEvent.on(a,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),l.DomEvent.off(a,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&l.DomUtil.removeClass(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new l.Point(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=a.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,r,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}),l.Browser.touch&&!l.Browser.pointer&&l.Map.addInitHook("addHandler","tap",l.Map.Tap),l.Map.mergeOptions({boxZoom:!0}),l.Map.BoxZoom=l.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){l.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){l.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){return!(!t.shiftKey||1!==t.which&&1!==t.button)&&(this._resetState(),l.DomUtil.disableTextSelection(),l.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),void l.DomEvent.on(a,{contextmenu:l.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=l.DomUtil.create("div","leaflet-zoom-box",this._container),l.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new l.Bounds(this._point,this._startPoint),n=e.getSize();l.DomUtil.setPosition(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(l.DomUtil.remove(this._box),l.DomUtil.removeClass(this._container,"leaflet-crosshair")),l.DomUtil.enableTextSelection(),l.DomUtil.enableImageDrag(),l.DomEvent.off(a,{contextmenu:l.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(l.bind(this._resetState,this),0);var e=new l.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),l.Map.addInitHook("addHandler","boxZoom",l.Map.BoxZoom),l.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),l.Map.Keyboard=l.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),l.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),l.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=a.body,e=a.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),r.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){l.DomEvent.on(a,"keydown",this._onKeyDown,this)},_removeHooks:function(){l.DomEvent.off(a,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=l.point(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n)return;i.closePopup()}l.DomEvent.stop(t)}}}),l.Map.addInitHook("addHandler","keyboard",l.Map.Keyboard),l.Handler.MarkerDrag=l.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new l.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),l.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&l.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,n=e._shadow,i=l.DomUtil.getPosition(e._icon),o=e._map.layerPointToLatLng(i);n&&l.DomUtil.setPosition(n,i),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),l.Control=l.Class.extend({options:{position:"topright"},initialize:function(t){l.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return l.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},remove:function(){return this._map?(l.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),l.control=function(t){return new l.Control(t)},l.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,o){var r=n+t+" "+n+o;e[t+o]=l.DomUtil.create("div",r,i)}var e=this._controlCorners={},n="leaflet-",i=this._controlContainer=l.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){l.DomUtil.remove(this._controlContainer)}}),l.Control.Zoom=l.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=l.DomUtil.create("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,o){var r=l.DomUtil.create("a",n,i);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),l.DomEvent.on(r,"mousedown dblclick",l.DomEvent.stopPropagation).on(r,"click",l.DomEvent.stop).on(r,"click",o,this).on(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";l.DomUtil.removeClass(this._zoomInButton,e),l.DomUtil.removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&l.DomUtil.addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&l.DomUtil.addClass(this._zoomInButton,e)}}),l.Map.mergeOptions({zoomControl:!0}),l.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new l.Control.Zoom,this.addControl(this.zoomControl))}),l.control.zoom=function(t){return new l.Control.Zoom(t)},l.Control.Attribution=l.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){l.setOptions(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=l.DomUtil.create("div","leaflet-control-attribution"),l.DomEvent&&l.DomEvent.disableClickPropagation(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}}),l.Map.mergeOptions({attributionControl:!0}),l.Map.addInitHook(function(){this.options.attributionControl&&(new l.Control.Attribution).addTo(this)}),l.control.attribution=function(t){return new l.Control.Attribution(t)},l.Control.Scale=l.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=l.DomUtil.create("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=l.DomUtil.create("div",e,n)),t.imperial&&(this._iScale=l.DomUtil.create("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,o=3.2808399*t;o>5280?(e=o/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(o),this._updateScale(this._iScale,i+" ft",i/o))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),l.control.scale=function(t){return new l.Control.Scale(t)},l.Control.Layers=l.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in l.setOptions(this,n),this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){return this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(l.stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){l.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(l.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):l.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return l.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=l.DomUtil.create("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),l.DomEvent.disableClickPropagation(e),l.Browser.touch||l.DomEvent.disableScrollPropagation(e);var i=this._form=l.DomUtil.create("form",t+"-list");n&&(this._map.on("click",this.collapse,this),l.Browser.android||l.DomEvent.on(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=l.DomUtil.create("a",t+"-toggle",e);o.href="#",o.title="Layers",l.Browser.touch?l.DomEvent.on(o,"click",l.DomEvent.stop).on(o,"click",this.expand,this):l.DomEvent.on(o,"focus",this.expand,this),l.DomEvent.on(i,"click",function(){setTimeout(l.bind(this._onInputClick,this),0)},this),n||this.expand(),this._baseLayersList=l.DomUtil.create("div",t+"-base",i),this._separator=l.DomUtil.create("div",t+"-separator",i),this._overlaysList=l.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&l.stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(l.bind(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;l.DomUtil.empty(this._baseLayersList),l.DomUtil.empty(this._overlaysList);var t,e,n,i,o=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,o+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(l.stamp(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=a.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=a.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=a.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers",i),e.layerId=l.stamp(t.layer),l.DomEvent.on(e,"click",this._onInputClick,this);var o=a.createElement("span");o.innerHTML=" "+t.name;var r=a.createElement("div");return n.appendChild(r),r.appendChild(e),r.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n,i=this._form.getElementsByTagName("input"),o=[],r=[];this._handlingClick=!0;for(var a=i.length-1;a>=0;a--)t=i[a],e=this._getLayer(t.layerId).layer,n=this._map.hasLayer(e),t.checked&&!n?o.push(e):!t.checked&&n&&r.push(e);for(a=0;a<r.length;a++)this._map.removeLayer(r[a]);for(a=0;a<o.length;a++)this._map.addLayer(o[a]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._form.getElementsByTagName("input"),i=this._map.getZoom(),o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.disabled=e.options.minZoom!==s&&i<e.options.minZoom||e.options.maxZoom!==s&&i>e.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),l.control.layers=function(t,e,n){return new l.Control.Layers(t,e,n)}}(window,document)},function(t,e,n){(function(t){function e(t,e,n){void 0===n&&(n=6371),this._lat=t,this._lon=e,this._radius=n}e.prototype.distanceTo=function(t,e){void 0===e&&(e=4);var n=this._radius,i=this._lat.toRad(),o=this._lon.toRad(),r=t._lat.toRad(),a=r-i,s=t._lon.toRad()-o,l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(i)*Math.cos(r)*Math.sin(s/2)*Math.sin(s/2);return(n*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))).toPrecisionFixed(e)},e.prototype.bearingTo=function(t){var e=this._lat.toRad(),n=t._lat.toRad(),i=(t._lon-this._lon).toRad(),o=Math.sin(i)*Math.cos(n),r=Math.cos(e)*Math.sin(n)-Math.sin(e)*Math.cos(n)*Math.cos(i);return(Math.atan2(o,r).toDeg()+360)%360},e.prototype.finalBearingTo=function(t){var e=t._lat.toRad(),n=this._lat.toRad(),i=(this._lon-t._lon).toRad(),o=Math.sin(i)*Math.cos(n),r=Math.cos(e)*Math.sin(n)-Math.sin(e)*Math.cos(n)*Math.cos(i);return(Math.atan2(o,r).toDeg()+180)%360},e.prototype.midpointTo=function(t){lat1=this._lat.toRad(),lon1=this._lon.toRad(),lat2=t._lat.toRad();var n=(t._lon-this._lon).toRad(),i=Math.cos(lat2)*Math.cos(n),o=Math.cos(lat2)*Math.sin(n);return lat3=Math.atan2(Math.sin(lat1)+Math.sin(lat2),Math.sqrt((Math.cos(lat1)+i)*(Math.cos(lat1)+i)+o*o)),lon3=lon1+Math.atan2(o,Math.cos(lat1)+i),new e(lat3.toDeg(),lon3.toDeg())},e.prototype.destinationPoint=function(t,n){n/=this._radius,t=t.toRad();var i=this._lat.toRad(),o=this._lon.toRad(),r=Math.asin(Math.sin(i)*Math.cos(n)+Math.cos(i)*Math.sin(n)*Math.cos(t)),a=o+Math.atan2(Math.sin(t)*Math.sin(n)*Math.cos(i),Math.cos(n)-Math.sin(i)*Math.sin(r));return a=(a+3*Math.PI)%(2*Math.PI)-Math.PI,isNaN(r)||isNaN(a)?null:new e(r.toDeg(),a.toDeg())},e.intersection=function(t,n,i,o){return lat1=t._lat.toRad(),lon1=t._lon.toRad(),lat2=i._lat.toRad(),lon2=i._lon.toRad(),brng13=n.toRad(),brng23=o.toRad(),dLat=lat2-lat1,dLon=lon2-lon1,dist12=2*Math.asin(Math.sqrt(Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(lat1)*Math.cos(lat2)*Math.sin(dLon/2)*Math.sin(dLon/2))),0==dist12?null:(brngA=Math.acos((Math.sin(lat2)-Math.sin(lat1)*Math.cos(dist12))/(Math.sin(dist12)*Math.cos(lat1))),isNaN(brngA)&&(brngA=0),brngB=Math.acos((Math.sin(lat1)-Math.sin(lat2)*Math.cos(dist12))/(Math.sin(dist12)*Math.cos(lat2))),Math.sin(lon2-lon1)>0?(brng12=brngA,brng21=2*Math.PI-brngB):(brng12=2*Math.PI-brngA,brng21=brngB),alpha1=(brng13-brng12+Math.PI)%(2*Math.PI)-Math.PI,alpha2=(brng21-brng23+Math.PI)%(2*Math.PI)-Math.PI,0==Math.sin(alpha1)&&0==Math.sin(alpha2)?null:Math.sin(alpha1)*Math.sin(alpha2)<0?null:(alpha3=Math.acos(-Math.cos(alpha1)*Math.cos(alpha2)+Math.sin(alpha1)*Math.sin(alpha2)*Math.cos(dist12)),dist13=Math.atan2(Math.sin(dist12)*Math.sin(alpha1)*Math.sin(alpha2),Math.cos(alpha2)+Math.cos(alpha1)*Math.cos(alpha3)),lat3=Math.asin(Math.sin(lat1)*Math.cos(dist13)+Math.cos(lat1)*Math.sin(dist13)*Math.cos(brng13)),dLon13=Math.atan2(Math.sin(brng13)*Math.sin(dist13)*Math.cos(lat1),Math.cos(dist13)-Math.sin(lat1)*Math.sin(lat3)),lon3=lon1+dLon13,lon3=(lon3+Math.PI)%(2*Math.PI)-Math.PI,new e(lat3.toDeg(),lon3.toDeg())))},e.prototype.rhumbDistanceTo=function(t){var e=this._radius,n=this._lat.toRad(),i=t._lat.toRad(),o=(t._lat-this._lat).toRad(),r=Math.abs(t._lon-this._lon).toRad(),a=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),s=isNaN(o/a)?Math.cos(n):o/a;return r>Math.PI&&(r=2*Math.PI-r),(Math.sqrt(o*o+s*s*r*r)*e).toPrecisionFixed(4)},e.prototype.rhumbBearingTo=function(t){var e=this._lat.toRad(),n=t._lat.toRad(),i=(t._lon-this._lon).toRad(),o=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(e/2+Math.PI/4));return Math.abs(i)>Math.PI&&(i=i>0?-(2*Math.PI-i):2*Math.PI+i),(Math.atan2(i,o).toDeg()+360)%360},e.prototype.rhumbDestinationPoint=function(t,n){var i=this._radius,o=parseFloat(n)/i,r=this._lat.toRad(),a=this._lon.toRad();t=t.toRad();var s=r+o*Math.cos(t),l=s-r,u=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),c=isNaN(l/u)?Math.cos(r):l/u,d=o*Math.sin(t)/c;return Math.abs(s)>Math.PI/2&&(s=s>0?Math.PI-s:-(Math.PI-s)),lon2=(a+d+3*Math.PI)%(2*Math.PI)-Math.PI,new e(s.toDeg(),lon2.toDeg())},e.prototype.lat=function(t,e){return void 0===t?this._lat:n.toLat(this._lat,t,e)},e.prototype.lon=function(t,e){return void 0===t?this._lon:n.toLon(this._lon,t,e)},e.prototype.toString=function(t,e){return void 0===t&&(t="dms"),n.toLat(this._lat,t,e)+", "+n.toLon(this._lon,t,e)},void 0===String.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180}),void 0===String.prototype.toDeg&&(Number.prototype.toDeg=function(){return 180*this/Math.PI}),void 0===Number.prototype.toPrecisionFixed&&(Number.prototype.toPrecisionFixed=function(t){var e=this<0?-this:this,n=this<0?"-":"";if(0==e){for(o="0.";t--;)o+="0";return o}var i=Math.ceil(Math.log(e)*Math.LOG10E),o=String(Math.round(e*Math.pow(10,t-i)));if(i>0){for(l=i-o.length;l-- >0;)o+="0";i<o.length&&(o=o.slice(0,i)+"."+o.slice(i))}else{for(;i++<0;)o="0"+o;o="0."+o}return n+o});var n={parseDMS:function(e){if("object"==typeof i)throw new TypeError("Geo.parseDMS - dmsStr is [DOM?] object");if(!isNaN(e))return Number(e);var n=t.trim(String(e)).replace(/^-/,"").replace(/[NSEW]$/i,"").split(/[^0-9.,]+/);if(""==n[n.length-1]&&n.splice(n.length-1),""==n)return NaN;switch(n.length){case 3:var i=n[0]/1+n[1]/60+n[2]/3600;break;case 2:i=n[0]/1+n[1]/60;break;case 1:i=n[0];/[NS]/i.test(e)&&(i="0"+i),/[0-9]{7}/.test(i)&&(i=i.slice(0,3)/1+i.slice(3,5)/60+i.slice(5)/3600);break;default:return NaN}return/^-|[WS]$/i.test(t.trim(e))&&(i=-i),Number(i)},toDMS:function(t,e,n){if("object"==typeof t)throw new TypeError("Geo.toDMS - deg is [DOM?] object");if(isNaN(t))return"";if(void 0===e&&(e="dms"),void 0===n)switch(e){case"d":n=4;break;case"dm":n=2;break;case"dms":n=0;break;default:e="dms",n=0}switch(t=Math.abs(t),e){case"d":(o=t.toFixed(n))<100&&(o="0"+o),o<10&&(o="0"+o),dms=o+"";break;case"dm":var i=(60*t).toFixed(n),o=Math.floor(i/60),r=(i%60).toFixed(n);o<100&&(o="0"+o),o<10&&(o="0"+o),r<10&&(r="0"+r),dms=o+""+r+"";break;case"dms":var a=(3600*t).toFixed(n),s=(o=Math.floor(a/3600),r=Math.floor(a/60)%60,(a%60).toFixed(n));o<100&&(o="0"+o),o<10&&(o="0"+o),r<10&&(r="0"+r),s<10&&(s="0"+s),dms=o+""+r+""+s+""}return dms},toLat:function(t,e,i){var o=n.toDMS(t,e,i);return""==o?"":o.slice(1)+(t<0?"S":"N")},toLon:function(t,e,i){var o=n.toDMS(t,e,i);return""==o?"":o+(t<0?"W":"E")},toBrng:function(t,e,i){return t=(Number(t)+360)%360,n.toDMS(t,e,i).replace("360","0")}}}).call(this,n(0))},function(t,e,n){(function(t){!function(t){t.fn.tabby=function(e){var n=t.extend({},t.fn.tabby.defaults,e),i=t.fn.tabby.pressed;return this.each(function(){$this=t(this);var e=t.meta?t.extend({},n,$this.data()):n;$this.bind("keydown",function(n){var o=t.fn.tabby.catch_kc(n);if(16==o&&(i.shft=!0),17==o&&(i.ctrl=!0,setTimeout("$.fn.tabby.pressed.ctrl = false;",1e3)),18==o&&(i.alt=!0,setTimeout("$.fn.tabby.pressed.alt = false;",1e3)),9==o&&!i.ctrl&&!i.alt)return n.preventDefault,i.last=o,setTimeout("$.fn.tabby.pressed.last = null;",0),function(e,n,i){var o=e.scrollTop;e.setSelectionRange?function(t,e,n){var i=t.selectionStart,o=t.selectionEnd;if(i==o)e?"\t"==t.value.substring(i-n.tabString.length,i)?(t.value=t.value.substring(0,i-n.tabString.length)+t.value.substring(i),t.focus(),t.setSelectionRange(i-n.tabString.length,i-n.tabString.length)):"\t"==t.value.substring(i,i+n.tabString.length)&&(t.value=t.value.substring(0,i)+t.value.substring(i+n.tabString.length),t.focus(),t.setSelectionRange(i,i)):(t.value=t.value.substring(0,i)+n.tabString+t.value.substring(i),t.focus(),t.setSelectionRange(i+n.tabString.length,i+n.tabString.length));else{var r=t.value.split("\n"),a=new Array,s=0,l=0;for(var u in r)l=s+r[u].length,a.push({start:s,end:l,selected:s<=i&&l>i||l>=o&&s<o||s>i&&l<o}),s=l+1;var c=0;for(var u in a)if(a[u].selected){var d=a[u].start+c;e&&n.tabString==t.value.substring(d,d+n.tabString.length)?(t.value=t.value.substring(0,d)+t.value.substring(d+n.tabString.length),c-=n.tabString.length):e||(t.value=t.value.substring(0,d)+n.tabString+t.value.substring(d),c+=n.tabString.length)}t.focus();var h=i+(c>0?n.tabString.length:c<0?-n.tabString.length:0),f=o+c;t.setSelectionRange(h,f)}}(e,n,i):document.selection&&function(e,n,i){var o=document.selection.createRange();if(e==o.parentElement())if(""==o.text)if(n){var r=o.getBookmark();o.moveStart("character",-i.tabString.length),i.tabString==o.text?o.text="":(o.moveToBookmark(r),o.moveEnd("character",i.tabString.length),i.tabString==o.text&&(o.text="")),o.collapse(!0),o.select()}else o.text=i.tabString,o.collapse(!1),o.select();else{var a=o.text,s=a.length,l=a.split("\r\n"),u=document.body.createTextRange();u.moveToElementText(e),u.setEndPoint("EndToStart",o);var c=u.text,d=c.split("\r\n"),h=c.length,f=document.body.createTextRange();f.moveToElementText(e),f.setEndPoint("StartToEnd",o);var p=f.text,g=document.body.createTextRange();g.moveToElementText(e),g.setEndPoint("StartToEnd",u);var m=g.text,v=t(e).html();t("#r3").text(h+" + "+s+" + "+p.length+" = "+v.length),h+m.length<v.length?(d.push(""),h+=2,n&&i.tabString==l[0].substring(0,i.tabString.length)?l[0]=l[0].substring(i.tabString.length):n||(l[0]=i.tabString+l[0])):n&&i.tabString==d[d.length-1].substring(0,i.tabString.length)?d[d.length-1]=d[d.length-1].substring(i.tabString.length):n||(d[d.length-1]=i.tabString+d[d.length-1]);for(var _=1;_<l.length;_++)n&&i.tabString==l[_].substring(0,i.tabString.length)?l[_]=l[_].substring(i.tabString.length):n||(l[_]=i.tabString+l[_]);1==d.length&&0==h&&(n&&i.tabString==l[0].substring(0,i.tabString.length)?l[0]=l[0].substring(i.tabString.length):n||(l[0]=i.tabString+l[0])),h+s+p.length<v.length&&(l.push(""),s+=2),u.text=d.join("\r\n"),o.text=l.join("\r\n");var y=document.body.createTextRange();y.moveToElementText(e),0<h?y.setEndPoint("StartToEnd",u):y.setEndPoint("StartToStart",u),y.setEndPoint("EndToEnd",o),y.select()}}(e,n,i);e.scrollTop=o}(t(n.target).get(0),i.shft,e),!1}).bind("keyup",function(e){16==t.fn.tabby.catch_kc(e)&&(i.shft=!1)}).bind("blur",function(e){9==i.last&&t(e.target).one("focus",function(t){i.last=null}).get(0).focus()})})},t.fn.tabby.catch_kc=function(t){return t.keyCode?t.keyCode:t.charCode?t.charCode:t.which},t.fn.tabby.pressed={shft:!1,ctrl:!1,alt:!1,last:null},t.fn.tabby.defaults={tabString:String.fromCharCode(9)}}(t)}).call(this,n(0))},function(t,e,n){(function(t,e){e.fn.populate=function(n,i){function o(n,o,r){o=function(t){return i.phpNaming||(t=t.replace(/\[\]$/,"")),t}(o);o=o.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/])/g,"\\$1");var a=t("[name="+o+"]",n);if(void 0==(a=t.makeArray(a))||0===a.length){if(0===(a=e("#"+o,n)).length)return!1;a=t.makeArray(a)}i.debug&&_populate.elements.push(a),elements=void 0==a.type&&a.length?a:[a];for(var s=0;s<elements.length;s++){if((a=elements[s])&&void 0!==a&&"function"!=typeof a)switch(a.type||a.tagName){case"radio":a.checked=""!=a.value&&r.toString()==a.value;case"checkbox":for(var l=r.constructor==Array?r:[r],u=0;u<l.length;u++)a.checked|=a.value==l[u];break;case"select-multiple":l=r.constructor==Array?r:[r];for(var c=0;c<a.options.length;c++)for(u=0;u<l.length;u++)a.options[c].selected|=a.options[c].value==l[u];break;case"select":case"select-one":a.value=r.toString()||r;break;case"text":case"button":case"textarea":case"submit":default:r=null==r?"":r,a.value=r}}}if(void 0===n)return this;(i=e.extend({phpNaming:!0,phpIndices:!1,noIndicesFor:[],resetForm:!0,identifier:"id",debug:!1,strutsNaming:!1},i)).phpIndices&&(i.phpNaming=!0);var r=[];return function e(n,o){if(o=o||"",void 0==n);else if(n.constructor==Object)for(var a in n){if(i.strutsNaming)var s=o+(""==o?a:"."+a);else s=o+(""==o?a:"["+a+"]");e(n[a],s)}else if(n.constructor==Array)for(var l=0;l<n.length;l++){var u=i.phpIndices?l:"";u=i.phpNaming?"["+u+"]":u,s=o,-1==t.inArray(o,i.noIndicesFor)&&(s=o+u),e(n[l],s)}else void 0==r[o]?r[o]=n:r[o].constructor!=Array?r[o]=[r[o],n]:r[o].push(n)}(n),i.debug&&(_populate={arr:r,obj:n,elements:[]}),this.each(function(){var t=this.tagName.toLowerCase();for(var e in"form"==t&&i.resetForm&&this.reset(),r)o(this,e,r[e])}),this}}).call(this,n(0),n(0))},function(t,e){t.exports="/*\n * jQuery File Upload User Interface Plugin 8.9.0\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2010, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * http://www.opensource.org/licenses/MIT\n */\n\n/*jslint nomen: true, unparam: true, regexp: true */\n/*global define, window, URL, webkitURL, FileReader */\n\n(function (factory) {\n    'use strict';\n    if (typeof define === 'function' && define.amd) {\n        // Register as an anonymous AMD module:\n        define([\n            'jquery',\n            'tmpl',\n            './jquery.fileupload-image',\n            './jquery.fileupload-audio',\n            './jquery.fileupload-video',\n            './jquery.fileupload-validate'\n        ], factory);\n    } else {\n        // Browser globals:\n        factory(\n            window.jQuery,\n            window.tmpl\n        );\n    }\n}(function ($, tmpl, loadImage) {\n    'use strict';\n\n    $.blueimp.fileupload.prototype._specialOptions.push(\n        'filesContainer',\n        'uploadTemplateId',\n        'downloadTemplateId'\n    );\n\n    // The UI version extends the file upload widget\n    // and adds complete user interface interaction:\n    $.widget('blueimp.fileupload', $.blueimp.fileupload, {\n\n        options: {\n            // By default, files added to the widget are uploaded as soon\n            // as the user clicks on the start buttons. To enable automatic\n            // uploads, set the following option to true:\n            autoUpload: false,\n            // The ID of the upload template:\n            uploadTemplateId: 'template-upload',\n            // The ID of the download template:\n            downloadTemplateId: 'template-download',\n            // The container for the list of files. If undefined, it is set to\n            // an element with class \"files\" inside of the widget element:\n            filesContainer: undefined,\n            // By default, files are appended to the files container.\n            // Set the following option to true, to prepend files instead:\n            prependFiles: false,\n            // The expected data type of the upload response, sets the dataType\n            // option of the $.ajax upload requests:\n            dataType: 'json',\n\n            // Function returning the current number of files,\n            // used by the maxNumberOfFiles validation:\n            getNumberOfFiles: function () {\n                return this.filesContainer.children().length;\n            },\n\n            // Callback to retrieve the list of files from the server response:\n            getFilesFromResponse: function (data) {\n                if (data.result && $.isArray(data.result.files)) {\n                    return data.result.files;\n                }\n                return [];\n            },\n\n            // The add callback is invoked as soon as files are added to the fileupload\n            // widget (via file input selection, drag & drop or add API call).\n            // See the basic file upload widget for more information:\n            add: function (e, data) {\n                if (e.isDefaultPrevented()) {\n                    return false;\n                }\n                var $this = $(this),\n                    that = $this.data('blueimp-fileupload') ||\n                        $this.data('fileupload'),\n                    options = that.options,\n                    files = data.files;\n                data.process(function () {\n                    return $this.fileupload('process', data);\n                }).always(function () {\n                    data.context = that._renderUpload(files).data('data', data);\n                    that._renderPreviews(data);\n                    options.filesContainer[\n                        options.prependFiles ? 'prepend' : 'append'\n                    ](data.context);\n                    that._forceReflow(data.context);\n                    that._transition(data.context).done(\n                        function () {\n                            if ((that._trigger('added', e, data) !== false) &&\n                                    (options.autoUpload || data.autoUpload) &&\n                                    data.autoUpload !== false && !data.files.error) {\n                                data.submit();\n                            }\n                        }\n                    );\n                });\n            },\n            // Callback for the start of each file upload request:\n            send: function (e, data) {\n                if (e.isDefaultPrevented()) {\n                    return false;\n                }\n                var that = $(this).data('blueimp-fileupload') ||\n                        $(this).data('fileupload');\n                if (data.context && data.dataType &&\n                        data.dataType.substr(0, 6) === 'iframe') {\n                    // Iframe Transport does not support progress events.\n                    // In lack of an indeterminate progress bar, we set\n                    // the progress to 100%, showing the full animated bar:\n                    data.context\n                        .find('.progress').addClass(\n                            !$.support.transition && 'progress-animated'\n                        )\n                        .attr('aria-valuenow', 100)\n                        .children().first().css(\n                            'width',\n                            '100%'\n                        );\n                }\n                return that._trigger('sent', e, data);\n            },\n            // Callback for successful uploads:\n            done: function (e, data) {\n                if (e.isDefaultPrevented()) {\n                    return false;\n                }\n                var that = $(this).data('blueimp-fileupload') ||\n                        $(this).data('fileupload'),\n                    getFilesFromResponse = data.getFilesFromResponse ||\n                        that.options.getFilesFromResponse,\n                    files = getFilesFromResponse(data),\n                    template,\n                    deferred;\n                if (data.context) {\n                    data.context.each(function (index) {\n                        var file = files[index] ||\n                                {error: 'Empty file upload result'};\n                        deferred = that._addFinishedDeferreds();\n                        that._transition($(this)).done(\n                            function () {\n                                var node = $(this);\n                                template = that._renderDownload([file])\n                                    .replaceAll(node);\n                                that._forceReflow(template);\n                                that._transition(template).done(\n                                    function () {\n                                        data.context = $(this);\n                                        that._trigger('completed', e, data);\n                                        that._trigger('finished', e, data);\n                                        deferred.resolve();\n                                    }\n                                );\n                            }\n                        );\n                    });\n                } else {\n                    template = that._renderDownload(files)[\n                        that.options.prependFiles ? 'prependTo' : 'appendTo'\n                    ](that.options.filesContainer);\n                    that._forceReflow(template);\n                    deferred = that._addFinishedDeferreds();\n                    that._transition(template).done(\n                        function () {\n                            data.context = $(this);\n                            that._trigger('completed', e, data);\n                            that._trigger('finished', e, data);\n                            deferred.resolve();\n                        }\n                    );\n                }\n            },\n            // Callback for failed (abort or error) uploads:\n            fail: function (e, data) {\n                if (e.isDefaultPrevented()) {\n                    return false;\n                }\n                var that = $(this).data('blueimp-fileupload') ||\n                        $(this).data('fileupload'),\n                    template,\n                    deferred;\n                if (data.context) {\n                    data.context.each(function (index) {\n                        if (data.errorThrown !== 'abort') {\n                            var file = data.files[index];\n                            file.error = file.error || data.errorThrown ||\n                                true;\n                            deferred = that._addFinishedDeferreds();\n                            that._transition($(this)).done(\n                                function () {\n                                    var node = $(this);\n                                    template = that._renderDownload([file])\n                                        .replaceAll(node);\n                                    that._forceReflow(template);\n                                    that._transition(template).done(\n                                        function () {\n                                            data.context = $(this);\n                                            that._trigger('failed', e, data);\n                                            that._trigger('finished', e, data);\n                                            deferred.resolve();\n                                        }\n                                    );\n                                }\n                            );\n                        } else {\n                            deferred = that._addFinishedDeferreds();\n                            that._transition($(this)).done(\n                                function () {\n                                    $(this).remove();\n                                    that._trigger('failed', e, data);\n                                    that._trigger('finished', e, data);\n                                    deferred.resolve();\n                                }\n                            );\n                        }\n                    });\n                } else if (data.errorThrown !== 'abort') {\n                    data.context = that._renderUpload(data.files)[\n                        that.options.prependFiles ? 'prependTo' : 'appendTo'\n                    ](that.options.filesContainer)\n                        .data('data', data);\n                    that._forceReflow(data.context);\n                    deferred = that._addFinishedDeferreds();\n                    that._transition(data.context).done(\n                        function () {\n                            data.context = $(this);\n                            that._trigger('failed', e, data);\n                            that._trigger('finished', e, data);\n                            deferred.resolve();\n                        }\n                    );\n                } else {\n                    that._trigger('failed', e, data);\n                    that._trigger('finished', e, data);\n                    that._addFinishedDeferreds().resolve();\n                }\n            },\n            // Callback for upload progress events:\n            progress: function (e, data) {\n                if (e.isDefaultPrevented()) {\n                    return false;\n                }\n                var progress = Math.floor(data.loaded / data.total * 100);\n                if (data.context) {\n                    data.context.each(function () {\n                        $(this).find('.progress')\n                            .attr('aria-valuenow', progress)\n                            .children().first().css(\n                                'width',\n                                progress + '%'\n                            );\n                    });\n                }\n            },\n            // Callback for global upload progress events:\n            progressall: function (e, data) {\n                if (e.isDefaultPrevented()) {\n                    return false;\n                }\n                var $this = $(this),\n                    progress = Math.floor(data.loaded / data.total * 100),\n                    globalProgressNode = $this.find('.fileupload-progress'),\n                    extendedProgressNode = globalProgressNode\n                        .find('.progress-extended');\n                if (extendedProgressNode.length) {\n                    extendedProgressNode.html(\n                        ($this.data('blueimp-fileupload') || $this.data('fileupload'))\n                            ._renderExtendedProgress(data)\n                    );\n                }\n                globalProgressNode\n                    .find('.progress')\n                    .attr('aria-valuenow', progress)\n                    .children().first().css(\n                        'width',\n                        progress + '%'\n                    );\n            },\n            // Callback for uploads start, equivalent to the global ajaxStart event:\n            start: function (e) {\n                if (e.isDefaultPrevented()) {\n                    return false;\n                }\n                var that = $(this).data('blueimp-fileupload') ||\n                        $(this).data('fileupload');\n                that._resetFinishedDeferreds();\n                that._transition($(this).find('.fileupload-progress')).done(\n                    function () {\n                        that._trigger('started', e);\n                    }\n                );\n            },\n            // Callback for uploads stop, equivalent to the global ajaxStop event:\n            stop: function (e) {\n                if (e.isDefaultPrevented()) {\n                    return false;\n                }\n                var that = $(this).data('blueimp-fileupload') ||\n                        $(this).data('fileupload'),\n                    deferred = that._addFinishedDeferreds();\n                $.when.apply($, that._getFinishedDeferreds())\n                    .done(function () {\n                        that._trigger('stopped', e);\n                    });\n                that._transition($(this).find('.fileupload-progress')).done(\n                    function () {\n                        $(this).find('.progress')\n                            .attr('aria-valuenow', '0')\n                            .children().first().css('width', '0%');\n                        $(this).find('.progress-extended').html('&nbsp;');\n                        deferred.resolve();\n                    }\n                );\n            },\n            processstart: function (e) {\n                if (e.isDefaultPrevented()) {\n                    return false;\n                }\n                $(this).addClass('fileupload-processing');\n            },\n            processstop: function (e) {\n                if (e.isDefaultPrevented()) {\n                    return false;\n                }\n                $(this).removeClass('fileupload-processing');\n            },\n            // Callback for file deletion:\n            destroy: function (e, data) {\n                if (e.isDefaultPrevented()) {\n                    return false;\n                }\n                var that = $(this).data('blueimp-fileupload') ||\n                        $(this).data('fileupload'),\n                    removeNode = function () {\n                        that._transition(data.context).done(\n                            function () {\n                                $(this).remove();\n                                that._trigger('destroyed', e, data);\n                            }\n                        );\n                    };\n                if (data.url) {\n                    data.dataType = data.dataType || that.options.dataType;\n                    $.ajax(data).done(removeNode);\n                } else {\n                    removeNode();\n                }\n            }\n        },\n\n        _resetFinishedDeferreds: function () {\n            this._finishedUploads = [];\n        },\n\n        _addFinishedDeferreds: function (deferred) {\n            if (!deferred) {\n                deferred = $.Deferred();\n            }\n            this._finishedUploads.push(deferred);\n            return deferred;\n        },\n\n        _getFinishedDeferreds: function () {\n            return this._finishedUploads;\n        },\n\n        // Link handler, that allows to download files\n        // by drag & drop of the links to the desktop:\n        _enableDragToDesktop: function () {\n            var link = $(this),\n                url = link.prop('href'),\n                name = link.prop('download'),\n                type = 'application/octet-stream';\n            link.bind('dragstart', function (e) {\n                try {\n                    e.originalEvent.dataTransfer.setData(\n                        'DownloadURL',\n                        [type, name, url].join(':')\n                    );\n                } catch (ignore) {}\n            });\n        },\n\n        _formatFileSize: function (bytes) {\n            if (typeof bytes !== 'number') {\n                return '';\n            }\n            if (bytes >= 1000000000) {\n                return (bytes / 1000000000).toFixed(2) + ' GB';\n            }\n            if (bytes >= 1000000) {\n                return (bytes / 1000000).toFixed(2) + ' MB';\n            }\n            return (bytes / 1000).toFixed(2) + ' KB';\n        },\n\n        _formatBitrate: function (bits) {\n            if (typeof bits !== 'number') {\n                return '';\n            }\n            if (bits >= 1000000000) {\n                return (bits / 1000000000).toFixed(2) + ' Gbit/s';\n            }\n            if (bits >= 1000000) {\n                return (bits / 1000000).toFixed(2) + ' Mbit/s';\n            }\n            if (bits >= 1000) {\n                return (bits / 1000).toFixed(2) + ' kbit/s';\n            }\n            return bits.toFixed(2) + ' bit/s';\n        },\n\n        _formatTime: function (seconds) {\n            var date = new Date(seconds * 1000),\n                days = Math.floor(seconds / 86400);\n            days = days ? days + 'd ' : '';\n            return days +\n                ('0' + date.getUTCHours()).slice(-2) + ':' +\n                ('0' + date.getUTCMinutes()).slice(-2) + ':' +\n                ('0' + date.getUTCSeconds()).slice(-2);\n        },\n\n        _formatPercentage: function (floatValue) {\n            return (floatValue * 100).toFixed(2) + ' %';\n        },\n\n        _renderExtendedProgress: function (data) {\n            return this._formatBitrate(data.bitrate) + ' | ' +\n                this._formatTime(\n                    (data.total - data.loaded) * 8 / data.bitrate\n                ) + ' | ' +\n                this._formatPercentage(\n                    data.loaded / data.total\n                ) + ' | ' +\n                this._formatFileSize(data.loaded) + ' / ' +\n                this._formatFileSize(data.total);\n        },\n\n        _renderTemplate: function (func, files) {\n            if (!func) {\n                return $();\n            }\n            var result = func({\n                files: files,\n                formatFileSize: this._formatFileSize,\n                options: this.options\n            });\n            if (result instanceof $) {\n                return result;\n            }\n            return $(this.options.templatesContainer).html(result).children();\n        },\n\n        _renderPreviews: function (data) {\n            data.context.find('.preview').each(function (index, elm) {\n                $(elm).append(data.files[index].preview);\n            });\n        },\n\n        _renderUpload: function (files) {\n            return this._renderTemplate(\n                this.options.uploadTemplate,\n                files\n            );\n        },\n\n        _renderDownload: function (files) {\n            return this._renderTemplate(\n                this.options.downloadTemplate,\n                files\n            ).find('a[download]').each(this._enableDragToDesktop).end();\n        },\n\n        _startHandler: function (e) {\n            e.preventDefault();\n            var button = $(e.currentTarget),\n                template = button.closest('.template-upload'),\n                data = template.data('data');\n            button.prop('disabled', true);\n            if (data && data.submit) {\n                data.submit();\n            }\n        },\n\n        _cancelHandler: function (e) {\n            e.preventDefault();\n            var template = $(e.currentTarget)\n                    .closest('.template-upload,.template-download'),\n                data = template.data('data') || {};\n            if (!data.jqXHR) {\n                data.context = data.context || template;\n                data.errorThrown = 'abort';\n                this._trigger('fail', e, data);\n            } else {\n                data.jqXHR.abort();\n            }\n        },\n\n        _deleteHandler: function (e) {\n            e.preventDefault();\n            var button = $(e.currentTarget);\n            this._trigger('destroy', e, $.extend({\n                context: button.closest('.template-download'),\n                type: 'DELETE'\n            }, button.data()));\n        },\n\n        _forceReflow: function (node) {\n            return $.support.transition && node.length &&\n                node[0].offsetWidth;\n        },\n\n        _transition: function (node) {\n            var dfd = $.Deferred();\n            if ($.support.transition && node.hasClass('fade') && node.is(':visible')) {\n                node.bind(\n                    $.support.transition.end,\n                    function (e) {\n                        // Make sure we don't respond to other transitions events\n                        // in the container element, e.g. from button elements:\n                        if (e.target === node[0]) {\n                            node.unbind($.support.transition.end);\n                            dfd.resolveWith(node);\n                        }\n                    }\n                ).toggleClass('in');\n            } else {\n                node.toggleClass('in');\n                dfd.resolveWith(node);\n            }\n            return dfd;\n        },\n\n        _initButtonBarEventHandlers: function () {\n            var fileUploadButtonBar = this.element.find('.fileupload-buttonbar'),\n                filesList = this.options.filesContainer;\n            this._on(fileUploadButtonBar.find('.start'), {\n                click: function (e) {\n                    e.preventDefault();\n                    filesList.find('.start').click();\n                }\n            });\n            this._on(fileUploadButtonBar.find('.cancel'), {\n                click: function (e) {\n                    e.preventDefault();\n                    filesList.find('.cancel').click();\n                }\n            });\n            this._on(fileUploadButtonBar.find('.delete'), {\n                click: function (e) {\n                    e.preventDefault();\n                    filesList.find('.toggle:checked')\n                        .closest('.template-download')\n                        .find('.delete').click();\n                    fileUploadButtonBar.find('.toggle')\n                        .prop('checked', false);\n                }\n            });\n            this._on(fileUploadButtonBar.find('.toggle'), {\n                change: function (e) {\n                    filesList.find('.toggle').prop(\n                        'checked',\n                        $(e.currentTarget).is(':checked')\n                    );\n                }\n            });\n        },\n\n        _destroyButtonBarEventHandlers: function () {\n            this._off(\n                this.element.find('.fileupload-buttonbar')\n                    .find('.start, .cancel, .delete'),\n                'click'\n            );\n            this._off(\n                this.element.find('.fileupload-buttonbar .toggle'),\n                'change.'\n            );\n        },\n\n        _initEventHandlers: function () {\n            this._super();\n            this._on(this.options.filesContainer, {\n                'click .start': this._startHandler,\n                'click .cancel': this._cancelHandler,\n                'click .delete': this._deleteHandler\n            });\n            this._initButtonBarEventHandlers();\n        },\n\n        _destroyEventHandlers: function () {\n            this._destroyButtonBarEventHandlers();\n            this._off(this.options.filesContainer, 'click');\n            this._super();\n        },\n\n        _enableFileInputButton: function () {\n            this.element.find('.fileinput-button input')\n                .prop('disabled', false)\n                .parent().removeClass('disabled');\n        },\n\n        _disableFileInputButton: function () {\n            this.element.find('.fileinput-button input')\n                .prop('disabled', true)\n                .parent().addClass('disabled');\n        },\n\n        _initTemplates: function () {\n            var options = this.options;\n            options.templatesContainer = this.document[0].createElement(\n                options.filesContainer.prop('nodeName')\n            );\n            if (tmpl) {\n                if (options.uploadTemplateId) {\n                    options.uploadTemplate = tmpl(options.uploadTemplateId);\n                }\n                if (options.downloadTemplateId) {\n                    options.downloadTemplate = tmpl(options.downloadTemplateId);\n                }\n            }\n        },\n\n        _initFilesContainer: function () {\n            var options = this.options;\n            if (options.filesContainer === undefined) {\n                options.filesContainer = this.element.find('.files');\n            } else if (!(options.filesContainer instanceof $)) {\n                options.filesContainer = $(options.filesContainer);\n            }\n        },\n\n        _initSpecialOptions: function () {\n            this._super();\n            this._initFilesContainer();\n            this._initTemplates();\n        },\n\n        _create: function () {\n            this._super();\n            this._resetFinishedDeferreds();\n            if (!$.support.fileInput) {\n                this._disableFileInputButton();\n            }\n        },\n\n        enable: function () {\n            var wasDisabled = false;\n            if (this.options.disabled) {\n                wasDisabled = true;\n            }\n            this._super();\n            if (wasDisabled) {\n                this.element.find('input, button').prop('disabled', false);\n                this._enableFileInputButton();\n            }\n        },\n\n        disable: function () {\n            if (!this.options.disabled) {\n                this.element.find('input, button').prop('disabled', true);\n                this._disableFileInputButton();\n            }\n            this._super();\n        }\n\n    });\n\n}));\n"},function(t,e,n){n(3)(n(85))},function(t,e){t.exports="/*\n * jQuery File Upload Validation Plugin 1.1.1\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * http://www.opensource.org/licenses/MIT\n */\n\n/*jslint nomen: true, unparam: true, regexp: true */\n/*global define, window */\n\n(function (factory) {\n    'use strict';\n    if (typeof define === 'function' && define.amd) {\n        // Register as an anonymous AMD module:\n        define([\n            'jquery',\n            './jquery.fileupload-process'\n        ], factory);\n    } else {\n        // Browser globals:\n        factory(\n            window.jQuery\n        );\n    }\n}(function ($) {\n    'use strict';\n\n    // Append to the default processQueue:\n    $.blueimp.fileupload.prototype.options.processQueue.push(\n        {\n            action: 'validate',\n            // Always trigger this action,\n            // even if the previous action was rejected: \n            always: true,\n            // Options taken from the global options map:\n            acceptFileTypes: '@',\n            maxFileSize: '@',\n            minFileSize: '@',\n            maxNumberOfFiles: '@',\n            disabled: '@disableValidation'\n        }\n    );\n\n    // The File Upload Validation plugin extends the fileupload widget\n    // with file validation functionality:\n    $.widget('blueimp.fileupload', $.blueimp.fileupload, {\n\n        options: {\n            /*\n            // The regular expression for allowed file types, matches\n            // against either file type or file name:\n            acceptFileTypes: /(\\.|\\/)(gif|jpe?g|png)$/i,\n            // The maximum allowed file size in bytes:\n            maxFileSize: 10000000, // 10 MB\n            // The minimum allowed file size in bytes:\n            minFileSize: undefined, // No minimal file size\n            // The limit of files to be uploaded:\n            maxNumberOfFiles: 10,\n            */\n\n            // Function returning the current number of files,\n            // has to be overriden for maxNumberOfFiles validation:\n            getNumberOfFiles: $.noop,\n\n            // Error and info messages:\n            messages: {\n                maxNumberOfFiles: 'Maximum number of files exceeded',\n                acceptFileTypes: 'File type not allowed',\n                maxFileSize: 'File is too large',\n                minFileSize: 'File is too small'\n            }\n        },\n\n        processActions: {\n\n            validate: function (data, options) {\n                if (options.disabled) {\n                    return data;\n                }\n                var dfd = $.Deferred(),\n                    settings = this.options,\n                    file = data.files[data.index];\n                if ($.type(options.maxNumberOfFiles) === 'number' &&\n                        (settings.getNumberOfFiles() || 0) + data.files.length >\n                            options.maxNumberOfFiles) {\n                    file.error = settings.i18n('maxNumberOfFiles');\n                } else if (options.acceptFileTypes &&\n                        !(options.acceptFileTypes.test(file.type) ||\n                        options.acceptFileTypes.test(file.name))) {\n                    file.error = settings.i18n('acceptFileTypes');\n                } else if (options.maxFileSize && file.size >\n                        options.maxFileSize) {\n                    file.error = settings.i18n('maxFileSize');\n                } else if ($.type(file.size) === 'number' &&\n                        file.size < options.minFileSize) {\n                    file.error = settings.i18n('minFileSize');\n                } else {\n                    delete file.error;\n                }\n                if (file.error || data.files.error) {\n                    data.files.error = true;\n                    dfd.rejectWith(this, [data]);\n                } else {\n                    dfd.resolveWith(this, [data]);\n                }\n                return dfd.promise();\n            }\n\n        }\n\n    });\n\n}));\n"},function(t,e,n){n(3)(n(87))},function(t,e){t.exports="/*\n * jQuery File Upload Processing Plugin 1.2.2\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2012, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * http://www.opensource.org/licenses/MIT\n */\n\n/*jslint nomen: true, unparam: true */\n/*global define, window */\n\n(function (factory) {\n    'use strict';\n    if (typeof define === 'function' && define.amd) {\n        // Register as an anonymous AMD module:\n        define([\n            'jquery',\n            './jquery.fileupload'\n        ], factory);\n    } else {\n        // Browser globals:\n        factory(\n            window.jQuery\n        );\n    }\n}(function ($) {\n    'use strict';\n\n    var originalAdd = $.blueimp.fileupload.prototype.options.add;\n\n    // The File Upload Processing plugin extends the fileupload widget\n    // with file processing functionality:\n    $.widget('blueimp.fileupload', $.blueimp.fileupload, {\n\n        options: {\n            // The list of processing actions:\n            processQueue: [\n                /*\n                {\n                    action: 'log',\n                    type: 'debug'\n                }\n                */\n            ],\n            add: function (e, data) {\n                var $this = $(this);\n                data.process(function () {\n                    return $this.fileupload('process', data);\n                });\n                originalAdd.call(this, e, data);\n            }\n        },\n\n        processActions: {\n            /*\n            log: function (data, options) {\n                console[options.type](\n                    'Processing \"' + data.files[data.index].name + '\"'\n                );\n            }\n            */\n        },\n\n        _processFile: function (data) {\n            var that = this,\n                dfd = $.Deferred().resolveWith(that, [data]),\n                chain = dfd.promise();\n            this._trigger('process', null, data);\n            $.each(data.processQueue, function (i, settings) {\n                var func = function (data) {\n                    return that.processActions[settings.action].call(\n                        that,\n                        data,\n                        settings\n                    );\n                };\n                chain = chain.pipe(func, settings.always && func);\n            });\n            chain\n                .done(function () {\n                    that._trigger('processdone', null, data);\n                    that._trigger('processalways', null, data);\n                })\n                .fail(function () {\n                    that._trigger('processfail', null, data);\n                    that._trigger('processalways', null, data);\n                });\n            return chain;\n        },\n\n        // Replaces the settings of each processQueue item that\n        // are strings starting with an \"@\", using the remaining\n        // substring as key for the option map,\n        // e.g. \"@autoUpload\" is replaced with options.autoUpload:\n        _transformProcessQueue: function (options) {\n            var processQueue = [];\n            $.each(options.processQueue, function () {\n                var settings = {},\n                    action = this.action,\n                    prefix = this.prefix === true ? action : this.prefix;\n                $.each(this, function (key, value) {\n                    if ($.type(value) === 'string' &&\n                            value.charAt(0) === '@') {\n                        settings[key] = options[\n                            value.slice(1) || (prefix ? prefix +\n                                key.charAt(0).toUpperCase() + key.slice(1) : key)\n                        ];\n                    } else {\n                        settings[key] = value;\n                    }\n\n                });\n                processQueue.push(settings);\n            });\n            options.processQueue = processQueue;\n        },\n\n        // Returns the number of files currently in the processsing queue:\n        processing: function () {\n            return this._processing;\n        },\n\n        // Processes the files given as files property of the data parameter,\n        // returns a Promise object that allows to bind callbacks:\n        process: function (data) {\n            var that = this,\n                options = $.extend({}, this.options, data);\n            if (options.processQueue && options.processQueue.length) {\n                this._transformProcessQueue(options);\n                if (this._processing === 0) {\n                    this._trigger('processstart');\n                }\n                $.each(data.files, function (index) {\n                    var opts = index ? $.extend({}, options) : options,\n                        func = function () {\n                            return that._processFile(opts);\n                        };\n                    opts.index = index;\n                    that._processing += 1;\n                    that._processingQueue = that._processingQueue.pipe(func, func)\n                        .always(function () {\n                            that._processing -= 1;\n                            if (that._processing === 0) {\n                                that._trigger('processstop');\n                            }\n                        });\n                });\n            }\n            return this._processingQueue;\n        },\n\n        _create: function () {\n            this._super();\n            this._processing = 0;\n            this._processingQueue = $.Deferred().resolveWith(this)\n                .promise();\n        }\n\n    });\n\n}));\n"},function(t,e,n){n(3)(n(89))},function(t,e){t.exports="/*\n * jQuery File Upload Plugin 5.34.0\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2010, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * http://www.opensource.org/licenses/MIT\n */\n\n/*jslint nomen: true, unparam: true, regexp: true */\n/*global define, window, document, location, File, Blob, FormData */\n\n(function (factory) {\n    'use strict';\n    if (typeof define === 'function' && define.amd) {\n        // Register as an anonymous AMD module:\n        define([\n            'jquery',\n            'jquery.ui.widget'\n        ], factory);\n    } else {\n        // Browser globals:\n        factory(window.jQuery);\n    }\n}(function ($) {\n    'use strict';\n\n    // Detect file input support, based on\n    // http://viljamis.com/blog/2012/file-upload-support-on-mobile/\n    $.support.fileInput = !(new RegExp(\n        // Handle devices which give false positives for the feature detection:\n        '(Android (1\\\\.[0156]|2\\\\.[01]))' +\n            '|(Windows Phone (OS 7|8\\\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)' +\n            '|(w(eb)?OSBrowser)|(webOS)' +\n            '|(Kindle/(1\\\\.0|2\\\\.[05]|3\\\\.0))'\n    ).test(window.navigator.userAgent) ||\n        // Feature detection for all other devices:\n        $('<input type=\"file\">').prop('disabled'));\n\n    // The FileReader API is not actually used, but works as feature detection,\n    // as e.g. Safari supports XHR file uploads via the FormData API,\n    // but not non-multipart XHR file uploads:\n    $.support.xhrFileUpload = !!(window.XMLHttpRequestUpload && window.FileReader);\n    $.support.xhrFormDataFileUpload = !!window.FormData;\n\n    // Detect support for Blob slicing (required for chunked uploads):\n    $.support.blobSlice = window.Blob && (Blob.prototype.slice ||\n        Blob.prototype.webkitSlice || Blob.prototype.mozSlice);\n\n    // The fileupload widget listens for change events on file input fields defined\n    // via fileInput setting and paste or drop events of the given dropZone.\n    // In addition to the default jQuery Widget methods, the fileupload widget\n    // exposes the \"add\" and \"send\" methods, to add or directly send files using\n    // the fileupload API.\n    // By default, files added via file input selection, paste, drag & drop or\n    // \"add\" method are uploaded immediately, but it is possible to override\n    // the \"add\" callback option to queue file uploads.\n    $.widget('blueimp.fileupload', {\n\n        options: {\n            // The drop target element(s), by the default the complete document.\n            // Set to null to disable drag & drop support:\n            dropZone: $(document),\n            // The paste target element(s), by the default the complete document.\n            // Set to null to disable paste support:\n            pasteZone: $(document),\n            // The file input field(s), that are listened to for change events.\n            // If undefined, it is set to the file input fields inside\n            // of the widget element on plugin initialization.\n            // Set to null to disable the change listener.\n            fileInput: undefined,\n            // By default, the file input field is replaced with a clone after\n            // each input field change event. This is required for iframe transport\n            // queues and allows change events to be fired for the same file\n            // selection, but can be disabled by setting the following option to false:\n            replaceFileInput: true,\n            // The parameter name for the file form data (the request argument name).\n            // If undefined or empty, the name property of the file input field is\n            // used, or \"files[]\" if the file input name property is also empty,\n            // can be a string or an array of strings:\n            paramName: undefined,\n            // By default, each file of a selection is uploaded using an individual\n            // request for XHR type uploads. Set to false to upload file\n            // selections in one request each:\n            singleFileUploads: true,\n            // To limit the number of files uploaded with one XHR request,\n            // set the following option to an integer greater than 0:\n            limitMultiFileUploads: undefined,\n            // Set the following option to true to issue all file upload requests\n            // in a sequential order:\n            sequentialUploads: false,\n            // To limit the number of concurrent uploads,\n            // set the following option to an integer greater than 0:\n            limitConcurrentUploads: undefined,\n            // Set the following option to true to force iframe transport uploads:\n            forceIframeTransport: false,\n            // Set the following option to the location of a redirect url on the\n            // origin server, for cross-domain iframe transport uploads:\n            redirect: undefined,\n            // The parameter name for the redirect url, sent as part of the form\n            // data and set to 'redirect' if this option is empty:\n            redirectParamName: undefined,\n            // Set the following option to the location of a postMessage window,\n            // to enable postMessage transport uploads:\n            postMessage: undefined,\n            // By default, XHR file uploads are sent as multipart/form-data.\n            // The iframe transport is always using multipart/form-data.\n            // Set to false to enable non-multipart XHR uploads:\n            multipart: true,\n            // To upload large files in smaller chunks, set the following option\n            // to a preferred maximum chunk size. If set to 0, null or undefined,\n            // or the browser does not support the required Blob API, files will\n            // be uploaded as a whole.\n            maxChunkSize: undefined,\n            // When a non-multipart upload or a chunked multipart upload has been\n            // aborted, this option can be used to resume the upload by setting\n            // it to the size of the already uploaded bytes. This option is most\n            // useful when modifying the options object inside of the \"add\" or\n            // \"send\" callbacks, as the options are cloned for each file upload.\n            uploadedBytes: undefined,\n            // By default, failed (abort or error) file uploads are removed from the\n            // global progress calculation. Set the following option to false to\n            // prevent recalculating the global progress data:\n            recalculateProgress: true,\n            // Interval in milliseconds to calculate and trigger progress events:\n            progressInterval: 100,\n            // Interval in milliseconds to calculate progress bitrate:\n            bitrateInterval: 500,\n            // By default, uploads are started automatically when adding files:\n            autoUpload: true,\n\n            // Error and info messages:\n            messages: {\n                uploadedBytes: 'Uploaded bytes exceed file size'\n            },\n\n            // Translation function, gets the message key to be translated\n            // and an object with context specific data as arguments:\n            i18n: function (message, context) {\n                message = this.messages[message] || message.toString();\n                if (context) {\n                    $.each(context, function (key, value) {\n                        message = message.replace('{' + key + '}', value);\n                    });\n                }\n                return message;\n            },\n\n            // Additional form data to be sent along with the file uploads can be set\n            // using this option, which accepts an array of objects with name and\n            // value properties, a function returning such an array, a FormData\n            // object (for XHR file uploads), or a simple object.\n            // The form of the first fileInput is given as parameter to the function:\n            formData: function (form) {\n                return form.serializeArray();\n            },\n\n            // The add callback is invoked as soon as files are added to the fileupload\n            // widget (via file input selection, drag & drop, paste or add API call).\n            // If the singleFileUploads option is enabled, this callback will be\n            // called once for each file in the selection for XHR file uploads, else\n            // once for each file selection.\n            //\n            // The upload starts when the submit method is invoked on the data parameter.\n            // The data object contains a files property holding the added files\n            // and allows you to override plugin options as well as define ajax settings.\n            //\n            // Listeners for this callback can also be bound the following way:\n            // .bind('fileuploadadd', func);\n            //\n            // data.submit() returns a Promise object and allows to attach additional\n            // handlers using jQuery's Deferred callbacks:\n            // data.submit().done(func).fail(func).always(func);\n            add: function (e, data) {\n                if (e.isDefaultPrevented()) {\n                    return false;\n                }\n                if (data.autoUpload || (data.autoUpload !== false &&\n                        $(this).fileupload('option', 'autoUpload'))) {\n                    data.process().done(function () {\n                        data.submit();\n                    });\n                }\n            },\n\n            // Other callbacks:\n\n            // Callback for the submit event of each file upload:\n            // submit: function (e, data) {}, // .bind('fileuploadsubmit', func);\n\n            // Callback for the start of each file upload request:\n            // send: function (e, data) {}, // .bind('fileuploadsend', func);\n\n            // Callback for successful uploads:\n            // done: function (e, data) {}, // .bind('fileuploaddone', func);\n\n            // Callback for failed (abort or error) uploads:\n            // fail: function (e, data) {}, // .bind('fileuploadfail', func);\n\n            // Callback for completed (success, abort or error) requests:\n            // always: function (e, data) {}, // .bind('fileuploadalways', func);\n\n            // Callback for upload progress events:\n            // progress: function (e, data) {}, // .bind('fileuploadprogress', func);\n\n            // Callback for global upload progress events:\n            // progressall: function (e, data) {}, // .bind('fileuploadprogressall', func);\n\n            // Callback for uploads start, equivalent to the global ajaxStart event:\n            // start: function (e) {}, // .bind('fileuploadstart', func);\n\n            // Callback for uploads stop, equivalent to the global ajaxStop event:\n            // stop: function (e) {}, // .bind('fileuploadstop', func);\n\n            // Callback for change events of the fileInput(s):\n            // change: function (e, data) {}, // .bind('fileuploadchange', func);\n\n            // Callback for paste events to the pasteZone(s):\n            // paste: function (e, data) {}, // .bind('fileuploadpaste', func);\n\n            // Callback for drop events of the dropZone(s):\n            // drop: function (e, data) {}, // .bind('fileuploaddrop', func);\n\n            // Callback for dragover events of the dropZone(s):\n            // dragover: function (e) {}, // .bind('fileuploaddragover', func);\n\n            // Callback for the start of each chunk upload request:\n            // chunksend: function (e, data) {}, // .bind('fileuploadchunksend', func);\n\n            // Callback for successful chunk uploads:\n            // chunkdone: function (e, data) {}, // .bind('fileuploadchunkdone', func);\n\n            // Callback for failed (abort or error) chunk uploads:\n            // chunkfail: function (e, data) {}, // .bind('fileuploadchunkfail', func);\n\n            // Callback for completed (success, abort or error) chunk upload requests:\n            // chunkalways: function (e, data) {}, // .bind('fileuploadchunkalways', func);\n\n            // The plugin options are used as settings object for the ajax calls.\n            // The following are jQuery ajax settings required for the file uploads:\n            processData: false,\n            contentType: false,\n            cache: false\n        },\n\n        // A list of options that require reinitializing event listeners and/or\n        // special initialization code:\n        _specialOptions: [\n            'fileInput',\n            'dropZone',\n            'pasteZone',\n            'multipart',\n            'forceIframeTransport'\n        ],\n\n        _blobSlice: $.support.blobSlice && function () {\n            var slice = this.slice || this.webkitSlice || this.mozSlice;\n            return slice.apply(this, arguments);\n        },\n\n        _BitrateTimer: function () {\n            this.timestamp = ((Date.now) ? Date.now() : (new Date()).getTime());\n            this.loaded = 0;\n            this.bitrate = 0;\n            this.getBitrate = function (now, loaded, interval) {\n                var timeDiff = now - this.timestamp;\n                if (!this.bitrate || !interval || timeDiff > interval) {\n                    this.bitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\n                    this.loaded = loaded;\n                    this.timestamp = now;\n                }\n                return this.bitrate;\n            };\n        },\n\n        _isXHRUpload: function (options) {\n            return !options.forceIframeTransport &&\n                ((!options.multipart && $.support.xhrFileUpload) ||\n                $.support.xhrFormDataFileUpload);\n        },\n\n        _getFormData: function (options) {\n            var formData;\n            if (typeof options.formData === 'function') {\n                return options.formData(options.form);\n            }\n            if ($.isArray(options.formData)) {\n                return options.formData;\n            }\n            if ($.type(options.formData) === 'object') {\n                formData = [];\n                $.each(options.formData, function (name, value) {\n                    formData.push({name: name, value: value});\n                });\n                return formData;\n            }\n            return [];\n        },\n\n        _getTotal: function (files) {\n            var total = 0;\n            $.each(files, function (index, file) {\n                total += file.size || 1;\n            });\n            return total;\n        },\n\n        _initProgressObject: function (obj) {\n            var progress = {\n                loaded: 0,\n                total: 0,\n                bitrate: 0\n            };\n            if (obj._progress) {\n                $.extend(obj._progress, progress);\n            } else {\n                obj._progress = progress;\n            }\n        },\n\n        _initResponseObject: function (obj) {\n            var prop;\n            if (obj._response) {\n                for (prop in obj._response) {\n                    if (obj._response.hasOwnProperty(prop)) {\n                        delete obj._response[prop];\n                    }\n                }\n            } else {\n                obj._response = {};\n            }\n        },\n\n        _onProgress: function (e, data) {\n            if (e.lengthComputable) {\n                var now = ((Date.now) ? Date.now() : (new Date()).getTime()),\n                    loaded;\n                if (data._time && data.progressInterval &&\n                        (now - data._time < data.progressInterval) &&\n                        e.loaded !== e.total) {\n                    return;\n                }\n                data._time = now;\n                loaded = Math.floor(\n                    e.loaded / e.total * (data.chunkSize || data._progress.total)\n                ) + (data.uploadedBytes || 0);\n                // Add the difference from the previously loaded state\n                // to the global loaded counter:\n                this._progress.loaded += (loaded - data._progress.loaded);\n                this._progress.bitrate = this._bitrateTimer.getBitrate(\n                    now,\n                    this._progress.loaded,\n                    data.bitrateInterval\n                );\n                data._progress.loaded = data.loaded = loaded;\n                data._progress.bitrate = data.bitrate = data._bitrateTimer.getBitrate(\n                    now,\n                    loaded,\n                    data.bitrateInterval\n                );\n                // Trigger a custom progress event with a total data property set\n                // to the file size(s) of the current upload and a loaded data\n                // property calculated accordingly:\n                this._trigger(\n                    'progress',\n                    $.Event('progress', {delegatedEvent: e}),\n                    data\n                );\n                // Trigger a global progress event for all current file uploads,\n                // including ajax calls queued for sequential file uploads:\n                this._trigger(\n                    'progressall',\n                    $.Event('progressall', {delegatedEvent: e}),\n                    this._progress\n                );\n            }\n        },\n\n        _initProgressListener: function (options) {\n            var that = this,\n                xhr = options.xhr ? options.xhr() : $.ajaxSettings.xhr();\n            // Accesss to the native XHR object is required to add event listeners\n            // for the upload progress event:\n            if (xhr.upload) {\n                $(xhr.upload).bind('progress', function (e) {\n                    var oe = e.originalEvent;\n                    // Make sure the progress event properties get copied over:\n                    e.lengthComputable = oe.lengthComputable;\n                    e.loaded = oe.loaded;\n                    e.total = oe.total;\n                    that._onProgress(e, options);\n                });\n                options.xhr = function () {\n                    return xhr;\n                };\n            }\n        },\n\n        _isInstanceOf: function (type, obj) {\n            // Cross-frame instanceof check\n            return Object.prototype.toString.call(obj) === '[object ' + type + ']';\n        },\n\n        _initXHRData: function (options) {\n            var that = this,\n                formData,\n                file = options.files[0],\n                // Ignore non-multipart setting if not supported:\n                multipart = options.multipart || !$.support.xhrFileUpload,\n                paramName = options.paramName[0];\n            options.headers = $.extend({}, options.headers);\n            if (options.contentRange) {\n                options.headers['Content-Range'] = options.contentRange;\n            }\n            if (!multipart || options.blob || !this._isInstanceOf('File', file)) {\n                options.headers['Content-Disposition'] = 'attachment; filename=\"' +\n                    encodeURI(file.name) + '\"';\n            }\n            if (!multipart) {\n                options.contentType = file.type;\n                options.data = options.blob || file;\n            } else if ($.support.xhrFormDataFileUpload) {\n                if (options.postMessage) {\n                    // window.postMessage does not allow sending FormData\n                    // objects, so we just add the File/Blob objects to\n                    // the formData array and let the postMessage window\n                    // create the FormData object out of this array:\n                    formData = this._getFormData(options);\n                    if (options.blob) {\n                        formData.push({\n                            name: paramName,\n                            value: options.blob\n                        });\n                    } else {\n                        $.each(options.files, function (index, file) {\n                            formData.push({\n                                name: options.paramName[index] || paramName,\n                                value: file\n                            });\n                        });\n                    }\n                } else {\n                    if (that._isInstanceOf('FormData', options.formData)) {\n                        formData = options.formData;\n                    } else {\n                        formData = new FormData();\n                        $.each(this._getFormData(options), function (index, field) {\n                            formData.append(field.name, field.value);\n                        });\n                    }\n                    if (options.blob) {\n                        formData.append(paramName, options.blob, file.name);\n                    } else {\n                        $.each(options.files, function (index, file) {\n                            // This check allows the tests to run with\n                            // dummy objects:\n                            if (that._isInstanceOf('File', file) ||\n                                    that._isInstanceOf('Blob', file)) {\n                                formData.append(\n                                    options.paramName[index] || paramName,\n                                    file,\n                                    file.name\n                                );\n                            }\n                        });\n                    }\n                }\n                options.data = formData;\n            }\n            // Blob reference is not needed anymore, free memory:\n            options.blob = null;\n        },\n\n        _initIframeSettings: function (options) {\n            var targetHost = $('<a></a>').prop('href', options.url).prop('host');\n            // Setting the dataType to iframe enables the iframe transport:\n            options.dataType = 'iframe ' + (options.dataType || '');\n            // The iframe transport accepts a serialized array as form data:\n            options.formData = this._getFormData(options);\n            // Add redirect url to form data on cross-domain uploads:\n            if (options.redirect && targetHost && targetHost !== location.host) {\n                options.formData.push({\n                    name: options.redirectParamName || 'redirect',\n                    value: options.redirect\n                });\n            }\n        },\n\n        _initDataSettings: function (options) {\n            if (this._isXHRUpload(options)) {\n                if (!this._chunkedUpload(options, true)) {\n                    if (!options.data) {\n                        this._initXHRData(options);\n                    }\n                    this._initProgressListener(options);\n                }\n                if (options.postMessage) {\n                    // Setting the dataType to postmessage enables the\n                    // postMessage transport:\n                    options.dataType = 'postmessage ' + (options.dataType || '');\n                }\n            } else {\n                this._initIframeSettings(options);\n            }\n        },\n\n        _getParamName: function (options) {\n            var fileInput = $(options.fileInput),\n                paramName = options.paramName;\n            if (!paramName) {\n                paramName = [];\n                fileInput.each(function () {\n                    var input = $(this),\n                        name = input.prop('name') || 'files[]',\n                        i = (input.prop('files') || [1]).length;\n                    while (i) {\n                        paramName.push(name);\n                        i -= 1;\n                    }\n                });\n                if (!paramName.length) {\n                    paramName = [fileInput.prop('name') || 'files[]'];\n                }\n            } else if (!$.isArray(paramName)) {\n                paramName = [paramName];\n            }\n            return paramName;\n        },\n\n        _initFormSettings: function (options) {\n            // Retrieve missing options from the input field and the\n            // associated form, if available:\n            if (!options.form || !options.form.length) {\n                options.form = $(options.fileInput.prop('form'));\n                // If the given file input doesn't have an associated form,\n                // use the default widget file input's form:\n                if (!options.form.length) {\n                    options.form = $(this.options.fileInput.prop('form'));\n                }\n            }\n            options.paramName = this._getParamName(options);\n            if (!options.url) {\n                options.url = options.form.prop('action') || location.href;\n            }\n            // The HTTP request method must be \"POST\" or \"PUT\":\n            options.type = (options.type ||\n                ($.type(options.form.prop('method')) === 'string' &&\n                    options.form.prop('method')) || ''\n                ).toUpperCase();\n            if (options.type !== 'POST' && options.type !== 'PUT' &&\n                    options.type !== 'PATCH') {\n                options.type = 'POST';\n            }\n            if (!options.formAcceptCharset) {\n                options.formAcceptCharset = options.form.attr('accept-charset');\n            }\n        },\n\n        _getAJAXSettings: function (data) {\n            var options = $.extend({}, this.options, data);\n            this._initFormSettings(options);\n            this._initDataSettings(options);\n            return options;\n        },\n\n        // jQuery 1.6 doesn't provide .state(),\n        // while jQuery 1.8+ removed .isRejected() and .isResolved():\n        _getDeferredState: function (deferred) {\n            if (deferred.state) {\n                return deferred.state();\n            }\n            if (deferred.isResolved()) {\n                return 'resolved';\n            }\n            if (deferred.isRejected()) {\n                return 'rejected';\n            }\n            return 'pending';\n        },\n\n        // Maps jqXHR callbacks to the equivalent\n        // methods of the given Promise object:\n        _enhancePromise: function (promise) {\n            promise.success = promise.done;\n            promise.error = promise.fail;\n            promise.complete = promise.always;\n            return promise;\n        },\n\n        // Creates and returns a Promise object enhanced with\n        // the jqXHR methods abort, success, error and complete:\n        _getXHRPromise: function (resolveOrReject, context, args) {\n            var dfd = $.Deferred(),\n                promise = dfd.promise();\n            context = context || this.options.context || promise;\n            if (resolveOrReject === true) {\n                dfd.resolveWith(context, args);\n            } else if (resolveOrReject === false) {\n                dfd.rejectWith(context, args);\n            }\n            promise.abort = dfd.promise;\n            return this._enhancePromise(promise);\n        },\n\n        // Adds convenience methods to the data callback argument:\n        _addConvenienceMethods: function (e, data) {\n            var that = this,\n                getPromise = function (data) {\n                    return $.Deferred().resolveWith(that, [data]).promise();\n                };\n            data.process = function (resolveFunc, rejectFunc) {\n                if (resolveFunc || rejectFunc) {\n                    data._processQueue = this._processQueue =\n                        (this._processQueue || getPromise(this))\n                            .pipe(resolveFunc, rejectFunc);\n                }\n                return this._processQueue || getPromise(this);\n            };\n            data.submit = function () {\n                if (this.state() !== 'pending') {\n                    data.jqXHR = this.jqXHR =\n                        (that._trigger(\n                            'submit',\n                            $.Event('submit', {delegatedEvent: e}),\n                            this\n                        ) !== false) && that._onSend(e, this);\n                }\n                return this.jqXHR || that._getXHRPromise();\n            };\n            data.abort = function () {\n                if (this.jqXHR) {\n                    return this.jqXHR.abort();\n                }\n                return that._getXHRPromise();\n            };\n            data.state = function () {\n                if (this.jqXHR) {\n                    return that._getDeferredState(this.jqXHR);\n                }\n                if (this._processQueue) {\n                    return that._getDeferredState(this._processQueue);\n                }\n            };\n            data.progress = function () {\n                return this._progress;\n            };\n            data.response = function () {\n                return this._response;\n            };\n        },\n\n        // Parses the Range header from the server response\n        // and returns the uploaded bytes:\n        _getUploadedBytes: function (jqXHR) {\n            var range = jqXHR.getResponseHeader('Range'),\n                parts = range && range.split('-'),\n                upperBytesPos = parts && parts.length > 1 &&\n                    parseInt(parts[1], 10);\n            return upperBytesPos && upperBytesPos + 1;\n        },\n\n        // Uploads a file in multiple, sequential requests\n        // by splitting the file up in multiple blob chunks.\n        // If the second parameter is true, only tests if the file\n        // should be uploaded in chunks, but does not invoke any\n        // upload requests:\n        _chunkedUpload: function (options, testOnly) {\n            options.uploadedBytes = options.uploadedBytes || 0;\n            var that = this,\n                file = options.files[0],\n                fs = file.size,\n                ub = options.uploadedBytes,\n                mcs = options.maxChunkSize || fs,\n                slice = this._blobSlice,\n                dfd = $.Deferred(),\n                promise = dfd.promise(),\n                jqXHR,\n                upload;\n            if (!(this._isXHRUpload(options) && slice && (ub || mcs < fs)) ||\n                    options.data) {\n                return false;\n            }\n            if (testOnly) {\n                return true;\n            }\n            if (ub >= fs) {\n                file.error = options.i18n('uploadedBytes');\n                return this._getXHRPromise(\n                    false,\n                    options.context,\n                    [null, 'error', file.error]\n                );\n            }\n            // The chunk upload method:\n            upload = function () {\n                // Clone the options object for each chunk upload:\n                var o = $.extend({}, options),\n                    currentLoaded = o._progress.loaded;\n                o.blob = slice.call(\n                    file,\n                    ub,\n                    ub + mcs,\n                    file.type\n                );\n                // Store the current chunk size, as the blob itself\n                // will be dereferenced after data processing:\n                o.chunkSize = o.blob.size;\n                // Expose the chunk bytes position range:\n                o.contentRange = 'bytes ' + ub + '-' +\n                    (ub + o.chunkSize - 1) + '/' + fs;\n                // Process the upload data (the blob and potential form data):\n                that._initXHRData(o);\n                // Add progress listeners for this chunk upload:\n                that._initProgressListener(o);\n                jqXHR = ((that._trigger('chunksend', null, o) !== false && $.ajax(o)) ||\n                        that._getXHRPromise(false, o.context))\n                    .done(function (result, textStatus, jqXHR) {\n                        ub = that._getUploadedBytes(jqXHR) ||\n                            (ub + o.chunkSize);\n                        // Create a progress event if no final progress event\n                        // with loaded equaling total has been triggered\n                        // for this chunk:\n                        if (currentLoaded + o.chunkSize - o._progress.loaded) {\n                            that._onProgress($.Event('progress', {\n                                lengthComputable: true,\n                                loaded: ub - o.uploadedBytes,\n                                total: ub - o.uploadedBytes\n                            }), o);\n                        }\n                        options.uploadedBytes = o.uploadedBytes = ub;\n                        o.result = result;\n                        o.textStatus = textStatus;\n                        o.jqXHR = jqXHR;\n                        that._trigger('chunkdone', null, o);\n                        that._trigger('chunkalways', null, o);\n                        if (ub < fs) {\n                            // File upload not yet complete,\n                            // continue with the next chunk:\n                            upload();\n                        } else {\n                            dfd.resolveWith(\n                                o.context,\n                                [result, textStatus, jqXHR]\n                            );\n                        }\n                    })\n                    .fail(function (jqXHR, textStatus, errorThrown) {\n                        o.jqXHR = jqXHR;\n                        o.textStatus = textStatus;\n                        o.errorThrown = errorThrown;\n                        that._trigger('chunkfail', null, o);\n                        that._trigger('chunkalways', null, o);\n                        dfd.rejectWith(\n                            o.context,\n                            [jqXHR, textStatus, errorThrown]\n                        );\n                    });\n            };\n            this._enhancePromise(promise);\n            promise.abort = function () {\n                return jqXHR.abort();\n            };\n            upload();\n            return promise;\n        },\n\n        _beforeSend: function (e, data) {\n            if (this._active === 0) {\n                // the start callback is triggered when an upload starts\n                // and no other uploads are currently running,\n                // equivalent to the global ajaxStart event:\n                this._trigger('start');\n                // Set timer for global bitrate progress calculation:\n                this._bitrateTimer = new this._BitrateTimer();\n                // Reset the global progress values:\n                this._progress.loaded = this._progress.total = 0;\n                this._progress.bitrate = 0;\n            }\n            // Make sure the container objects for the .response() and\n            // .progress() methods on the data object are available\n            // and reset to their initial state:\n            this._initResponseObject(data);\n            this._initProgressObject(data);\n            data._progress.loaded = data.loaded = data.uploadedBytes || 0;\n            data._progress.total = data.total = this._getTotal(data.files) || 1;\n            data._progress.bitrate = data.bitrate = 0;\n            this._active += 1;\n            // Initialize the global progress values:\n            this._progress.loaded += data.loaded;\n            this._progress.total += data.total;\n        },\n\n        _onDone: function (result, textStatus, jqXHR, options) {\n            var total = options._progress.total,\n                response = options._response;\n            if (options._progress.loaded < total) {\n                // Create a progress event if no final progress event\n                // with loaded equaling total has been triggered:\n                this._onProgress($.Event('progress', {\n                    lengthComputable: true,\n                    loaded: total,\n                    total: total\n                }), options);\n            }\n            response.result = options.result = result;\n            response.textStatus = options.textStatus = textStatus;\n            response.jqXHR = options.jqXHR = jqXHR;\n            this._trigger('done', null, options);\n        },\n\n        _onFail: function (jqXHR, textStatus, errorThrown, options) {\n            var response = options._response;\n            if (options.recalculateProgress) {\n                // Remove the failed (error or abort) file upload from\n                // the global progress calculation:\n                this._progress.loaded -= options._progress.loaded;\n                this._progress.total -= options._progress.total;\n            }\n            response.jqXHR = options.jqXHR = jqXHR;\n            response.textStatus = options.textStatus = textStatus;\n            response.errorThrown = options.errorThrown = errorThrown;\n            this._trigger('fail', null, options);\n        },\n\n        _onAlways: function (jqXHRorResult, textStatus, jqXHRorError, options) {\n            // jqXHRorResult, textStatus and jqXHRorError are added to the\n            // options object via done and fail callbacks\n            this._trigger('always', null, options);\n        },\n\n        _onSend: function (e, data) {\n            if (!data.submit) {\n                this._addConvenienceMethods(e, data);\n            }\n            var that = this,\n                jqXHR,\n                aborted,\n                slot,\n                pipe,\n                options = that._getAJAXSettings(data),\n                send = function () {\n                    that._sending += 1;\n                    // Set timer for bitrate progress calculation:\n                    options._bitrateTimer = new that._BitrateTimer();\n                    jqXHR = jqXHR || (\n                        ((aborted || that._trigger(\n                            'send',\n                            $.Event('send', {delegatedEvent: e}),\n                            options\n                        ) === false) &&\n                        that._getXHRPromise(false, options.context, aborted)) ||\n                        that._chunkedUpload(options) || $.ajax(options)\n                    ).done(function (result, textStatus, jqXHR) {\n                        that._onDone(result, textStatus, jqXHR, options);\n                    }).fail(function (jqXHR, textStatus, errorThrown) {\n                        that._onFail(jqXHR, textStatus, errorThrown, options);\n                    }).always(function (jqXHRorResult, textStatus, jqXHRorError) {\n                        that._onAlways(\n                            jqXHRorResult,\n                            textStatus,\n                            jqXHRorError,\n                            options\n                        );\n                        that._sending -= 1;\n                        that._active -= 1;\n                        if (options.limitConcurrentUploads &&\n                                options.limitConcurrentUploads > that._sending) {\n                            // Start the next queued upload,\n                            // that has not been aborted:\n                            var nextSlot = that._slots.shift();\n                            while (nextSlot) {\n                                if (that._getDeferredState(nextSlot) === 'pending') {\n                                    nextSlot.resolve();\n                                    break;\n                                }\n                                nextSlot = that._slots.shift();\n                            }\n                        }\n                        if (that._active === 0) {\n                            // The stop callback is triggered when all uploads have\n                            // been completed, equivalent to the global ajaxStop event:\n                            that._trigger('stop');\n                        }\n                    });\n                    return jqXHR;\n                };\n            this._beforeSend(e, options);\n            if (this.options.sequentialUploads ||\n                    (this.options.limitConcurrentUploads &&\n                    this.options.limitConcurrentUploads <= this._sending)) {\n                if (this.options.limitConcurrentUploads > 1) {\n                    slot = $.Deferred();\n                    this._slots.push(slot);\n                    pipe = slot.pipe(send);\n                } else {\n                    this._sequence = this._sequence.pipe(send, send);\n                    pipe = this._sequence;\n                }\n                // Return the piped Promise object, enhanced with an abort method,\n                // which is delegated to the jqXHR object of the current upload,\n                // and jqXHR callbacks mapped to the equivalent Promise methods:\n                pipe.abort = function () {\n                    aborted = [undefined, 'abort', 'abort'];\n                    if (!jqXHR) {\n                        if (slot) {\n                            slot.rejectWith(options.context, aborted);\n                        }\n                        return send();\n                    }\n                    return jqXHR.abort();\n                };\n                return this._enhancePromise(pipe);\n            }\n            return send();\n        },\n\n        _onAdd: function (e, data) {\n            var that = this,\n                result = true,\n                options = $.extend({}, this.options, data),\n                limit = options.limitMultiFileUploads,\n                paramName = this._getParamName(options),\n                paramNameSet,\n                paramNameSlice,\n                fileSet,\n                i;\n            if (!(options.singleFileUploads || limit) ||\n                    !this._isXHRUpload(options)) {\n                fileSet = [data.files];\n                paramNameSet = [paramName];\n            } else if (!options.singleFileUploads && limit) {\n                fileSet = [];\n                paramNameSet = [];\n                for (i = 0; i < data.files.length; i += limit) {\n                    fileSet.push(data.files.slice(i, i + limit));\n                    paramNameSlice = paramName.slice(i, i + limit);\n                    if (!paramNameSlice.length) {\n                        paramNameSlice = paramName;\n                    }\n                    paramNameSet.push(paramNameSlice);\n                }\n            } else {\n                paramNameSet = paramName;\n            }\n            data.originalFiles = data.files;\n            $.each(fileSet || data.files, function (index, element) {\n                var newData = $.extend({}, data);\n                newData.files = fileSet ? element : [element];\n                newData.paramName = paramNameSet[index];\n                that._initResponseObject(newData);\n                that._initProgressObject(newData);\n                that._addConvenienceMethods(e, newData);\n                result = that._trigger(\n                    'add',\n                    $.Event('add', {delegatedEvent: e}),\n                    newData\n                );\n                return result;\n            });\n            return result;\n        },\n\n        _replaceFileInput: function (input) {\n            var inputClone = input.clone(true);\n            $('<form></form>').append(inputClone)[0].reset();\n            // Detaching allows to insert the fileInput on another form\n            // without loosing the file input value:\n            input.after(inputClone).detach();\n            // Avoid memory leaks with the detached file input:\n            $.cleanData(input.unbind('remove'));\n            // Replace the original file input element in the fileInput\n            // elements set with the clone, which has been copied including\n            // event handlers:\n            this.options.fileInput = this.options.fileInput.map(function (i, el) {\n                if (el === input[0]) {\n                    return inputClone[0];\n                }\n                return el;\n            });\n            // If the widget has been initialized on the file input itself,\n            // override this.element with the file input clone:\n            if (input[0] === this.element[0]) {\n                this.element = inputClone;\n            }\n        },\n\n        _handleFileTreeEntry: function (entry, path) {\n            var that = this,\n                dfd = $.Deferred(),\n                errorHandler = function (e) {\n                    if (e && !e.entry) {\n                        e.entry = entry;\n                    }\n                    // Since $.when returns immediately if one\n                    // Deferred is rejected, we use resolve instead.\n                    // This allows valid files and invalid items\n                    // to be returned together in one set:\n                    dfd.resolve([e]);\n                },\n                dirReader;\n            path = path || '';\n            if (entry.isFile) {\n                if (entry._file) {\n                    // Workaround for Chrome bug #149735\n                    entry._file.relativePath = path;\n                    dfd.resolve(entry._file);\n                } else {\n                    entry.file(function (file) {\n                        file.relativePath = path;\n                        dfd.resolve(file);\n                    }, errorHandler);\n                }\n            } else if (entry.isDirectory) {\n                dirReader = entry.createReader();\n                dirReader.readEntries(function (entries) {\n                    that._handleFileTreeEntries(\n                        entries,\n                        path + entry.name + '/'\n                    ).done(function (files) {\n                        dfd.resolve(files);\n                    }).fail(errorHandler);\n                }, errorHandler);\n            } else {\n                // Return an empy list for file system items\n                // other than files or directories:\n                dfd.resolve([]);\n            }\n            return dfd.promise();\n        },\n\n        _handleFileTreeEntries: function (entries, path) {\n            var that = this;\n            return $.when.apply(\n                $,\n                $.map(entries, function (entry) {\n                    return that._handleFileTreeEntry(entry, path);\n                })\n            ).pipe(function () {\n                return Array.prototype.concat.apply(\n                    [],\n                    arguments\n                );\n            });\n        },\n\n        _getDroppedFiles: function (dataTransfer) {\n            dataTransfer = dataTransfer || {};\n            var items = dataTransfer.items;\n            if (items && items.length && (items[0].webkitGetAsEntry ||\n                    items[0].getAsEntry)) {\n                return this._handleFileTreeEntries(\n                    $.map(items, function (item) {\n                        var entry;\n                        if (item.webkitGetAsEntry) {\n                            entry = item.webkitGetAsEntry();\n                            if (entry) {\n                                // Workaround for Chrome bug #149735:\n                                entry._file = item.getAsFile();\n                            }\n                            return entry;\n                        }\n                        return item.getAsEntry();\n                    })\n                );\n            }\n            return $.Deferred().resolve(\n                $.makeArray(dataTransfer.files)\n            ).promise();\n        },\n\n        _getSingleFileInputFiles: function (fileInput) {\n            fileInput = $(fileInput);\n            var entries = fileInput.prop('webkitEntries') ||\n                    fileInput.prop('entries'),\n                files,\n                value;\n            if (entries && entries.length) {\n                return this._handleFileTreeEntries(entries);\n            }\n            files = $.makeArray(fileInput.prop('files'));\n            if (!files.length) {\n                value = fileInput.prop('value');\n                if (!value) {\n                    return $.Deferred().resolve([]).promise();\n                }\n                // If the files property is not available, the browser does not\n                // support the File API and we add a pseudo File object with\n                // the input value as name with path information removed:\n                files = [{name: value.replace(/^.*\\\\/, '')}];\n            } else if (files[0].name === undefined && files[0].fileName) {\n                // File normalization for Safari 4 and Firefox 3:\n                $.each(files, function (index, file) {\n                    file.name = file.fileName;\n                    file.size = file.fileSize;\n                });\n            }\n            return $.Deferred().resolve(files).promise();\n        },\n\n        _getFileInputFiles: function (fileInput) {\n            if (!(fileInput instanceof $) || fileInput.length === 1) {\n                return this._getSingleFileInputFiles(fileInput);\n            }\n            return $.when.apply(\n                $,\n                $.map(fileInput, this._getSingleFileInputFiles)\n            ).pipe(function () {\n                return Array.prototype.concat.apply(\n                    [],\n                    arguments\n                );\n            });\n        },\n\n        _onChange: function (e) {\n            var that = this,\n                data = {\n                    fileInput: $(e.target),\n                    form: $(e.target.form)\n                };\n            this._getFileInputFiles(data.fileInput).always(function (files) {\n                data.files = files;\n                if (that.options.replaceFileInput) {\n                    that._replaceFileInput(data.fileInput);\n                }\n                if (that._trigger(\n                        'change',\n                        $.Event('change', {delegatedEvent: e}),\n                        data\n                    ) !== false) {\n                    that._onAdd(e, data);\n                }\n            });\n        },\n\n        _onPaste: function (e) {\n            var items = e.originalEvent && e.originalEvent.clipboardData &&\n                    e.originalEvent.clipboardData.items,\n                data = {files: []};\n            if (items && items.length) {\n                $.each(items, function (index, item) {\n                    var file = item.getAsFile && item.getAsFile();\n                    if (file) {\n                        data.files.push(file);\n                    }\n                });\n                if (this._trigger(\n                        'paste',\n                        $.Event('paste', {delegatedEvent: e}),\n                        data\n                    ) !== false) {\n                    this._onAdd(e, data);\n                }\n            }\n        },\n\n        _onDrop: function (e) {\n            e.dataTransfer = e.originalEvent && e.originalEvent.dataTransfer;\n            var that = this,\n                dataTransfer = e.dataTransfer,\n                data = {};\n            if (dataTransfer && dataTransfer.files && dataTransfer.files.length) {\n                e.preventDefault();\n                this._getDroppedFiles(dataTransfer).always(function (files) {\n                    data.files = files;\n                    if (that._trigger(\n                            'drop',\n                            $.Event('drop', {delegatedEvent: e}),\n                            data\n                        ) !== false) {\n                        that._onAdd(e, data);\n                    }\n                });\n            }\n        },\n\n        _onDragOver: function (e) {\n            e.dataTransfer = e.originalEvent && e.originalEvent.dataTransfer;\n            var dataTransfer = e.dataTransfer;\n            if (dataTransfer && $.inArray('Files', dataTransfer.types) !== -1 &&\n                    this._trigger(\n                        'dragover',\n                        $.Event('dragover', {delegatedEvent: e})\n                    ) !== false) {\n                e.preventDefault();\n                dataTransfer.dropEffect = 'copy';\n            }\n        },\n\n        _initEventHandlers: function () {\n            if (this._isXHRUpload(this.options)) {\n                this._on(this.options.dropZone, {\n                    dragover: this._onDragOver,\n                    drop: this._onDrop\n                });\n                this._on(this.options.pasteZone, {\n                    paste: this._onPaste\n                });\n            }\n            if ($.support.fileInput) {\n                this._on(this.options.fileInput, {\n                    change: this._onChange\n                });\n            }\n        },\n\n        _destroyEventHandlers: function () {\n            this._off(this.options.dropZone, 'dragover drop');\n            this._off(this.options.pasteZone, 'paste');\n            this._off(this.options.fileInput, 'change');\n        },\n\n        _setOption: function (key, value) {\n            var reinit = $.inArray(key, this._specialOptions) !== -1;\n            if (reinit) {\n                this._destroyEventHandlers();\n            }\n            this._super(key, value);\n            if (reinit) {\n                this._initSpecialOptions();\n                this._initEventHandlers();\n            }\n        },\n\n        _initSpecialOptions: function () {\n            var options = this.options;\n            if (options.fileInput === undefined) {\n                options.fileInput = this.element.is('input[type=\"file\"]') ?\n                        this.element : this.element.find('input[type=\"file\"]');\n            } else if (!(options.fileInput instanceof $)) {\n                options.fileInput = $(options.fileInput);\n            }\n            if (!(options.dropZone instanceof $)) {\n                options.dropZone = $(options.dropZone);\n            }\n            if (!(options.pasteZone instanceof $)) {\n                options.pasteZone = $(options.pasteZone);\n            }\n        },\n\n        _getRegExp: function (str) {\n            var parts = str.split('/'),\n                modifiers = parts.pop();\n            parts.shift();\n            return new RegExp(parts.join('/'), modifiers);\n        },\n\n        _isRegExpOption: function (key, value) {\n            return key !== 'url' && $.type(value) === 'string' &&\n                /^\\/.*\\/[igm]{0,3}$/.test(value);\n        },\n\n        _initDataAttributes: function () {\n            var that = this,\n                options = this.options;\n            // Initialize options set via HTML5 data-attributes:\n            $.each(\n                $(this.element[0].cloneNode(false)).data(),\n                function (key, value) {\n                    if (that._isRegExpOption(key, value)) {\n                        value = that._getRegExp(value);\n                    }\n                    options[key] = value;\n                }\n            );\n        },\n\n        _create: function () {\n            this._initDataAttributes();\n            this._initSpecialOptions();\n            this._slots = [];\n            this._sequence = this._getXHRPromise(true);\n            this._sending = this._active = 0;\n            this._initProgressObject(this);\n            this._initEventHandlers();\n        },\n\n        // This method is exposed to the widget API and allows to query\n        // the number of active uploads:\n        active: function () {\n            return this._active;\n        },\n\n        // This method is exposed to the widget API and allows to query\n        // the widget upload progress.\n        // It returns an object with loaded, total and bitrate properties\n        // for the running uploads:\n        progress: function () {\n            return this._progress;\n        },\n\n        // This method is exposed to the widget API and allows adding files\n        // using the fileupload API. The data parameter accepts an object which\n        // must have a files property and can contain additional options:\n        // .fileupload('add', {files: filesList});\n        add: function (data) {\n            var that = this;\n            if (!data || this.options.disabled) {\n                return;\n            }\n            if (data.fileInput && !data.files) {\n                this._getFileInputFiles(data.fileInput).always(function (files) {\n                    data.files = files;\n                    that._onAdd(null, data);\n                });\n            } else {\n                data.files = $.makeArray(data.files);\n                this._onAdd(null, data);\n            }\n        },\n\n        // This method is exposed to the widget API and allows sending files\n        // using the fileupload API. The data parameter accepts an object which\n        // must have a files or fileInput property and can contain additional options:\n        // .fileupload('send', {files: filesList});\n        // The method returns a Promise object for the file upload call.\n        send: function (data) {\n            if (data && !this.options.disabled) {\n                if (data.fileInput && !data.files) {\n                    var that = this,\n                        dfd = $.Deferred(),\n                        promise = dfd.promise(),\n                        jqXHR,\n                        aborted;\n                    promise.abort = function () {\n                        aborted = true;\n                        if (jqXHR) {\n                            return jqXHR.abort();\n                        }\n                        dfd.reject(null, 'abort', 'abort');\n                        return promise;\n                    };\n                    this._getFileInputFiles(data.fileInput).always(\n                        function (files) {\n                            if (aborted) {\n                                return;\n                            }\n                            if (!files.length) {\n                                dfd.reject();\n                                return;\n                            }\n                            data.files = files;\n                            jqXHR = that._onSend(null, data).then(\n                                function (result, textStatus, jqXHR) {\n                                    dfd.resolve(result, textStatus, jqXHR);\n                                },\n                                function (jqXHR, textStatus, errorThrown) {\n                                    dfd.reject(jqXHR, textStatus, errorThrown);\n                                }\n                            );\n                        }\n                    );\n                    return this._enhancePromise(promise);\n                }\n                data.files = $.makeArray(data.files);\n                if (data.files.length) {\n                    return this._onSend(null, data);\n                }\n            }\n            return this._getXHRPromise(false, data && data.context);\n        }\n\n    });\n\n}));\n"},function(t,e,n){n(3)(n(91))},function(t,e){t.exports="/*\n * jQuery Iframe Transport Plugin 1.8.0\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * http://www.opensource.org/licenses/MIT\n */\n\n/*jslint unparam: true, nomen: true */\n/*global define, window, document */\n\n(function (factory) {\n    'use strict';\n    if (typeof define === 'function' && define.amd) {\n        // Register as an anonymous AMD module:\n        define(['jquery'], factory);\n    } else {\n        // Browser globals:\n        factory(window.jQuery);\n    }\n}(function ($) {\n    'use strict';\n\n    // Helper variable to create unique names for the transport iframes:\n    var counter = 0;\n\n    // The iframe transport accepts four additional options:\n    // options.fileInput: a jQuery collection of file input fields\n    // options.paramName: the parameter name for the file form data,\n    //  overrides the name property of the file input field(s),\n    //  can be a string or an array of strings.\n    // options.formData: an array of objects with name and value properties,\n    //  equivalent to the return data of .serializeArray(), e.g.:\n    //  [{name: 'a', value: 1}, {name: 'b', value: 2}]\n    // options.initialIframeSrc: the URL of the initial iframe src,\n    //  by default set to \"javascript:false;\"\n    $.ajaxTransport('iframe', function (options) {\n        if (options.async) {\n            // javascript:false as initial iframe src\n            // prevents warning popups on HTTPS in IE6:\n            var initialIframeSrc = options.initialIframeSrc || 'javascript:false;',\n                form,\n                iframe,\n                addParamChar;\n            return {\n                send: function (_, completeCallback) {\n                    form = $('<form style=\"display:none;\"></form>');\n                    form.attr('accept-charset', options.formAcceptCharset);\n                    addParamChar = /\\?/.test(options.url) ? '&' : '?';\n                    // XDomainRequest only supports GET and POST:\n                    if (options.type === 'DELETE') {\n                        options.url = options.url + addParamChar + '_method=DELETE';\n                        options.type = 'POST';\n                    } else if (options.type === 'PUT') {\n                        options.url = options.url + addParamChar + '_method=PUT';\n                        options.type = 'POST';\n                    } else if (options.type === 'PATCH') {\n                        options.url = options.url + addParamChar + '_method=PATCH';\n                        options.type = 'POST';\n                    }\n                    // IE versions below IE8 cannot set the name property of\n                    // elements that have already been added to the DOM,\n                    // so we set the name along with the iframe HTML markup:\n                    counter += 1;\n                    iframe = $(\n                        '<iframe src=\"' + initialIframeSrc +\n                            '\" name=\"iframe-transport-' + counter + '\"></iframe>'\n                    ).bind('load', function () {\n                        var fileInputClones,\n                            paramNames = $.isArray(options.paramName) ?\n                                    options.paramName : [options.paramName];\n                        iframe\n                            .unbind('load')\n                            .bind('load', function () {\n                                var response;\n                                // Wrap in a try/catch block to catch exceptions thrown\n                                // when trying to access cross-domain iframe contents:\n                                try {\n                                    response = iframe.contents();\n                                    // Google Chrome and Firefox do not throw an\n                                    // exception when calling iframe.contents() on\n                                    // cross-domain requests, so we unify the response:\n                                    if (!response.length || !response[0].firstChild) {\n                                        throw new Error();\n                                    }\n                                } catch (e) {\n                                    response = undefined;\n                                }\n                                // The complete callback returns the\n                                // iframe content document as response object:\n                                completeCallback(\n                                    200,\n                                    'success',\n                                    {'iframe': response}\n                                );\n                                // Fix for IE endless progress bar activity bug\n                                // (happens on form submits to iframe targets):\n                                $('<iframe src=\"' + initialIframeSrc + '\"></iframe>')\n                                    .appendTo(form);\n                                window.setTimeout(function () {\n                                    // Removing the form in a setTimeout call\n                                    // allows Chrome's developer tools to display\n                                    // the response result\n                                    form.remove();\n                                }, 0);\n                            });\n                        form\n                            .prop('target', iframe.prop('name'))\n                            .prop('action', options.url)\n                            .prop('method', options.type);\n                        if (options.formData) {\n                            $.each(options.formData, function (index, field) {\n                                $('<input type=\"hidden\"/>')\n                                    .prop('name', field.name)\n                                    .val(field.value)\n                                    .appendTo(form);\n                            });\n                        }\n                        if (options.fileInput && options.fileInput.length &&\n                                options.type === 'POST') {\n                            fileInputClones = options.fileInput.clone();\n                            // Insert a clone for each file input field:\n                            options.fileInput.after(function (index) {\n                                return fileInputClones[index];\n                            });\n                            if (options.paramName) {\n                                options.fileInput.each(function (index) {\n                                    $(this).prop(\n                                        'name',\n                                        paramNames[index] || options.paramName\n                                    );\n                                });\n                            }\n                            // Appending the file input fields to the hidden form\n                            // removes them from their original location:\n                            form\n                                .append(options.fileInput)\n                                .prop('enctype', 'multipart/form-data')\n                                // enctype must be set as encoding for IE:\n                                .prop('encoding', 'multipart/form-data');\n                        }\n                        form.submit();\n                        // Insert the file input fields at their original location\n                        // by replacing the clones with the originals:\n                        if (fileInputClones && fileInputClones.length) {\n                            options.fileInput.each(function (index, input) {\n                                var clone = $(fileInputClones[index]);\n                                $(input).prop('name', clone.prop('name'));\n                                clone.replaceWith(input);\n                            });\n                        }\n                    });\n                    form.append(iframe).appendTo(document.body);\n                },\n                abort: function () {\n                    if (iframe) {\n                        // javascript:false as iframe src aborts the request\n                        // and prevents warning popups on HTTPS in IE6.\n                        // concat is used to avoid the \"Script URL\" JSLint error:\n                        iframe\n                            .unbind('load')\n                            .prop('src', initialIframeSrc);\n                    }\n                    if (form) {\n                        form.remove();\n                    }\n                }\n            };\n        }\n    });\n\n    // The iframe transport returns the iframe content document as response.\n    // The following adds converters from iframe to text, json, html, xml\n    // and script.\n    // Please note that the Content-Type for JSON responses has to be text/plain\n    // or text/html, if the browser doesn't include application/json in the\n    // Accept header, else IE will show a download dialog.\n    // The Content-Type for XML responses on the other hand has to be always\n    // application/xml or text/xml, so IE properly parses the XML response.\n    // See also\n    // https://github.com/blueimp/jQuery-File-Upload/wiki/Setup#content-type-negotiation\n    $.ajaxSetup({\n        converters: {\n            'iframe text': function (iframe) {\n                return iframe && $(iframe[0].body).text();\n            },\n            'iframe json': function (iframe) {\n                return iframe && $.parseJSON($(iframe[0].body).text());\n            },\n            'iframe html': function (iframe) {\n                return iframe && $(iframe[0].body).html();\n            },\n            'iframe xml': function (iframe) {\n                var xmlDoc = iframe && iframe[0];\n                return xmlDoc && $.isXMLDoc(xmlDoc) ? xmlDoc :\n                        $.parseXML((xmlDoc.XMLDocument && xmlDoc.XMLDocument.xml) ||\n                            $(xmlDoc.body).html());\n            },\n            'iframe script': function (iframe) {\n                return iframe && $.globalEval($(iframe[0].body).text());\n            }\n        }\n    });\n\n}));\n"},function(t,e,n){n(3)(n(93))},function(t,e){t.exports='/*\n * jQuery UI Widget 1.10.3+amd\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2013 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/jQuery.widget/\n */\n\n(function (factory) {\n    if (typeof define === "function" && define.amd) {\n        // Register as an anonymous AMD module:\n        define(["jquery"], factory);\n    } else {\n        // Browser globals:\n        factory(jQuery);\n    }\n}(function( $, undefined ) {\n\nvar uuid = 0,\n\tslice = Array.prototype.slice,\n\t_cleanData = $.cleanData;\n$.cleanData = function( elems ) {\n\tfor ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {\n\t\ttry {\n\t\t\t$( elem ).triggerHandler( "remove" );\n\t\t// http://bugs.jquery.com/ticket/8235\n\t\t} catch( e ) {}\n\t}\n\t_cleanData( elems );\n};\n\n$.widget = function( name, base, prototype ) {\n\tvar fullName, existingConstructor, constructor, basePrototype,\n\t\t// proxiedPrototype allows the provided prototype to remain unmodified\n\t\t// so that it can be used as a mixin for multiple widgets (#8876)\n\t\tproxiedPrototype = {},\n\t\tnamespace = name.split( "." )[ 0 ];\n\n\tname = name.split( "." )[ 1 ];\n\tfullName = namespace + "-" + name;\n\n\tif ( !prototype ) {\n\t\tprototype = base;\n\t\tbase = $.Widget;\n\t}\n\n\t// create selector for plugin\n\t$.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {\n\t\treturn !!$.data( elem, fullName );\n\t};\n\n\t$[ namespace ] = $[ namespace ] || {};\n\texistingConstructor = $[ namespace ][ name ];\n\tconstructor = $[ namespace ][ name ] = function( options, element ) {\n\t\t// allow instantiation without "new" keyword\n\t\tif ( !this._createWidget ) {\n\t\t\treturn new constructor( options, element );\n\t\t}\n\n\t\t// allow instantiation without initializing for simple inheritance\n\t\t// must use "new" keyword (the code above always passes args)\n\t\tif ( arguments.length ) {\n\t\t\tthis._createWidget( options, element );\n\t\t}\n\t};\n\t// extend with the existing constructor to carry over any static properties\n\t$.extend( constructor, existingConstructor, {\n\t\tversion: prototype.version,\n\t\t// copy the object used to create the prototype in case we need to\n\t\t// redefine the widget later\n\t\t_proto: $.extend( {}, prototype ),\n\t\t// track widgets that inherit from this widget in case this widget is\n\t\t// redefined after a widget inherits from it\n\t\t_childConstructors: []\n\t});\n\n\tbasePrototype = new base();\n\t// we need to make the options hash a property directly on the new instance\n\t// otherwise we\'ll modify the options hash on the prototype that we\'re\n\t// inheriting from\n\tbasePrototype.options = $.widget.extend( {}, basePrototype.options );\n\t$.each( prototype, function( prop, value ) {\n\t\tif ( !$.isFunction( value ) ) {\n\t\t\tproxiedPrototype[ prop ] = value;\n\t\t\treturn;\n\t\t}\n\t\tproxiedPrototype[ prop ] = (function() {\n\t\t\tvar _super = function() {\n\t\t\t\t\treturn base.prototype[ prop ].apply( this, arguments );\n\t\t\t\t},\n\t\t\t\t_superApply = function( args ) {\n\t\t\t\t\treturn base.prototype[ prop ].apply( this, args );\n\t\t\t\t};\n\t\t\treturn function() {\n\t\t\t\tvar __super = this._super,\n\t\t\t\t\t__superApply = this._superApply,\n\t\t\t\t\treturnValue;\n\n\t\t\t\tthis._super = _super;\n\t\t\t\tthis._superApply = _superApply;\n\n\t\t\t\treturnValue = value.apply( this, arguments );\n\n\t\t\t\tthis._super = __super;\n\t\t\t\tthis._superApply = __superApply;\n\n\t\t\t\treturn returnValue;\n\t\t\t};\n\t\t})();\n\t});\n\tconstructor.prototype = $.widget.extend( basePrototype, {\n\t\t// TODO: remove support for widgetEventPrefix\n\t\t// always use the name + a colon as the prefix, e.g., draggable:start\n\t\t// don\'t prefix for widgets that aren\'t DOM-based\n\t\twidgetEventPrefix: existingConstructor ? basePrototype.widgetEventPrefix : name\n\t}, proxiedPrototype, {\n\t\tconstructor: constructor,\n\t\tnamespace: namespace,\n\t\twidgetName: name,\n\t\twidgetFullName: fullName\n\t});\n\n\t// If this widget is being redefined then we need to find all widgets that\n\t// are inheriting from it and redefine all of them so that they inherit from\n\t// the new version of this widget. We\'re essentially trying to replace one\n\t// level in the prototype chain.\n\tif ( existingConstructor ) {\n\t\t$.each( existingConstructor._childConstructors, function( i, child ) {\n\t\t\tvar childPrototype = child.prototype;\n\n\t\t\t// redefine the child widget using the same prototype that was\n\t\t\t// originally used, but inherit from the new version of the base\n\t\t\t$.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );\n\t\t});\n\t\t// remove the list of existing child constructors from the old constructor\n\t\t// so the old child constructors can be garbage collected\n\t\tdelete existingConstructor._childConstructors;\n\t} else {\n\t\tbase._childConstructors.push( constructor );\n\t}\n\n\t$.widget.bridge( name, constructor );\n};\n\n$.widget.extend = function( target ) {\n\tvar input = slice.call( arguments, 1 ),\n\t\tinputIndex = 0,\n\t\tinputLength = input.length,\n\t\tkey,\n\t\tvalue;\n\tfor ( ; inputIndex < inputLength; inputIndex++ ) {\n\t\tfor ( key in input[ inputIndex ] ) {\n\t\t\tvalue = input[ inputIndex ][ key ];\n\t\t\tif ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\n\t\t\t\t// Clone objects\n\t\t\t\tif ( $.isPlainObject( value ) ) {\n\t\t\t\t\ttarget[ key ] = $.isPlainObject( target[ key ] ) ?\n\t\t\t\t\t\t$.widget.extend( {}, target[ key ], value ) :\n\t\t\t\t\t\t// Don\'t extend strings, arrays, etc. with objects\n\t\t\t\t\t\t$.widget.extend( {}, value );\n\t\t\t\t// Copy everything else by reference\n\t\t\t\t} else {\n\t\t\t\t\ttarget[ key ] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn target;\n};\n\n$.widget.bridge = function( name, object ) {\n\tvar fullName = object.prototype.widgetFullName || name;\n\t$.fn[ name ] = function( options ) {\n\t\tvar isMethodCall = typeof options === "string",\n\t\t\targs = slice.call( arguments, 1 ),\n\t\t\treturnValue = this;\n\n\t\t// allow multiple hashes to be passed on init\n\t\toptions = !isMethodCall && args.length ?\n\t\t\t$.widget.extend.apply( null, [ options ].concat(args) ) :\n\t\t\toptions;\n\n\t\tif ( isMethodCall ) {\n\t\t\tthis.each(function() {\n\t\t\t\tvar methodValue,\n\t\t\t\t\tinstance = $.data( this, fullName );\n\t\t\t\tif ( !instance ) {\n\t\t\t\t\treturn $.error( "cannot call methods on " + name + " prior to initialization; " +\n\t\t\t\t\t\t"attempted to call method \'" + options + "\'" );\n\t\t\t\t}\n\t\t\t\tif ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {\n\t\t\t\t\treturn $.error( "no such method \'" + options + "\' for " + name + " widget instance" );\n\t\t\t\t}\n\t\t\t\tmethodValue = instance[ options ].apply( instance, args );\n\t\t\t\tif ( methodValue !== instance && methodValue !== undefined ) {\n\t\t\t\t\treturnValue = methodValue && methodValue.jquery ?\n\t\t\t\t\t\treturnValue.pushStack( methodValue.get() ) :\n\t\t\t\t\t\tmethodValue;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthis.each(function() {\n\t\t\t\tvar instance = $.data( this, fullName );\n\t\t\t\tif ( instance ) {\n\t\t\t\t\tinstance.option( options || {} )._init();\n\t\t\t\t} else {\n\t\t\t\t\t$.data( this, fullName, new object( options, this ) );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn returnValue;\n\t};\n};\n\n$.Widget = function( /* options, element */ ) {};\n$.Widget._childConstructors = [];\n\n$.Widget.prototype = {\n\twidgetName: "widget",\n\twidgetEventPrefix: "",\n\tdefaultElement: "<div>",\n\toptions: {\n\t\tdisabled: false,\n\n\t\t// callbacks\n\t\tcreate: null\n\t},\n\t_createWidget: function( options, element ) {\n\t\telement = $( element || this.defaultElement || this )[ 0 ];\n\t\tthis.element = $( element );\n\t\tthis.uuid = uuid++;\n\t\tthis.eventNamespace = "." + this.widgetName + this.uuid;\n\t\tthis.options = $.widget.extend( {},\n\t\t\tthis.options,\n\t\t\tthis._getCreateOptions(),\n\t\t\toptions );\n\n\t\tthis.bindings = $();\n\t\tthis.hoverable = $();\n\t\tthis.focusable = $();\n\n\t\tif ( element !== this ) {\n\t\t\t$.data( element, this.widgetFullName, this );\n\t\t\tthis._on( true, this.element, {\n\t\t\t\tremove: function( event ) {\n\t\t\t\t\tif ( event.target === element ) {\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.document = $( element.style ?\n\t\t\t\t// element within the document\n\t\t\t\telement.ownerDocument :\n\t\t\t\t// element is window or document\n\t\t\t\telement.document || element );\n\t\t\tthis.window = $( this.document[0].defaultView || this.document[0].parentWindow );\n\t\t}\n\n\t\tthis._create();\n\t\tthis._trigger( "create", null, this._getCreateEventData() );\n\t\tthis._init();\n\t},\n\t_getCreateOptions: $.noop,\n\t_getCreateEventData: $.noop,\n\t_create: $.noop,\n\t_init: $.noop,\n\n\tdestroy: function() {\n\t\tthis._destroy();\n\t\t// we can probably remove the unbind calls in 2.0\n\t\t// all event bindings should go through this._on()\n\t\tthis.element\n\t\t\t.unbind( this.eventNamespace )\n\t\t\t// 1.9 BC for #7810\n\t\t\t// TODO remove dual storage\n\t\t\t.removeData( this.widgetName )\n\t\t\t.removeData( this.widgetFullName )\n\t\t\t// support: jquery <1.6.3\n\t\t\t// http://bugs.jquery.com/ticket/9413\n\t\t\t.removeData( $.camelCase( this.widgetFullName ) );\n\t\tthis.widget()\n\t\t\t.unbind( this.eventNamespace )\n\t\t\t.removeAttr( "aria-disabled" )\n\t\t\t.removeClass(\n\t\t\t\tthis.widgetFullName + "-disabled " +\n\t\t\t\t"ui-state-disabled" );\n\n\t\t// clean up events and states\n\t\tthis.bindings.unbind( this.eventNamespace );\n\t\tthis.hoverable.removeClass( "ui-state-hover" );\n\t\tthis.focusable.removeClass( "ui-state-focus" );\n\t},\n\t_destroy: $.noop,\n\n\twidget: function() {\n\t\treturn this.element;\n\t},\n\n\toption: function( key, value ) {\n\t\tvar options = key,\n\t\t\tparts,\n\t\t\tcurOption,\n\t\t\ti;\n\n\t\tif ( arguments.length === 0 ) {\n\t\t\t// don\'t return a reference to the internal hash\n\t\t\treturn $.widget.extend( {}, this.options );\n\t\t}\n\n\t\tif ( typeof key === "string" ) {\n\t\t\t// handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }\n\t\t\toptions = {};\n\t\t\tparts = key.split( "." );\n\t\t\tkey = parts.shift();\n\t\t\tif ( parts.length ) {\n\t\t\t\tcurOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\n\t\t\t\tfor ( i = 0; i < parts.length - 1; i++ ) {\n\t\t\t\t\tcurOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\n\t\t\t\t\tcurOption = curOption[ parts[ i ] ];\n\t\t\t\t}\n\t\t\t\tkey = parts.pop();\n\t\t\t\tif ( value === undefined ) {\n\t\t\t\t\treturn curOption[ key ] === undefined ? null : curOption[ key ];\n\t\t\t\t}\n\t\t\t\tcurOption[ key ] = value;\n\t\t\t} else {\n\t\t\t\tif ( value === undefined ) {\n\t\t\t\t\treturn this.options[ key ] === undefined ? null : this.options[ key ];\n\t\t\t\t}\n\t\t\t\toptions[ key ] = value;\n\t\t\t}\n\t\t}\n\n\t\tthis._setOptions( options );\n\n\t\treturn this;\n\t},\n\t_setOptions: function( options ) {\n\t\tvar key;\n\n\t\tfor ( key in options ) {\n\t\t\tthis._setOption( key, options[ key ] );\n\t\t}\n\n\t\treturn this;\n\t},\n\t_setOption: function( key, value ) {\n\t\tthis.options[ key ] = value;\n\n\t\tif ( key === "disabled" ) {\n\t\t\tthis.widget()\n\t\t\t\t.toggleClass( this.widgetFullName + "-disabled ui-state-disabled", !!value )\n\t\t\t\t.attr( "aria-disabled", value );\n\t\t\tthis.hoverable.removeClass( "ui-state-hover" );\n\t\t\tthis.focusable.removeClass( "ui-state-focus" );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tenable: function() {\n\t\treturn this._setOption( "disabled", false );\n\t},\n\tdisable: function() {\n\t\treturn this._setOption( "disabled", true );\n\t},\n\n\t_on: function( suppressDisabledCheck, element, handlers ) {\n\t\tvar delegateElement,\n\t\t\tinstance = this;\n\n\t\t// no suppressDisabledCheck flag, shuffle arguments\n\t\tif ( typeof suppressDisabledCheck !== "boolean" ) {\n\t\t\thandlers = element;\n\t\t\telement = suppressDisabledCheck;\n\t\t\tsuppressDisabledCheck = false;\n\t\t}\n\n\t\t// no element argument, shuffle and use this.element\n\t\tif ( !handlers ) {\n\t\t\thandlers = element;\n\t\t\telement = this.element;\n\t\t\tdelegateElement = this.widget();\n\t\t} else {\n\t\t\t// accept selectors, DOM elements\n\t\t\telement = delegateElement = $( element );\n\t\t\tthis.bindings = this.bindings.add( element );\n\t\t}\n\n\t\t$.each( handlers, function( event, handler ) {\n\t\t\tfunction handlerProxy() {\n\t\t\t\t// allow widgets to customize the disabled handling\n\t\t\t\t// - disabled as an array instead of boolean\n\t\t\t\t// - disabled class as method for disabling individual parts\n\t\t\t\tif ( !suppressDisabledCheck &&\n\t\t\t\t\t\t( instance.options.disabled === true ||\n\t\t\t\t\t\t\t$( this ).hasClass( "ui-state-disabled" ) ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn ( typeof handler === "string" ? instance[ handler ] : handler )\n\t\t\t\t\t.apply( instance, arguments );\n\t\t\t}\n\n\t\t\t// copy the guid so direct unbinding works\n\t\t\tif ( typeof handler !== "string" ) {\n\t\t\t\thandlerProxy.guid = handler.guid =\n\t\t\t\t\thandler.guid || handlerProxy.guid || $.guid++;\n\t\t\t}\n\n\t\t\tvar match = event.match( /^(\\w+)\\s*(.*)$/ ),\n\t\t\t\teventName = match[1] + instance.eventNamespace,\n\t\t\t\tselector = match[2];\n\t\t\tif ( selector ) {\n\t\t\t\tdelegateElement.delegate( selector, eventName, handlerProxy );\n\t\t\t} else {\n\t\t\t\telement.bind( eventName, handlerProxy );\n\t\t\t}\n\t\t});\n\t},\n\n\t_off: function( element, eventName ) {\n\t\teventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) + this.eventNamespace;\n\t\telement.unbind( eventName ).undelegate( eventName );\n\t},\n\n\t_delay: function( handler, delay ) {\n\t\tfunction handlerProxy() {\n\t\t\treturn ( typeof handler === "string" ? instance[ handler ] : handler )\n\t\t\t\t.apply( instance, arguments );\n\t\t}\n\t\tvar instance = this;\n\t\treturn setTimeout( handlerProxy, delay || 0 );\n\t},\n\n\t_hoverable: function( element ) {\n\t\tthis.hoverable = this.hoverable.add( element );\n\t\tthis._on( element, {\n\t\t\tmouseenter: function( event ) {\n\t\t\t\t$( event.currentTarget ).addClass( "ui-state-hover" );\n\t\t\t},\n\t\t\tmouseleave: function( event ) {\n\t\t\t\t$( event.currentTarget ).removeClass( "ui-state-hover" );\n\t\t\t}\n\t\t});\n\t},\n\n\t_focusable: function( element ) {\n\t\tthis.focusable = this.focusable.add( element );\n\t\tthis._on( element, {\n\t\t\tfocusin: function( event ) {\n\t\t\t\t$( event.currentTarget ).addClass( "ui-state-focus" );\n\t\t\t},\n\t\t\tfocusout: function( event ) {\n\t\t\t\t$( event.currentTarget ).removeClass( "ui-state-focus" );\n\t\t\t}\n\t\t});\n\t},\n\n\t_trigger: function( type, event, data ) {\n\t\tvar prop, orig,\n\t\t\tcallback = this.options[ type ];\n\n\t\tdata = data || {};\n\t\tevent = $.Event( event );\n\t\tevent.type = ( type === this.widgetEventPrefix ?\n\t\t\ttype :\n\t\t\tthis.widgetEventPrefix + type ).toLowerCase();\n\t\t// the original event may come from any element\n\t\t// so we need to reset the target on the new event\n\t\tevent.target = this.element[ 0 ];\n\n\t\t// copy original event properties over to the new event\n\t\torig = event.originalEvent;\n\t\tif ( orig ) {\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tif ( !( prop in event ) ) {\n\t\t\t\t\tevent[ prop ] = orig[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.element.trigger( event, data );\n\t\treturn !( $.isFunction( callback ) &&\n\t\t\tcallback.apply( this.element[0], [ event ].concat( data ) ) === false ||\n\t\t\tevent.isDefaultPrevented() );\n\t}\n};\n\n$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {\n\t$.Widget.prototype[ "_" + method ] = function( element, options, callback ) {\n\t\tif ( typeof options === "string" ) {\n\t\t\toptions = { effect: options };\n\t\t}\n\t\tvar hasOptions,\n\t\t\teffectName = !options ?\n\t\t\t\tmethod :\n\t\t\t\toptions === true || typeof options === "number" ?\n\t\t\t\t\tdefaultEffect :\n\t\t\t\t\toptions.effect || defaultEffect;\n\t\toptions = options || {};\n\t\tif ( typeof options === "number" ) {\n\t\t\toptions = { duration: options };\n\t\t}\n\t\thasOptions = !$.isEmptyObject( options );\n\t\toptions.complete = callback;\n\t\tif ( options.delay ) {\n\t\t\telement.delay( options.delay );\n\t\t}\n\t\tif ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\n\t\t\telement[ method ]( options );\n\t\t} else if ( effectName !== method && element[ effectName ] ) {\n\t\t\telement[ effectName ]( options.duration, options.easing, callback );\n\t\t} else {\n\t\t\telement.queue(function( next ) {\n\t\t\t\t$( this )[ method ]();\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback.call( element[ 0 ] );\n\t\t\t\t}\n\t\t\t\tnext();\n\t\t\t});\n\t\t}\n\t};\n});\n\n}));\n'},function(t,e,n){n(3)(n(95))},function(t,e){t.exports="/* =========================================================\n * bootstrap-datepicker.js \n * http://www.eyecon.ro/bootstrap-datepicker\n * =========================================================\n * Copyright 2012 Stefan Petre\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================= */\n \n!function( $ ) {\n\t\n\t// Picker object\n\t\n\tvar Datepicker = function(element, options){\n\t\tthis.element = $(element);\n\t\tthis.format = DPGlobal.parseFormat(options.format||this.element.data('date-format')||'mm/dd/yyyy');\n\t\tthis.picker = $(DPGlobal.template)\n\t\t\t\t\t\t\t.appendTo('body')\n\t\t\t\t\t\t\t.on({\n\t\t\t\t\t\t\t\tclick: $.proxy(this.click, this)//,\n\t\t\t\t\t\t\t\t//mousedown: $.proxy(this.mousedown, this)\n\t\t\t\t\t\t\t});\n\t\tthis.isInput = this.element.is('input');\n\t\tthis.component = this.element.is('.date') ? this.element.find('.add-on') : false;\n\t\t\n\t\tif (this.isInput) {\n\t\t\tthis.element.on({\n\t\t\t\tfocus: $.proxy(this.show, this),\n\t\t\t\t//blur: $.proxy(this.hide, this),\n\t\t\t\tkeyup: $.proxy(this.update, this)\n\t\t\t});\n\t\t} else {\n\t\t\tif (this.component){\n\t\t\t\tthis.component.on('click', $.proxy(this.show, this));\n\t\t\t} else {\n\t\t\t\tthis.element.on('click', $.proxy(this.show, this));\n\t\t\t}\n\t\t}\n\t\n\t\tthis.minViewMode = options.minViewMode||this.element.data('date-minviewmode')||0;\n\t\tif (typeof this.minViewMode === 'string') {\n\t\t\tswitch (this.minViewMode) {\n\t\t\t\tcase 'months':\n\t\t\t\t\tthis.minViewMode = 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'years':\n\t\t\t\t\tthis.minViewMode = 2;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.minViewMode = 0;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.viewMode = options.viewMode||this.element.data('date-viewmode')||0;\n\t\tif (typeof this.viewMode === 'string') {\n\t\t\tswitch (this.viewMode) {\n\t\t\t\tcase 'months':\n\t\t\t\t\tthis.viewMode = 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'years':\n\t\t\t\t\tthis.viewMode = 2;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.viewMode = 0;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.startViewMode = this.viewMode;\n\t\tthis.weekStart = options.weekStart||this.element.data('date-weekstart')||0;\n\t\tthis.weekEnd = this.weekStart === 0 ? 6 : this.weekStart - 1;\n\t\tthis.onRender = options.onRender;\n\t\tthis.fillDow();\n\t\tthis.fillMonths();\n\t\tthis.update();\n\t\tthis.showMode();\n\t};\n\t\n\tDatepicker.prototype = {\n\t\tconstructor: Datepicker,\n\t\t\n\t\tshow: function(e) {\n\t\t\tthis.picker.show();\n\t\t\tthis.height = this.component ? this.component.outerHeight() : this.element.outerHeight();\n\t\t\tthis.place();\n\t\t\t$(window).on('resize', $.proxy(this.place, this));\n\t\t\tif (e ) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tif (!this.isInput) {\n\t\t\t}\n\t\t\tvar that = this;\n\t\t\t$(document).on('mousedown', function(ev){\n\t\t\t\tif ($(ev.target).closest('.datepicker').length == 0) {\n\t\t\t\t\tthat.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.element.trigger({\n\t\t\t\ttype: 'show',\n\t\t\t\tdate: this.date\n\t\t\t});\n\t\t},\n\t\t\n\t\thide: function(){\n\t\t\tthis.picker.hide();\n\t\t\t$(window).off('resize', this.place);\n\t\t\tthis.viewMode = this.startViewMode;\n\t\t\tthis.showMode();\n\t\t\tif (!this.isInput) {\n\t\t\t\t$(document).off('mousedown', this.hide);\n\t\t\t}\n\t\t\t//this.set();\n\t\t\tthis.element.trigger({\n\t\t\t\ttype: 'hide',\n\t\t\t\tdate: this.date\n\t\t\t});\n\t\t},\n\t\t\n\t\tset: function() {\n\t\t\tvar formated = DPGlobal.formatDate(this.date, this.format);\n\t\t\tif (!this.isInput) {\n\t\t\t\tif (this.component){\n\t\t\t\t\tthis.element.find('input').prop('value', formated);\n\t\t\t\t}\n\t\t\t\tthis.element.data('date', formated);\n\t\t\t} else {\n\t\t\t\tthis.element.prop('value', formated);\n\t\t\t}\n\t\t},\n\t\t\n\t\tsetValue: function(newDate) {\n\t\t\tif (typeof newDate === 'string') {\n\t\t\t\tthis.date = DPGlobal.parseDate(newDate, this.format);\n\t\t\t} else {\n\t\t\t\tthis.date = new Date(newDate);\n\t\t\t}\n\t\t\tthis.set();\n\t\t\tthis.viewDate = new Date(this.date.getFullYear(), this.date.getMonth(), 1, 0, 0, 0, 0);\n\t\t\tthis.fill();\n\t\t},\n\t\t\n\t\tplace: function(){\n\t\t\tvar offset = this.component ? this.component.offset() : this.element.offset();\n\t\t\tthis.picker.css({\n\t\t\t\ttop: offset.top + this.height,\n\t\t\t\tleft: offset.left\n\t\t\t});\n\t\t},\n\t\t\n\t\tupdate: function(newDate){\n\t\t\tthis.date = DPGlobal.parseDate(\n\t\t\t\ttypeof newDate === 'string' ? newDate : (this.isInput ? this.element.prop('value') : this.element.data('date')),\n\t\t\t\tthis.format\n\t\t\t);\n\t\t\tthis.viewDate = new Date(this.date.getFullYear(), this.date.getMonth(), 1, 0, 0, 0, 0);\n\t\t\tthis.fill();\n\t\t},\n\t\t\n\t\tfillDow: function(){\n\t\t\tvar dowCnt = this.weekStart;\n\t\t\tvar html = '<tr>';\n\t\t\twhile (dowCnt < this.weekStart + 7) {\n\t\t\t\thtml += '<th class=\"dow\">'+DPGlobal.dates.daysMin[(dowCnt++)%7]+'</th>';\n\t\t\t}\n\t\t\thtml += '</tr>';\n\t\t\tthis.picker.find('.datepicker-days thead').append(html);\n\t\t},\n\t\t\n\t\tfillMonths: function(){\n\t\t\tvar html = '';\n\t\t\tvar i = 0\n\t\t\twhile (i < 12) {\n\t\t\t\thtml += '<span class=\"month\">'+DPGlobal.dates.monthsShort[i++]+'</span>';\n\t\t\t}\n\t\t\tthis.picker.find('.datepicker-months td').append(html);\n\t\t},\n\t\t\n\t\tfill: function() {\n\t\t\tvar d = new Date(this.viewDate),\n\t\t\t\tyear = d.getFullYear(),\n\t\t\t\tmonth = d.getMonth(),\n\t\t\t\tcurrentDate = this.date.valueOf();\n\t\t\tthis.picker.find('.datepicker-days th:eq(1)')\n\t\t\t\t\t\t.text(DPGlobal.dates.months[month]+' '+year);\n\t\t\tvar prevMonth = new Date(year, month-1, 28,0,0,0,0),\n\t\t\t\tday = DPGlobal.getDaysInMonth(prevMonth.getFullYear(), prevMonth.getMonth());\n\t\t\tprevMonth.setDate(day);\n\t\t\tprevMonth.setDate(day - (prevMonth.getDay() - this.weekStart + 7)%7);\n\t\t\tvar nextMonth = new Date(prevMonth);\n\t\t\tnextMonth.setDate(nextMonth.getDate() + 42);\n\t\t\tnextMonth = nextMonth.valueOf();\n\t\t\tvar html = [];\n\t\t\tvar clsName,\n\t\t\t\tprevY,\n\t\t\t\tprevM;\n\t\t\twhile(prevMonth.valueOf() < nextMonth) {\n\t\t\t\tif (prevMonth.getDay() === this.weekStart) {\n\t\t\t\t\thtml.push('<tr>');\n\t\t\t\t}\n\t\t\t\tclsName = this.onRender(prevMonth);\n\t\t\t\tprevY = prevMonth.getFullYear();\n\t\t\t\tprevM = prevMonth.getMonth();\n\t\t\t\tif ((prevM < month &&  prevY === year) ||  prevY < year) {\n\t\t\t\t\tclsName += ' old';\n\t\t\t\t} else if ((prevM > month && prevY === year) || prevY > year) {\n\t\t\t\t\tclsName += ' new';\n\t\t\t\t}\n\t\t\t\tif (prevMonth.valueOf() === currentDate) {\n\t\t\t\t\tclsName += ' active';\n\t\t\t\t}\n\t\t\t\thtml.push('<td class=\"day '+clsName+'\">'+prevMonth.getDate() + '</td>');\n\t\t\t\tif (prevMonth.getDay() === this.weekEnd) {\n\t\t\t\t\thtml.push('</tr>');\n\t\t\t\t}\n\t\t\t\tprevMonth.setDate(prevMonth.getDate()+1);\n\t\t\t}\n\t\t\tthis.picker.find('.datepicker-days tbody').empty().append(html.join(''));\n\t\t\tvar currentYear = this.date.getFullYear();\n\t\t\t\n\t\t\tvar months = this.picker.find('.datepicker-months')\n\t\t\t\t\t\t.find('th:eq(1)')\n\t\t\t\t\t\t\t.text(year)\n\t\t\t\t\t\t\t.end()\n\t\t\t\t\t\t.find('span').removeClass('active');\n\t\t\tif (currentYear === year) {\n\t\t\t\tmonths.eq(this.date.getMonth()).addClass('active');\n\t\t\t}\n\t\t\t\n\t\t\thtml = '';\n\t\t\tyear = parseInt(year/10, 10) * 10;\n\t\t\tvar yearCont = this.picker.find('.datepicker-years')\n\t\t\t\t\t\t\t\t.find('th:eq(1)')\n\t\t\t\t\t\t\t\t\t.text(year + '-' + (year + 9))\n\t\t\t\t\t\t\t\t\t.end()\n\t\t\t\t\t\t\t\t.find('td');\n\t\t\tyear -= 1;\n\t\t\tfor (var i = -1; i < 11; i++) {\n\t\t\t\thtml += '<span class=\"year'+(i === -1 || i === 10 ? ' old' : '')+(currentYear === year ? ' active' : '')+'\">'+year+'</span>';\n\t\t\t\tyear += 1;\n\t\t\t}\n\t\t\tyearCont.html(html);\n\t\t},\n\t\t\n\t\tclick: function(e) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tvar target = $(e.target).closest('span, td, th');\n\t\t\tif (target.length === 1) {\n\t\t\t\tswitch(target[0].nodeName.toLowerCase()) {\n\t\t\t\t\tcase 'th':\n\t\t\t\t\t\tswitch(target[0].className) {\n\t\t\t\t\t\t\tcase 'switch':\n\t\t\t\t\t\t\t\tthis.showMode(1);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'prev':\n\t\t\t\t\t\t\tcase 'next':\n\t\t\t\t\t\t\t\tthis.viewDate['set'+DPGlobal.modes[this.viewMode].navFnc].call(\n\t\t\t\t\t\t\t\t\tthis.viewDate,\n\t\t\t\t\t\t\t\t\tthis.viewDate['get'+DPGlobal.modes[this.viewMode].navFnc].call(this.viewDate) + \n\t\t\t\t\t\t\t\t\tDPGlobal.modes[this.viewMode].navStep * (target[0].className === 'prev' ? -1 : 1)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.fill();\n\t\t\t\t\t\t\t\tthis.set();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'span':\n\t\t\t\t\t\tif (target.is('.month')) {\n\t\t\t\t\t\t\tvar month = target.parent().find('span').index(target);\n\t\t\t\t\t\t\tthis.viewDate.setMonth(month);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar year = parseInt(target.text(), 10)||0;\n\t\t\t\t\t\t\tthis.viewDate.setFullYear(year);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.viewMode !== 0) {\n\t\t\t\t\t\t\tthis.date = new Date(this.viewDate);\n\t\t\t\t\t\t\tthis.element.trigger({\n\t\t\t\t\t\t\t\ttype: 'changeDate',\n\t\t\t\t\t\t\t\tdate: this.date,\n\t\t\t\t\t\t\t\tviewMode: DPGlobal.modes[this.viewMode].clsName\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.showMode(-1);\n\t\t\t\t\t\tthis.fill();\n\t\t\t\t\t\tthis.set();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'td':\n\t\t\t\t\t\tif (target.is('.day') && !target.is('.disabled')){\n\t\t\t\t\t\t\tvar day = parseInt(target.text(), 10)||1;\n\t\t\t\t\t\t\tvar month = this.viewDate.getMonth();\n\t\t\t\t\t\t\tif (target.is('.old')) {\n\t\t\t\t\t\t\t\tmonth -= 1;\n\t\t\t\t\t\t\t} else if (target.is('.new')) {\n\t\t\t\t\t\t\t\tmonth += 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar year = this.viewDate.getFullYear();\n\t\t\t\t\t\t\tthis.date = new Date(year, month, day,0,0,0,0);\n\t\t\t\t\t\t\tthis.viewDate = new Date(year, month, Math.min(28, day),0,0,0,0);\n\t\t\t\t\t\t\tthis.fill();\n\t\t\t\t\t\t\tthis.set();\n\t\t\t\t\t\t\tthis.element.trigger({\n\t\t\t\t\t\t\t\ttype: 'changeDate',\n\t\t\t\t\t\t\t\tdate: this.date,\n\t\t\t\t\t\t\t\tviewMode: DPGlobal.modes[this.viewMode].clsName\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\tmousedown: function(e){\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t},\n\t\t\n\t\tshowMode: function(dir) {\n\t\t\tif (dir) {\n\t\t\t\tthis.viewMode = Math.max(this.minViewMode, Math.min(2, this.viewMode + dir));\n\t\t\t}\n\t\t\tthis.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).show();\n\t\t}\n\t};\n\t\n\t$.fn.datepicker = function ( option, val ) {\n\t\treturn this.each(function () {\n\t\t\tvar $this = $(this),\n\t\t\t\tdata = $this.data('datepicker'),\n\t\t\t\toptions = typeof option === 'object' && option;\n\t\t\tif (!data) {\n\t\t\t\t$this.data('datepicker', (data = new Datepicker(this, $.extend({}, $.fn.datepicker.defaults,options))));\n\t\t\t}\n\t\t\tif (typeof option === 'string') data[option](val);\n\t\t});\n\t};\n\n\t$.fn.datepicker.defaults = {\n\t\tonRender: function(date) {\n\t\t\treturn '';\n\t\t}\n\t};\n\t$.fn.datepicker.Constructor = Datepicker;\n\t\n\tvar DPGlobal = {\n\t\tmodes: [\n\t\t\t{\n\t\t\t\tclsName: 'days',\n\t\t\t\tnavFnc: 'Month',\n\t\t\t\tnavStep: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tclsName: 'months',\n\t\t\t\tnavFnc: 'FullYear',\n\t\t\t\tnavStep: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tclsName: 'years',\n\t\t\t\tnavFnc: 'FullYear',\n\t\t\t\tnavStep: 10\n\t\t}],\n\t\tdates:{\n\t\t\tdays: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\n\t\t\tdaysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\n\t\t\tdaysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\n\t\t\tmonths: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t\t\tmonthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n\t\t},\n\t\tisLeapYear: function (year) {\n\t\t\treturn (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0))\n\t\t},\n\t\tgetDaysInMonth: function (year, month) {\n\t\t\treturn [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month]\n\t\t},\n\t\tparseFormat: function(format){\n\t\t\tvar separator = format.match(/[.\\/\\-\\s].*?/),\n\t\t\t\tparts = format.split(/\\W+/);\n\t\t\tif (!separator || !parts || parts.length === 0){\n\t\t\t\tthrow new Error(\"Invalid date format.\");\n\t\t\t}\n\t\t\treturn {separator: separator, parts: parts};\n\t\t},\n\t\tparseDate: function(date, format) {\n\t\t\tvar parts = date.split(format.separator),\n\t\t\t\tdate = new Date(),\n\t\t\t\tval;\n\t\t\tdate.setHours(0);\n\t\t\tdate.setMinutes(0);\n\t\t\tdate.setSeconds(0);\n\t\t\tdate.setMilliseconds(0);\n\t\t\tif (parts.length === format.parts.length) {\n\t\t\t\tvar year = date.getFullYear(), day = date.getDate(), month = date.getMonth();\n\t\t\t\tfor (var i=0, cnt = format.parts.length; i < cnt; i++) {\n\t\t\t\t\tval = parseInt(parts[i], 10)||1;\n\t\t\t\t\tswitch(format.parts[i]) {\n\t\t\t\t\t\tcase 'dd':\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\tday = val;\n\t\t\t\t\t\t\tdate.setDate(val);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mm':\n\t\t\t\t\t\tcase 'm':\n\t\t\t\t\t\t\tmonth = val - 1;\n\t\t\t\t\t\t\tdate.setMonth(val - 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'yy':\n\t\t\t\t\t\t\tyear = 2000 + val;\n\t\t\t\t\t\t\tdate.setFullYear(2000 + val);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'yyyy':\n\t\t\t\t\t\t\tyear = val;\n\t\t\t\t\t\t\tdate.setFullYear(val);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdate = new Date(year, month, day, 0 ,0 ,0);\n\t\t\t}\n\t\t\treturn date;\n\t\t},\n\t\tformatDate: function(date, format){\n\t\t\tvar val = {\n\t\t\t\td: date.getDate(),\n\t\t\t\tm: date.getMonth() + 1,\n\t\t\t\tyy: date.getFullYear().toString().substring(2),\n\t\t\t\tyyyy: date.getFullYear()\n\t\t\t};\n\t\t\tval.dd = (val.d < 10 ? '0' : '') + val.d;\n\t\t\tval.mm = (val.m < 10 ? '0' : '') + val.m;\n\t\t\tvar date = [];\n\t\t\tfor (var i=0, cnt = format.parts.length; i < cnt; i++) {\n\t\t\t\tdate.push(val[format.parts[i]]);\n\t\t\t}\n\t\t\treturn date.join(format.separator);\n\t\t},\n\t\theadTemplate: '<thead>'+\n\t\t\t\t\t\t\t'<tr>'+\n\t\t\t\t\t\t\t\t'<th class=\"prev\">&lsaquo;</th>'+\n\t\t\t\t\t\t\t\t'<th colspan=\"5\" class=\"switch\"></th>'+\n\t\t\t\t\t\t\t\t'<th class=\"next\">&rsaquo;</th>'+\n\t\t\t\t\t\t\t'</tr>'+\n\t\t\t\t\t\t'</thead>',\n\t\tcontTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>'\n\t};\n\tDPGlobal.template = '<div class=\"datepicker dropdown-menu\">'+\n\t\t\t\t\t\t\t'<div class=\"datepicker-days\">'+\n\t\t\t\t\t\t\t\t'<table class=\" table-condensed\">'+\n\t\t\t\t\t\t\t\t\tDPGlobal.headTemplate+\n\t\t\t\t\t\t\t\t\t'<tbody></tbody>'+\n\t\t\t\t\t\t\t\t'</table>'+\n\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t'<div class=\"datepicker-months\">'+\n\t\t\t\t\t\t\t\t'<table class=\"table-condensed\">'+\n\t\t\t\t\t\t\t\t\tDPGlobal.headTemplate+\n\t\t\t\t\t\t\t\t\tDPGlobal.contTemplate+\n\t\t\t\t\t\t\t\t'</table>'+\n\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t'<div class=\"datepicker-years\">'+\n\t\t\t\t\t\t\t\t'<table class=\"table-condensed\">'+\n\t\t\t\t\t\t\t\t\tDPGlobal.headTemplate+\n\t\t\t\t\t\t\t\t\tDPGlobal.contTemplate+\n\t\t\t\t\t\t\t\t'</table>'+\n\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t'</div>';\n\n}( window.jQuery );"},function(t,e,n){n(3)(n(97))},function(t,e){t.exports='/*\n * JavaScript Templates\n * https://github.com/blueimp/JavaScript-Templates\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * http://www.opensource.org/licenses/MIT\n *\n * Inspired by John Resig\'s JavaScript Micro-Templating:\n * http://ejohn.org/blog/javascript-micro-templating/\n */\n\n/*jshint evil: true */\n/*global document, define */\n\n(function ($) {\n    "use strict";\n    var tmpl = function (str, data) {\n        var f = !/[^\\w\\-\\.:]/.test(str) ? tmpl.cache[str] = tmpl.cache[str] ||\n                tmpl(tmpl.load(str)) :\n                    new Function(\n                        tmpl.arg + ",tmpl",\n                        "var _e=tmpl.encode" + tmpl.helper + ",_s=\'" +\n                            str.replace(tmpl.regexp, tmpl.func) +\n                            "\';return _s;"\n                    );\n        return data ? f(data, tmpl) : function (data) {\n            return f(data, tmpl);\n        };\n    };\n    tmpl.cache = {};\n    tmpl.load = function (id) {\n        return document.getElementById(id).innerHTML;\n    };\n    tmpl.regexp = /([\\s\'\\\\])(?!(?:[^{]|\\{(?!%))*%\\})|(?:\\{%(=|#)([\\s\\S]+?)%\\})|(\\{%)|(%\\})/g;\n    tmpl.func = function (s, p1, p2, p3, p4, p5) {\n        if (p1) { // whitespace, quote and backspace in HTML context\n            return {\n                "\\n": "\\\\n",\n                "\\r": "\\\\r",\n                "\\t": "\\\\t",\n                " " : " "\n            }[p1] || "\\\\" + p1;\n        }\n        if (p2) { // interpolation: {%=prop%}, or unescaped: {%#prop%}\n            if (p2 === "=") {\n                return "\'+_e(" + p3 + ")+\'";\n            }\n            return "\'+(" + p3 + "==null?\'\':" + p3 + ")+\'";\n        }\n        if (p4) { // evaluation start tag: {%\n            return "\';";\n        }\n        if (p5) { // evaluation end tag: %}\n            return "_s+=\'";\n        }\n    };\n    tmpl.encReg = /[<>&"\'\\x00]/g;\n    tmpl.encMap = {\n        "<"   : "&lt;",\n        ">"   : "&gt;",\n        "&"   : "&amp;",\n        "\\""  : "&quot;",\n        "\'"   : "&#39;"\n    };\n    tmpl.encode = function (s) {\n        /*jshint eqnull:true */\n        return (s == null ? "" : "" + s).replace(\n            tmpl.encReg,\n            function (c) {\n                return tmpl.encMap[c] || "";\n            }\n        );\n    };\n    tmpl.arg = "o";\n    tmpl.helper = ",print=function(s,e){_s+=e?(s==null?\'\':s):_e(s);}" +\n        ",include=function(s,d){_s+=tmpl(s,d);}";\n    if (typeof define === "function" && define.amd) {\n        define(function () {\n            return tmpl;\n        });\n    } else {\n        $.tmpl = tmpl;\n    }\n}(this));\n'},function(t,e,n){(function(t){!function(e){e.extend(e.fn,{swapClass:function(t,e){var n=this.filter("."+t);return this.filter("."+e).removeClass(e).addClass(t),n.removeClass(t).addClass(e),this},replaceClass:function(t,e){return this.filter("."+t).removeClass(t).addClass(e).end()},hoverClass:function(t){return t=t||"hover",this.hover(function(){e(this).addClass(t)},function(){e(this).removeClass(t)})},heightToggle:function(e,n){e?this.animate({height:"toggle"},e,n):this.each(function(){t(this)[t(this).is(":hidden")?"show":"hide"](),n&&n.apply(this,arguments)})},heightHide:function(t,e){t?this.animate({height:"hide"},t,e):(this.hide(),e&&this.each(e))},prepareBranches:function(t){return t.prerendered||(this.filter(":last-child:not(ul)").addClass(n.last),this.filter((t.collapsed?"":"."+n.closed)+":not(."+n.open+")").find(">ul").hide()),this.filter(":has(>ul)")},applyClasses:function(t,i){if(this.filter(":has(>ul):not(:has(>a))").find(">span").unbind("click.treeview").bind("click.treeview",function(t){this==t.target&&i.apply(e(this).next())}).add(e("a",this)).hoverClass(),!t.prerendered){this.filter(":has(>ul:hidden)").addClass(n.expandable).replaceClass(n.last,n.lastExpandable),this.not(":has(>ul:hidden)").addClass(n.collapsable).replaceClass(n.last,n.lastCollapsable);var o=this.find("div."+n.hitarea);o.length||(o=this.prepend('<div class="'+n.hitarea+'"/>').find("div."+n.hitarea)),o.removeClass().addClass(n.hitarea).each(function(){var t="";e.each(e(this).parent().attr("class").split(" "),function(){t+=this+"-hitarea "}),e(this).addClass(t)})}this.find("div."+n.hitarea).click(i)},treeview:function(t){if((t=e.extend({cookieId:"treeview"},t)).toggle){var i=t.toggle;t.toggle=function(){return i.apply(e(this).parent()[0],arguments)}}function o(){e(this).parent().find(">.hitarea").swapClass(n.collapsableHitarea,n.expandableHitarea).swapClass(n.lastCollapsableHitarea,n.lastExpandableHitarea).end().swapClass(n.collapsable,n.expandable).swapClass(n.lastCollapsable,n.lastExpandable).find(">ul").heightToggle(t.animated,t.toggle),t.unique&&e(this).parent().siblings().find(">.hitarea").replaceClass(n.collapsableHitarea,n.expandableHitarea).replaceClass(n.lastCollapsableHitarea,n.lastExpandableHitarea).end().replaceClass(n.collapsable,n.expandable).replaceClass(n.lastCollapsable,n.lastExpandable).find(">ul").heightHide(t.animated,t.toggle)}this.data("toggler",o),this.addClass("treeview");var r=this.find("li").prepareBranches(t);switch(t.persist){case"cookie":var a=t.toggle;t.toggle=function(){var n;n=[],r.each(function(t,i){n[t]=e(i).is(":has(>ul:visible)")?1:0}),e.cookie(t.cookieId,n.join(""),t.cookieOptions),a&&a.apply(this,arguments)},function(){var n=e.cookie(t.cookieId);if(n){var i=n.split("");r.each(function(t,n){e(n).find(">ul")[parseInt(i[t])?"show":"hide"]()})}}();break;case"location":var s=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});if(s.length){var l=s.addClass("selected").parents("ul, li").add(s.next()).show();t.prerendered&&l.filter("li").swapClass(n.collapsable,n.expandable).swapClass(n.lastCollapsable,n.lastExpandable).find(">.hitarea").swapClass(n.collapsableHitarea,n.expandableHitarea).swapClass(n.lastCollapsableHitarea,n.lastExpandableHitarea)}}return r.applyClasses(t,o),t.control&&(!function(t,i){function r(i){return function(){return o.apply(e("div."+n.hitarea,t).filter(function(){return!i||e(this).parent("."+i).length})),!1}}e("a:eq(0)",i).click(r(n.collapsable)),e("a:eq(1)",i).click(r(n.expandable)),e("a:eq(2)",i).click(r())}(this,t.control),e(t.control).show()),this}}),e.treeview={};var n=e.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"}}(t)}).call(this,n(0))},function(t,e,n){(function(t){t.extend(!0,t.fn.dataTable.defaults,{sDom:"<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",sPaginationType:"bootstrap",oLanguage:{sLengthMenu:"_MENU_ records per page"}}),t.extend(t.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper form-inline"}),t.fn.dataTableExt.oApi.fnPagingInfo=function(t){return{iStart:t._iDisplayStart,iEnd:t.fnDisplayEnd(),iLength:t._iDisplayLength,iTotal:t.fnRecordsTotal(),iFilteredTotal:t.fnRecordsDisplay(),iPage:-1===t._iDisplayLength?0:Math.ceil(t._iDisplayStart/t._iDisplayLength),iTotalPages:-1===t._iDisplayLength?0:Math.ceil(t.fnRecordsDisplay()/t._iDisplayLength)}},t.extend(t.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(e,n,i){var o=e.oLanguage.oPaginate,r=function(t){t.preventDefault(),e.oApi._fnPageChange(e,t.data.action)&&i(e)};t(n).addClass("pagination").append('<ul><li class="prev disabled"><a href="#">&larr; '+o.sPrevious+'</a></li><li class="next disabled"><a href="#">'+o.sNext+" &rarr; </a></li></ul>");var a=t("a",n);t(a[0]).bind("click.DT",{action:"previous"},r),t(a[1]).bind("click.DT",{action:"next"},r)},fnUpdate:function(e,n){var i,o,r,a,s,l,u=e.oInstance.fnPagingInfo(),c=e.aanFeatures.p,d=Math.floor(2.5);for(u.iTotalPages<5?(s=1,l=u.iTotalPages):u.iPage<=d?(s=1,l=5):u.iPage>=u.iTotalPages-d?(s=u.iTotalPages-5+1,l=u.iTotalPages):l=(s=u.iPage-d+1)+5-1,i=0,o=c.length;i<o;i++){for(t("li:gt(0)",c[i]).filter(":not(:last)").remove(),r=s;r<=l;r++)a=r==u.iPage+1?'class="active"':"",t("<li "+a+'><a href="#">'+r+"</a></li>").insertBefore(t("li:last",c[i])[0]).bind("click",function(i){i.preventDefault(),e._iDisplayStart=(parseInt(t("a",this).text(),10)-1)*u.iLength,n(e)});0===u.iPage?t("li:first",c[i]).addClass("disabled"):t("li:first",c[i]).removeClass("disabled"),u.iPage===u.iTotalPages-1||0===u.iTotalPages?t("li:last",c[i]).addClass("disabled"):t("li:last",c[i]).removeClass("disabled")}}}}),t.fn.DataTable.TableTools&&(t.extend(!0,t.fn.DataTable.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info modal"},select:{row:"active"}}),t.extend(!0,t.fn.DataTable.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}}))}).call(this,n(0))},function(module,exports,__webpack_require__){(function(jQuery){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(window,document,undefined){!function(factory){"use strict";__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0)],(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function($){var DataTable=function(oInit){function _fnAddColumn(t,e){var n=DataTable.defaults.columns,i=t.aoColumns.length,o=$.extend({},DataTable.models.oColumn,n,{sSortingClass:t.oClasses.sSortable,sSortingClassJUI:t.oClasses.sSortJUI,nTh:e||document.createElement("th"),sTitle:n.sTitle?n.sTitle:e?e.innerHTML:"",aDataSort:n.aDataSort?n.aDataSort:[i],mData:n.mData?n.oDefaults:i});if(t.aoColumns.push(o),t.aoPreSearchCols[i]===undefined||null===t.aoPreSearchCols[i])t.aoPreSearchCols[i]=$.extend({},DataTable.models.oSearch);else{var r=t.aoPreSearchCols[i];r.bRegex===undefined&&(r.bRegex=!0),r.bSmart===undefined&&(r.bSmart=!0),r.bCaseInsensitive===undefined&&(r.bCaseInsensitive=!0)}_fnColumnOptions(t,i,null)}function _fnColumnOptions(t,e,n){var i=t.aoColumns[e];n!==undefined&&null!==n&&(n.mDataProp&&!n.mData&&(n.mData=n.mDataProp),n.sType!==undefined&&(i.sType=n.sType,i._bAutoType=!1),$.extend(i,n),_fnMap(i,n,"sWidth","sWidthOrig"),n.iDataSort!==undefined&&(i.aDataSort=[n.iDataSort]),_fnMap(i,n,"aDataSort"));var o=i.mRender?_fnGetObjectDataFn(i.mRender):null,r=_fnGetObjectDataFn(i.mData);i.fnGetData=function(t,e){var n=r(t,e);return i.mRender&&e&&""!==e?o(n,e,t):n},i.fnSetData=_fnSetObjectDataFn(i.mData),t.oFeatures.bSort||(i.bSortable=!1),!i.bSortable||-1==$.inArray("asc",i.asSorting)&&-1==$.inArray("desc",i.asSorting)?(i.sSortingClass=t.oClasses.sSortableNone,i.sSortingClassJUI=""):-1==$.inArray("asc",i.asSorting)&&-1==$.inArray("desc",i.asSorting)?(i.sSortingClass=t.oClasses.sSortable,i.sSortingClassJUI=t.oClasses.sSortJUI):-1!=$.inArray("asc",i.asSorting)&&-1==$.inArray("desc",i.asSorting)?(i.sSortingClass=t.oClasses.sSortableAsc,i.sSortingClassJUI=t.oClasses.sSortJUIAscAllowed):-1==$.inArray("asc",i.asSorting)&&-1!=$.inArray("desc",i.asSorting)&&(i.sSortingClass=t.oClasses.sSortableDesc,i.sSortingClassJUI=t.oClasses.sSortJUIDescAllowed)}function _fnAdjustColumnSizing(t){if(!1===t.oFeatures.bAutoWidth)return!1;_fnCalculateColumnWidths(t);for(var e=0,n=t.aoColumns.length;e<n;e++)t.aoColumns[e].nTh.style.width=t.aoColumns[e].sWidth}function _fnVisibleToColumnIndex(t,e){var n=_fnGetColumns(t,"bVisible");return"number"==typeof n[e]?n[e]:null}function _fnColumnIndexToVisible(t,e){var n=_fnGetColumns(t,"bVisible"),i=$.inArray(e,n);return-1!==i?i:null}function _fnVisbleColumns(t){return _fnGetColumns(t,"bVisible").length}function _fnGetColumns(t,e){var n=[];return $.map(t.aoColumns,function(t,i){t[e]&&n.push(i)}),n}function _fnDetectType(t){for(var e=DataTable.ext.aTypes,n=e.length,i=0;i<n;i++){var o=e[i](t);if(null!==o)return o}return"string"}function _fnReOrderIndex(t,e){for(var n=e.split(","),i=[],o=0,r=t.aoColumns.length;o<r;o++)for(var a=0;a<r;a++)if(t.aoColumns[o].sName==n[a]){i.push(a);break}return i}function _fnColumnOrdering(t){for(var e="",n=0,i=t.aoColumns.length;n<i;n++)e+=t.aoColumns[n].sName+",";return e.length==i?"":e.slice(0,-1)}function _fnApplyColumnDefs(t,e,n,i){var o,r,a,s,l,u;if(e)for(o=e.length-1;o>=0;o--){var c=e[o].aTargets;for($.isArray(c)||_fnLog(t,1,"aTargets must be an array of targets, not a "+typeof c),a=0,s=c.length;a<s;a++)if("number"==typeof c[a]&&c[a]>=0){for(;t.aoColumns.length<=c[a];)_fnAddColumn(t);i(c[a],e[o])}else if("number"==typeof c[a]&&c[a]<0)i(t.aoColumns.length+c[a],e[o]);else if("string"==typeof c[a])for(l=0,u=t.aoColumns.length;l<u;l++)("_all"==c[a]||$(t.aoColumns[l].nTh).hasClass(c[a]))&&i(l,e[o])}if(n)for(o=0,r=n.length;o<r;o++)i(o,n[o])}function _fnAddData(t,e){var n,i,o=$.isArray(e)?e.slice():$.extend(!0,{},e),r=t.aoData.length,a=$.extend(!0,{},DataTable.models.oRow);a._aData=o,t.aoData.push(a);for(var s=0,l=t.aoColumns.length;s<l;s++)if("function"==typeof(n=t.aoColumns[s]).fnRender&&n.bUseRendered&&null!==n.mData?_fnSetCellData(t,r,s,_fnRender(t,r,s)):_fnSetCellData(t,r,s,_fnGetCellData(t,r,s)),n._bAutoType&&"string"!=n.sType){var u=_fnGetCellData(t,r,s,"type");null!==u&&""!==u&&(i=_fnDetectType(u),null===n.sType?n.sType=i:n.sType!=i&&"html"!=n.sType&&(n.sType="string"))}return t.aiDisplayMaster.push(r),t.oFeatures.bDeferRender||_fnCreateTr(t,r),r}function _fnGatherData(t){var e,n,i,o,r,a,s,l,u,c,d,h,f,p,g;if(t.bDeferLoading||null===t.sAjaxSource)for(s=t.nTBody.firstChild;s;){if("TR"==s.nodeName.toUpperCase())for(l=t.aoData.length,s._DT_RowIndex=l,t.aoData.push($.extend(!0,{},DataTable.models.oRow,{nTr:s})),t.aiDisplayMaster.push(l),a=s.firstChild,i=0;a;)"TD"!=(f=a.nodeName.toUpperCase())&&"TH"!=f||(_fnSetCellData(t,l,i,$.trim(a.innerHTML)),i++),a=a.nextSibling;s=s.nextSibling}for(r=_fnGetTrNodes(t),o=[],e=0,n=r.length;e<n;e++)for(a=r[e].firstChild;a;)"TD"!=(f=a.nodeName.toUpperCase())&&"TH"!=f||o.push(a),a=a.nextSibling;for(d=0,h=t.aoColumns.length;d<h;d++){null===(p=t.aoColumns[d]).sTitle&&(p.sTitle=p.nTh.innerHTML);var m,v,_,y,b=p._bAutoType,x="function"==typeof p.fnRender,w=null!==p.sClass,S=p.bVisible;if(b||x||w||!S)for(u=0,c=t.aoData.length;u<c;u++)g=t.aoData[u],m=o[u*h+d],b&&"string"!=p.sType&&""!==(y=_fnGetCellData(t,u,d,"type"))&&(v=_fnDetectType(y),null===p.sType?p.sType=v:p.sType!=v&&"html"!=p.sType&&(p.sType="string")),p.mRender?m.innerHTML=_fnGetCellData(t,u,d,"display"):p.mData!==d&&(m.innerHTML=_fnGetCellData(t,u,d,"display")),x&&(_=_fnRender(t,u,d),m.innerHTML=_,p.bUseRendered&&_fnSetCellData(t,u,d,_)),w&&(m.className+=" "+p.sClass),S?g._anHidden[d]=null:(g._anHidden[d]=m,m.parentNode.removeChild(m)),p.fnCreatedCell&&p.fnCreatedCell.call(t.oInstance,m,_fnGetCellData(t,u,d,"display"),g._aData,u,d)}if(0!==t.aoRowCreatedCallback.length)for(e=0,n=t.aoData.length;e<n;e++)g=t.aoData[e],_fnCallbackFire(t,"aoRowCreatedCallback",null,[g.nTr,g._aData,e])}function _fnNodeToDataIndex(t,e){return e._DT_RowIndex!==undefined?e._DT_RowIndex:null}function _fnNodeToColumnIndex(t,e,n){for(var i=_fnGetTdNodes(t,e),o=0,r=t.aoColumns.length;o<r;o++)if(i[o]===n)return o;return-1}function _fnGetRowData(t,e,n,i){for(var o=[],r=0,a=i.length;r<a;r++)o.push(_fnGetCellData(t,e,i[r],n));return o}function _fnGetCellData(t,e,n,i){var o,r=t.aoColumns[n],a=t.aoData[e]._aData;if((o=r.fnGetData(a,i))===undefined)return t.iDrawError!=t.iDraw&&null===r.sDefaultContent&&(_fnLog(t,0,"Requested unknown parameter "+("function"==typeof r.mData?"{mData function}":"'"+r.mData+"'")+" from the data source for row "+e),t.iDrawError=t.iDraw),r.sDefaultContent;if(null===o&&null!==r.sDefaultContent)o=r.sDefaultContent;else if("function"==typeof o)return o();return"display"==i&&null===o?"":o}function _fnSetCellData(t,e,n,i){var o=t.aoColumns[n],r=t.aoData[e]._aData;o.fnSetData(r,i)}var __reArray=/\[.*?\]$/;function _fnGetObjectDataFn(t){if(null===t)return function(t,e){return null};if("function"==typeof t)return function(e,n,i){return t(e,n,i)};if("string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("["))return function(e,n){return e[t]};var e=function(t,n,i){var o,r,a,s=i.split(".");if(""!==i)for(var l=0,u=s.length;l<u;l++){if(o=s[l].match(__reArray)){s[l]=s[l].replace(__reArray,""),""!==s[l]&&(t=t[s[l]]),r=[],s.splice(0,l+1),a=s.join(".");for(var c=0,d=t.length;c<d;c++)r.push(e(t[c],n,a));var h=o[0].substring(1,o[0].length-1);t=""===h?r:r.join(h);break}if(null===t||t[s[l]]===undefined)return undefined;t=t[s[l]]}return t};return function(n,i){return e(n,i,t)}}function _fnSetObjectDataFn(t){if(null===t)return function(t,e){};if("function"==typeof t)return function(e,n){t(e,"set",n)};if("string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("["))return function(e,n){e[t]=n};var e=function(t,n,i){for(var o,r,a,s=i.split("."),l=0,u=s.length-1;l<u;l++){if(s[l].match(__reArray)){s[l]=s[l].replace(__reArray,""),t[s[l]]=[],(o=s.slice()).splice(0,l+1),a=o.join(".");for(var c=0,d=n.length;c<d;c++)e(r={},n[c],a),t[s[l]].push(r);return}null!==t[s[l]]&&t[s[l]]!==undefined||(t[s[l]]={}),t=t[s[l]]}t[s[s.length-1].replace(__reArray,"")]=n};return function(n,i){return e(n,i,t)}}function _fnGetDataMaster(t){for(var e=[],n=t.aoData.length,i=0;i<n;i++)e.push(t.aoData[i]._aData);return e}function _fnClearTable(t){t.aoData.splice(0,t.aoData.length),t.aiDisplayMaster.splice(0,t.aiDisplayMaster.length),t.aiDisplay.splice(0,t.aiDisplay.length),_fnCalculateEnd(t)}function _fnDeleteIndex(t,e){for(var n=-1,i=0,o=t.length;i<o;i++)t[i]==e?n=i:t[i]>e&&t[i]--;-1!=n&&t.splice(n,1)}function _fnRender(t,e,n){var i=t.aoColumns[n];return i.fnRender({iDataRow:e,iDataColumn:n,oSettings:t,aData:t.aoData[e]._aData,mDataProp:i.mData},_fnGetCellData(t,e,n,"display"))}function _fnCreateTr(t,e){var n,i=t.aoData[e];if(null===i.nTr){i.nTr=document.createElement("tr"),i.nTr._DT_RowIndex=e,i._aData.DT_RowId&&(i.nTr.id=i._aData.DT_RowId),i._aData.DT_RowClass&&(i.nTr.className=i._aData.DT_RowClass);for(var o=0,r=t.aoColumns.length;o<r;o++){var a=t.aoColumns[o];(n=document.createElement(a.sCellType)).innerHTML="function"!=typeof a.fnRender||a.bUseRendered&&null!==a.mData?_fnGetCellData(t,e,o,"display"):_fnRender(t,e,o),null!==a.sClass&&(n.className=a.sClass),a.bVisible?(i.nTr.appendChild(n),i._anHidden[o]=null):i._anHidden[o]=n,a.fnCreatedCell&&a.fnCreatedCell.call(t.oInstance,n,_fnGetCellData(t,e,o,"display"),i._aData,e,o)}_fnCallbackFire(t,"aoRowCreatedCallback",null,[i.nTr,i._aData,e])}}function _fnBuildHead(t){var e,n,i,o=$("th, td",t.nTHead).length;if(0!==o)for(e=0,i=t.aoColumns.length;e<i;e++)(n=t.aoColumns[e].nTh).setAttribute("role","columnheader"),t.aoColumns[e].bSortable&&(n.setAttribute("tabindex",t.iTabIndex),n.setAttribute("aria-controls",t.sTableId)),null!==t.aoColumns[e].sClass&&$(n).addClass(t.aoColumns[e].sClass),t.aoColumns[e].sTitle!=n.innerHTML&&(n.innerHTML=t.aoColumns[e].sTitle);else{var r=document.createElement("tr");for(e=0,i=t.aoColumns.length;e<i;e++)(n=t.aoColumns[e].nTh).innerHTML=t.aoColumns[e].sTitle,n.setAttribute("tabindex","0"),null!==t.aoColumns[e].sClass&&$(n).addClass(t.aoColumns[e].sClass),r.appendChild(n);$(t.nTHead).html("")[0].appendChild(r),_fnDetectHeader(t.aoHeader,t.nTHead)}if($(t.nTHead).children("tr").attr("role","row"),t.bJUI)for(e=0,i=t.aoColumns.length;e<i;e++){n=t.aoColumns[e].nTh;var a=document.createElement("div");a.className=t.oClasses.sSortJUIWrapper,$(n).contents().appendTo(a);var s=document.createElement("span");s.className=t.oClasses.sSortIcon,a.appendChild(s),n.appendChild(a)}if(t.oFeatures.bSort)for(e=0;e<t.aoColumns.length;e++)!1!==t.aoColumns[e].bSortable?_fnSortAttachListener(t,t.aoColumns[e].nTh,e):$(t.aoColumns[e].nTh).addClass(t.oClasses.sSortableNone);if(""!==t.oClasses.sFooterTH&&$(t.nTFoot).children("tr").children("th").addClass(t.oClasses.sFooterTH),null!==t.nTFoot){var l=_fnGetUniqueThs(t,null,t.aoFooter);for(e=0,i=t.aoColumns.length;e<i;e++)l[e]&&(t.aoColumns[e].nTf=l[e],t.aoColumns[e].sClass&&$(l[e]).addClass(t.aoColumns[e].sClass))}}function _fnDrawHead(t,e,n){var i,o,r,a,s,l,u,c,d,h=[],f=[],p=t.aoColumns.length;for(n===undefined&&(n=!1),i=0,o=e.length;i<o;i++){for(h[i]=e[i].slice(),h[i].nTr=e[i].nTr,r=p-1;r>=0;r--)t.aoColumns[r].bVisible||n||h[i].splice(r,1);f.push([])}for(i=0,o=h.length;i<o;i++){if(u=h[i].nTr)for(;l=u.firstChild;)u.removeChild(l);for(r=0,a=h[i].length;r<a;r++)if(c=1,d=1,f[i][r]===undefined){for(u.appendChild(h[i][r].cell),f[i][r]=1;h[i+c]!==undefined&&h[i][r].cell==h[i+c][r].cell;)f[i+c][r]=1,c++;for(;h[i][r+d]!==undefined&&h[i][r].cell==h[i][r+d].cell;){for(s=0;s<c;s++)f[i+s][r+d]=1;d++}h[i][r].cell.rowSpan=c,h[i][r].cell.colSpan=d}}}function _fnDraw(t){var e=_fnCallbackFire(t,"aoPreDrawCallback","preDraw",[t]);if(-1===$.inArray(!1,e)){var n,i,o,r=[],a=0,s=t.asStripeClasses.length,l=t.aoOpenRows.length;if(t.bDrawing=!0,t.iInitDisplayStart!==undefined&&-1!=t.iInitDisplayStart&&(t.oFeatures.bServerSide?t._iDisplayStart=t.iInitDisplayStart:t._iDisplayStart=t.iInitDisplayStart>=t.fnRecordsDisplay()?0:t.iInitDisplayStart,t.iInitDisplayStart=-1,_fnCalculateEnd(t)),t.bDeferLoading)t.bDeferLoading=!1,t.iDraw++;else if(t.oFeatures.bServerSide){if(!t.bDestroying&&!_fnAjaxUpdate(t))return}else t.iDraw++;if(0!==t.aiDisplay.length){var u=t._iDisplayStart,c=t._iDisplayEnd;t.oFeatures.bServerSide&&(u=0,c=t.aoData.length);for(var d=u;d<c;d++){var h=t.aoData[t.aiDisplay[d]];null===h.nTr&&_fnCreateTr(t,t.aiDisplay[d]);var f=h.nTr;if(0!==s){var p=t.asStripeClasses[a%s];h._sRowStripe!=p&&($(f).removeClass(h._sRowStripe).addClass(p),h._sRowStripe=p)}if(_fnCallbackFire(t,"aoRowCallback",null,[f,t.aoData[t.aiDisplay[d]]._aData,a,d]),r.push(f),a++,0!==l)for(var g=0;g<l;g++)if(f==t.aoOpenRows[g].nParent){r.push(t.aoOpenRows[g].nTr);break}}}else{r[0]=document.createElement("tr"),t.asStripeClasses[0]&&(r[0].className=t.asStripeClasses[0]);var m=t.oLanguage,v=m.sZeroRecords;1!=t.iDraw||null===t.sAjaxSource||t.oFeatures.bServerSide?m.sEmptyTable&&0===t.fnRecordsTotal()&&(v=m.sEmptyTable):v=m.sLoadingRecords;var _=document.createElement("td");_.setAttribute("valign","top"),_.colSpan=_fnVisbleColumns(t),_.className=t.oClasses.sRowEmpty,_.innerHTML=_fnInfoMacros(t,v),r[a].appendChild(_)}_fnCallbackFire(t,"aoHeaderCallback","header",[$(t.nTHead).children("tr")[0],_fnGetDataMaster(t),t._iDisplayStart,t.fnDisplayEnd(),t.aiDisplay]),_fnCallbackFire(t,"aoFooterCallback","footer",[$(t.nTFoot).children("tr")[0],_fnGetDataMaster(t),t._iDisplayStart,t.fnDisplayEnd(),t.aiDisplay]);var y,b=document.createDocumentFragment(),x=document.createDocumentFragment();if(t.nTBody){if(y=t.nTBody.parentNode,x.appendChild(t.nTBody),!t.oScroll.bInfinite||!t._bInitComplete||t.bSorted||t.bFiltered)for(;o=t.nTBody.firstChild;)t.nTBody.removeChild(o);for(n=0,i=r.length;n<i;n++)b.appendChild(r[n]);t.nTBody.appendChild(b),null!==y&&y.appendChild(t.nTBody)}_fnCallbackFire(t,"aoDrawCallback","draw",[t]),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1,t.oFeatures.bServerSide&&(_fnProcessingDisplay(t,!1),t._bInitComplete||_fnInitComplete(t))}else _fnProcessingDisplay(t,!1)}function _fnReDraw(t){t.oFeatures.bSort?_fnSort(t,t.oPreviousSearch):t.oFeatures.bFilter?_fnFilterComplete(t,t.oPreviousSearch):(_fnCalculateEnd(t),_fnDraw(t))}function _fnAddOptionsHtml(t){var e=$("<div></div>")[0];t.nTable.parentNode.insertBefore(e,t.nTable),t.nTableWrapper=$('<div id="'+t.sTableId+'_wrapper" class="'+t.oClasses.sWrapper+'" role="grid"></div>')[0],t.nTableReinsertBefore=t.nTable.nextSibling;for(var n,i,o,r,a,s,l,u=t.nTableWrapper,c=t.sDom.split(""),d=0;d<c.length;d++){if(i=0,"<"==(o=c[d])){if(r=$("<div></div>")[0],"'"==(a=c[d+1])||'"'==a){for(s="",l=2;c[d+l]!=a;)s+=c[d+l],l++;if("H"==s?s=t.oClasses.sJUIHeader:"F"==s&&(s=t.oClasses.sJUIFooter),-1!=s.indexOf(".")){var h=s.split(".");r.id=h[0].substr(1,h[0].length-1),r.className=h[1]}else"#"==s.charAt(0)?r.id=s.substr(1,s.length-1):r.className=s;d+=l}u.appendChild(r),u=r}else if(">"==o)u=u.parentNode;else if("l"==o&&t.oFeatures.bPaginate&&t.oFeatures.bLengthChange)n=_fnFeatureHtmlLength(t),i=1;else if("f"==o&&t.oFeatures.bFilter)n=_fnFeatureHtmlFilter(t),i=1;else if("r"==o&&t.oFeatures.bProcessing)n=_fnFeatureHtmlProcessing(t),i=1;else if("t"==o)n=_fnFeatureHtmlTable(t),i=1;else if("i"==o&&t.oFeatures.bInfo)n=_fnFeatureHtmlInfo(t),i=1;else if("p"==o&&t.oFeatures.bPaginate)n=_fnFeatureHtmlPaginate(t),i=1;else if(0!==DataTable.ext.aoFeatures.length)for(var f=DataTable.ext.aoFeatures,p=0,g=f.length;p<g;p++)if(o==f[p].cFeature){(n=f[p].fnInit(t))&&(i=1);break}1==i&&null!==n&&("object"!=typeof t.aanFeatures[o]&&(t.aanFeatures[o]=[]),t.aanFeatures[o].push(n),u.appendChild(n))}e.parentNode.replaceChild(t.nTableWrapper,e)}function _fnDetectHeader(t,e){var n,i,o,r,a,s,l,u,c,d,h,f=$(e).children("tr"),p=function(t,e,n){for(var i=t[e];i[n];)n++;return n};for(t.splice(0,t.length),o=0,s=f.length;o<s;o++)t.push([]);for(o=0,s=f.length;o<s;o++)for(n=f[o],u=0,i=n.firstChild;i;){if("TD"==i.nodeName.toUpperCase()||"TH"==i.nodeName.toUpperCase())for(c=1*i.getAttribute("colspan"),d=1*i.getAttribute("rowspan"),c=c&&0!==c&&1!==c?c:1,d=d&&0!==d&&1!==d?d:1,l=p(t,o,u),h=1===c,a=0;a<c;a++)for(r=0;r<d;r++)t[o+r][l+a]={cell:i,unique:h},t[o+r].nTr=n;i=i.nextSibling}}function _fnGetUniqueThs(t,e,n){var i=[];n||(n=t.aoHeader,e&&_fnDetectHeader(n=[],e));for(var o=0,r=n.length;o<r;o++)for(var a=0,s=n[o].length;a<s;a++)!n[o][a].unique||i[a]&&t.bSortCellsTop||(i[a]=n[o][a].cell);return i}function _fnAjaxUpdate(t){if(t.bAjaxDataGet){t.iDraw++,_fnProcessingDisplay(t,!0);t.aoColumns.length;var e=_fnAjaxParameters(t);return _fnServerParams(t,e),t.fnServerData.call(t.oInstance,t.sAjaxSource,e,function(e){_fnAjaxUpdateDraw(t,e)},t),!1}return!0}function _fnAjaxParameters(t){var e,n,i,o,r,a=t.aoColumns.length,s=[];for(s.push({name:"sEcho",value:t.iDraw}),s.push({name:"iColumns",value:a}),s.push({name:"sColumns",value:_fnColumnOrdering(t)}),s.push({name:"iDisplayStart",value:t._iDisplayStart}),s.push({name:"iDisplayLength",value:!1!==t.oFeatures.bPaginate?t._iDisplayLength:-1}),o=0;o<a;o++)e=t.aoColumns[o].mData,s.push({name:"mDataProp_"+o,value:"function"==typeof e?"function":e});if(!1!==t.oFeatures.bFilter)for(s.push({name:"sSearch",value:t.oPreviousSearch.sSearch}),s.push({name:"bRegex",value:t.oPreviousSearch.bRegex}),o=0;o<a;o++)s.push({name:"sSearch_"+o,value:t.aoPreSearchCols[o].sSearch}),s.push({name:"bRegex_"+o,value:t.aoPreSearchCols[o].bRegex}),s.push({name:"bSearchable_"+o,value:t.aoColumns[o].bSearchable});if(!1!==t.oFeatures.bSort){var l=0;for(n=null!==t.aaSortingFixed?t.aaSortingFixed.concat(t.aaSorting):t.aaSorting.slice(),o=0;o<n.length;o++)for(i=t.aoColumns[n[o][0]].aDataSort,r=0;r<i.length;r++)s.push({name:"iSortCol_"+l,value:i[r]}),s.push({name:"sSortDir_"+l,value:n[o][1]}),l++;for(s.push({name:"iSortingCols",value:l}),o=0;o<a;o++)s.push({name:"bSortable_"+o,value:t.aoColumns[o].bSortable})}return s}function _fnServerParams(t,e){_fnCallbackFire(t,"aoServerParams","serverParams",[e])}function _fnAjaxUpdateDraw(t,e){if(e.sEcho!==undefined){if(1*e.sEcho<t.iDraw)return;t.iDraw=1*e.sEcho}(!t.oScroll.bInfinite||t.oScroll.bInfinite&&(t.bSorted||t.bFiltered))&&_fnClearTable(t),t._iRecordsTotal=parseInt(e.iTotalRecords,10),t._iRecordsDisplay=parseInt(e.iTotalDisplayRecords,10);var n,i=_fnColumnOrdering(t),o=e.sColumns!==undefined&&""!==i&&e.sColumns!=i;o&&(n=_fnReOrderIndex(t,e.sColumns));for(var r=_fnGetObjectDataFn(t.sAjaxDataProp)(e),a=0,s=r.length;a<s;a++)if(o){for(var l=[],u=0,c=t.aoColumns.length;u<c;u++)l.push(r[a][n[u]]);_fnAddData(t,l)}else _fnAddData(t,r[a]);t.aiDisplay=t.aiDisplayMaster.slice(),t.bAjaxDataGet=!1,_fnDraw(t),t.bAjaxDataGet=!0,_fnProcessingDisplay(t,!1)}function _fnFeatureHtmlFilter(t){var e=t.oPreviousSearch,n=t.oLanguage.sSearch;n=-1!==n.indexOf("_INPUT_")?n.replace("_INPUT_",'<input type="text" />'):""===n?'<input type="text" />':n+' <input type="text" />';var i=document.createElement("div");i.className=t.oClasses.sFilter,i.innerHTML="<label>"+n+"</label>",t.aanFeatures.f||(i.id=t.sTableId+"_filter");var o=$('input[type="text"]',i);return i._DT_Input=o[0],o.val(e.sSearch.replace('"',"&quot;")),o.bind("keyup.DT",function(n){for(var i=t.aanFeatures.f,o=""===this.value?"":this.value,r=0,a=i.length;r<a;r++)i[r]!=$(this).parents("div.dataTables_filter")[0]&&$(i[r]._DT_Input).val(o);o!=e.sSearch&&_fnFilterComplete(t,{sSearch:o,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive})}),o.attr("aria-controls",t.sTableId).bind("keypress.DT",function(t){if(13==t.keyCode)return!1}),i}function _fnFilterComplete(t,e,n){var i=t.oPreviousSearch,o=t.aoPreSearchCols,r=function(t){i.sSearch=t.sSearch,i.bRegex=t.bRegex,i.bSmart=t.bSmart,i.bCaseInsensitive=t.bCaseInsensitive};if(t.oFeatures.bServerSide)r(e);else{_fnFilter(t,e.sSearch,n,e.bRegex,e.bSmart,e.bCaseInsensitive),r(e);for(var a=0;a<t.aoPreSearchCols.length;a++)_fnFilterColumn(t,o[a].sSearch,a,o[a].bRegex,o[a].bSmart,o[a].bCaseInsensitive);_fnFilterCustom(t)}t.bFiltered=!0,$(t.oInstance).trigger("filter",t),t._iDisplayStart=0,_fnCalculateEnd(t),_fnDraw(t),_fnBuildSearchArray(t,0)}function _fnFilterCustom(t){for(var e=DataTable.ext.afnFiltering,n=_fnGetColumns(t,"bSearchable"),i=0,o=e.length;i<o;i++)for(var r=0,a=0,s=t.aiDisplay.length;a<s;a++){var l=t.aiDisplay[a-r],u=e[i](t,_fnGetRowData(t,l,"filter",n),l);u||(t.aiDisplay.splice(a-r,1),r++)}}function _fnFilterColumn(t,e,n,i,o,r){if(""!==e)for(var a=_fnFilterCreateSearch(e,i,o,r),s=t.aiDisplay.length-1;s>=0;s--){var l=_fnDataToSearch(_fnGetCellData(t,t.aiDisplay[s],n,"filter"),t.aoColumns[n].sType);a.test(l)||(t.aiDisplay.splice(s,1),0)}}function _fnFilter(t,e,n,i,o,r){var a,s=_fnFilterCreateSearch(e,i,o,r),l=t.oPreviousSearch;if(n||(n=0),0!==DataTable.ext.afnFiltering.length&&(n=1),e.length<=0)t.aiDisplay.splice(0,t.aiDisplay.length),t.aiDisplay=t.aiDisplayMaster.slice();else if(t.aiDisplay.length==t.aiDisplayMaster.length||l.sSearch.length>e.length||1==n||0!==e.indexOf(l.sSearch))for(t.aiDisplay.splice(0,t.aiDisplay.length),_fnBuildSearchArray(t,1),a=0;a<t.aiDisplayMaster.length;a++)s.test(t.asDataSearch[a])&&t.aiDisplay.push(t.aiDisplayMaster[a]);else{var u=0;for(a=0;a<t.asDataSearch.length;a++)s.test(t.asDataSearch[a])||(t.aiDisplay.splice(a-u,1),u++)}}function _fnBuildSearchArray(t,e){if(!t.oFeatures.bServerSide){t.asDataSearch=[];for(var n=_fnGetColumns(t,"bSearchable"),i=1===e?t.aiDisplayMaster:t.aiDisplay,o=0,r=i.length;o<r;o++)t.asDataSearch[o]=_fnBuildSearchRow(t,_fnGetRowData(t,i[o],"filter",n))}}function _fnBuildSearchRow(t,e){var n=e.join("  ");return-1!==n.indexOf("&")&&(n=$("<div>").html(n).text()),n.replace(/[\n\r]/g," ")}function _fnFilterCreateSearch(t,e,n,i){var o,r;return n?(o=e?t.split(" "):_fnEscapeRegex(t).split(" "),r="^(?=.*?"+o.join(")(?=.*?")+").*$",new RegExp(r,i?"i":"")):(t=e?t:_fnEscapeRegex(t),new RegExp(t,i?"i":""))}function _fnDataToSearch(t,e){return"function"==typeof DataTable.ext.ofnSearch[e]?DataTable.ext.ofnSearch[e](t):null===t?"":"html"==e?t.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"==typeof t?t.replace(/[\r\n]/g," "):t}function _fnEscapeRegex(t){var e=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g");return t.replace(e,"\\$1")}function _fnFeatureHtmlInfo(t){var e=document.createElement("div");return e.className=t.oClasses.sInfo,t.aanFeatures.i||(t.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"}),e.id=t.sTableId+"_info"),t.nTable.setAttribute("aria-describedby",t.sTableId+"_info"),e}function _fnUpdateInfo(t){if(t.oFeatures.bInfo&&0!==t.aanFeatures.i.length){var e,n=t.oLanguage,i=t._iDisplayStart+1,o=t.fnDisplayEnd(),r=t.fnRecordsTotal(),a=t.fnRecordsDisplay();e=0===a?n.sInfoEmpty:n.sInfo,a!=r&&(e+=" "+n.sInfoFiltered),e+=n.sInfoPostFix,e=_fnInfoMacros(t,e),null!==n.fnInfoCallback&&(e=n.fnInfoCallback.call(t.oInstance,t,i,o,r,a,e));for(var s=t.aanFeatures.i,l=0,u=s.length;l<u;l++)$(s[l]).html(e)}}function _fnInfoMacros(t,e){var n=t._iDisplayStart+1,i=t.fnFormatNumber(n),o=t.fnDisplayEnd(),r=t.fnFormatNumber(o),a=t.fnRecordsDisplay(),s=t.fnFormatNumber(a),l=t.fnRecordsTotal(),u=t.fnFormatNumber(l);return t.oScroll.bInfinite&&(i=t.fnFormatNumber(1)),e.replace(/_START_/g,i).replace(/_END_/g,r).replace(/_TOTAL_/g,s).replace(/_MAX_/g,u)}function _fnInitialise(t){var e,n,i=t.iInitDisplayStart;if(!1!==t.bInitialised){for(_fnAddOptionsHtml(t),_fnBuildHead(t),_fnDrawHead(t,t.aoHeader),t.nTFoot&&_fnDrawHead(t,t.aoFooter),_fnProcessingDisplay(t,!0),t.oFeatures.bAutoWidth&&_fnCalculateColumnWidths(t),e=0,n=t.aoColumns.length;e<n;e++)null!==t.aoColumns[e].sWidth&&(t.aoColumns[e].nTh.style.width=_fnStringToCss(t.aoColumns[e].sWidth));if(t.oFeatures.bSort?_fnSort(t):t.oFeatures.bFilter?_fnFilterComplete(t,t.oPreviousSearch):(t.aiDisplay=t.aiDisplayMaster.slice(),_fnCalculateEnd(t),_fnDraw(t)),null!==t.sAjaxSource&&!t.oFeatures.bServerSide){var o=[];return _fnServerParams(t,o),void t.fnServerData.call(t.oInstance,t.sAjaxSource,o,function(n){var o=""!==t.sAjaxDataProp?_fnGetObjectDataFn(t.sAjaxDataProp)(n):n;for(e=0;e<o.length;e++)_fnAddData(t,o[e]);t.iInitDisplayStart=i,t.oFeatures.bSort?_fnSort(t):(t.aiDisplay=t.aiDisplayMaster.slice(),_fnCalculateEnd(t),_fnDraw(t)),_fnProcessingDisplay(t,!1),_fnInitComplete(t,n)},t)}t.oFeatures.bServerSide||(_fnProcessingDisplay(t,!1),_fnInitComplete(t))}else setTimeout(function(){_fnInitialise(t)},200)}function _fnInitComplete(t,e){t._bInitComplete=!0,_fnCallbackFire(t,"aoInitComplete","init",[t,e])}function _fnLanguageCompat(t){var e=DataTable.defaults.oLanguage;!t.sEmptyTable&&t.sZeroRecords&&"No data available in table"===e.sEmptyTable&&_fnMap(t,t,"sZeroRecords","sEmptyTable"),!t.sLoadingRecords&&t.sZeroRecords&&"Loading..."===e.sLoadingRecords&&_fnMap(t,t,"sZeroRecords","sLoadingRecords")}function _fnFeatureHtmlLength(t){if(t.oScroll.bInfinite)return null;var e,n,i='name="'+t.sTableId+'_length"',o='<select size="1" '+i+">",r=t.aLengthMenu;if(2==r.length&&"object"==typeof r[0]&&"object"==typeof r[1])for(e=0,n=r[0].length;e<n;e++)o+='<option value="'+r[0][e]+'">'+r[1][e]+"</option>";else for(e=0,n=r.length;e<n;e++)o+='<option value="'+r[e]+'">'+r[e]+"</option>";o+="</select>";var a=document.createElement("div");return t.aanFeatures.l||(a.id=t.sTableId+"_length"),a.className=t.oClasses.sLength,a.innerHTML="<label>"+t.oLanguage.sLengthMenu.replace("_MENU_",o)+"</label>",$('select option[value="'+t._iDisplayLength+'"]',a).attr("selected",!0),$("select",a).bind("change.DT",function(i){var o=$(this).val(),r=t.aanFeatures.l;for(e=0,n=r.length;e<n;e++)r[e]!=this.parentNode&&$("select",r[e]).val(o);t._iDisplayLength=parseInt(o,10),_fnCalculateEnd(t),t.fnDisplayEnd()==t.fnRecordsDisplay()&&(t._iDisplayStart=t.fnDisplayEnd()-t._iDisplayLength,t._iDisplayStart<0&&(t._iDisplayStart=0)),-1==t._iDisplayLength&&(t._iDisplayStart=0),_fnDraw(t)}),$("select",a).attr("aria-controls",t.sTableId),a}function _fnCalculateEnd(t){!1===t.oFeatures.bPaginate?t._iDisplayEnd=t.aiDisplay.length:t._iDisplayStart+t._iDisplayLength>t.aiDisplay.length||-1==t._iDisplayLength?t._iDisplayEnd=t.aiDisplay.length:t._iDisplayEnd=t._iDisplayStart+t._iDisplayLength}function _fnFeatureHtmlPaginate(t){if(t.oScroll.bInfinite)return null;var e=document.createElement("div");return e.className=t.oClasses.sPaging+t.sPaginationType,DataTable.ext.oPagination[t.sPaginationType].fnInit(t,e,function(t){_fnCalculateEnd(t),_fnDraw(t)}),t.aanFeatures.p||t.aoDrawCallback.push({fn:function(t){DataTable.ext.oPagination[t.sPaginationType].fnUpdate(t,function(t){_fnCalculateEnd(t),_fnDraw(t)})},sName:"pagination"}),e}function _fnPageChange(t,e){var n=t._iDisplayStart;if("number"==typeof e)t._iDisplayStart=e*t._iDisplayLength,t._iDisplayStart>t.fnRecordsDisplay()&&(t._iDisplayStart=0);else if("first"==e)t._iDisplayStart=0;else if("previous"==e)t._iDisplayStart=t._iDisplayLength>=0?t._iDisplayStart-t._iDisplayLength:0,t._iDisplayStart<0&&(t._iDisplayStart=0);else if("next"==e)t._iDisplayLength>=0?t._iDisplayStart+t._iDisplayLength<t.fnRecordsDisplay()&&(t._iDisplayStart+=t._iDisplayLength):t._iDisplayStart=0;else if("last"==e)if(t._iDisplayLength>=0){var i=parseInt((t.fnRecordsDisplay()-1)/t._iDisplayLength,10)+1;t._iDisplayStart=(i-1)*t._iDisplayLength}else t._iDisplayStart=0;else _fnLog(t,0,"Unknown paging action: "+e);return $(t.oInstance).trigger("page",t),n!=t._iDisplayStart}function _fnFeatureHtmlProcessing(t){var e=document.createElement("div");return t.aanFeatures.r||(e.id=t.sTableId+"_processing"),e.innerHTML=t.oLanguage.sProcessing,e.className=t.oClasses.sProcessing,t.nTable.parentNode.insertBefore(e,t.nTable),e}function _fnProcessingDisplay(t,e){if(t.oFeatures.bProcessing)for(var n=t.aanFeatures.r,i=0,o=n.length;i<o;i++)n[i].style.visibility=e?"visible":"hidden";$(t.oInstance).trigger("processing",[t,e])}function _fnFeatureHtmlTable(t){if(""===t.oScroll.sX&&""===t.oScroll.sY)return t.nTable;var e=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div"),s=t.nTable.cloneNode(!1),l=t.nTable.cloneNode(!1),u=t.nTable.getElementsByTagName("thead")[0],c=0===t.nTable.getElementsByTagName("tfoot").length?null:t.nTable.getElementsByTagName("tfoot")[0],d=t.oClasses;n.appendChild(i),r.appendChild(a),o.appendChild(t.nTable),e.appendChild(n),e.appendChild(o),i.appendChild(s),s.appendChild(u),null!==c&&(e.appendChild(r),a.appendChild(l),l.appendChild(c)),e.className=d.sScrollWrapper,n.className=d.sScrollHead,i.className=d.sScrollHeadInner,o.className=d.sScrollBody,r.className=d.sScrollFoot,a.className=d.sScrollFootInner,t.oScroll.bAutoCss&&(n.style.overflow="hidden",n.style.position="relative",r.style.overflow="hidden",o.style.overflow="auto"),n.style.border="0",n.style.width="100%",r.style.border="0",i.style.width=""!==t.oScroll.sXInner?t.oScroll.sXInner:"100%",s.removeAttribute("id"),s.style.marginLeft="0",t.nTable.style.marginLeft="0",null!==c&&(l.removeAttribute("id"),l.style.marginLeft="0");var h=$(t.nTable).children("caption");return h.length>0&&("top"===(h=h[0])._captionSide?s.appendChild(h):"bottom"===h._captionSide&&c&&l.appendChild(h)),""!==t.oScroll.sX&&(n.style.width=_fnStringToCss(t.oScroll.sX),o.style.width=_fnStringToCss(t.oScroll.sX),null!==c&&(r.style.width=_fnStringToCss(t.oScroll.sX)),$(o).scroll(function(t){n.scrollLeft=this.scrollLeft,null!==c&&(r.scrollLeft=this.scrollLeft)})),""!==t.oScroll.sY&&(o.style.height=_fnStringToCss(t.oScroll.sY)),t.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"}),t.oScroll.bInfinite&&$(o).scroll(function(){t.bDrawing||0===$(this).scrollTop()||$(this).scrollTop()+$(this).height()>$(t.nTable).height()-t.oScroll.iLoadGap&&t.fnDisplayEnd()<t.fnRecordsDisplay()&&(_fnPageChange(t,"next"),_fnCalculateEnd(t),_fnDraw(t))}),t.nScrollHead=n,t.nScrollFoot=r,e}function _fnScrollDraw(t){var e,n,i,o,r,a,s,l,u,c,d,h=t.nScrollHead.getElementsByTagName("div")[0],f=h.getElementsByTagName("table")[0],p=t.nTable.parentNode,g=[],m=[],v=null!==t.nTFoot?t.nScrollFoot.getElementsByTagName("div")[0]:null,_=null!==t.nTFoot?v.getElementsByTagName("table")[0]:null,y=t.oBrowser.bScrollOversize,b=function(t){(s=t.style).paddingTop="0",s.paddingBottom="0",s.borderTopWidth="0",s.borderBottomWidth="0",s.height=0};$(t.nTable).children("thead, tfoot").remove(),u=$(t.nTHead).clone()[0],t.nTable.insertBefore(u,t.nTable.childNodes[0]),i=t.nTHead.getElementsByTagName("tr"),o=u.getElementsByTagName("tr"),null!==t.nTFoot&&(c=$(t.nTFoot).clone()[0],t.nTable.insertBefore(c,t.nTable.childNodes[1]),a=t.nTFoot.getElementsByTagName("tr"),r=c.getElementsByTagName("tr")),""===t.oScroll.sX&&(p.style.width="100%",h.parentNode.style.width="100%");var x=_fnGetUniqueThs(t,u);for(e=0,n=x.length;e<n;e++)l=_fnVisibleToColumnIndex(t,e),x[e].style.width=t.aoColumns[l].sWidth;if(null!==t.nTFoot&&_fnApplyToChildren(function(t){t.style.width=""},r),t.oScroll.bCollapse&&""!==t.oScroll.sY&&(p.style.height=p.offsetHeight+t.nTHead.offsetHeight+"px"),d=$(t.nTable).outerWidth(),""===t.oScroll.sX?(t.nTable.style.width="100%",y&&($("tbody",p).height()>p.offsetHeight||"scroll"==$(p).css("overflow-y"))&&(t.nTable.style.width=_fnStringToCss($(t.nTable).outerWidth()-t.oScroll.iBarWidth))):""!==t.oScroll.sXInner?t.nTable.style.width=_fnStringToCss(t.oScroll.sXInner):d==$(p).width()&&$(p).height()<$(t.nTable).height()?(t.nTable.style.width=_fnStringToCss(d-t.oScroll.iBarWidth),$(t.nTable).outerWidth()>d-t.oScroll.iBarWidth&&(t.nTable.style.width=_fnStringToCss(d))):t.nTable.style.width=_fnStringToCss(d),d=$(t.nTable).outerWidth(),_fnApplyToChildren(b,o),_fnApplyToChildren(function(t){g.push(_fnStringToCss($(t).width()))},o),_fnApplyToChildren(function(t,e){t.style.width=g[e]},i),$(o).height(0),null!==t.nTFoot&&(_fnApplyToChildren(b,r),_fnApplyToChildren(function(t){m.push(_fnStringToCss($(t).width()))},r),_fnApplyToChildren(function(t,e){t.style.width=m[e]},a),$(r).height(0)),_fnApplyToChildren(function(t,e){t.innerHTML="",t.style.width=g[e]},o),null!==t.nTFoot&&_fnApplyToChildren(function(t,e){t.innerHTML="",t.style.width=m[e]},r),$(t.nTable).outerWidth()<d){var w=p.scrollHeight>p.offsetHeight||"scroll"==$(p).css("overflow-y")?d+t.oScroll.iBarWidth:d;y&&(p.scrollHeight>p.offsetHeight||"scroll"==$(p).css("overflow-y"))&&(t.nTable.style.width=_fnStringToCss(w-t.oScroll.iBarWidth)),p.style.width=_fnStringToCss(w),t.nScrollHead.style.width=_fnStringToCss(w),null!==t.nTFoot&&(t.nScrollFoot.style.width=_fnStringToCss(w)),""===t.oScroll.sX?_fnLog(t,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==t.oScroll.sXInner&&_fnLog(t,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")}else p.style.width=_fnStringToCss("100%"),t.nScrollHead.style.width=_fnStringToCss("100%"),null!==t.nTFoot&&(t.nScrollFoot.style.width=_fnStringToCss("100%"));if(""===t.oScroll.sY&&y&&(p.style.height=_fnStringToCss(t.nTable.offsetHeight+t.oScroll.iBarWidth)),""!==t.oScroll.sY&&t.oScroll.bCollapse){p.style.height=_fnStringToCss(t.oScroll.sY);var S=""!==t.oScroll.sX&&t.nTable.offsetWidth>p.offsetWidth?t.oScroll.iBarWidth:0;t.nTable.offsetHeight<p.offsetHeight&&(p.style.height=_fnStringToCss(t.nTable.offsetHeight+S))}var T=$(t.nTable).outerWidth();f.style.width=_fnStringToCss(T),h.style.width=_fnStringToCss(T);var C=$(t.nTable).height()>p.clientHeight||"scroll"==$(p).css("overflow-y");h.style.paddingRight=C?t.oScroll.iBarWidth+"px":"0px",null!==t.nTFoot&&(_.style.width=_fnStringToCss(T),v.style.width=_fnStringToCss(T),v.style.paddingRight=C?t.oScroll.iBarWidth+"px":"0px"),$(p).scroll(),(t.bSorted||t.bFiltered)&&(p.scrollTop=0)}function _fnApplyToChildren(t,e,n){for(var i,o,r=0,a=0,s=e.length;a<s;){for(i=e[a].firstChild,o=n?n[a].firstChild:null;i;)1===i.nodeType&&(n?t(i,o,r):t(i,r),r++),i=i.nextSibling,o=n?o.nextSibling:null;a++}}function _fnConvertToWidth(t,e){if(!t||null===t||""===t)return 0;var n;e||(e=document.body);var i=document.createElement("div");return i.style.width=_fnStringToCss(t),e.appendChild(i),n=i.offsetWidth,e.removeChild(i),n}function _fnCalculateColumnWidths(t){t.nTable.offsetWidth;var e,n,i,o,r=0,a=0,s=t.aoColumns.length,l=$("th",t.nTHead),u=t.nTable.getAttribute("width"),c=t.nTable.parentNode;for(n=0;n<s;n++)t.aoColumns[n].bVisible&&(a++,null!==t.aoColumns[n].sWidth&&(null!==(e=_fnConvertToWidth(t.aoColumns[n].sWidthOrig,c))&&(t.aoColumns[n].sWidth=_fnStringToCss(e)),r++));if(s==l.length&&0===r&&a==s&&""===t.oScroll.sX&&""===t.oScroll.sY)for(n=0;n<t.aoColumns.length;n++)null!==(e=$(l[n]).width())&&(t.aoColumns[n].sWidth=_fnStringToCss(e));else{var d=t.nTable.cloneNode(!1),h=t.nTHead.cloneNode(!0),f=document.createElement("tbody"),p=document.createElement("tr");d.removeAttribute("id"),d.appendChild(h),null!==t.nTFoot&&(d.appendChild(t.nTFoot.cloneNode(!0)),_fnApplyToChildren(function(t){t.style.width=""},d.getElementsByTagName("tr"))),d.appendChild(f),f.appendChild(p);var g=$("thead th",d);0===g.length&&(g=$("tbody tr:eq(0)>td",d));var m=_fnGetUniqueThs(t,h);for(i=0,n=0;n<s;n++){var v=t.aoColumns[n];v.bVisible&&null!==v.sWidthOrig&&""!==v.sWidthOrig?m[n-i].style.width=_fnStringToCss(v.sWidthOrig):v.bVisible?m[n-i].style.width="":i++}for(n=0;n<s;n++)if(t.aoColumns[n].bVisible){var _=_fnGetWidestNode(t,n);null!==_&&(_=_.cloneNode(!0),""!==t.aoColumns[n].sContentPadding&&(_.innerHTML+=t.aoColumns[n].sContentPadding),p.appendChild(_))}c.appendChild(d),""!==t.oScroll.sX&&""!==t.oScroll.sXInner?d.style.width=_fnStringToCss(t.oScroll.sXInner):""!==t.oScroll.sX?(d.style.width="",$(d).width()<c.offsetWidth&&(d.style.width=_fnStringToCss(c.offsetWidth))):""!==t.oScroll.sY?d.style.width=_fnStringToCss(c.offsetWidth):u&&(d.style.width=_fnStringToCss(u)),d.style.visibility="hidden",_fnScrollingWidthAdjust(t,d);var y=$("tbody tr:eq(0)",d).children();if(0===y.length&&(y=_fnGetUniqueThs(t,$("thead",d)[0])),""!==t.oScroll.sX){var b=0;for(i=0,n=0;n<t.aoColumns.length;n++)t.aoColumns[n].bVisible&&(null===t.aoColumns[n].sWidthOrig?b+=$(y[i]).outerWidth():b+=parseInt(t.aoColumns[n].sWidth.replace("px",""),10)+($(y[i]).outerWidth()-$(y[i]).width()),i++);d.style.width=_fnStringToCss(b),t.nTable.style.width=_fnStringToCss(b)}for(i=0,n=0;n<t.aoColumns.length;n++)t.aoColumns[n].bVisible&&(null!==(o=$(y[i]).width())&&o>0&&(t.aoColumns[n].sWidth=_fnStringToCss(o)),i++);var x=$(d).css("width");t.nTable.style.width=-1!==x.indexOf("%")?x:_fnStringToCss($(d).outerWidth()),d.parentNode.removeChild(d)}u&&(t.nTable.style.width=_fnStringToCss(u))}function _fnScrollingWidthAdjust(t,e){if(""===t.oScroll.sX&&""!==t.oScroll.sY){$(e).width();e.style.width=_fnStringToCss($(e).outerWidth()-t.oScroll.iBarWidth)}else""!==t.oScroll.sX&&(e.style.width=_fnStringToCss($(e).outerWidth()))}function _fnGetWidestNode(t,e){var n=_fnGetMaxLenString(t,e);if(n<0)return null;if(null===t.aoData[n].nTr){var i=document.createElement("td");return i.innerHTML=_fnGetCellData(t,n,e,""),i}return _fnGetTdNodes(t,n)[e]}function _fnGetMaxLenString(t,e){for(var n=-1,i=-1,o=0;o<t.aoData.length;o++){var r=_fnGetCellData(t,o,e,"display")+"";(r=r.replace(/<.*?>/g,"")).length>n&&(n=r.length,i=o)}return i}function _fnStringToCss(t){if(null===t)return"0px";if("number"==typeof t)return t<0?"0px":t+"px";var e=t.charCodeAt(t.length-1);return e<48||e>57?t:t+"px"}function _fnScrollBarWidth(){var t=document.createElement("p"),e=t.style;e.width="100%",e.height="200px",e.padding="0px";var n=document.createElement("div");(e=n.style).position="absolute",e.top="0px",e.left="0px",e.visibility="hidden",e.width="200px",e.height="150px",e.padding="0px",e.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var i=t.offsetWidth;n.style.overflow="scroll";var o=t.offsetWidth;return i==o&&(o=n.clientWidth),document.body.removeChild(n),i-o}function _fnSort(t,e){var n,i,o,r,a,s,l,u,c=[],d=[],h=DataTable.ext.oSort,f=t.aoData,p=t.aoColumns,g=t.oLanguage.oAria;if(!t.oFeatures.bServerSide&&(0!==t.aaSorting.length||null!==t.aaSortingFixed)){for(c=null!==t.aaSortingFixed?t.aaSortingFixed.concat(t.aaSorting):t.aaSorting.slice(),n=0;n<c.length;n++){var m=c[n][0],v=_fnColumnIndexToVisible(t,m);if(l=t.aoColumns[m].sSortDataType,DataTable.ext.afnSortData[l]){var _=DataTable.ext.afnSortData[l].call(t.oInstance,t,m,v);if(_.length===f.length)for(o=0,r=f.length;o<r;o++)_fnSetCellData(t,o,m,_[o]);else _fnLog(t,0,"Returned data sort array (col "+m+") is the wrong length")}}for(n=0,i=t.aiDisplayMaster.length;n<i;n++)d[t.aiDisplayMaster[n]]=n;var y,b,x=c.length;for(n=0,i=f.length;n<i;n++)for(o=0;o<x;o++)for(b=p[c[o][0]].aDataSort,a=0,s=b.length;a<s;a++)l=p[b[a]].sType,y=h[(l||"string")+"-pre"],f[n]._aSortData[b[a]]=y?y(_fnGetCellData(t,n,b[a],"sort")):_fnGetCellData(t,n,b[a],"sort");t.aiDisplayMaster.sort(function(t,e){var n,i,o,r,a,s;for(n=0;n<x;n++)for(a=p[c[n][0]].aDataSort,i=0,o=a.length;i<o;i++)if(s=p[a[i]].sType,0!==(r=h[(s||"string")+"-"+c[n][1]](f[t]._aSortData[a[i]],f[e]._aSortData[a[i]])))return r;return h["numeric-asc"](d[t],d[e])})}for(e!==undefined&&!e||t.oFeatures.bDeferRender||_fnSortingClasses(t),n=0,i=t.aoColumns.length;n<i;n++){var w=p[n].sTitle.replace(/<.*?>/g,"");if((u=p[n].nTh).removeAttribute("aria-sort"),u.removeAttribute("aria-label"),p[n].bSortable)if(c.length>0&&c[0][0]==n){u.setAttribute("aria-sort","asc"==c[0][1]?"ascending":"descending");var S=p[n].asSorting[c[0][2]+1]?p[n].asSorting[c[0][2]+1]:p[n].asSorting[0];u.setAttribute("aria-label",w+("asc"==S?g.sSortAscending:g.sSortDescending))}else u.setAttribute("aria-label",w+("asc"==p[n].asSorting[0]?g.sSortAscending:g.sSortDescending));else u.setAttribute("aria-label",w)}t.bSorted=!0,$(t.oInstance).trigger("sort",t),t.oFeatures.bFilter?_fnFilterComplete(t,t.oPreviousSearch,1):(t.aiDisplay=t.aiDisplayMaster.slice(),t._iDisplayStart=0,_fnCalculateEnd(t),_fnDraw(t))}function _fnSortAttachListener(t,e,n,i){_fnBindAction(e,{},function(e){if(!1!==t.aoColumns[n].bSortable){var o=function(){var i,o;if(e.shiftKey){for(var r=!1,a=0;a<t.aaSorting.length;a++)if(t.aaSorting[a][0]==n){r=!0,i=t.aaSorting[a][0],o=t.aaSorting[a][2]+1,t.aoColumns[i].asSorting[o]?(t.aaSorting[a][1]=t.aoColumns[i].asSorting[o],t.aaSorting[a][2]=o):t.aaSorting.splice(a,1);break}!1===r&&t.aaSorting.push([n,t.aoColumns[n].asSorting[0],0])}else 1==t.aaSorting.length&&t.aaSorting[0][0]==n?(i=t.aaSorting[0][0],o=t.aaSorting[0][2]+1,t.aoColumns[i].asSorting[o]||(o=0),t.aaSorting[0][1]=t.aoColumns[i].asSorting[o],t.aaSorting[0][2]=o):(t.aaSorting.splice(0,t.aaSorting.length),t.aaSorting.push([n,t.aoColumns[n].asSorting[0],0]));_fnSort(t)};t.oFeatures.bProcessing?(_fnProcessingDisplay(t,!0),setTimeout(function(){o(),t.oFeatures.bServerSide||_fnProcessingDisplay(t,!1)},0)):o(),"function"==typeof i&&i(t)}})}function _fnSortingClasses(t){var e,n,i,o,r,a,s=t.aoColumns.length,l=t.oClasses;for(e=0;e<s;e++)t.aoColumns[e].bSortable&&$(t.aoColumns[e].nTh).removeClass(l.sSortAsc+" "+l.sSortDesc+" "+t.aoColumns[e].sSortingClass);for(r=null!==t.aaSortingFixed?t.aaSortingFixed.concat(t.aaSorting):t.aaSorting.slice(),e=0;e<t.aoColumns.length;e++)if(t.aoColumns[e].bSortable){for(a=t.aoColumns[e].sSortingClass,o=-1,i=0;i<r.length;i++)if(r[i][0]==e){a="asc"==r[i][1]?l.sSortAsc:l.sSortDesc,o=i;break}if($(t.aoColumns[e].nTh).addClass(a),t.bJUI){var u,c=$("span."+l.sSortIcon,t.aoColumns[e].nTh);c.removeClass(l.sSortJUIAsc+" "+l.sSortJUIDesc+" "+l.sSortJUI+" "+l.sSortJUIAscAllowed+" "+l.sSortJUIDescAllowed),u=-1==o?t.aoColumns[e].sSortingClassJUI:"asc"==r[o][1]?l.sSortJUIAsc:l.sSortJUIDesc,c.addClass(u)}}else $(t.aoColumns[e].nTh).addClass(t.aoColumns[e].sSortingClass);if(a=l.sSortColumn,t.oFeatures.bSort&&t.oFeatures.bSortClasses){var d,h,f=_fnGetTdNodes(t),p=[];for(e=0;e<s;e++)p.push("");for(e=0,d=1;e<r.length;e++)h=parseInt(r[e][0],10),p[h]=a+d,d<3&&d++;var g,m,v,_=new RegExp(a+"[123]");for(e=0,n=f.length;e<n;e++)h=e%s,m=f[e].className,v=p[h],(g=m.replace(_,v))!=m?f[e].className=$.trim(g):v.length>0&&-1==m.indexOf(v)&&(f[e].className=m+" "+v)}}function _fnSaveState(t){if(t.oFeatures.bStateSave&&!t.bDestroying){var e,n,i=t.oScroll.bInfinite,o={iCreate:(new Date).getTime(),iStart:i?0:t._iDisplayStart,iEnd:i?t._iDisplayLength:t._iDisplayEnd,iLength:t._iDisplayLength,aaSorting:$.extend(!0,[],t.aaSorting),oSearch:$.extend(!0,{},t.oPreviousSearch),aoSearchCols:$.extend(!0,[],t.aoPreSearchCols),abVisCols:[]};for(e=0,n=t.aoColumns.length;e<n;e++)o.abVisCols.push(t.aoColumns[e].bVisible);_fnCallbackFire(t,"aoStateSaveParams","stateSaveParams",[t,o]),t.fnStateSave.call(t.oInstance,t,o)}}function _fnLoadState(t,e){if(t.oFeatures.bStateSave){var n=t.fnStateLoad.call(t.oInstance,t);if(n){var i=_fnCallbackFire(t,"aoStateLoadParams","stateLoadParams",[t,n]);if(-1===$.inArray(!1,i)){t.oLoadedState=$.extend(!0,{},n),t._iDisplayStart=n.iStart,t.iInitDisplayStart=n.iStart,t._iDisplayEnd=n.iEnd,t._iDisplayLength=n.iLength,t.aaSorting=n.aaSorting.slice(),t.saved_aaSorting=n.aaSorting.slice(),$.extend(t.oPreviousSearch,n.oSearch),$.extend(!0,t.aoPreSearchCols,n.aoSearchCols),e.saved_aoColumns=[];for(var o=0;o<n.abVisCols.length;o++)e.saved_aoColumns[o]={},e.saved_aoColumns[o].bVisible=n.abVisCols[o];_fnCallbackFire(t,"aoStateLoaded","stateLoaded",[t,n])}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date;date.setTime(date.getTime()+1e3*iSecs);var aParts=window.location.pathname.split("/"),sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase(),sFullCookie,oData;null!==fnCallback?(oData="function"==typeof $.parseJSON?$.parseJSON(sValue):eval("("+sValue+")"),sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")):sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/";var aCookies=document.cookie.split(";"),iNewCookieLen=sFullCookie.split(";")[0].length,aOldCookies=[];if(iNewCookieLen+document.cookie.length+10>4096){for(var i=0,iLen=aCookies.length;i<iLen;i++)if(-1!=aCookies[i].indexOf(sBaseName)){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")"),oData&&oData.iCreate&&aOldCookies.push({name:aSplitCookie[0],time:oData.iCreate})}catch(t){}}for(aOldCookies.sort(function(t,e){return e.time-t.time});iNewCookieLen+document.cookie.length+10>4096;){if(0===aOldCookies.length)return;var old=aOldCookies.pop();document.cookie=old.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(t){for(var e=window.location.pathname.split("/"),n=t+"_"+e[e.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",i=document.cookie.split(";"),o=0;o<i.length;o++){for(var r=i[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(n))return decodeURIComponent(r.substring(n.length,r.length))}return null}function _fnSettingsFromNode(t){for(var e=0;e<DataTable.settings.length;e++)if(DataTable.settings[e].nTable===t)return DataTable.settings[e];return null}function _fnGetTrNodes(t){for(var e=[],n=t.aoData,i=0,o=n.length;i<o;i++)null!==n[i].nTr&&e.push(n[i].nTr);return e}function _fnGetTdNodes(t,e){var n,i,o,r,a,s,l,u,c=[],d=t.aoData.length,h=0,f=d;for(e!==undefined&&(h=e,f=e+1),r=h;r<f;r++)if(null!==(l=t.aoData[r]).nTr){for(i=[],o=l.nTr.firstChild;o;)"td"!=(u=o.nodeName.toLowerCase())&&"th"!=u||i.push(o),o=o.nextSibling;for(n=0,a=0,s=t.aoColumns.length;a<s;a++)t.aoColumns[a].bVisible?c.push(i[a-n]):(c.push(l._anHidden[a]),n++)}return c}function _fnLog(t,e,n){var i=null===t?"DataTables warning: "+n:"DataTables warning (table id = '"+t.sTableId+"'): "+n;if(0!==e)window.console&&console.log&&console.log(i);else{if("alert"!=DataTable.ext.sErrMode)throw new Error(i);alert(i)}}function _fnMap(t,e,n,i){i===undefined&&(i=n),e[n]!==undefined&&(t[i]=e[n])}function _fnExtend(t,e){var n;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],"object"==typeof oInit[i]&&null!==n&&!1===$.isArray(n)?$.extend(!0,t[i],n):t[i]=n);return t}function _fnBindAction(t,e,n){$(t).bind("click.DT",e,function(e){t.blur(),n(e)}).bind("keypress.DT",e,function(t){13===t.which&&n(t)}).bind("selectstart.DT",function(){return!1})}function _fnCallbackReg(t,e,n,i){n&&t[e].push({fn:n,sName:i})}function _fnCallbackFire(t,e,n,i){for(var o=t[e],r=[],a=o.length-1;a>=0;a--)r.push(o[a].fn.apply(t.oInstance,i));return null!==n&&$(t.oInstance).trigger(n,i),r}var _fnJsonString=window.JSON?JSON.stringify:function(t){var e=typeof t;if("object"!==e||null===t)return"string"===e&&(t='"'+t+'"'),t+"";var n,i,o=[],r=$.isArray(t);for(n in t)i=t[n],"string"===(e=typeof i)?i='"'+i+'"':"object"===e&&null!==i&&(i=_fnJsonString(i)),o.push((r?"":'"'+n+'":')+i);return(r?"[":"{")+o+(r?"]":"}")};function _fnBrowserDetect(t){var e=$('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];document.body.appendChild(e),t.oBrowser.bScrollOversize=100===$("#DT_BrowserTest",e)[0].offsetWidth,document.body.removeChild(e)}function _fnExternApiFunc(t){return function(){var e=[_fnSettingsFromNode(this[DataTable.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return DataTable.ext.oApi[t].apply(this,e)}}for(var sFunc in this.$=function(t,e){var n,i,o,r=[],a=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),s=a.aoData,l=a.aiDisplay,u=a.aiDisplayMaster;if(e||(e={}),"current"==(e=$.extend({},{filter:"none",order:"current",page:"all"},e)).page)for(n=a._iDisplayStart,i=a.fnDisplayEnd();n<i;n++)(o=s[l[n]].nTr)&&r.push(o);else if("current"==e.order&&"none"==e.filter)for(n=0,i=u.length;n<i;n++)(o=s[u[n]].nTr)&&r.push(o);else if("current"==e.order&&"applied"==e.filter)for(n=0,i=l.length;n<i;n++)(o=s[l[n]].nTr)&&r.push(o);else if("original"==e.order&&"none"==e.filter)for(n=0,i=s.length;n<i;n++)(o=s[n].nTr)&&r.push(o);else if("original"==e.order&&"applied"==e.filter)for(n=0,i=s.length;n<i;n++)o=s[n].nTr,-1!==$.inArray(n,l)&&o&&r.push(o);else _fnLog(a,1,"Unknown selection options");var c=$(r),d=c.filter(t),h=c.find(t);return $([].concat($.makeArray(d),$.makeArray(h)))},this._=function(t,e){var n,i,o=[],r=this.$(t,e);for(n=0,i=r.length;n<i;n++)o.push(this.fnGetData(r[n]));return o},this.fnAddData=function(t,e){if(0===t.length)return[];var n,i=[],o=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if("object"==typeof t[0]&&null!==t[0])for(var r=0;r<t.length;r++){if(-1==(n=_fnAddData(o,t[r])))return i;i.push(n)}else{if(-1==(n=_fnAddData(o,t)))return i;i.push(n)}return o.aiDisplay=o.aiDisplayMaster.slice(),(e===undefined||e)&&_fnReDraw(o),i},this.fnAdjustColumnSizing=function(t){var e=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnAdjustColumnSizing(e),t===undefined||t?this.fnDraw(!1):""===e.oScroll.sX&&""===e.oScroll.sY||this.oApi._fnScrollDraw(e)},this.fnClearTable=function(t){var e=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnClearTable(e),(t===undefined||t)&&_fnDraw(e)},this.fnClose=function(t){for(var e=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),n=0;n<e.aoOpenRows.length;n++)if(e.aoOpenRows[n].nParent==t){var i=e.aoOpenRows[n].nTr.parentNode;return i&&i.removeChild(e.aoOpenRows[n].nTr),e.aoOpenRows.splice(n,1),0}return 1},this.fnDeleteRow=function(t,e,n){var i,o,r,a=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);r="object"==typeof t?_fnNodeToDataIndex(a,t):t;var s=a.aoData.splice(r,1);for(i=0,o=a.aoData.length;i<o;i++)null!==a.aoData[i].nTr&&(a.aoData[i].nTr._DT_RowIndex=i);var l=$.inArray(r,a.aiDisplay);return a.asDataSearch.splice(l,1),_fnDeleteIndex(a.aiDisplayMaster,r),_fnDeleteIndex(a.aiDisplay,r),"function"==typeof e&&e.call(this,a,s),a._iDisplayStart>=a.fnRecordsDisplay()&&(a._iDisplayStart-=a._iDisplayLength,a._iDisplayStart<0&&(a._iDisplayStart=0)),(n===undefined||n)&&(_fnCalculateEnd(a),_fnDraw(a)),s},this.fnDestroy=function(t){var e,n,i=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),o=i.nTableWrapper.parentNode,r=i.nTBody;if(t=t!==undefined&&t,i.bDestroying=!0,_fnCallbackFire(i,"aoDestroyCallback","destroy",[i]),!t)for(e=0,n=i.aoColumns.length;e<n;e++)!1===i.aoColumns[e].bVisible&&this.fnSetColumnVis(e,!0);for($(i.nTableWrapper).find("*").andSelf().unbind(".DT"),$("tbody>tr>td."+i.oClasses.sRowEmpty,i.nTable).parent().remove(),i.nTable!=i.nTHead.parentNode&&($(i.nTable).children("thead").remove(),i.nTable.appendChild(i.nTHead)),i.nTFoot&&i.nTable!=i.nTFoot.parentNode&&($(i.nTable).children("tfoot").remove(),i.nTable.appendChild(i.nTFoot)),i.nTable.parentNode.removeChild(i.nTable),$(i.nTableWrapper).remove(),i.aaSorting=[],i.aaSortingFixed=[],_fnSortingClasses(i),$(_fnGetTrNodes(i)).removeClass(i.asStripeClasses.join(" ")),$("th, td",i.nTHead).removeClass([i.oClasses.sSortable,i.oClasses.sSortableAsc,i.oClasses.sSortableDesc,i.oClasses.sSortableNone].join(" ")),i.bJUI&&($("th span."+i.oClasses.sSortIcon+", td span."+i.oClasses.sSortIcon,i.nTHead).remove(),$("th, td",i.nTHead).each(function(){var t=$("div."+i.oClasses.sSortJUIWrapper,this),e=t.contents();$(this).append(e),t.remove()})),!t&&i.nTableReinsertBefore?o.insertBefore(i.nTable,i.nTableReinsertBefore):t||o.appendChild(i.nTable),e=0,n=i.aoData.length;e<n;e++)null!==i.aoData[e].nTr&&r.appendChild(i.aoData[e].nTr);if(!0===i.oFeatures.bAutoWidth&&(i.nTable.style.width=_fnStringToCss(i.sDestroyWidth)),n=i.asDestroyStripes.length){var a=$(r).children("tr");for(e=0;e<n;e++)a.filter(":nth-child("+n+"n + "+e+")").addClass(i.asDestroyStripes[e])}for(e=0,n=DataTable.settings.length;e<n;e++)DataTable.settings[e]==i&&DataTable.settings.splice(e,1);i=null,oInit=null},this.fnDraw=function(t){var e=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);!1===t?(_fnCalculateEnd(e),_fnDraw(e)):_fnReDraw(e)},this.fnFilter=function(t,e,n,i,o,r){var a=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(a.oFeatures.bFilter)if(n!==undefined&&null!==n||(n=!1),i!==undefined&&null!==i||(i=!0),o!==undefined&&null!==o||(o=!0),r!==undefined&&null!==r||(r=!0),e===undefined||null===e){if(_fnFilterComplete(a,{sSearch:t+"",bRegex:n,bSmart:i,bCaseInsensitive:r},1),o&&a.aanFeatures.f)for(var s=a.aanFeatures.f,l=0,u=s.length;l<u;l++)try{s[l]._DT_Input!=document.activeElement&&$(s[l]._DT_Input).val(t)}catch(e){$(s[l]._DT_Input).val(t)}}else $.extend(a.aoPreSearchCols[e],{sSearch:t+"",bRegex:n,bSmart:i,bCaseInsensitive:r}),_fnFilterComplete(a,a.oPreviousSearch,1)},this.fnGetData=function(t,e){var n=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(t!==undefined){var i=t;if("object"==typeof t){var o=t.nodeName.toLowerCase();"tr"===o?i=_fnNodeToDataIndex(n,t):"td"===o&&(i=_fnNodeToDataIndex(n,t.parentNode),e=_fnNodeToColumnIndex(n,i,t))}return e!==undefined?_fnGetCellData(n,i,e,""):n.aoData[i]!==undefined?n.aoData[i]._aData:null}return _fnGetDataMaster(n)},this.fnGetNodes=function(t){var e=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);return t!==undefined?e.aoData[t]!==undefined?e.aoData[t].nTr:null:_fnGetTrNodes(e)},this.fnGetPosition=function(t){var e=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),n=t.nodeName.toUpperCase();if("TR"==n)return _fnNodeToDataIndex(e,t);if("TD"==n||"TH"==n){var i=_fnNodeToDataIndex(e,t.parentNode),o=_fnNodeToColumnIndex(e,i,t);return[i,_fnColumnIndexToVisible(e,o),o]}return null},this.fnIsOpen=function(t){for(var e=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),n=(e.aoOpenRows,0);n<e.aoOpenRows.length;n++)if(e.aoOpenRows[n].nParent==t)return!0;return!1},this.fnOpen=function(t,e,n){var i=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),o=_fnGetTrNodes(i);if(-1!==$.inArray(t,o)){this.fnClose(t);var r=document.createElement("tr"),a=document.createElement("td");r.appendChild(a),a.className=n,a.colSpan=_fnVisbleColumns(i),"string"==typeof e?a.innerHTML=e:$(a).html(e);var s=$("tr",i.nTBody);return-1!=$.inArray(t,s)&&$(r).insertAfter(t),i.aoOpenRows.push({nTr:r,nParent:t}),r}},this.fnPageChange=function(t,e){var n=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnPageChange(n,t),_fnCalculateEnd(n),(e===undefined||e)&&_fnDraw(n)},this.fnSetColumnVis=function(t,e,n){var i,o,r,a,s,l=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),u=l.aoColumns,c=l.aoData;if(u[t].bVisible!=e){if(e){var d=0;for(i=0;i<t;i++)u[i].bVisible&&d++;if(!(a=d>=_fnVisbleColumns(l)))for(i=t;i<u.length;i++)if(u[i].bVisible){s=i;break}for(i=0,o=c.length;i<o;i++)null!==c[i].nTr&&(a?c[i].nTr.appendChild(c[i]._anHidden[t]):c[i].nTr.insertBefore(c[i]._anHidden[t],_fnGetTdNodes(l,i)[s]))}else for(i=0,o=c.length;i<o;i++)null!==c[i].nTr&&(r=_fnGetTdNodes(l,i)[t],c[i]._anHidden[t]=r,r.parentNode.removeChild(r));for(u[t].bVisible=e,_fnDrawHead(l,l.aoHeader),l.nTFoot&&_fnDrawHead(l,l.aoFooter),i=0,o=l.aoOpenRows.length;i<o;i++)l.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(l);(n===undefined||n)&&(_fnAdjustColumnSizing(l),_fnDraw(l)),_fnSaveState(l)}},this.fnSettings=function(){return _fnSettingsFromNode(this[DataTable.ext.iApiIndex])},this.fnSort=function(t){var e=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);e.aaSorting=t,_fnSort(e)},this.fnSortListener=function(t,e,n){_fnSortAttachListener(_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),t,e,n)},this.fnUpdate=function(t,e,n,i,o){var r,a,s=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),l="object"==typeof e?_fnNodeToDataIndex(s,e):e;if($.isArray(t)&&n===undefined)for(s.aoData[l]._aData=t.slice(),r=0;r<s.aoColumns.length;r++)this.fnUpdate(_fnGetCellData(s,l,r),l,r,!1,!1);else if($.isPlainObject(t)&&n===undefined)for(s.aoData[l]._aData=$.extend(!0,{},t),r=0;r<s.aoColumns.length;r++)this.fnUpdate(_fnGetCellData(s,l,r),l,r,!1,!1);else{_fnSetCellData(s,l,n,t),a=_fnGetCellData(s,l,n,"display");var u=s.aoColumns[n];null!==u.fnRender&&(a=_fnRender(s,l,n),u.bUseRendered&&_fnSetCellData(s,l,n,a)),null!==s.aoData[l].nTr&&(_fnGetTdNodes(s,l)[n].innerHTML=a)}var c=$.inArray(l,s.aiDisplay);return s.asDataSearch[c]=_fnBuildSearchRow(s,_fnGetRowData(s,l,"filter",_fnGetColumns(s,"bSearchable"))),(o===undefined||o)&&_fnAdjustColumnSizing(s),(i===undefined||i)&&_fnReDraw(s),0},this.fnVersionCheck=DataTable.ext.fnVersionCheck,this.oApi={_fnExternApiFunc:_fnExternApiFunc,_fnInitialise:_fnInitialise,_fnInitComplete:_fnInitComplete,_fnLanguageCompat:_fnLanguageCompat,_fnAddColumn:_fnAddColumn,_fnColumnOptions:_fnColumnOptions,_fnAddData:_fnAddData,_fnCreateTr:_fnCreateTr,_fnGatherData:_fnGatherData,_fnBuildHead:_fnBuildHead,_fnDrawHead:_fnDrawHead,_fnDraw:_fnDraw,_fnReDraw:_fnReDraw,_fnAjaxUpdate:_fnAjaxUpdate,_fnAjaxParameters:_fnAjaxParameters,_fnAjaxUpdateDraw:_fnAjaxUpdateDraw,_fnServerParams:_fnServerParams,_fnAddOptionsHtml:_fnAddOptionsHtml,_fnFeatureHtmlTable:_fnFeatureHtmlTable,_fnScrollDraw:_fnScrollDraw,_fnAdjustColumnSizing:_fnAdjustColumnSizing,_fnFeatureHtmlFilter:_fnFeatureHtmlFilter,_fnFilterComplete:_fnFilterComplete,_fnFilterCustom:_fnFilterCustom,_fnFilterColumn:_fnFilterColumn,_fnFilter:_fnFilter,_fnBuildSearchArray:_fnBuildSearchArray,_fnBuildSearchRow:_fnBuildSearchRow,_fnFilterCreateSearch:_fnFilterCreateSearch,_fnDataToSearch:_fnDataToSearch,_fnSort:_fnSort,_fnSortAttachListener:_fnSortAttachListener,_fnSortingClasses:_fnSortingClasses,_fnFeatureHtmlPaginate:_fnFeatureHtmlPaginate,_fnPageChange:_fnPageChange,_fnFeatureHtmlInfo:_fnFeatureHtmlInfo,_fnUpdateInfo:_fnUpdateInfo,_fnFeatureHtmlLength:_fnFeatureHtmlLength,_fnFeatureHtmlProcessing:_fnFeatureHtmlProcessing,_fnProcessingDisplay:_fnProcessingDisplay,_fnVisibleToColumnIndex:_fnVisibleToColumnIndex,_fnColumnIndexToVisible:_fnColumnIndexToVisible,_fnNodeToDataIndex:_fnNodeToDataIndex,_fnVisbleColumns:_fnVisbleColumns,_fnCalculateEnd:_fnCalculateEnd,_fnConvertToWidth:_fnConvertToWidth,_fnCalculateColumnWidths:_fnCalculateColumnWidths,_fnScrollingWidthAdjust:_fnScrollingWidthAdjust,_fnGetWidestNode:_fnGetWidestNode,_fnGetMaxLenString:_fnGetMaxLenString,_fnStringToCss:_fnStringToCss,_fnDetectType:_fnDetectType,_fnSettingsFromNode:_fnSettingsFromNode,_fnGetDataMaster:_fnGetDataMaster,_fnGetTrNodes:_fnGetTrNodes,_fnGetTdNodes:_fnGetTdNodes,_fnEscapeRegex:_fnEscapeRegex,_fnDeleteIndex:_fnDeleteIndex,_fnReOrderIndex:_fnReOrderIndex,_fnColumnOrdering:_fnColumnOrdering,_fnLog:_fnLog,_fnClearTable:_fnClearTable,_fnSaveState:_fnSaveState,_fnLoadState:_fnLoadState,_fnCreateCookie:_fnCreateCookie,_fnReadCookie:_fnReadCookie,_fnDetectHeader:_fnDetectHeader,_fnGetUniqueThs:_fnGetUniqueThs,_fnScrollBarWidth:_fnScrollBarWidth,_fnApplyToChildren:_fnApplyToChildren,_fnMap:_fnMap,_fnGetRowData:_fnGetRowData,_fnGetCellData:_fnGetCellData,_fnSetCellData:_fnSetCellData,_fnGetObjectDataFn:_fnGetObjectDataFn,_fnSetObjectDataFn:_fnSetObjectDataFn,_fnApplyColumnDefs:_fnApplyColumnDefs,_fnBindAction:_fnBindAction,_fnExtend:_fnExtend,_fnCallbackReg:_fnCallbackReg,_fnCallbackFire:_fnCallbackFire,_fnJsonString:_fnJsonString,_fnRender:_fnRender,_fnNodeToColumnIndex:_fnNodeToColumnIndex,_fnInfoMacros:_fnInfoMacros,_fnBrowserDetect:_fnBrowserDetect,_fnGetColumns:_fnGetColumns},$.extend(DataTable.ext.oApi,this.oApi),DataTable.ext.oApi)sFunc&&(this[sFunc]=_fnExternApiFunc(sFunc));var _that=this;return this.each(function(){var t,e,n,i=0,o=this.getAttribute("id"),r=!1,a=!1;if("table"==this.nodeName.toLowerCase()){for(i=0,t=DataTable.settings.length;i<t;i++){if(DataTable.settings[i].nTable==this){if(oInit===undefined||oInit.bRetrieve)return DataTable.settings[i].oInstance;if(oInit.bDestroy){DataTable.settings[i].oInstance.fnDestroy();break}return void _fnLog(DataTable.settings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy")}if(DataTable.settings[i].sTableId==this.id){DataTable.settings.splice(i,1);break}}null!==o&&""!==o||(o="DataTables_Table_"+DataTable.ext._oExternConfig.iNextUnique++,this.id=o);var s=$.extend(!0,{},DataTable.models.oSettings,{nTable:this,oApi:_that.oApi,oInit:oInit,sDestroyWidth:$(this).width(),sInstance:o,sTableId:o});if(DataTable.settings.push(s),s.oInstance=1===_that.length?_that:$(this).dataTable(),oInit||(oInit={}),oInit.oLanguage&&_fnLanguageCompat(oInit.oLanguage),oInit=_fnExtend($.extend(!0,{},DataTable.defaults),oInit),_fnMap(s.oFeatures,oInit,"bPaginate"),_fnMap(s.oFeatures,oInit,"bLengthChange"),_fnMap(s.oFeatures,oInit,"bFilter"),_fnMap(s.oFeatures,oInit,"bSort"),_fnMap(s.oFeatures,oInit,"bInfo"),_fnMap(s.oFeatures,oInit,"bProcessing"),_fnMap(s.oFeatures,oInit,"bAutoWidth"),_fnMap(s.oFeatures,oInit,"bSortClasses"),_fnMap(s.oFeatures,oInit,"bServerSide"),_fnMap(s.oFeatures,oInit,"bDeferRender"),_fnMap(s.oScroll,oInit,"sScrollX","sX"),_fnMap(s.oScroll,oInit,"sScrollXInner","sXInner"),_fnMap(s.oScroll,oInit,"sScrollY","sY"),_fnMap(s.oScroll,oInit,"bScrollCollapse","bCollapse"),_fnMap(s.oScroll,oInit,"bScrollInfinite","bInfinite"),_fnMap(s.oScroll,oInit,"iScrollLoadGap","iLoadGap"),_fnMap(s.oScroll,oInit,"bScrollAutoCss","bAutoCss"),_fnMap(s,oInit,"asStripeClasses"),_fnMap(s,oInit,"asStripClasses","asStripeClasses"),_fnMap(s,oInit,"fnServerData"),_fnMap(s,oInit,"fnFormatNumber"),_fnMap(s,oInit,"sServerMethod"),_fnMap(s,oInit,"aaSorting"),_fnMap(s,oInit,"aaSortingFixed"),_fnMap(s,oInit,"aLengthMenu"),_fnMap(s,oInit,"sPaginationType"),_fnMap(s,oInit,"sAjaxSource"),_fnMap(s,oInit,"sAjaxDataProp"),_fnMap(s,oInit,"iCookieDuration"),_fnMap(s,oInit,"sCookiePrefix"),_fnMap(s,oInit,"sDom"),_fnMap(s,oInit,"bSortCellsTop"),_fnMap(s,oInit,"iTabIndex"),_fnMap(s,oInit,"oSearch","oPreviousSearch"),_fnMap(s,oInit,"aoSearchCols","aoPreSearchCols"),_fnMap(s,oInit,"iDisplayLength","_iDisplayLength"),_fnMap(s,oInit,"bJQueryUI","bJUI"),_fnMap(s,oInit,"fnCookieCallback"),_fnMap(s,oInit,"fnStateLoad"),_fnMap(s,oInit,"fnStateSave"),_fnMap(s.oLanguage,oInit,"fnInfoCallback"),_fnCallbackReg(s,"aoDrawCallback",oInit.fnDrawCallback,"user"),_fnCallbackReg(s,"aoServerParams",oInit.fnServerParams,"user"),_fnCallbackReg(s,"aoStateSaveParams",oInit.fnStateSaveParams,"user"),_fnCallbackReg(s,"aoStateLoadParams",oInit.fnStateLoadParams,"user"),_fnCallbackReg(s,"aoStateLoaded",oInit.fnStateLoaded,"user"),_fnCallbackReg(s,"aoRowCallback",oInit.fnRowCallback,"user"),_fnCallbackReg(s,"aoRowCreatedCallback",oInit.fnCreatedRow,"user"),_fnCallbackReg(s,"aoHeaderCallback",oInit.fnHeaderCallback,"user"),_fnCallbackReg(s,"aoFooterCallback",oInit.fnFooterCallback,"user"),_fnCallbackReg(s,"aoInitComplete",oInit.fnInitComplete,"user"),_fnCallbackReg(s,"aoPreDrawCallback",oInit.fnPreDrawCallback,"user"),s.oFeatures.bServerSide&&s.oFeatures.bSort&&s.oFeatures.bSortClasses?_fnCallbackReg(s,"aoDrawCallback",_fnSortingClasses,"server_side_sort_classes"):s.oFeatures.bDeferRender&&_fnCallbackReg(s,"aoDrawCallback",_fnSortingClasses,"defer_sort_classes"),oInit.bJQueryUI?($.extend(s.oClasses,DataTable.ext.oJUIClasses),oInit.sDom===DataTable.defaults.sDom&&"lfrtip"===DataTable.defaults.sDom&&(s.sDom='<"H"lfr>t<"F"ip>')):$.extend(s.oClasses,DataTable.ext.oStdClasses),$(this).addClass(s.oClasses.sTable),""===s.oScroll.sX&&""===s.oScroll.sY||(s.oScroll.iBarWidth=_fnScrollBarWidth()),s.iInitDisplayStart===undefined&&(s.iInitDisplayStart=oInit.iDisplayStart,s._iDisplayStart=oInit.iDisplayStart),oInit.bStateSave&&(s.oFeatures.bStateSave=!0,_fnLoadState(s,oInit),_fnCallbackReg(s,"aoDrawCallback",_fnSaveState,"state_save")),null!==oInit.iDeferLoading){s.bDeferLoading=!0;var l=$.isArray(oInit.iDeferLoading);s._iRecordsDisplay=l?oInit.iDeferLoading[0]:oInit.iDeferLoading,s._iRecordsTotal=l?oInit.iDeferLoading[1]:oInit.iDeferLoading}if(null!==oInit.aaData&&(a=!0),""!==oInit.oLanguage.sUrl?(s.oLanguage.sUrl=oInit.oLanguage.sUrl,$.getJSON(s.oLanguage.sUrl,null,function(t){_fnLanguageCompat(t),$.extend(!0,s.oLanguage,oInit.oLanguage,t),_fnInitialise(s)}),r=!0):$.extend(!0,s.oLanguage,oInit.oLanguage),null===oInit.asStripeClasses&&(s.asStripeClasses=[s.oClasses.sStripeOdd,s.oClasses.sStripeEven]),t=s.asStripeClasses.length,s.asDestroyStripes=[],t){var u=!1,c=$(this).children("tbody").children("tr:lt("+t+")");for(i=0;i<t;i++)c.hasClass(s.asStripeClasses[i])&&(u=!0,s.asDestroyStripes.push(s.asStripeClasses[i]));u&&c.removeClass(s.asStripeClasses.join(" "))}var d,h=[],f=this.getElementsByTagName("thead");if(0!==f.length&&(_fnDetectHeader(s.aoHeader,f[0]),h=_fnGetUniqueThs(s)),null===oInit.aoColumns)for(d=[],i=0,t=h.length;i<t;i++)d.push(null);else d=oInit.aoColumns;for(i=0,t=d.length;i<t;i++)oInit.saved_aoColumns!==undefined&&oInit.saved_aoColumns.length==t&&(null===d[i]&&(d[i]={}),d[i].bVisible=oInit.saved_aoColumns[i].bVisible),_fnAddColumn(s,h?h[i]:null);for(_fnApplyColumnDefs(s,oInit.aoColumnDefs,d,function(t,e){_fnColumnOptions(s,t,e)}),i=0,t=s.aaSorting.length;i<t;i++){s.aaSorting[i][0]>=s.aoColumns.length&&(s.aaSorting[i][0]=0);var p=s.aoColumns[s.aaSorting[i][0]];for(s.aaSorting[i][2]===undefined&&(s.aaSorting[i][2]=0),oInit.aaSorting===undefined&&s.saved_aaSorting===undefined&&(s.aaSorting[i][1]=p.asSorting[0]),e=0,n=p.asSorting.length;e<n;e++)if(s.aaSorting[i][1]==p.asSorting[e]){s.aaSorting[i][2]=e;break}}_fnSortingClasses(s),_fnBrowserDetect(s);var g=$(this).children("caption").each(function(){this._captionSide=$(this).css("caption-side")}),m=$(this).children("thead");0===m.length&&(m=[document.createElement("thead")],this.appendChild(m[0])),s.nTHead=m[0];var v=$(this).children("tbody");0===v.length&&(v=[document.createElement("tbody")],this.appendChild(v[0])),s.nTBody=v[0],s.nTBody.setAttribute("role","alert"),s.nTBody.setAttribute("aria-live","polite"),s.nTBody.setAttribute("aria-relevant","all");var _=$(this).children("tfoot");if(0===_.length&&g.length>0&&(""!==s.oScroll.sX||""!==s.oScroll.sY)&&(_=[document.createElement("tfoot")],this.appendChild(_[0])),_.length>0&&(s.nTFoot=_[0],_fnDetectHeader(s.aoFooter,s.nTFoot)),a)for(i=0;i<oInit.aaData.length;i++)_fnAddData(s,oInit.aaData[i]);else _fnGatherData(s);s.aiDisplay=s.aiDisplayMaster.slice(),s.bInitialised=!0,!1===r&&_fnInitialise(s)}else _fnLog(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName)}),_that=null,this};DataTable.fnVersionCheck=function(t){for(var e=function(t,e){for(;t.length<e;)t+="0";return t},n=DataTable.ext.sVersion.split("."),i=t.split("."),o="",r="",a=0,s=i.length;a<s;a++)o+=e(n[a],3),r+=e(i[a],3);return parseInt(o,10)>=parseInt(r,10)},DataTable.fnIsDataTable=function(t){for(var e=DataTable.settings,n=0;n<e.length;n++)if(e[n].nTable===t||e[n].nScrollHead===t||e[n].nScrollFoot===t)return!0;return!1},DataTable.fnTables=function(t){var e=[];return jQuery.each(DataTable.settings,function(n,i){(!t||!0===t&&$(i.nTable).is(":visible"))&&e.push(i.nTable)}),e},DataTable.version="1.9.4",DataTable.settings=[],DataTable.models={},DataTable.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:DataTable.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:DataTable.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}},DataTable.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},DataTable.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""},DataTable.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},DataTable.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){if(t<1e3)return t;for(var e=t+"",n=e.split(""),i="",o=e.length,r=0;r<o;r++)r%3==0&&0!==r&&(i=this.oLanguage.sInfoThousands+i),i=n[o-r-1]+i;return i},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(t,e,n,i){i.jqXHR=$.ajax({url:t,data:e,success:function(t){t.sError&&i.oApi._fnLog(i,0,t.sError),$(i.oInstance).trigger("xhr",[i,t]),n(t)},dataType:"json",cache:!1,type:i.sServerMethod,error:function(t,e,n){"parsererror"==e&&i.oApi._fnLog(i,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(oSettings){var sData=this.oApi._fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance),oData;try{oData="function"==typeof $.parseJSON?$.parseJSON(sData):eval("("+sData+")")}catch(t){oData=null}return oData},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(t,e){this.oApi._fnCreateCookie(t.sCookiePrefix+t.sInstance,this.oApi._fnJsonString(e),t.iCookieDuration,t.sCookiePrefix,t.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:$.extend({},DataTable.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"},DataTable.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},DataTable.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null},DataTable.ext=$.extend(!0,{},DataTable.models.ext),$.extend(DataTable.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""}),$.extend(DataTable.ext.oJUIClasses,DataTable.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}),$.extend(DataTable.ext.oPagination,{two_button:{fnInit:function(t,e,n){var i=t.oLanguage.oPaginate,o=(t.oClasses,function(e){t.oApi._fnPageChange(t,e.data.action)&&n(t)}),r=t.bJUI?'<a class="'+t.oClasses.sPagePrevDisabled+'" tabindex="'+t.iTabIndex+'" role="button"><span class="'+t.oClasses.sPageJUIPrev+'"></span></a><a class="'+t.oClasses.sPageNextDisabled+'" tabindex="'+t.iTabIndex+'" role="button"><span class="'+t.oClasses.sPageJUINext+'"></span></a>':'<a class="'+t.oClasses.sPagePrevDisabled+'" tabindex="'+t.iTabIndex+'" role="button">'+i.sPrevious+'</a><a class="'+t.oClasses.sPageNextDisabled+'" tabindex="'+t.iTabIndex+'" role="button">'+i.sNext+"</a>";$(e).append(r);var a=$("a",e),s=a[0],l=a[1];t.oApi._fnBindAction(s,{action:"previous"},o),t.oApi._fnBindAction(l,{action:"next"},o),t.aanFeatures.p||(e.id=t.sTableId+"_paginate",s.id=t.sTableId+"_previous",l.id=t.sTableId+"_next",s.setAttribute("aria-controls",t.sTableId),l.setAttribute("aria-controls",t.sTableId))},fnUpdate:function(t,e){if(t.aanFeatures.p)for(var n,i=t.oClasses,o=t.aanFeatures.p,r=0,a=o.length;r<a;r++)(n=o[r].firstChild)&&(n.className=0===t._iDisplayStart?i.sPagePrevDisabled:i.sPagePrevEnabled,(n=n.nextSibling).className=t.fnDisplayEnd()==t.fnRecordsDisplay()?i.sPageNextDisabled:i.sPageNextEnabled)}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(t,e,n){var i=t.oLanguage.oPaginate,o=t.oClasses,r=function(e){t.oApi._fnPageChange(t,e.data.action)&&n(t)};$(e).append('<a  tabindex="'+t.iTabIndex+'" class="'+o.sPageButton+" "+o.sPageFirst+'">'+i.sFirst+'</a><a  tabindex="'+t.iTabIndex+'" class="'+o.sPageButton+" "+o.sPagePrevious+'">'+i.sPrevious+'</a><span></span><a tabindex="'+t.iTabIndex+'" class="'+o.sPageButton+" "+o.sPageNext+'">'+i.sNext+'</a><a tabindex="'+t.iTabIndex+'" class="'+o.sPageButton+" "+o.sPageLast+'">'+i.sLast+"</a>");var a=$("a",e),s=a[0],l=a[1],u=a[2],c=a[3];t.oApi._fnBindAction(s,{action:"first"},r),t.oApi._fnBindAction(l,{action:"previous"},r),t.oApi._fnBindAction(u,{action:"next"},r),t.oApi._fnBindAction(c,{action:"last"},r),t.aanFeatures.p||(e.id=t.sTableId+"_paginate",s.id=t.sTableId+"_first",l.id=t.sTableId+"_previous",u.id=t.sTableId+"_next",c.id=t.sTableId+"_last")},fnUpdate:function(t,e){if(t.aanFeatures.p){var n,i,o,r,a,s,l,u=DataTable.ext.oPagination.iFullNumbersShowPages,c=Math.floor(u/2),d=Math.ceil(t.fnRecordsDisplay()/t._iDisplayLength),h=Math.ceil(t._iDisplayStart/t._iDisplayLength)+1,f="",p=t.oClasses,g=t.aanFeatures.p,m=function(i){t.oApi._fnBindAction(this,{page:i+n-1},function(n){t.oApi._fnPageChange(t,n.data.page),e(t),n.preventDefault()})};for(-1===t._iDisplayLength?(n=1,i=1,h=1):d<u?(n=1,i=d):h<=c?(n=1,i=u):h>=d-c?(n=d-u+1,i=d):(n=h-Math.ceil(u/2)+1,i=n+u-1),o=n;o<=i;o++)f+=h!==o?'<a tabindex="'+t.iTabIndex+'" class="'+p.sPageButton+'">'+t.fnFormatNumber(o)+"</a>":'<a tabindex="'+t.iTabIndex+'" class="'+p.sPageButtonActive+'">'+t.fnFormatNumber(o)+"</a>";for(o=0,r=g.length;o<r;o++)(l=g[o]).hasChildNodes()&&($("span:eq(0)",l).html(f).children("a").each(m),a=l.getElementsByTagName("a"),s=[a[0],a[1],a[a.length-2],a[a.length-1]],$(s).removeClass(p.sPageButton+" "+p.sPageButtonActive+" "+p.sPageButtonStaticDisabled),$([s[0],s[1]]).addClass(1==h?p.sPageButtonStaticDisabled:p.sPageButton),$([s[2],s[3]]).addClass(0===d||h===d||-1===t._iDisplayLength?p.sPageButtonStaticDisabled:p.sPageButton))}}}}),$.extend(DataTable.ext.oSort,{"string-pre":function(t){return"string"!=typeof t&&(t=null!==t&&t.toString?t.toString():""),t.toLowerCase()},"string-asc":function(t,e){return t<e?-1:t>e?1:0},"string-desc":function(t,e){return t<e?1:t>e?-1:0},"html-pre":function(t){return t.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(t,e){return t<e?-1:t>e?1:0},"html-desc":function(t,e){return t<e?1:t>e?-1:0},"date-pre":function(t){var e=Date.parse(t);return(isNaN(e)||""===e)&&(e=Date.parse("01/01/1970 00:00:00")),e},"date-asc":function(t,e){return t-e},"date-desc":function(t,e){return e-t},"numeric-pre":function(t){return"-"==t||""===t?0:1*t},"numeric-asc":function(t,e){return t-e},"numeric-desc":function(t,e){return e-t}}),$.extend(DataTable.ext.aTypes,[function(t){if("number"==typeof t)return"numeric";if("string"!=typeof t)return null;var e,n=!1;if(e=t.charAt(0),-1=="0123456789-".indexOf(e))return null;for(var i=1;i<t.length;i++){if(e=t.charAt(i),-1=="0123456789.".indexOf(e))return null;if("."==e){if(n)return null;n=!0}}return"numeric"},function(t){var e=Date.parse(t);return null!==e&&!isNaN(e)||"string"==typeof t&&0===t.length?"date":null},function(t){return"string"==typeof t&&-1!=t.indexOf("<")&&-1!=t.indexOf(">")?"html":null}]),$.fn.DataTable=DataTable,$.fn.dataTable=DataTable,$.fn.dataTableSettings=DataTable.settings,$.fn.dataTableExt=DataTable.ext})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}(window,document)}).call(this,__webpack_require__(0))},function(t,e,n){(function(t){var e,n,i,o,r,a,s,l,u,c,d,h,f,p,g,m,v,_,y,b,x,w,S;e=t,n=window,i="function",o="password",r="maxLength",a="type",s="",l=!0,h="watermarkClass",f="watermarkFocus",p="watermarkSubmit",g="watermarkMaxLength",m="watermarkPassword",v="watermarkText",_=/\r/g,y="input:data("+(d=c="watermark")+"),textarea:data("+d+")",b="input:text,input:password,input[type=search],input:not([type]),textarea",x=["Page_ClientValidate"],w=!1,S=(u="placeholder")in document.createElement("input"),e.watermark=e.watermark||{version:"3.1.3",runOnce:l,options:{className:c,useNative:l,hideBeforeUnload:l},hide:function(t){e(t).filter(y).each(function(){e.watermark._hide(e(this))})},_hide:function(t,e){var i=t[0],o=(i.value||s).replace(_,s),l=t.data(v)||s,u=t.data(g)||0,c=t.data(h);if(l.length&&o==l){if(i.value=s,t.data(m)&&"text"===(t.attr(a)||s)){var d=t.data(m)||[],f=t.parent()||[];d.length&&f.length&&(f[0].removeChild(t[0]),f[0].appendChild(d[0]),t=d)}u&&(t.attr(r,u),t.removeData(g)),e&&(t.attr("autocomplete","off"),n.setTimeout(function(){t.select()},1))}c&&t.removeClass(c)},show:function(t){e(t).filter(y).each(function(){e.watermark._show(e(this))})},_show:function(t){var n=t[0],i=(n.value||s).replace(_,s),u=t.data(v)||s,c=t.attr(a)||s,d=t.data(h);if(0!=i.length&&i!=u||t.data(f))e.watermark._hide(t);else{if(w=l,t.data(m)&&c===o){var p=t.data(m)||[],y=t.parent()||[];p.length&&y.length&&(y[0].removeChild(t[0]),y[0].appendChild(p[0]),(t=p).attr(r,u.length),n=t[0])}if("text"===c||"search"===c){var b=t.attr(r)||0;b>0&&u.length>b&&(t.data(g,b),t.attr(r,u.length))}d&&t.addClass(d),n.value=u}},hideAll:function(){w&&(e.watermark.hide(b),w=!1)},showAll:function(){e.watermark.show(b)}},e.fn.watermark=e.fn.watermark||function(t,c){var g="string";if(!this.length)return this;var y=!1,x=typeof t===g;return x&&(t=t.replace(_,s)),"object"==typeof c?(y=typeof c.className===g,c=e.extend({},e.watermark.options,c)):typeof c===g?(y=l,c=e.extend({},e.watermark.options,{className:c})):c=e.watermark.options,typeof c.useNative!==i&&(c.useNative=c.useNative?function(){return l}:function(){return!1}),this.each(function(){var i="dragleave",g="dragenter",w=this,T=e(w);if(T.is(b)){if(T.data(d))(x||y)&&(e.watermark._hide(T),x&&T.data(v,t),y&&T.data(h,c.className));else{if(S&&c.useNative.call(w,T)&&"TEXTAREA"!==(T.attr("tagName")||s))return void(x&&T.attr(u,t));if(T.data(v,x?t:s),T.data(h,c.className),T.data(d,1),(T.attr(a)||s)===o){var C=T.wrap("<span>").parent(),L=e(C.html().replace(/type=["']?password["']?/i,'type="text"'));L.data(v,T.data(v)),L.data(h,T.data(h)),L.data(d,1),L.attr(r,t.length),L.focus(function(){e.watermark._hide(L,l)}).bind(g,function(){e.watermark._hide(L)}).bind("dragend",function(){n.setTimeout(function(){L.blur()},1)}),T.blur(function(){e.watermark._show(T)}).bind(i,function(){e.watermark._show(T)}),L.data(m,T),T.data(m,L)}else T.focus(function(){T.data(f,1),e.watermark._hide(T,l)}).blur(function(){T.data(f,0),e.watermark._show(T)}).bind(g,function(){e.watermark._hide(T)}).bind(i,function(){e.watermark._show(T)}).bind("dragend",function(){n.setTimeout(function(){e.watermark._show(T)},1)}).bind("drop",function(t){var e=T[0],n=t.originalEvent.dataTransfer.getData("Text");(e.value||s).replace(_,s).replace(n,s)===T.data(v)&&(e.value=n),T.focus()});if(w.form){var A=w.form,D=e(A);D.data(p)||(D.submit(e.watermark.hideAll),A.submit?(D.data(p,A.submit),A.submit=function(t,n){return function(){var i=n.data(p);e.watermark.hideAll(),i.apply?i.apply(t,Array.prototype.slice.call(arguments)):i()}}(A,D)):(D.data(p,1),A.submit=function(t){return function(){e.watermark.hideAll(),delete t.submit,t.submit()}}(A)))}}e.watermark._show(T)}})},e.watermark.runOnce&&(e.watermark.runOnce=!1,e.extend(e.expr[":"],{data:function(t,n,i){return!!e.data(t,i[3])}}),function(t){e.fn.val=function(){var n=this;if(!n.length)return arguments.length?n:void 0;if(arguments.length)return t.apply(n,arguments),e.watermark.show(n),n;if(n.data(d)){var i=(n[0].value||s).replace(_,s);return i===(n.data(v)||s)?s:i}return t.apply(n,arguments)}}(e.fn.val),x.length&&e(function(){for(var t,o,r=x.length-1;r>=0;r--)typeof(o=n[t=x[r]])===i&&(n[t]=function(t){return function(){return e.watermark.hideAll(),t.apply(null,Array.prototype.slice.call(arguments))}}(o))}),e(n).bind("beforeunload",function(){e.watermark.options.hideBeforeUnload&&e.watermark.hideAll()}))}).call(this,n(0))},function(t,e,n){(function(t){var e,n;n="formNavigate",(e=t).fn.FormNavigate=function(t){"use strict";if("status"===t)return void 0===this.data(n)?"not initialized":this.data(n)?"clean":"dirty";if("clean"===t)return this.each(function(){e(this).data(n,!0)});if("dirty"===t)return this.each(function(){e(this).data(n,!1)});var i={customEvents:null,message:"Your changes have not been saved.",cleanOnSubmit:!0};return"object"==typeof t&&e.extend(i,t),this.each(function(){var t=e(this);t.data(n,!0),e(window).bind("beforeunload",function(e){if(!t.data(n))return i.message;e.cancelBubble=!0});var o=function(e){t.data(n,!1)};t.one("keyup change",o),i.customEvents&&t.one(i.customEvents,o),i.cleanOnSubmit&&t.find(' input[type="submit"], button[type="submit"], .submitButton').click(function(){t.data(n,!0)})}),this},e.fn.FormNavigate.DATA_FIELD=n}).call(this,n(0))},function(t,e,n){(function(t){!function(t){var e,n,i=0,o=32;function r(o){return(e=t(o.data.el)).blur(),i=l(o).y,n=e.height()-i,e.css("opacity",.25),t(document).mousemove(a).mouseup(s),!1}function a(t){var r=l(t).y,a=n+r;return i>=r&&(a-=5),i=r,a=Math.max(o,a),e.height(a+"px"),a<o&&s(t),!1}function s(o){t(document).unbind("mousemove",a).unbind("mouseup",s),e.css("opacity",1),e.focus(),e=null,n=null,i=0}function l(t){return{x:t.clientX+document.documentElement.scrollLeft,y:t.clientY+document.documentElement.scrollTop}}t.fn.TextAreaResizer=function(){return this.each(function(){e=t(this).addClass("processed"),n=null,t(this).wrap('<div class="resizable-textarea"><span></span></div>').parent().append(t('<div class="grippie"></div>').bind("mousedown",{el:this},r));var i=t("div.grippie",t(this).parent())[0];i.style.marginRight=i.offsetWidth-t(this)[0].offsetWidth+"px"})}}(t)}).call(this,n(0))},function(t,e){
/*!
 * @copyright Copyright (c) 2016 IcoMoon.io
 * @license   Licensed under MIT license
 *            See https://github.com/Keyamoon/svgxuse
 * @version   1.1.23
 */
!function(){"use strict";if(window&&window.addEventListener){var t,e,n=Object.create(null),i=function(){clearTimeout(e),e=setTimeout(t,100)},o=function(){},r=function(){var t;window.addEventListener("resize",i,!1),window.addEventListener("orientationchange",i,!1),window.MutationObserver?((t=new MutationObserver(i)).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),o=function(){try{t.disconnect(),window.removeEventListener("resize",i,!1),window.removeEventListener("orientationchange",i,!1)}catch(t){}}):(document.documentElement.addEventListener("DOMSubtreeModified",i,!1),o=function(){document.documentElement.removeEventListener("DOMSubtreeModified",i,!1),window.removeEventListener("resize",i,!1),window.removeEventListener("orientationchange",i,!1)})},a=function(t){function e(t){var e;return void 0!==t.protocol?e=t:(e=document.createElement("a")).href=t,e.protocol.replace(/:/g,"")+e.host}var n,i,o;return window.XMLHttpRequest&&(n=new XMLHttpRequest,i=e(location),o=e(t),n=void 0===n.withCredentials&&""!==o&&o!==i?XDomainRequest||void 0:XMLHttpRequest),n},s="http://www.w3.org/1999/xlink";t=function(){var t,e,i,l,u,c,d,h,f,p,g=0;function m(){0===(g-=1)&&(o(),r())}function v(t){return function(){!0!==n[t.base]&&t.useEl.setAttributeNS(s,"xlink:href","#"+t.hash)}}function _(t){return function(){var e,n=document.body,i=document.createElement("x");t.onload=null,i.innerHTML=t.responseText,(e=i.getElementsByTagName("svg")[0])&&(e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.width=0,e.style.height=0,e.style.overflow="hidden",n.insertBefore(e,n.firstChild)),m()}}function y(t){return function(){t.onerror=null,t.ontimeout=null,m()}}for(o(),f=document.getElementsByTagName("use"),u=0;u<f.length;u+=1){try{e=f[u].getBoundingClientRect()}catch(t){e=!1}t=(h=(l=f[u].getAttributeNS(s,"href"))&&l.split?l.split("#"):["",""])[0],i=h[1],c=e&&0===e.left&&0===e.right&&0===e.top&&0===e.bottom,e&&0===e.width&&0===e.height&&!c?t.length&&(!0!==(p=n[t])&&setTimeout(v({useEl:f[u],base:t,hash:i}),0),void 0===p&&void 0!==(d=a(t))&&(p=new d,n[t]=p,p.onload=_(p),p.onerror=y(p),p.ontimeout=y(p),p.open("GET",t),p.send(),g+=1)):c?t.length&&n[t]&&v({useEl:f[u],base:t,hash:i})():void 0===n[t]?n[t]=!0:n[t].onload&&(n[t].abort(),delete n[t].onload,n[t]=!0)}f="",g+=1,m()},window.addEventListener("load",function n(){window.removeEventListener("load",n,!1),e=setTimeout(t,0)},!1)}}()},function(t,e,n){(function(t){t.cookie=function(e,n,i){if(void 0===n){var o=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),a=0;a<r.length;a++){var s=t.trim(r[a]);if(s.substring(0,e.length+1)==e+"="){o=decodeURIComponent(s.substring(e.length+1));break}}return o}i=i||{},null===n&&(n="",i.expires=-1);var l,u="";i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(l=new Date).setTime(l.getTime()+24*i.expires*60*60*1e3):l=i.expires,u="; expires="+l.toUTCString());var c=i.path?"; path="+i.path:"",d=i.domain?"; domain="+i.domain:"",h=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(n),u,c,d,h].join("")}}).call(this,n(0))},function(t,e,n){(function(t,e){!function(n,i){"use strict";var o=i.TDAR||{};i.TDAR=o,void 0==o.vuejs&&(o.vuejs={}),o.namespace=function(){var t,e,n,i=arguments,r=null;for(t=0;t<i.length;t+=1)for(n=(""+i[t]).split("."),r=o,e="TDAR"==n[0]?1:0;e<n.length;e+=1)r[n[e]]=r[n[e]]||{},r=r[n[e]];return r},o.configureJiraCollector=function(t,e){e&&(t.ATL_JQ_PAGE_PROPS||(t.ATL_JQ_PAGE_PROPS={}),t.ATL_JQ_PAGE_PROPS&&(t.ATL_JQ_PAGE_PROPS.fieldValues={summary:"bug report from "+e+"."}))},o.loadScript=function(n){var i,o,r=n,a=document.getElementsByTagName("head")[0],s=document.createElement("script");return"function"==typeof t&&(o=(i=e.Deferred()).promise(),s.onload=function(){i.resolve()},s.onerror=function(t){i.rejectWith(t)}),s.src=r,a.appendChild(s),o},o.loadDocumentData=function(){var t={};return e('[type="application/json"][id]').toArray().forEach(function(e){var n=e.id,i=JSON.parse(e.innerHTML);t[n]=i}),t},o.uri=function(t){i.location.origin||(i.location.origin=i.location.protocol+"//"+i.location.hostname+(i.location.port?":"+i.location.port:""));var e=i.location.origin,n=document.getElementsByTagName("base");n.length&&void 0!=n[0].href&&(e=n[0].href);var o=e;return o.lastIndexOf("/")!=o.length-1&&(o+="/"),o.lastIndexOf("/")==o.length-1&&void 0!=t&&0==t.indexOf("/")&&(o=o.substring(0,o.lastIndexOf("/"))),t&&(o+=t),o},o.assetsUri=function(t){i.location.origin||(i.location.origin=i.location.protocol+"//"+i.location.hostname+(i.location.port?":"+i.location.port:""));var e=i.location.origin,n=document.getElementsByTagName("base");n.length&&(e=n[0].assetsHref);var r=e;return void 0==e?o.uri(t):(r.lastIndexOf("/")!=r.length-1&&(r+="/"),r.lastIndexOf("/")==r.length-1&&void 0!=t&&0==t.indexOf("/")&&(r=r.substring(0,r.lastIndexOf("/"))),t&&(r+=t),r)},o.windowLocation=function(t){i.location=t},o.main=function(){for(var t in o)if("object"==typeof o[t]&&"function"==typeof o[t].main){var e=o[t];n.log("executing main in package:"+t),e.main()}},i.console||(n={});n.log=n.log||function(){},n.info=n.info||n.log,n.error=n.error||n.log,n.warn=n.warn||n.log,n.debug=n.debug||n.log,n.table=n.table||n.log}(console,window)}).call(this,n(0),n(0))}]);